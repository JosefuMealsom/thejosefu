var C0=(r,e)=>()=>(e||r((e={exports:{}}).exports,e),e.exports);var XA=C0((ro,Bl)=>{(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function t(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(i){if(i.ep)return;i.ep=!0;const a=t(i);fetch(i.href,a)}})();/*!
* @license PreloadJS
* Visit http://createjs.com/ for documentation, updates and examples.
*
* Copyright (c) 2011-2015 gskinner.com, inc.
*
* Distributed under the terms of the MIT license.
* http://www.opensource.org/licenses/mit-license.html
*
* This notice shall be included in all copies or substantial portions of the Software.
*/globalThis.createjs=globalThis.createjs||{},function(){var r=createjs.PreloadJS=createjs.PreloadJS||{};r.version="1.0.0",r.buildDate="Thu, 14 Sep 2017 19:47:47 GMT"}(),globalThis.createjs=globalThis.createjs||{},createjs.extend=function(r,e){function t(){this.constructor=r}return t.prototype=e.prototype,r.prototype=new t},globalThis.createjs=globalThis.createjs||{},createjs.promote=function(r,e){var t=r.prototype,n=Object.getPrototypeOf&&Object.getPrototypeOf(t)||t.__proto__;if(n){t[(e+="_")+"constructor"]=n.constructor;for(var i in n)t.hasOwnProperty(i)&&typeof n[i]=="function"&&(t[e+i]=n[i])}return r},globalThis.createjs=globalThis.createjs||{},createjs.deprecate=function(r,e){return function(){var t="Deprecated property or method '"+e+"'. See docs for info.";return console&&(console.warn?console.warn(t):console.log(t)),r&&r.apply(this,arguments)}},globalThis.createjs=globalThis.createjs||{},function(){createjs.proxy=function(r,e){var t=Array.prototype.slice.call(arguments,2);return function(){return r.apply(e,Array.prototype.slice.call(arguments,0).concat(t))}}}(),globalThis.createjs=globalThis.createjs||{},createjs.indexOf=function(r,e){for(var t=0,n=r.length;n>t;t++)if(e===r[t])return t;return-1},globalThis.createjs=globalThis.createjs||{},function(){function r(t,n,i){this.type=t,this.target=null,this.currentTarget=null,this.eventPhase=0,this.bubbles=!!n,this.cancelable=!!i,this.timeStamp=new Date().getTime(),this.defaultPrevented=!1,this.propagationStopped=!1,this.immediatePropagationStopped=!1,this.removed=!1}var e=r.prototype;e.preventDefault=function(){this.defaultPrevented=this.cancelable&&!0},e.stopPropagation=function(){this.propagationStopped=!0},e.stopImmediatePropagation=function(){this.immediatePropagationStopped=this.propagationStopped=!0},e.remove=function(){this.removed=!0},e.clone=function(){return new r(this.type,this.bubbles,this.cancelable)},e.set=function(t){for(var n in t)this[n]=t[n];return this},e.toString=function(){return"[Event (type="+this.type+")]"},createjs.Event=r}(),globalThis.createjs=globalThis.createjs||{},function(){function r(t,n,i){this.Event_constructor("error"),this.title=t,this.message=n,this.data=i}var e=createjs.extend(r,createjs.Event);e.clone=function(){return new createjs.ErrorEvent(this.title,this.message,this.data)},createjs.ErrorEvent=createjs.promote(r,"Event")}(),globalThis.createjs=globalThis.createjs||{},function(){function r(){this._listeners=null,this._captureListeners=null}var e=r.prototype;r.initialize=function(t){t.addEventListener=e.addEventListener,t.on=e.on,t.removeEventListener=t.off=e.removeEventListener,t.removeAllEventListeners=e.removeAllEventListeners,t.hasEventListener=e.hasEventListener,t.dispatchEvent=e.dispatchEvent,t._dispatchEvent=e._dispatchEvent,t.willTrigger=e.willTrigger},e.addEventListener=function(t,n,i){var a;a=i?this._captureListeners=this._captureListeners||{}:this._listeners=this._listeners||{};var o=a[t];return o&&this.removeEventListener(t,n,i),o=a[t],o?o.push(n):a[t]=[n],n},e.on=function(t,n,i,a,o,l){return n.handleEvent&&(i=i||n,n=n.handleEvent),i=i||this,this.addEventListener(t,function(c){n.call(i,c,o),a&&c.remove()},l)},e.removeEventListener=function(t,n,i){var a=i?this._captureListeners:this._listeners;if(a){var o=a[t];if(o){for(var l=0,c=o.length;c>l;l++)if(o[l]==n){c==1?delete a[t]:o.splice(l,1);break}}}},e.off=e.removeEventListener,e.removeAllEventListeners=function(t){t?(this._listeners&&delete this._listeners[t],this._captureListeners&&delete this._captureListeners[t]):this._listeners=this._captureListeners=null},e.dispatchEvent=function(t,n,i){if(typeof t=="string"){var a=this._listeners;if(!(n||a&&a[t]))return!0;t=new createjs.Event(t,n,i)}else t.target&&t.clone&&(t=t.clone());try{t.target=this}catch{}if(t.bubbles&&this.parent){for(var o=this,l=[o];o.parent;)l.push(o=o.parent);var c,h=l.length;for(c=h-1;c>=0&&!t.propagationStopped;c--)l[c]._dispatchEvent(t,1+(c==0));for(c=1;h>c&&!t.propagationStopped;c++)l[c]._dispatchEvent(t,3)}else this._dispatchEvent(t,2);return!t.defaultPrevented},e.hasEventListener=function(t){var n=this._listeners,i=this._captureListeners;return!!(n&&n[t]||i&&i[t])},e.willTrigger=function(t){for(var n=this;n;){if(n.hasEventListener(t))return!0;n=n.parent}return!1},e.toString=function(){return"[EventDispatcher]"},e._dispatchEvent=function(t,n){var i,a,o=2>=n?this._captureListeners:this._listeners;if(t&&o&&(a=o[t.type])&&(i=a.length)){try{t.currentTarget=this}catch{}try{t.eventPhase=0|n}catch{}t.removed=!1,a=a.slice();for(var l=0;i>l&&!t.immediatePropagationStopped;l++){var c=a[l];c.handleEvent?c.handleEvent(t):c(t),t.removed&&(this.off(t.type,c,n==1),t.removed=!1)}}n===2&&this._dispatchEvent(t,2.1)},createjs.EventDispatcher=r}(),globalThis.createjs=globalThis.createjs||{},function(){function r(t,n){this.Event_constructor("progress"),this.loaded=t,this.total=n??1,this.progress=n==0?0:this.loaded/this.total}var e=createjs.extend(r,createjs.Event);e.clone=function(){return new createjs.ProgressEvent(this.loaded,this.total)},createjs.ProgressEvent=createjs.promote(r,"Event")}(),(function(){function r(f,m){function g(E){if(g[E]!==L)return g[E];var B;if(E=="bug-string-char-index")B="a"[0]!="a";else if(E=="json")B=g("json-stringify")&&g("json-parse");else{var H,J='{"a":[1,true,false,null,"\\u0000\\b\\n\\f\\r\\t"]}';if(E=="json-stringify"){var Q=m.stringify,z=typeof Q=="function"&&oe;if(z){(H=function(){return 1}).toJSON=H;try{z=Q(0)==="0"&&Q(new _)==="0"&&Q(new M)=='""'&&Q(X)===L&&Q(L)===L&&Q()===L&&Q(H)==="1"&&Q([H])=="[1]"&&Q([L])=="[null]"&&Q(null)=="null"&&Q([L,X,null])=="[null,null,null]"&&Q({a:[H,!0,!1,null,`\0\b
\f\r	`]})==J&&Q(null,H)==="1"&&Q([1,2],null,1)==`[
 1,
 2
]`&&Q(new C(-864e13))=='"-271821-04-20T00:00:00.000Z"'&&Q(new C(864e13))=='"+275760-09-13T00:00:00.000Z"'&&Q(new C(-621987552e5))=='"-000001-01-01T00:00:00.000Z"'&&Q(new C(-1))=='"1969-12-31T23:59:59.999Z"'}catch{z=!1}}B=z}if(E=="json-parse"){var D=m.parse;if(typeof D=="function")try{if(D("0")===0&&!D(!1)){H=D(J);var Z=H.a.length==5&&H.a[0]===1;if(Z){try{Z=!D('"	"')}catch{}if(Z)try{Z=D("01")!==1}catch{}if(Z)try{Z=D("1.")!==1}catch{}}}}catch{Z=!1}B=Z}}return g[E]=!!B}f||(f=i.Object()),m||(m=i.Object());var _=f.Number||i.Number,M=f.String||i.String,x=f.Object||i.Object,C=f.Date||i.Date,y=f.SyntaxError||i.SyntaxError,b=f.TypeError||i.TypeError,O=f.Math||i.Math,P=f.JSON||i.JSON;typeof P=="object"&&P&&(m.stringify=P.stringify,m.parse=P.parse);var F,p,L,W=x.prototype,X=W.toString,oe=new C(-0xc782b5b800cec);try{oe=oe.getUTCFullYear()==-109252&&oe.getUTCMonth()===0&&oe.getUTCDate()===1&&oe.getUTCHours()==10&&oe.getUTCMinutes()==37&&oe.getUTCSeconds()==6&&oe.getUTCMilliseconds()==708}catch{}if(!g("json")){var q="[object Function]",ye="[object Date]",ie="[object Number]",ne="[object String]",re="[object Array]",ae="[object Boolean]",se=g("bug-string-char-index");if(!oe)var be=O.floor,Oe=[0,31,59,90,120,151,181,212,243,273,304,334],de=function(E,B){return Oe[B]+365*(E-1970)+be((E-1969+(B=+(B>1)))/4)-be((E-1901+B)/100)+be((E-1601+B)/400)};if((F=W.hasOwnProperty)||(F=function(E){var B,H={};return(H.__proto__=null,H.__proto__={toString:1},H).toString!=X?F=function(J){var Q=this.__proto__,z=J in(this.__proto__=null,this);return this.__proto__=Q,z}:(B=H.constructor,F=function(J){var Q=(this.constructor||B).prototype;return J in this&&!(J in Q&&this[J]===Q[J])}),H=null,F.call(this,E)}),p=function(E,B){var H,J,Q,z=0;(H=function(){this.valueOf=0}).prototype.valueOf=0,J=new H;for(Q in J)F.call(J,Q)&&z++;return H=J=null,z?p=z==2?function(D,Z){var te,xe={},Le=X.call(D)==q;for(te in D)Le&&te=="prototype"||F.call(xe,te)||!(xe[te]=1)||!F.call(D,te)||Z(te)}:function(D,Z){var te,xe,Le=X.call(D)==q;for(te in D)Le&&te=="prototype"||!F.call(D,te)||(xe=te==="constructor")||Z(te);(xe||F.call(D,te="constructor"))&&Z(te)}:(J=["valueOf","toString","toLocaleString","propertyIsEnumerable","isPrototypeOf","hasOwnProperty","constructor"],p=function(D,Z){var te,xe,Le=X.call(D)==q,Y=!Le&&typeof D.constructor!="function"&&t[typeof D.hasOwnProperty]&&D.hasOwnProperty||F;for(te in D)Le&&te=="prototype"||!Y.call(D,te)||Z(te);for(xe=J.length;te=J[--xe];Y.call(D,te)&&Z(te));}),p(E,B)},!g("json-stringify")){var fe={92:"\\\\",34:'\\"',8:"\\b",12:"\\f",10:"\\n",13:"\\r",9:"\\t"},ze="000000",De=function(E,B){return(ze+(B||0)).slice(-E)},ke="\\u00",rt=function(E){for(var B='"',H=0,J=E.length,Q=!se||J>10,z=Q&&(se?E.split(""):E);J>H;H++){var D=E.charCodeAt(H);switch(D){case 8:case 9:case 10:case 12:case 13:case 34:case 92:B+=fe[D];break;default:if(32>D){B+=ke+De(2,D.toString(16));break}B+=Q?z[H]:E.charAt(H)}}return B+'"'},Ee=function(E,B,H,J,Q,z,D){var Z,te,xe,Le,Y,Ne,ge,Re,Ie,Ue,Be,it,Mt,Qe,St,sn;try{Z=B[E]}catch{}if(typeof Z=="object"&&Z)if(te=X.call(Z),te!=ye||F.call(Z,"toJSON"))typeof Z.toJSON=="function"&&(te!=ie&&te!=ne&&te!=re||F.call(Z,"toJSON"))&&(Z=Z.toJSON(E));else if(Z>-1/0&&1/0>Z){if(de){for(Y=be(Z/864e5),xe=be(Y/365.2425)+1970-1;de(xe+1,0)<=Y;xe++);for(Le=be((Y-de(xe,0))/30.42);de(xe,Le+1)<=Y;Le++);Y=1+Y-de(xe,Le),Ne=(Z%864e5+864e5)%864e5,ge=be(Ne/36e5)%24,Re=be(Ne/6e4)%60,Ie=be(Ne/1e3)%60,Ue=Ne%1e3}else xe=Z.getUTCFullYear(),Le=Z.getUTCMonth(),Y=Z.getUTCDate(),ge=Z.getUTCHours(),Re=Z.getUTCMinutes(),Ie=Z.getUTCSeconds(),Ue=Z.getUTCMilliseconds();Z=(0>=xe||xe>=1e4?(0>xe?"-":"+")+De(6,0>xe?-xe:xe):De(4,xe))+"-"+De(2,Le+1)+"-"+De(2,Y)+"T"+De(2,ge)+":"+De(2,Re)+":"+De(2,Ie)+"."+De(3,Ue)+"Z"}else Z=null;if(H&&(Z=H.call(B,E,Z)),Z===null)return"null";if(te=X.call(Z),te==ae)return""+Z;if(te==ie)return Z>-1/0&&1/0>Z?""+Z:"null";if(te==ne)return rt(""+Z);if(typeof Z=="object"){for(Qe=D.length;Qe--;)if(D[Qe]===Z)throw b();if(D.push(Z),Be=[],St=z,z+=Q,te==re){for(Mt=0,Qe=Z.length;Qe>Mt;Mt++)it=Ee(Mt,Z,H,J,Q,z,D),Be.push(it===L?"null":it);sn=Be.length?Q?`[
`+z+Be.join(`,
`+z)+`
`+St+"]":"["+Be.join(",")+"]":"[]"}else p(J||Z,function(jr){var ur=Ee(jr,Z,H,J,Q,z,D);ur!==L&&Be.push(rt(jr)+":"+(Q?" ":"")+ur)}),sn=Be.length?Q?`{
`+z+Be.join(`,
`+z)+`
`+St+"}":"{"+Be.join(",")+"}":"{}";return D.pop(),sn}};m.stringify=function(E,B,H){var J,Q,z,D;if(t[typeof B]&&B){if((D=X.call(B))==q)Q=B;else if(D==re){z={};for(var Z,te=0,xe=B.length;xe>te;Z=B[te++],D=X.call(Z),(D==ne||D==ie)&&(z[Z]=1));}}if(H)if((D=X.call(H))==ie){if((H-=H%1)>0)for(J="",H>10&&(H=10);J.length<H;J+=" ");}else D==ne&&(J=H.length<=10?H:H.slice(0,10));return Ee("",(Z={},Z[""]=E,Z),Q,z,J,"",[])}}if(!g("json-parse")){var Te,We,Ge=M.fromCharCode,Xe={92:"\\",34:'"',47:"/",98:"\b",116:"	",110:`
`,102:"\f",114:"\r"},Ye=function(){throw Te=We=null,y()},pe=function(){for(var E,B,H,J,Q,z=We,D=z.length;D>Te;)switch(Q=z.charCodeAt(Te)){case 9:case 10:case 13:case 32:Te++;break;case 123:case 125:case 91:case 93:case 58:case 44:return E=se?z.charAt(Te):z[Te],Te++,E;case 34:for(E="@",Te++;D>Te;)if(Q=z.charCodeAt(Te),32>Q)Ye();else if(Q==92)switch(Q=z.charCodeAt(++Te)){case 92:case 34:case 47:case 98:case 116:case 110:case 102:case 114:E+=Xe[Q],Te++;break;case 117:for(B=++Te,H=Te+4;H>Te;Te++)Q=z.charCodeAt(Te),Q>=48&&57>=Q||Q>=97&&102>=Q||Q>=65&&70>=Q||Ye();E+=Ge("0x"+z.slice(B,Te));break;default:Ye()}else{if(Q==34)break;for(Q=z.charCodeAt(Te),B=Te;Q>=32&&Q!=92&&Q!=34;)Q=z.charCodeAt(++Te);E+=z.slice(B,Te)}if(z.charCodeAt(Te)==34)return Te++,E;Ye();default:if(B=Te,Q==45&&(J=!0,Q=z.charCodeAt(++Te)),Q>=48&&57>=Q){for(Q==48&&(Q=z.charCodeAt(Te+1),Q>=48&&57>=Q)&&Ye(),J=!1;D>Te&&(Q=z.charCodeAt(Te),Q>=48&&57>=Q);Te++);if(z.charCodeAt(Te)==46){for(H=++Te;D>H&&(Q=z.charCodeAt(H),Q>=48&&57>=Q);H++);H==Te&&Ye(),Te=H}if(Q=z.charCodeAt(Te),Q==101||Q==69){for(Q=z.charCodeAt(++Te),(Q==43||Q==45)&&Te++,H=Te;D>H&&(Q=z.charCodeAt(H),Q>=48&&57>=Q);H++);H==Te&&Ye(),Te=H}return+z.slice(B,Te)}if(J&&Ye(),z.slice(Te,Te+4)=="true")return Te+=4,!0;if(z.slice(Te,Te+5)=="false")return Te+=5,!1;if(z.slice(Te,Te+4)=="null")return Te+=4,null;Ye()}return"$"},Se=function(E){var B,H;if(E=="$"&&Ye(),typeof E=="string"){if((se?E.charAt(0):E[0])=="@")return E.slice(1);if(E=="["){for(B=[];E=pe(),E!="]";H||(H=!0))H&&(E==","?(E=pe(),E=="]"&&Ye()):Ye()),E==","&&Ye(),B.push(Se(E));return B}if(E=="{"){for(B={};E=pe(),E!="}";H||(H=!0))H&&(E==","?(E=pe(),E=="}"&&Ye()):Ye()),(E==","||typeof E!="string"||(se?E.charAt(0):E[0])!="@"||pe()!=":")&&Ye(),B[E.slice(1)]=Se(pe());return B}Ye()}return E},S=function(E,B,H){var J=R(E,B,H);J===L?delete E[B]:E[B]=J},R=function(E,B,H){var J,Q=E[B];if(typeof Q=="object"&&Q)if(X.call(Q)==re)for(J=Q.length;J--;)S(Q,J,H);else p(Q,function(z){S(Q,z,H)});return H.call(E,B,Q)};m.parse=function(E,B){var H,J;return Te=0,We=""+E,H=Se(pe()),pe()!="$"&&Ye(),Te=We=null,B&&X.call(B)==q?R((J={},J[""]=H,J),"",B):H}}}return m.runInContext=r,m}var e=typeof define=="function"&&define.amd,t={function:!0,object:!0},n=t[typeof ro]&&ro&&!ro.nodeType&&ro,i=t[typeof window]&&window||this,a=n&&t[typeof Bl]&&Bl&&!Bl.nodeType&&typeof global=="object"&&global;if(!a||a.global!==a&&a.window!==a&&a.self!==a||(i=a),n&&!e)r(i,n);else{var o=i.JSON,l=i.JSON3,c=!1,h=r(i,i.JSON3={noConflict:function(){return c||(c=!0,i.JSON=o,i.JSON3=l,o=l=null),h}});i.JSON={parse:h.parse,stringify:h.stringify}}e&&define(function(){return h})}).call(globalThis),function(){var r={};r.a=function(){return r.el("a")},r.svg=function(){return r.el("svg")},r.object=function(){return r.el("object")},r.image=function(){return r.el("image")},r.img=function(){return r.el("img")},r.style=function(){return r.el("style")},r.link=function(){return r.el("link")},r.script=function(){return r.el("script")},r.audio=function(){return r.el("audio")},r.video=function(){return r.el("video")},r.text=function(e){return document.createTextNode(e)},r.el=function(e){return document.createElement(e)},createjs.Elements=r}(),function(){var r={};r.ABSOLUTE_PATT=/^(?:\w+:)?\/{2}/i,r.RELATIVE_PATT=/^[.\/]*?\//i,r.EXTENSION_PATT=/\/?[^\/]+\.(\w{1,5})$/i,r.parseURI=function(e){var t={absolute:!1,relative:!1,protocol:null,hostname:null,port:null,pathname:null,search:null,hash:null,host:null};if(e==null)return t;var n=createjs.Elements.a();n.href=e;for(var i in t)i in n&&(t[i]=n[i]);var a=e.indexOf("?");a>-1&&(e=e.substr(0,a));var o;return r.ABSOLUTE_PATT.test(e)?t.absolute=!0:r.RELATIVE_PATT.test(e)&&(t.relative=!0),(o=e.match(r.EXTENSION_PATT))&&(t.extension=o[1].toLowerCase()),t},r.formatQueryString=function(e,t){if(e==null)throw new Error("You must specify data.");var n=[];for(var i in e)n.push(i+"="+escape(e[i]));return t&&(n=n.concat(t)),n.join("&")},r.buildURI=function(e,t){if(t==null)return e;var n=[],i=e.indexOf("?");if(i!=-1){var a=e.slice(i+1);n=n.concat(a.split("&"))}return i!=-1?e.slice(0,i)+"?"+this.formatQueryString(t,n):e+"?"+this.formatQueryString(t,n)},r.isCrossDomain=function(e){var t=createjs.Elements.a();t.href=e.src;var n=createjs.Elements.a();n.href=location.href;var i=t.hostname!=""&&(t.port!=n.port||t.protocol!=n.protocol||t.hostname!=n.hostname);return i},r.isLocal=function(e){var t=createjs.Elements.a();return t.href=e.src,t.hostname==""&&t.protocol=="file:"},createjs.URLUtils=r}(),function(){var r={container:null};r.appendToHead=function(e){r.getHead().appendChild(e)},r.appendToBody=function(e){if(r.container==null){r.container=document.createElement("div"),r.container.id="preloadjs-container";var t=r.container.style;t.visibility="hidden",t.position="absolute",t.width=r.container.style.height="10px",t.overflow="hidden",t.transform=t.msTransform=t.webkitTransform=t.oTransform="translate(-10px, -10px)",r.getBody().appendChild(r.container)}r.container.appendChild(e)},r.getHead=function(){return document.head||document.getElementsByTagName("head")[0]},r.getBody=function(){return document.body||document.getElementsByTagName("body")[0]},r.removeChild=function(e){e.parent&&e.parent.removeChild(e)},r.isImageTag=function(e){return e instanceof HTMLImageElement},r.isAudioTag=function(e){return window.HTMLAudioElement?e instanceof HTMLAudioElement:!1},r.isVideoTag=function(e){return window.HTMLVideoElement?e instanceof HTMLVideoElement:!1},createjs.DomUtils=r}(),function(){var r={};r.parseXML=function(e){var t=null;try{if(window.DOMParser){var n=new DOMParser;t=n.parseFromString(e,"text/xml")}}catch{}if(!t)try{t=new ActiveXObject("Microsoft.XMLDOM"),t.async=!1,t.loadXML(e)}catch{t=null}return t},r.parseJSON=function(e){if(e==null)return null;try{return JSON.parse(e)}catch(t){throw t}},createjs.DataUtils=r}(),globalThis.createjs=globalThis.createjs||{},function(){var r={};r.BINARY="binary",r.CSS="css",r.FONT="font",r.FONTCSS="fontcss",r.IMAGE="image",r.JAVASCRIPT="javascript",r.JSON="json",r.JSONP="jsonp",r.MANIFEST="manifest",r.SOUND="sound",r.VIDEO="video",r.SPRITESHEET="spritesheet",r.SVG="svg",r.TEXT="text",r.XML="xml",createjs.Types=r}(),globalThis.createjs=globalThis.createjs||{},function(){var r={};r.POST="POST",r.GET="GET",createjs.Methods=r}(),globalThis.createjs=globalThis.createjs||{},function(){function r(){this.src=null,this.type=null,this.id=null,this.maintainOrder=!1,this.callback=null,this.data=null,this.method=createjs.Methods.GET,this.values=null,this.headers=null,this.withCredentials=!1,this.mimeType=null,this.crossOrigin=null,this.loadTimeout=t.LOAD_TIMEOUT_DEFAULT}var e=r.prototype={},t=r;t.LOAD_TIMEOUT_DEFAULT=8e3,t.create=function(n){if(typeof n=="string"){var i=new r;return i.src=n,i}if(n instanceof t)return n;if(n instanceof Object&&n.src)return n.loadTimeout==null&&(n.loadTimeout=t.LOAD_TIMEOUT_DEFAULT),n;throw new Error("Type not recognized.")},e.set=function(n){for(var i in n)this[i]=n[i];return this},createjs.LoadItem=t}(),function(){var r={};r.isBinary=function(e){switch(e){case createjs.Types.IMAGE:case createjs.Types.BINARY:return!0;default:return!1}},r.isText=function(e){switch(e){case createjs.Types.TEXT:case createjs.Types.JSON:case createjs.Types.MANIFEST:case createjs.Types.XML:case createjs.Types.CSS:case createjs.Types.SVG:case createjs.Types.JAVASCRIPT:case createjs.Types.SPRITESHEET:return!0;default:return!1}},r.getTypeByExtension=function(e){if(e==null)return createjs.Types.TEXT;switch(e.toLowerCase()){case"jpeg":case"jpg":case"gif":case"png":case"webp":case"bmp":return createjs.Types.IMAGE;case"ogg":case"mp3":case"webm":return createjs.Types.SOUND;case"mp4":case"webm":case"ts":return createjs.Types.VIDEO;case"json":return createjs.Types.JSON;case"xml":return createjs.Types.XML;case"css":return createjs.Types.CSS;case"js":return createjs.Types.JAVASCRIPT;case"svg":return createjs.Types.SVG;default:return createjs.Types.TEXT}},createjs.RequestUtils=r}(),globalThis.createjs=globalThis.createjs||{},function(){function r(n,i,a){this.EventDispatcher_constructor(),this.loaded=!1,this.canceled=!1,this.progress=0,this.type=a,this.resultFormatter=null,this._item=n?createjs.LoadItem.create(n):null,this._preferXHR=i,this._result=null,this._rawResult=null,this._loadedItems=null,this._tagSrcAttribute=null,this._tag=null}var e=createjs.extend(r,createjs.EventDispatcher),t=r;try{Object.defineProperties(t,{POST:{get:createjs.deprecate(function(){return createjs.Methods.POST},"AbstractLoader.POST")},GET:{get:createjs.deprecate(function(){return createjs.Methods.GET},"AbstractLoader.GET")},BINARY:{get:createjs.deprecate(function(){return createjs.Types.BINARY},"AbstractLoader.BINARY")},CSS:{get:createjs.deprecate(function(){return createjs.Types.CSS},"AbstractLoader.CSS")},FONT:{get:createjs.deprecate(function(){return createjs.Types.FONT},"AbstractLoader.FONT")},FONTCSS:{get:createjs.deprecate(function(){return createjs.Types.FONTCSS},"AbstractLoader.FONTCSS")},IMAGE:{get:createjs.deprecate(function(){return createjs.Types.IMAGE},"AbstractLoader.IMAGE")},JAVASCRIPT:{get:createjs.deprecate(function(){return createjs.Types.JAVASCRIPT},"AbstractLoader.JAVASCRIPT")},JSON:{get:createjs.deprecate(function(){return createjs.Types.JSON},"AbstractLoader.JSON")},JSONP:{get:createjs.deprecate(function(){return createjs.Types.JSONP},"AbstractLoader.JSONP")},MANIFEST:{get:createjs.deprecate(function(){return createjs.Types.MANIFEST},"AbstractLoader.MANIFEST")},SOUND:{get:createjs.deprecate(function(){return createjs.Types.SOUND},"AbstractLoader.SOUND")},VIDEO:{get:createjs.deprecate(function(){return createjs.Types.VIDEO},"AbstractLoader.VIDEO")},SPRITESHEET:{get:createjs.deprecate(function(){return createjs.Types.SPRITESHEET},"AbstractLoader.SPRITESHEET")},SVG:{get:createjs.deprecate(function(){return createjs.Types.SVG},"AbstractLoader.SVG")},TEXT:{get:createjs.deprecate(function(){return createjs.Types.TEXT},"AbstractLoader.TEXT")},XML:{get:createjs.deprecate(function(){return createjs.Types.XML},"AbstractLoader.XML")}})}catch{}e.getItem=function(){return this._item},e.getResult=function(n){return n?this._rawResult:this._result},e.getTag=function(){return this._tag},e.setTag=function(n){this._tag=n},e.load=function(){this._createRequest(),this._request.on("complete",this,this),this._request.on("progress",this,this),this._request.on("loadStart",this,this),this._request.on("abort",this,this),this._request.on("timeout",this,this),this._request.on("error",this,this);var n=new createjs.Event("initialize");n.loader=this._request,this.dispatchEvent(n),this._request.load()},e.cancel=function(){this.canceled=!0,this.destroy()},e.destroy=function(){this._request&&(this._request.removeAllEventListeners(),this._request.destroy()),this._request=null,this._item=null,this._rawResult=null,this._result=null,this._loadItems=null,this.removeAllEventListeners()},e.getLoadedItems=function(){return this._loadedItems},e._createRequest=function(){this._request=this._preferXHR?new createjs.XHRRequest(this._item):new createjs.TagRequest(this._item,this._tag||this._createTag(),this._tagSrcAttribute)},e._createTag=function(){return null},e._sendLoadStart=function(){this._isCanceled()||this.dispatchEvent("loadstart")},e._sendProgress=function(n){if(!this._isCanceled()){var i=null;typeof n=="number"?(this.progress=n,i=new createjs.ProgressEvent(this.progress)):(i=n,this.progress=n.loaded/n.total,i.progress=this.progress,(isNaN(this.progress)||1/0==this.progress)&&(this.progress=0)),this.hasEventListener("progress")&&this.dispatchEvent(i)}},e._sendComplete=function(){if(!this._isCanceled()){this.loaded=!0;var n=new createjs.Event("complete");n.rawResult=this._rawResult,this._result!=null&&(n.result=this._result),this.dispatchEvent(n)}},e._sendError=function(n){!this._isCanceled()&&this.hasEventListener("error")&&(n==null&&(n=new createjs.ErrorEvent("PRELOAD_ERROR_EMPTY")),this.dispatchEvent(n))},e._isCanceled=function(){return!!(window.createjs==null||this.canceled)},e.resultFormatter=null,e.handleEvent=function(n){switch(n.type){case"complete":this._rawResult=n.target._response;var i=this.resultFormatter&&this.resultFormatter(this);i instanceof Function?i.call(this,createjs.proxy(this._resultFormatSuccess,this),createjs.proxy(this._resultFormatFailed,this)):(this._result=i||this._rawResult,this._sendComplete());break;case"progress":this._sendProgress(n);break;case"error":this._sendError(n);break;case"loadstart":this._sendLoadStart();break;case"abort":case"timeout":this._isCanceled()||this.dispatchEvent(new createjs.ErrorEvent("PRELOAD_"+n.type.toUpperCase()+"_ERROR"))}},e._resultFormatSuccess=function(n){this._result=n,this._sendComplete()},e._resultFormatFailed=function(n){this._sendError(n)},e.toString=function(){return"[PreloadJS AbstractLoader]"},createjs.AbstractLoader=createjs.promote(r,"EventDispatcher")}(),globalThis.createjs=globalThis.createjs||{},function(){function r(t,n,i){this.AbstractLoader_constructor(t,n,i),this.resultFormatter=this._formatResult,this._tagSrcAttribute="src",this.on("initialize",this._updateXHR,this)}var e=createjs.extend(r,createjs.AbstractLoader);e.load=function(){this._tag||(this._tag=this._createTag(this._item.src)),this._tag.preload="auto",this._tag.load(),this.AbstractLoader_load()},e._createTag=function(){},e._createRequest=function(){this._request=this._preferXHR?new createjs.XHRRequest(this._item):new createjs.MediaTagRequest(this._item,this._tag||this._createTag(),this._tagSrcAttribute)},e._updateXHR=function(t){t.loader.setResponseType&&t.loader.setResponseType("blob")},e._formatResult=function(t){if(this._tag.removeEventListener&&this._tag.removeEventListener("canplaythrough",this._loadedHandler),this._tag.onstalled=null,this._preferXHR){var n=window.URL||window.webkitURL,i=t.getResult(!0);t.getTag().src=n.createObjectURL(i)}return t.getTag()},createjs.AbstractMediaLoader=createjs.promote(r,"AbstractLoader")}(),globalThis.createjs=globalThis.createjs||{},function(){var r=function(t){this._item=t},e=createjs.extend(r,createjs.EventDispatcher);e.load=function(){},e.destroy=function(){},e.cancel=function(){},createjs.AbstractRequest=createjs.promote(r,"EventDispatcher")}(),globalThis.createjs=globalThis.createjs||{},function(){function r(t,n,i){this.AbstractRequest_constructor(t),this._tag=n,this._tagSrcAttribute=i,this._loadedHandler=createjs.proxy(this._handleTagComplete,this),this._addedToDOM=!1}var e=createjs.extend(r,createjs.AbstractRequest);e.load=function(){this._tag.onload=createjs.proxy(this._handleTagComplete,this),this._tag.onreadystatechange=createjs.proxy(this._handleReadyStateChange,this),this._tag.onerror=createjs.proxy(this._handleError,this);var t=new createjs.Event("initialize");t.loader=this._tag,this.dispatchEvent(t),this._loadTimeout=setTimeout(createjs.proxy(this._handleTimeout,this),this._item.loadTimeout),this._tag[this._tagSrcAttribute]=this._item.src,this._tag.parentNode==null&&(createjs.DomUtils.appendToBody(this._tag),this._addedToDOM=!0)},e.destroy=function(){this._clean(),this._tag=null,this.AbstractRequest_destroy()},e._handleReadyStateChange=function(){clearTimeout(this._loadTimeout);var t=this._tag;(t.readyState=="loaded"||t.readyState=="complete")&&this._handleTagComplete()},e._handleError=function(){this._clean(),this.dispatchEvent("error")},e._handleTagComplete=function(){this._rawResult=this._tag,this._result=this.resultFormatter&&this.resultFormatter(this)||this._rawResult,this._clean(),this.dispatchEvent("complete")},e._handleTimeout=function(){this._clean(),this.dispatchEvent(new createjs.Event("timeout"))},e._clean=function(){this._tag.onload=null,this._tag.onreadystatechange=null,this._tag.onerror=null,this._addedToDOM&&this._tag.parentNode!=null&&this._tag.parentNode.removeChild(this._tag),clearTimeout(this._loadTimeout)},e._handleStalled=function(){},createjs.TagRequest=createjs.promote(r,"AbstractRequest")}(),globalThis.createjs=globalThis.createjs||{},function(){function r(t,n,i){this.AbstractRequest_constructor(t),this._tag=n,this._tagSrcAttribute=i,this._loadedHandler=createjs.proxy(this._handleTagComplete,this)}var e=createjs.extend(r,createjs.TagRequest);e.load=function(){var t=createjs.proxy(this._handleStalled,this);this._stalledCallback=t;var n=createjs.proxy(this._handleProgress,this);this._handleProgress=n,this._tag.addEventListener("stalled",t),this._tag.addEventListener("progress",n),this._tag.addEventListener&&this._tag.addEventListener("canplaythrough",this._loadedHandler,!1),this.TagRequest_load()},e._handleReadyStateChange=function(){clearTimeout(this._loadTimeout);var t=this._tag;(t.readyState=="loaded"||t.readyState=="complete")&&this._handleTagComplete()},e._handleStalled=function(){},e._handleProgress=function(t){if(t&&!(t.loaded>0&&t.total==0)){var n=new createjs.ProgressEvent(t.loaded,t.total);this.dispatchEvent(n)}},e._clean=function(){this._tag.removeEventListener&&this._tag.removeEventListener("canplaythrough",this._loadedHandler),this._tag.removeEventListener("stalled",this._stalledCallback),this._tag.removeEventListener("progress",this._progressCallback),this.TagRequest__clean()},createjs.MediaTagRequest=createjs.promote(r,"TagRequest")}(),globalThis.createjs=globalThis.createjs||{},function(){function r(t){this.AbstractRequest_constructor(t),this._request=null,this._loadTimeout=null,this._xhrLevel=1,this._response=null,this._rawResponse=null,this._canceled=!1,this._handleLoadStartProxy=createjs.proxy(this._handleLoadStart,this),this._handleProgressProxy=createjs.proxy(this._handleProgress,this),this._handleAbortProxy=createjs.proxy(this._handleAbort,this),this._handleErrorProxy=createjs.proxy(this._handleError,this),this._handleTimeoutProxy=createjs.proxy(this._handleTimeout,this),this._handleLoadProxy=createjs.proxy(this._handleLoad,this),this._handleReadyStateChangeProxy=createjs.proxy(this._handleReadyStateChange,this),this._createXHR(t)}var e=createjs.extend(r,createjs.AbstractRequest);r.ACTIVEX_VERSIONS=["Msxml2.XMLHTTP.6.0","Msxml2.XMLHTTP.5.0","Msxml2.XMLHTTP.4.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],e.getResult=function(t){return t&&this._rawResponse?this._rawResponse:this._response},e.cancel=function(){this.canceled=!0,this._clean(),this._request.abort()},e.load=function(){if(this._request==null)return void this._handleError();this._request.addEventListener!=null?(this._request.addEventListener("loadstart",this._handleLoadStartProxy,!1),this._request.addEventListener("progress",this._handleProgressProxy,!1),this._request.addEventListener("abort",this._handleAbortProxy,!1),this._request.addEventListener("error",this._handleErrorProxy,!1),this._request.addEventListener("timeout",this._handleTimeoutProxy,!1),this._request.addEventListener("load",this._handleLoadProxy,!1),this._request.addEventListener("readystatechange",this._handleReadyStateChangeProxy,!1)):(this._request.onloadstart=this._handleLoadStartProxy,this._request.onprogress=this._handleProgressProxy,this._request.onabort=this._handleAbortProxy,this._request.onerror=this._handleErrorProxy,this._request.ontimeout=this._handleTimeoutProxy,this._request.onload=this._handleLoadProxy,this._request.onreadystatechange=this._handleReadyStateChangeProxy),this._xhrLevel==1&&(this._loadTimeout=setTimeout(createjs.proxy(this._handleTimeout,this),this._item.loadTimeout));try{this._item.values?this._request.send(createjs.URLUtils.formatQueryString(this._item.values)):this._request.send()}catch(t){this.dispatchEvent(new createjs.ErrorEvent("XHR_SEND",null,t))}},e.setResponseType=function(t){t==="blob"&&(t=window.URL?"blob":"arraybuffer",this._responseType=t),this._request.responseType=t},e.getAllResponseHeaders=function(){return this._request.getAllResponseHeaders instanceof Function?this._request.getAllResponseHeaders():null},e.getResponseHeader=function(t){return this._request.getResponseHeader instanceof Function?this._request.getResponseHeader(t):null},e._handleProgress=function(t){if(t&&!(t.loaded>0&&t.total==0)){var n=new createjs.ProgressEvent(t.loaded,t.total);this.dispatchEvent(n)}},e._handleLoadStart=function(){clearTimeout(this._loadTimeout),this.dispatchEvent("loadstart")},e._handleAbort=function(t){this._clean(),this.dispatchEvent(new createjs.ErrorEvent("XHR_ABORTED",null,t))},e._handleError=function(t){this._clean(),this.dispatchEvent(new createjs.ErrorEvent(t.message))},e._handleReadyStateChange=function(){this._request.readyState==4&&this._handleLoad()},e._handleLoad=function(){if(!this.loaded){this.loaded=!0;var t=this._checkError();if(t)return void this._handleError(t);if(this._response=this._getResponse(),this._responseType==="arraybuffer")try{this._response=new Blob([this._response])}catch(i){if(window.BlobBuilder=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder,i.name==="TypeError"&&window.BlobBuilder){var n=new BlobBuilder;n.append(this._response),this._response=n.getBlob()}}this._clean(),this.dispatchEvent(new createjs.Event("complete"))}},e._handleTimeout=function(t){this._clean(),this.dispatchEvent(new createjs.ErrorEvent("PRELOAD_TIMEOUT",null,t))},e._checkError=function(){var t=parseInt(this._request.status);return t>=400&&599>=t?new Error(t):t==0&&/^https?:/.test(location.protocol)?new Error(0):null},e._getResponse=function(){if(this._response!=null)return this._response;if(this._request.response!=null)return this._request.response;try{if(this._request.responseText!=null)return this._request.responseText}catch{}try{if(this._request.responseXML!=null)return this._request.responseXML}catch{}return null},e._createXHR=function(t){var n=createjs.URLUtils.isCrossDomain(t),i={},a=null;if(window.XMLHttpRequest)a=new XMLHttpRequest,n&&a.withCredentials===void 0&&window.XDomainRequest&&(a=new XDomainRequest);else{for(var o=0,l=s.ACTIVEX_VERSIONS.length;l>o;o++){var c=s.ACTIVEX_VERSIONS[o];try{a=new ActiveXObject(c);break}catch{}}if(a==null)return!1}t.mimeType==null&&createjs.RequestUtils.isText(t.type)&&(t.mimeType="text/plain; charset=utf-8"),t.mimeType&&a.overrideMimeType&&a.overrideMimeType(t.mimeType),this._xhrLevel=typeof a.responseType=="string"?2:1;var h=null;if(h=t.method==createjs.Methods.GET?createjs.URLUtils.buildURI(t.src,t.values):t.src,a.open(t.method||createjs.Methods.GET,h,!0),n&&a instanceof XMLHttpRequest&&this._xhrLevel==1&&(i.Origin=location.origin),t.values&&t.method==createjs.Methods.POST&&(i["Content-Type"]="application/x-www-form-urlencoded"),n||i["X-Requested-With"]||(i["X-Requested-With"]="XMLHttpRequest"),t.headers)for(var f in t.headers)i[f]=t.headers[f];for(f in i)a.setRequestHeader(f,i[f]);return a instanceof XMLHttpRequest&&t.withCredentials!==void 0&&(a.withCredentials=t.withCredentials),this._request=a,!0},e._clean=function(){clearTimeout(this._loadTimeout),this._request.removeEventListener!=null?(this._request.removeEventListener("loadstart",this._handleLoadStartProxy),this._request.removeEventListener("progress",this._handleProgressProxy),this._request.removeEventListener("abort",this._handleAbortProxy),this._request.removeEventListener("error",this._handleErrorProxy),this._request.removeEventListener("timeout",this._handleTimeoutProxy),this._request.removeEventListener("load",this._handleLoadProxy),this._request.removeEventListener("readystatechange",this._handleReadyStateChangeProxy)):(this._request.onloadstart=null,this._request.onprogress=null,this._request.onabort=null,this._request.onerror=null,this._request.ontimeout=null,this._request.onload=null,this._request.onreadystatechange=null)},e.toString=function(){return"[PreloadJS XHRRequest]"},createjs.XHRRequest=createjs.promote(r,"AbstractRequest")}(),globalThis.createjs=globalThis.createjs||{},function(){function r(n,i,a){this.AbstractLoader_constructor(),this._plugins=[],this._typeCallbacks={},this._extensionCallbacks={},this.next=null,this.maintainScriptOrder=!0,this.stopOnError=!1,this._maxConnections=1,this._availableLoaders=[createjs.FontLoader,createjs.ImageLoader,createjs.JavaScriptLoader,createjs.CSSLoader,createjs.JSONLoader,createjs.JSONPLoader,createjs.SoundLoader,createjs.ManifestLoader,createjs.SpriteSheetLoader,createjs.XMLLoader,createjs.SVGLoader,createjs.BinaryLoader,createjs.VideoLoader,createjs.TextLoader],this._defaultLoaderLength=this._availableLoaders.length,this.init(n,i,a)}var e=createjs.extend(r,createjs.AbstractLoader),t=r;try{Object.defineProperties(t,{POST:{get:createjs.deprecate(function(){return createjs.Methods.POST},"AbstractLoader.POST")},GET:{get:createjs.deprecate(function(){return createjs.Methods.GET},"AbstractLoader.GET")},BINARY:{get:createjs.deprecate(function(){return createjs.Types.BINARY},"AbstractLoader.BINARY")},CSS:{get:createjs.deprecate(function(){return createjs.Types.CSS},"AbstractLoader.CSS")},FONT:{get:createjs.deprecate(function(){return createjs.Types.FONT},"AbstractLoader.FONT")},FONTCSS:{get:createjs.deprecate(function(){return createjs.Types.FONTCSS},"AbstractLoader.FONTCSS")},IMAGE:{get:createjs.deprecate(function(){return createjs.Types.IMAGE},"AbstractLoader.IMAGE")},JAVASCRIPT:{get:createjs.deprecate(function(){return createjs.Types.JAVASCRIPT},"AbstractLoader.JAVASCRIPT")},JSON:{get:createjs.deprecate(function(){return createjs.Types.JSON},"AbstractLoader.JSON")},JSONP:{get:createjs.deprecate(function(){return createjs.Types.JSONP},"AbstractLoader.JSONP")},MANIFEST:{get:createjs.deprecate(function(){return createjs.Types.MANIFEST},"AbstractLoader.MANIFEST")},SOUND:{get:createjs.deprecate(function(){return createjs.Types.SOUND},"AbstractLoader.SOUND")},VIDEO:{get:createjs.deprecate(function(){return createjs.Types.VIDEO},"AbstractLoader.VIDEO")},SPRITESHEET:{get:createjs.deprecate(function(){return createjs.Types.SPRITESHEET},"AbstractLoader.SPRITESHEET")},SVG:{get:createjs.deprecate(function(){return createjs.Types.SVG},"AbstractLoader.SVG")},TEXT:{get:createjs.deprecate(function(){return createjs.Types.TEXT},"AbstractLoader.TEXT")},XML:{get:createjs.deprecate(function(){return createjs.Types.XML},"AbstractLoader.XML")}})}catch{}e.init=function(n,i,a){this.preferXHR=!0,this._preferXHR=!0,this.setPreferXHR(n),this._paused=!1,this._basePath=i,this._crossOrigin=a,this._loadStartWasDispatched=!1,this._currentlyLoadingScript=null,this._currentLoads=[],this._loadQueue=[],this._loadQueueBackup=[],this._loadItemsById={},this._loadItemsBySrc={},this._loadedResults={},this._loadedRawResults={},this._numItems=0,this._numItemsLoaded=0,this._scriptOrder=[],this._loadedScripts=[],this._lastProgress=0/0},e.registerLoader=function(n){if(!n||!n.canLoadItem)throw new Error("loader is of an incorrect type.");if(this._availableLoaders.indexOf(n)!=-1)throw new Error("loader already exists.");this._availableLoaders.unshift(n)},e.unregisterLoader=function(n){var i=this._availableLoaders.indexOf(n);i!=-1&&i<this._defaultLoaderLength-1&&this._availableLoaders.splice(i,1)},e.setPreferXHR=function(n){return this.preferXHR=n!=0&&window.XMLHttpRequest!=null,this.preferXHR},e.removeAll=function(){this.remove()},e.remove=function(n){var i=null;if(n&&!Array.isArray(n))i=[n];else if(n)i=n;else if(arguments.length>0)return;var a=!1;if(i){for(;i.length;){var o=i.pop(),l=this.getResult(o);for(c=this._loadQueue.length-1;c>=0;c--)if(h=this._loadQueue[c].getItem(),h.id==o||h.src==o){this._loadQueue.splice(c,1)[0].cancel();break}for(c=this._loadQueueBackup.length-1;c>=0;c--)if(h=this._loadQueueBackup[c].getItem(),h.id==o||h.src==o){this._loadQueueBackup.splice(c,1)[0].cancel();break}if(l)this._disposeItem(this.getItem(o));else for(var c=this._currentLoads.length-1;c>=0;c--){var h=this._currentLoads[c].getItem();if(h.id==o||h.src==o){this._currentLoads.splice(c,1)[0].cancel(),a=!0;break}}}a&&this._loadNext()}else{this.close();for(var f in this._loadItemsById)this._disposeItem(this._loadItemsById[f]);this.init(this.preferXHR,this._basePath)}},e.reset=function(){this.close();for(var n in this._loadItemsById)this._disposeItem(this._loadItemsById[n]);for(var i=[],a=0,o=this._loadQueueBackup.length;o>a;a++)i.push(this._loadQueueBackup[a].getItem());this.loadManifest(i,!1)},e.installPlugin=function(n){if(n!=null&&n.getPreloadHandlers!=null){this._plugins.push(n);var i=n.getPreloadHandlers();if(i.scope=n,i.types!=null)for(var a=0,o=i.types.length;o>a;a++)this._typeCallbacks[i.types[a]]=i;if(i.extensions!=null)for(a=0,o=i.extensions.length;o>a;a++)this._extensionCallbacks[i.extensions[a]]=i}},e.setMaxConnections=function(n){this._maxConnections=n,!this._paused&&this._loadQueue.length>0&&this._loadNext()},e.loadFile=function(n,i,a){if(n==null){var o=new createjs.ErrorEvent("PRELOAD_NO_FILE");return void this._sendError(o)}this._addItem(n,null,a),this.setPaused(i===!1)},e.loadManifest=function(n,i,a){var o=null,l=null;if(Array.isArray(n)){if(n.length==0){var c=new createjs.ErrorEvent("PRELOAD_MANIFEST_EMPTY");return void this._sendError(c)}o=n}else if(typeof n=="string")o=[{src:n,type:t.MANIFEST}];else{if(typeof n!="object"){var c=new createjs.ErrorEvent("PRELOAD_MANIFEST_NULL");return void this._sendError(c)}if(n.src!==void 0){if(n.type==null)n.type=t.MANIFEST;else if(n.type!=t.MANIFEST){var c=new createjs.ErrorEvent("PRELOAD_MANIFEST_TYPE");this._sendError(c)}o=[n]}else n.manifest!==void 0&&(o=n.manifest,l=n.path)}for(var h=0,f=o.length;f>h;h++)this._addItem(o[h],l,a);this.setPaused(i===!1)},e.load=function(){this.setPaused(!1)},e.getItem=function(n){return this._loadItemsById[n]||this._loadItemsBySrc[n]},e.getResult=function(n,i){var a=this._loadItemsById[n]||this._loadItemsBySrc[n];if(a==null)return null;var o=a.id;return i&&this._loadedRawResults[o]?this._loadedRawResults[o]:this._loadedResults[o]},e.getItems=function(n){var i=[];for(var a in this._loadItemsById){var o=this._loadItemsById[a],l=this.getResult(a);(n!==!0||l!=null)&&i.push({item:o,result:l,rawResult:this.getResult(a,!0)})}return i},e.setPaused=function(n){this._paused=n,this._paused||this._loadNext()},e.close=function(){for(;this._currentLoads.length;)this._currentLoads.pop().cancel();this._scriptOrder.length=0,this._loadedScripts.length=0,this.loadStartWasDispatched=!1,this._itemCount=0,this._lastProgress=0/0},e._addItem=function(n,i,a){var o=this._createLoadItem(n,i,a);if(o!=null){var l=this._createLoader(o);l!=null&&("plugins"in l&&(l.plugins=this._plugins),o._loader=l,this._loadQueue.push(l),this._loadQueueBackup.push(l),this._numItems++,this._updateProgress(),(this.maintainScriptOrder&&o.type==createjs.Types.JAVASCRIPT||o.maintainOrder===!0)&&(this._scriptOrder.push(o),this._loadedScripts.push(null)))}},e._createLoadItem=function(n,i,a){var o=createjs.LoadItem.create(n);if(o==null)return null;var l="",c=a||this._basePath;if(o.src instanceof Object){if(!o.type)return null;if(i){l=i;var h=createjs.URLUtils.parseURI(i);c==null||h.absolute||h.relative||(l=c+l)}else c!=null&&(l=c)}else{var f=createjs.URLUtils.parseURI(o.src);f.extension&&(o.ext=f.extension),o.type==null&&(o.type=createjs.RequestUtils.getTypeByExtension(o.ext));var m=o.src;if(!f.absolute&&!f.relative)if(i){l=i;var h=createjs.URLUtils.parseURI(i);m=i+m,c==null||h.absolute||h.relative||(l=c+l)}else c!=null&&(l=c);o.src=l+o.src}o.path=l,(o.id===void 0||o.id===null||o.id==="")&&(o.id=m);var g=this._typeCallbacks[o.type]||this._extensionCallbacks[o.ext];if(g){var _=g.callback.call(g.scope,o,this);if(_===!1)return null;_===!0||_!=null&&(o._loader=_),f=createjs.URLUtils.parseURI(o.src),f.extension!=null&&(o.ext=f.extension)}return this._loadItemsById[o.id]=o,this._loadItemsBySrc[o.src]=o,o.crossOrigin==null&&(o.crossOrigin=this._crossOrigin),o},e._createLoader=function(n){if(n._loader!=null)return n._loader;for(var i=this.preferXHR,a=0;a<this._availableLoaders.length;a++){var o=this._availableLoaders[a];if(o&&o.canLoadItem(n))return new o(n,i)}return null},e._loadNext=function(){if(!this._paused){this._loadStartWasDispatched||(this._sendLoadStart(),this._loadStartWasDispatched=!0),this._numItems==this._numItemsLoaded?(this.loaded=!0,this._sendComplete(),this.next&&this.next.load&&this.next.load()):this.loaded=!1;for(var n=0;n<this._loadQueue.length&&!(this._currentLoads.length>=this._maxConnections);n++){var i=this._loadQueue[n];this._canStartLoad(i)&&(this._loadQueue.splice(n,1),n--,this._loadItem(i))}}},e._loadItem=function(n){n.on("fileload",this._handleFileLoad,this),n.on("progress",this._handleProgress,this),n.on("complete",this._handleFileComplete,this),n.on("error",this._handleError,this),n.on("fileerror",this._handleFileError,this),this._currentLoads.push(n),this._sendFileStart(n.getItem()),n.load()},e._handleFileLoad=function(n){n.target=null,this.dispatchEvent(n)},e._handleFileError=function(n){var i=new createjs.ErrorEvent("FILE_LOAD_ERROR",null,n.item);this._sendError(i)},e._handleError=function(n){var i=n.target;this._numItemsLoaded++,this._finishOrderedItem(i,!0),this._updateProgress();var a=new createjs.ErrorEvent("FILE_LOAD_ERROR",null,i.getItem());this._sendError(a),this.stopOnError?this.setPaused(!0):(this._removeLoadItem(i),this._cleanLoadItem(i),this._loadNext())},e._handleFileComplete=function(n){var i=n.target,a=i.getItem(),o=i.getResult();this._loadedResults[a.id]=o;var l=i.getResult(!0);l!=null&&l!==o&&(this._loadedRawResults[a.id]=l),this._saveLoadedItems(i),this._removeLoadItem(i),this._finishOrderedItem(i)||this._processFinishedLoad(a,i),this._cleanLoadItem(i)},e._saveLoadedItems=function(n){var i=n.getLoadedItems();if(i!==null)for(var a=0;a<i.length;a++){var o=i[a].item;this._loadItemsBySrc[o.src]=o,this._loadItemsById[o.id]=o,this._loadedResults[o.id]=i[a].result,this._loadedRawResults[o.id]=i[a].rawResult}},e._finishOrderedItem=function(n,i){var a=n.getItem();if(this.maintainScriptOrder&&a.type==createjs.Types.JAVASCRIPT||a.maintainOrder){n instanceof createjs.JavaScriptLoader&&(this._currentlyLoadingScript=!1);var o=createjs.indexOf(this._scriptOrder,a);return o==-1?!1:(this._loadedScripts[o]=i===!0?!0:a,this._checkScriptLoadOrder(),!0)}return!1},e._checkScriptLoadOrder=function(){for(var n=this._loadedScripts.length,i=0;n>i;i++){var a=this._loadedScripts[i];if(a===null)break;if(a!==!0){var o=this._loadedResults[a.id];a.type==createjs.Types.JAVASCRIPT&&createjs.DomUtils.appendToHead(o);var l=a._loader;this._processFinishedLoad(a,l),this._loadedScripts[i]=!0}}},e._processFinishedLoad=function(n,i){if(this._numItemsLoaded++,!this.maintainScriptOrder&&n.type==createjs.Types.JAVASCRIPT){var a=i.getTag();createjs.DomUtils.appendToHead(a)}this._updateProgress(),this._sendFileComplete(n,i),this._loadNext()},e._canStartLoad=function(n){if(!this.maintainScriptOrder||n.preferXHR)return!0;var i=n.getItem();if(i.type!=createjs.Types.JAVASCRIPT)return!0;if(this._currentlyLoadingScript)return!1;for(var a=this._scriptOrder.indexOf(i),o=0;a>o;){var l=this._loadedScripts[o];if(l==null)return!1;o++}return this._currentlyLoadingScript=!0,!0},e._removeLoadItem=function(n){for(var i=this._currentLoads.length,a=0;i>a;a++)if(this._currentLoads[a]==n){this._currentLoads.splice(a,1);break}},e._cleanLoadItem=function(n){var i=n.getItem();i&&delete i._loader},e._handleProgress=function(n){var i=n.target;this._sendFileProgress(i.getItem(),i.progress),this._updateProgress()},e._updateProgress=function(){var n=this._numItemsLoaded/this._numItems,i=this._numItems-this._numItemsLoaded;if(i>0){for(var a=0,o=0,l=this._currentLoads.length;l>o;o++)a+=this._currentLoads[o].progress;n+=a/i*(i/this._numItems)}this._lastProgress!=n&&(this._sendProgress(n),this._lastProgress=n)},e._disposeItem=function(n){delete this._loadedResults[n.id],delete this._loadedRawResults[n.id],delete this._loadItemsById[n.id],delete this._loadItemsBySrc[n.src]},e._sendFileProgress=function(n,i){if(!this._isCanceled()&&!this._paused&&this.hasEventListener("fileprogress")){var a=new createjs.Event("fileprogress");a.progress=i,a.loaded=i,a.total=1,a.item=n,this.dispatchEvent(a)}},e._sendFileComplete=function(n,i){if(!this._isCanceled()&&!this._paused){var a=new createjs.Event("fileload");a.loader=i,a.item=n,a.result=this._loadedResults[n.id],a.rawResult=this._loadedRawResults[n.id],n.completeHandler&&n.completeHandler(a),this.hasEventListener("fileload")&&this.dispatchEvent(a)}},e._sendFileStart=function(n){var i=new createjs.Event("filestart");i.item=n,this.hasEventListener("filestart")&&this.dispatchEvent(i)},e.toString=function(){return"[PreloadJS LoadQueue]"},createjs.LoadQueue=createjs.promote(r,"AbstractLoader")}(),globalThis.createjs=globalThis.createjs||{},function(){function r(t){this.AbstractLoader_constructor(t,!0,createjs.Types.TEXT)}var e=(createjs.extend(r,createjs.AbstractLoader),r);e.canLoadItem=function(t){return t.type==createjs.Types.TEXT},createjs.TextLoader=createjs.promote(r,"AbstractLoader")}(),globalThis.createjs=globalThis.createjs||{},function(){function r(n){this.AbstractLoader_constructor(n,!0,createjs.Types.BINARY),this.on("initialize",this._updateXHR,this)}var e=createjs.extend(r,createjs.AbstractLoader),t=r;t.canLoadItem=function(n){return n.type==createjs.Types.BINARY},e._updateXHR=function(n){n.loader.setResponseType("arraybuffer")},createjs.BinaryLoader=createjs.promote(r,"AbstractLoader")}(),globalThis.createjs=globalThis.createjs||{},function(){function r(n,i){this.AbstractLoader_constructor(n,i,createjs.Types.CSS),this.resultFormatter=this._formatResult,this._tagSrcAttribute="href",this._tag=i?createjs.Elements.style():createjs.Elements.link(),this._tag.rel="stylesheet",this._tag.type="text/css"}var e=createjs.extend(r,createjs.AbstractLoader),t=r;t.canLoadItem=function(n){return n.type==createjs.Types.CSS},e._formatResult=function(n){if(this._preferXHR){var i=n.getTag();if(i.styleSheet)i.styleSheet.cssText=n.getResult(!0);else{var a=createjs.Elements.text(n.getResult(!0));i.appendChild(a)}}else i=this._tag;return createjs.DomUtils.appendToHead(i),i},createjs.CSSLoader=createjs.promote(r,"AbstractLoader")}(),globalThis.createjs=globalThis.createjs||{},function(){function r(t,n){this.AbstractLoader_constructor(t,n,t.type),this._faces={},this._watched=[],this._count=0,this._watchInterval=null,this._loadTimeout=null,this._injectCSS=t.injectCSS===void 0?!0:t.injectCSS,this.dispatchEvent("initialize")}var e=createjs.extend(r,createjs.AbstractLoader);r.canLoadItem=function(t){return t.type==createjs.Types.FONT||t.type==createjs.Types.FONTCSS},r.sampleText="abcdefghijklmnopqrstuvwxyz ABCDEFGHIJKLMNOPQRSTUVWXYZ",r._ctx=document.createElement("canvas").getContext("2d"),r._referenceFonts=["serif","monospace"],r.WEIGHT_REGEX=/[- ._]*(thin|normal|book|regular|medium|black|heavy|[1-9]00|(?:extra|ultra|semi|demi)?[- ._]*(?:light|bold))[- ._]*/gi,r.STYLE_REGEX=/[- ._]*(italic|oblique)[- ._]*/gi,r.FONT_FORMAT={woff2:"woff2",woff:"woff",ttf:"truetype",otf:"truetype"},r.FONT_WEIGHT={thin:100,extralight:200,ultralight:200,light:300,semilight:300,demilight:300,book:"normal",regular:"normal",semibold:600,demibold:600,extrabold:800,ultrabold:800,black:900,heavy:900},r.WATCH_DURATION=10,e.load=function(){if(this.type==createjs.Types.FONTCSS){var t=this._watchCSS();if(!t)return void this.AbstractLoader_load()}else if(this._item.src instanceof Array)this._watchFontArray();else{var n=this._defFromSrc(this._item.src);this._watchFont(n),this._injectStyleTag(this._cssFromDef(n))}this._loadTimeout=setTimeout(createjs.proxy(this._handleTimeout,this),this._item.loadTimeout),this.dispatchEvent("loadstart")},e._handleTimeout=function(){this._stopWatching(),this.dispatchEvent(new createjs.ErrorEvent("PRELOAD_TIMEOUT"))},e._createRequest=function(){return this._request},e.handleEvent=function(t){switch(t.type){case"complete":this._rawResult=t.target._response,this._result=!0,this._parseCSS(this._rawResult);break;case"error":this._stopWatching(),this.AbstractLoader_handleEvent(t)}},e._watchCSS=function(){var t=this._item.src;return t instanceof HTMLStyleElement&&(this._injectCSS&&!t.parentNode&&(document.head||document.getElementsByTagName("head")[0]).appendChild(t),this._injectCSS=!1,t=`
`+t.textContent),t.search(/\n|\r|@font-face/i)!==-1?(this._parseCSS(t),!0):(this._request=new createjs.XHRRequest(this._item),!1)},e._parseCSS=function(t){for(var n=/@font-face\s*\{([^}]+)}/g;;){var i=n.exec(t);if(!i)break;this._watchFont(this._parseFontFace(i[1]))}this._injectStyleTag(t)},e._watchFontArray=function(){for(var t,n=this._item.src,i="",a=n.length-1;a>=0;a--){var o=n[a];t=typeof o=="string"?this._defFromSrc(o):this._defFromObj(o),this._watchFont(t),i+=this._cssFromDef(t)+`
`}this._injectStyleTag(i)},e._injectStyleTag=function(t){if(this._injectCSS){var n=document.head||document.getElementsByTagName("head")[0],i=document.createElement("style");i.type="text/css",i.styleSheet?i.styleSheet.cssText=t:i.appendChild(document.createTextNode(t)),n.appendChild(i)}},e._parseFontFace=function(t){var n=this._getCSSValue(t,"font-family"),i=this._getCSSValue(t,"src");return n&&i?this._defFromObj({family:n,src:i,style:this._getCSSValue(t,"font-style"),weight:this._getCSSValue(t,"font-weight")}):null},e._watchFont=function(t){t&&!this._faces[t.id]&&(this._faces[t.id]=t,this._watched.push(t),this._count++,this._calculateReferenceSizes(t),this._startWatching())},e._startWatching=function(){this._watchInterval==null&&(this._watchInterval=setInterval(createjs.proxy(this._watch,this),r.WATCH_DURATION))},e._stopWatching=function(){clearInterval(this._watchInterval),clearTimeout(this._loadTimeout),this._watchInterval=null},e._watch=function(){for(var t=this._watched,n=r._referenceFonts,i=t.length,a=i-1;a>=0;a--)for(var o=t[a],l=o.refs,c=l.length-1;c>=0;c--){var h=this._getTextWidth(o.family+","+n[c],o.weight,o.style);if(h!=l[c]){var f=new createjs.Event("fileload");o.type="font-family",f.item=o,this.dispatchEvent(f),t.splice(a,1);break}}if(i!==t.length){var f=new createjs.ProgressEvent(this._count-t.length,this._count);this.dispatchEvent(f)}i===0&&(this._stopWatching(),this._sendComplete())},e._calculateReferenceSizes=function(t){for(var n=r._referenceFonts,i=t.refs=[],a=0;a<n.length;a++)i[a]=this._getTextWidth(n[a],t.weight,t.style)},e._defFromSrc=function(t){var n,i=/[- ._]+/g,a=t,o=null;n=a.search(/[?#]/),n!==-1&&(a=a.substr(0,n)),n=a.lastIndexOf("."),n!==-1&&(o=a.substr(n+1),a=a.substr(0,n)),n=a.lastIndexOf("/"),n!==-1&&(a=a.substr(n+1));var l=a,c=l.match(r.WEIGHT_REGEX);c&&(c=c[0],l=l.replace(c,""),c=c.replace(i,"").toLowerCase());var h=a.match(r.STYLE_REGEX);h&&(l=l.replace(h[0],""),h="italic"),l=l.replace(i,"");var f="local('"+a.replace(i," ")+"'), url('"+t+"')",m=r.FONT_FORMAT[o];return m&&(f+=" format('"+m+"')"),this._defFromObj({family:l,weight:r.FONT_WEIGHT[c]||c,style:h,src:f})},e._defFromObj=function(t){var n={family:t.family,src:t.src,style:t.style||"normal",weight:t.weight||"normal"};return n.id=n.family+";"+n.style+";"+n.weight,n},e._cssFromDef=function(t){return`@font-face {
	font-family: '`+t.family+`';
	font-style: `+t.style+`;
	font-weight: `+t.weight+`;
	src: `+t.src+`;
}`},e._getTextWidth=function(t,n,i){var a=r._ctx;return a.font=i+" "+n+" 72px "+t,a.measureText(r.sampleText).width},e._getCSSValue=function(t,n){var i=new RegExp(n+":s*([^;}]+?)s*[;}]"),a=i.exec(t);return a&&a[1]?a[1]:null},createjs.FontLoader=createjs.promote(r,"AbstractLoader")}(),globalThis.createjs=globalThis.createjs||{},function(){function r(n,i){this.AbstractLoader_constructor(n,i,createjs.Types.IMAGE),this.resultFormatter=this._formatResult,this._tagSrcAttribute="src",createjs.DomUtils.isImageTag(n)?this._tag=n:createjs.DomUtils.isImageTag(n.src)?this._tag=n.src:createjs.DomUtils.isImageTag(n.tag)&&(this._tag=n.tag),this._tag!=null?this._preferXHR=!1:this._tag=createjs.Elements.img(),this.on("initialize",this._updateXHR,this)}var e=createjs.extend(r,createjs.AbstractLoader),t=r;t.canLoadItem=function(n){return n.type==createjs.Types.IMAGE},e.load=function(){if(this._tag.src!=""&&this._tag.complete)return void this._sendComplete();var n=this._item.crossOrigin;n==1&&(n="Anonymous"),n==null||createjs.URLUtils.isLocal(this._item)||(this._tag.crossOrigin=n),this.AbstractLoader_load()},e._updateXHR=function(n){n.loader.mimeType="text/plain; charset=x-user-defined-binary",n.loader.setResponseType&&n.loader.setResponseType("blob")},e._formatResult=function(){return this._formatImage},e._formatImage=function(n,i){var a=this._tag,o=window.URL||window.webkitURL;if(this._preferXHR)if(o){var l=o.createObjectURL(this.getResult(!0));a.src=l,a.addEventListener("load",this._cleanUpURL,!1),a.addEventListener("error",this._cleanUpURL,!1)}else a.src=this._item.src;a.complete?n(a):(a.onload=createjs.proxy(function(){n(this._tag),a.onload=a.onerror=null},this),a.onerror=createjs.proxy(function(c){i(new createjs.ErrorEvent("IMAGE_FORMAT",null,c)),a.onload=a.onerror=null},this))},e._cleanUpURL=function(n){var i=window.URL||window.webkitURL;i.revokeObjectURL(n.target.src)},createjs.ImageLoader=createjs.promote(r,"AbstractLoader")}(),globalThis.createjs=globalThis.createjs||{},function(){function r(n,i){this.AbstractLoader_constructor(n,i,createjs.Types.JAVASCRIPT),this.resultFormatter=this._formatResult,this._tagSrcAttribute="src",this.setTag(createjs.Elements.script())}var e=createjs.extend(r,createjs.AbstractLoader),t=r;t.canLoadItem=function(n){return n.type==createjs.Types.JAVASCRIPT},e._formatResult=function(n){var i=n.getTag();return this._preferXHR&&(i.text=n.getResult(!0)),i},createjs.JavaScriptLoader=createjs.promote(r,"AbstractLoader")}(),globalThis.createjs=globalThis.createjs||{},function(){function r(n){this.AbstractLoader_constructor(n,!0,createjs.Types.JSON),this.resultFormatter=this._formatResult}var e=createjs.extend(r,createjs.AbstractLoader),t=r;t.canLoadItem=function(n){return n.type==createjs.Types.JSON},e._formatResult=function(n){var i=null;try{i=createjs.DataUtils.parseJSON(n.getResult(!0))}catch(o){var a=new createjs.ErrorEvent("JSON_FORMAT",null,o);return this._sendError(a),o}return i},createjs.JSONLoader=createjs.promote(r,"AbstractLoader")}(),globalThis.createjs=globalThis.createjs||{},function(){function r(n){this.AbstractLoader_constructor(n,!1,createjs.Types.JSONP),this.setTag(createjs.Elements.script()),this.getTag().type="text/javascript"}var e=createjs.extend(r,createjs.AbstractLoader),t=r;t.canLoadItem=function(n){return n.type==createjs.Types.JSONP},e.cancel=function(){this.AbstractLoader_cancel(),this._dispose()},e.load=function(){if(this._item.callback==null)throw new Error("callback is required for loading JSONP requests.");if(window[this._item.callback]!=null)throw new Error("JSONP callback '"+this._item.callback+"' already exists on window. You need to specify a different callback or re-name the current one.");window[this._item.callback]=createjs.proxy(this._handleLoad,this),createjs.DomUtils.appendToBody(this._tag),this._loadTimeout=setTimeout(createjs.proxy(this._handleTimeout,this),this._item.loadTimeout),this._tag.src=this._item.src},e._handleLoad=function(n){this._result=this._rawResult=n,this._sendComplete(),this._dispose()},e._handleTimeout=function(){this._dispose(),this.dispatchEvent(new createjs.ErrorEvent("timeout"))},e._dispose=function(){createjs.DomUtils.removeChild(this._tag),delete window[this._item.callback],clearTimeout(this._loadTimeout)},createjs.JSONPLoader=createjs.promote(r,"AbstractLoader")}(),globalThis.createjs=globalThis.createjs||{},function(){function r(n,i){this.AbstractLoader_constructor(n,i,createjs.Types.MANIFEST),this.plugins=null,this._manifestQueue=null}var e=createjs.extend(r,createjs.AbstractLoader),t=r;t.MANIFEST_PROGRESS=.25,t.canLoadItem=function(n){return n.type==createjs.Types.MANIFEST},e.load=function(){this.AbstractLoader_load()},e._createRequest=function(){var n=this._item.callback;this._request=n!=null?new createjs.JSONPLoader(this._item):new createjs.JSONLoader(this._item)},e.handleEvent=function(n){switch(n.type){case"complete":return this._rawResult=n.target.getResult(!0),this._result=n.target.getResult(),this._sendProgress(t.MANIFEST_PROGRESS),void this._loadManifest(this._result);case"progress":return n.loaded*=t.MANIFEST_PROGRESS,this.progress=n.loaded/n.total,(isNaN(this.progress)||1/0==this.progress)&&(this.progress=0),void this._sendProgress(n)}this.AbstractLoader_handleEvent(n)},e.destroy=function(){this.AbstractLoader_destroy(),this._manifestQueue.close()},e._loadManifest=function(n){if(n&&n.manifest){var i=this._manifestQueue=new createjs.LoadQueue(this._preferXHR);i.on("fileload",this._handleManifestFileLoad,this),i.on("progress",this._handleManifestProgress,this),i.on("complete",this._handleManifestComplete,this,!0),i.on("error",this._handleManifestError,this,!0);for(var a=0,o=this.plugins.length;o>a;a++)i.installPlugin(this.plugins[a]);i.loadManifest(n)}else this._sendComplete()},e._handleManifestFileLoad=function(n){n.target=null,this.dispatchEvent(n)},e._handleManifestComplete=function(){this._loadedItems=this._manifestQueue.getItems(!0),this._sendComplete()},e._handleManifestProgress=function(n){this.progress=n.progress*(1-t.MANIFEST_PROGRESS)+t.MANIFEST_PROGRESS,this._sendProgress(this.progress)},e._handleManifestError=function(n){var i=new createjs.Event("fileerror");i.item=n.data,this.dispatchEvent(i)},createjs.ManifestLoader=createjs.promote(r,"AbstractLoader")}(),globalThis.createjs=globalThis.createjs||{},function(){function r(n,i){this.AbstractMediaLoader_constructor(n,i,createjs.Types.SOUND),createjs.DomUtils.isAudioTag(n)?this._tag=n:createjs.DomUtils.isAudioTag(n.src)?this._tag=n:createjs.DomUtils.isAudioTag(n.tag)&&(this._tag=createjs.DomUtils.isAudioTag(n)?n:n.src),this._tag!=null&&(this._preferXHR=!1)}var e=createjs.extend(r,createjs.AbstractMediaLoader),t=r;t.canLoadItem=function(n){return n.type==createjs.Types.SOUND},e._createTag=function(n){var i=createjs.Elements.audio();return i.autoplay=!1,i.preload="none",i.src=n,i},createjs.SoundLoader=createjs.promote(r,"AbstractMediaLoader")}(),globalThis.createjs=globalThis.createjs||{},function(){function r(n,i){this.AbstractMediaLoader_constructor(n,i,createjs.Types.VIDEO),createjs.DomUtils.isVideoTag(n)||createjs.DomUtils.isVideoTag(n.src)?(this.setTag(createjs.DomUtils.isVideoTag(n)?n:n.src),this._preferXHR=!1):this.setTag(this._createTag())}var e=createjs.extend(r,createjs.AbstractMediaLoader),t=r;e._createTag=function(){return createjs.Elements.video()},t.canLoadItem=function(n){return n.type==createjs.Types.VIDEO},createjs.VideoLoader=createjs.promote(r,"AbstractMediaLoader")}(),globalThis.createjs=globalThis.createjs||{},function(){function r(n,i){this.AbstractLoader_constructor(n,i,createjs.Types.SPRITESHEET),this._manifestQueue=null}var e=createjs.extend(r,createjs.AbstractLoader),t=r;t.SPRITESHEET_PROGRESS=.25,t.canLoadItem=function(n){return n.type==createjs.Types.SPRITESHEET},e.destroy=function(){this.AbstractLoader_destroy(),this._manifestQueue.close()},e._createRequest=function(){var n=this._item.callback;this._request=n!=null?new createjs.JSONPLoader(this._item):new createjs.JSONLoader(this._item)},e.handleEvent=function(n){switch(n.type){case"complete":return this._rawResult=n.target.getResult(!0),this._result=n.target.getResult(),this._sendProgress(t.SPRITESHEET_PROGRESS),void this._loadManifest(this._result);case"progress":return n.loaded*=t.SPRITESHEET_PROGRESS,this.progress=n.loaded/n.total,(isNaN(this.progress)||1/0==this.progress)&&(this.progress=0),void this._sendProgress(n)}this.AbstractLoader_handleEvent(n)},e._loadManifest=function(n){if(n&&n.images){var i=this._manifestQueue=new createjs.LoadQueue(this._preferXHR,this._item.path,this._item.crossOrigin);i.on("complete",this._handleManifestComplete,this,!0),i.on("fileload",this._handleManifestFileLoad,this),i.on("progress",this._handleManifestProgress,this),i.on("error",this._handleManifestError,this,!0),i.loadManifest(n.images)}},e._handleManifestFileLoad=function(n){var i=n.result;if(i!=null){var a=this.getResult().images,o=a.indexOf(n.item.src);a[o]=i}},e._handleManifestComplete=function(){this._result=new createjs.SpriteSheet(this._result),this._loadedItems=this._manifestQueue.getItems(!0),this._sendComplete()},e._handleManifestProgress=function(n){this.progress=n.progress*(1-t.SPRITESHEET_PROGRESS)+t.SPRITESHEET_PROGRESS,this._sendProgress(this.progress)},e._handleManifestError=function(n){var i=new createjs.Event("fileerror");i.item=n.data,this.dispatchEvent(i)},createjs.SpriteSheetLoader=createjs.promote(r,"AbstractLoader")}(),globalThis.createjs=globalThis.createjs||{},function(){function r(n,i){this.AbstractLoader_constructor(n,i,createjs.Types.SVG),this.resultFormatter=this._formatResult,this._tagSrcAttribute="data",i?this.setTag(createjs.Elements.svg()):(this.setTag(createjs.Elements.object()),this.getTag().type="image/svg+xml")}var e=createjs.extend(r,createjs.AbstractLoader),t=r;t.canLoadItem=function(n){return n.type==createjs.Types.SVG},e._formatResult=function(n){var i=createjs.DataUtils.parseXML(n.getResult(!0)),a=n.getTag();if(!this._preferXHR&&document.body.contains(a)&&document.body.removeChild(a),i.documentElement!=null){var o=i.documentElement;return document.importNode&&(o=document.importNode(o,!0)),a.appendChild(o),a}return i},createjs.SVGLoader=createjs.promote(r,"AbstractLoader")}(),globalThis.createjs=globalThis.createjs||{},function(){function r(n){this.AbstractLoader_constructor(n,!0,createjs.Types.XML),this.resultFormatter=this._formatResult}var e=createjs.extend(r,createjs.AbstractLoader),t=r;t.canLoadItem=function(n){return n.type==createjs.Types.XML},e._formatResult=function(n){return createjs.DataUtils.parseXML(n.getResult(!0))},createjs.XMLLoader=createjs.promote(r,"AbstractLoader")}();var Mh="1.13.1",yd=typeof self=="object"&&self.self===self&&self||typeof global=="object"&&global.global===global&&global||Function("return this")()||{},sc=Array.prototype,Sh=Object.prototype,xd=typeof Symbol<"u"?Symbol.prototype:null,L0=sc.push,Do=sc.slice,fo=Sh.toString,R0=Sh.hasOwnProperty,vm=typeof ArrayBuffer<"u",P0=typeof DataView<"u",I0=Array.isArray,wd=Object.keys,bd=Object.create,Md=vm&&ArrayBuffer.isView,D0=isNaN,N0=isFinite,_m=!{toString:null}.propertyIsEnumerable("toString"),Sd=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],O0=Math.pow(2,53)-1;function Rn(r,e){return e=e==null?r.length-1:+e,function(){for(var t=Math.max(arguments.length-e,0),n=Array(t),i=0;i<t;i++)n[i]=arguments[i+e];switch(e){case 0:return r.call(this,n);case 1:return r.call(this,arguments[0],n);case 2:return r.call(this,arguments[0],arguments[1],n)}var a=Array(e+1);for(i=0;i<e;i++)a[i]=arguments[i];return a[e]=n,r.apply(this,a)}}function Ur(r){var e=typeof r;return e==="function"||e==="object"&&!!r}function ym(r){return r===null}function Th(r){return r===void 0}function Eh(r){return r===!0||r===!1||fo.call(r)==="[object Boolean]"}function xm(r){return!!(r&&r.nodeType===1)}function An(r){var e="[object "+r+"]";return function(t){return fo.call(t)===e}}const ac=An("String"),Ah=An("Number"),wm=An("Date"),bm=An("RegExp"),Mm=An("Error"),Ch=An("Symbol"),Lh=An("ArrayBuffer");var Sm=An("Function"),F0=yd.document&&yd.document.childNodes;typeof/./!="function"&&typeof Int8Array!="object"&&typeof F0!="function"&&(Sm=function(r){return typeof r=="function"||!1});const Tn=Sm,Tm=An("Object");var Em=P0&&Tm(new DataView(new ArrayBuffer(8))),Rh=typeof Map<"u"&&Tm(new Map),z0=An("DataView");function B0(r){return r!=null&&Tn(r.getInt8)&&Lh(r.buffer)}const po=Em?B0:z0,Hr=I0||An("Array");function Vr(r,e){return r!=null&&R0.call(r,e)}var ju=An("Arguments");(function(){ju(arguments)||(ju=function(r){return Vr(r,"callee")})})();const oc=ju;function Am(r){return!Ch(r)&&N0(r)&&!isNaN(parseFloat(r))}function Ph(r){return Ah(r)&&D0(r)}function Ih(r){return function(){return r}}function Cm(r){return function(e){var t=r(e);return typeof t=="number"&&t>=0&&t<=O0}}function Lm(r){return function(e){return e==null?void 0:e[r]}}const kl=Lm("byteLength"),k0=Cm(kl);var U0=/\[object ((I|Ui)nt(8|16|32)|Float(32|64)|Uint8Clamped|Big(I|Ui)nt64)Array\]/;function H0(r){return Md?Md(r)&&!po(r):k0(r)&&U0.test(fo.call(r))}const Dh=vm?H0:Ih(!1),Vn=Lm("length");function V0(r){for(var e={},t=r.length,n=0;n<t;++n)e[r[n]]=!0;return{contains:function(i){return e[i]},push:function(i){return e[i]=!0,r.push(i)}}}function Rm(r,e){e=V0(e);var t=Sd.length,n=r.constructor,i=Tn(n)&&n.prototype||Sh,a="constructor";for(Vr(r,a)&&!e.contains(a)&&e.push(a);t--;)a=Sd[t],a in r&&r[a]!==i[a]&&!e.contains(a)&&e.push(a)}function hn(r){if(!Ur(r))return[];if(wd)return wd(r);var e=[];for(var t in r)Vr(r,t)&&e.push(t);return _m&&Rm(r,e),e}function Pm(r){if(r==null)return!0;var e=Vn(r);return typeof e=="number"&&(Hr(r)||ac(r)||oc(r))?e===0:Vn(hn(r))===0}function Nh(r,e){var t=hn(e),n=t.length;if(r==null)return!n;for(var i=Object(r),a=0;a<n;a++){var o=t[a];if(e[o]!==i[o]||!(o in i))return!1}return!0}function Et(r){if(r instanceof Et)return r;if(!(this instanceof Et))return new Et(r);this._wrapped=r}Et.VERSION=Mh;Et.prototype.value=function(){return this._wrapped};Et.prototype.valueOf=Et.prototype.toJSON=Et.prototype.value;Et.prototype.toString=function(){return String(this._wrapped)};function Td(r){return new Uint8Array(r.buffer||r,r.byteOffset||0,kl(r))}var Ed="[object DataView]";function qu(r,e,t,n){if(r===e)return r!==0||1/r===1/e;if(r==null||e==null)return!1;if(r!==r)return e!==e;var i=typeof r;return i!=="function"&&i!=="object"&&typeof e!="object"?!1:Im(r,e,t,n)}function Im(r,e,t,n){r instanceof Et&&(r=r._wrapped),e instanceof Et&&(e=e._wrapped);var i=fo.call(r);if(i!==fo.call(e))return!1;if(Em&&i=="[object Object]"&&po(r)){if(!po(e))return!1;i=Ed}switch(i){case"[object RegExp]":case"[object String]":return""+r==""+e;case"[object Number]":return+r!=+r?+e!=+e:+r==0?1/+r===1/e:+r==+e;case"[object Date]":case"[object Boolean]":return+r==+e;case"[object Symbol]":return xd.valueOf.call(r)===xd.valueOf.call(e);case"[object ArrayBuffer]":case Ed:return Im(Td(r),Td(e),t,n)}var a=i==="[object Array]";if(!a&&Dh(r)){var o=kl(r);if(o!==kl(e))return!1;if(r.buffer===e.buffer&&r.byteOffset===e.byteOffset)return!0;a=!0}if(!a){if(typeof r!="object"||typeof e!="object")return!1;var l=r.constructor,c=e.constructor;if(l!==c&&!(Tn(l)&&l instanceof l&&Tn(c)&&c instanceof c)&&"constructor"in r&&"constructor"in e)return!1}t=t||[],n=n||[];for(var h=t.length;h--;)if(t[h]===r)return n[h]===e;if(t.push(r),n.push(e),a){if(h=r.length,h!==e.length)return!1;for(;h--;)if(!qu(r[h],e[h],t,n))return!1}else{var f=hn(r),m;if(h=f.length,hn(e).length!==h)return!1;for(;h--;)if(m=f[h],!(Vr(e,m)&&qu(r[m],e[m],t,n)))return!1}return t.pop(),n.pop(),!0}function Dm(r,e){return qu(r,e)}function xa(r){if(!Ur(r))return[];var e=[];for(var t in r)e.push(t);return _m&&Rm(r,e),e}function Oh(r){var e=Vn(r);return function(t){if(t==null)return!1;var n=xa(t);if(Vn(n))return!1;for(var i=0;i<e;i++)if(!Tn(t[r[i]]))return!1;return r!==Fm||!Tn(t[Fh])}}var Fh="forEach",Nm="has",zh=["clear","delete"],Om=["get",Nm,"set"],G0=zh.concat(Fh,Om),Fm=zh.concat(Om),W0=["add"].concat(zh,Fh,Nm);const zm=Rh?Oh(G0):An("Map"),Bm=Rh?Oh(Fm):An("WeakMap"),km=Rh?Oh(W0):An("Set"),Um=An("WeakSet");function Dr(r){for(var e=hn(r),t=e.length,n=Array(t),i=0;i<t;i++)n[i]=r[e[i]];return n}function Hm(r){for(var e=hn(r),t=e.length,n=Array(t),i=0;i<t;i++)n[i]=[e[i],r[e[i]]];return n}function Bh(r){for(var e={},t=hn(r),n=0,i=t.length;n<i;n++)e[r[t[n]]]=t[n];return e}function mo(r){var e=[];for(var t in r)Tn(r[t])&&e.push(t);return e.sort()}function kh(r,e){return function(t){var n=arguments.length;if(e&&(t=Object(t)),n<2||t==null)return t;for(var i=1;i<n;i++)for(var a=arguments[i],o=r(a),l=o.length,c=0;c<l;c++){var h=o[c];(!e||t[h]===void 0)&&(t[h]=a[h])}return t}}const Uh=kh(xa),la=kh(hn),Hh=kh(xa,!0);function j0(){return function(){}}function Vm(r){if(!Ur(r))return{};if(bd)return bd(r);var e=j0();e.prototype=r;var t=new e;return e.prototype=null,t}function Gm(r,e){var t=Vm(r);return e&&la(t,e),t}function Vh(r){return Ur(r)?Hr(r)?r.slice():Uh({},r):r}function Wm(r,e){return e(r),r}function Gh(r){return Hr(r)?r:[r]}Et.toPath=Gh;function No(r){return Et.toPath(r)}function Wh(r,e){for(var t=e.length,n=0;n<t;n++){if(r==null)return;r=r[e[n]]}return t?r:void 0}function jh(r,e,t){var n=Wh(r,No(e));return Th(n)?t:n}function jm(r,e){e=No(e);for(var t=e.length,n=0;n<t;n++){var i=e[n];if(!Vr(r,i))return!1;r=r[i]}return!!t}function lc(r){return r}function gs(r){return r=la({},r),function(e){return Nh(e,r)}}function cc(r){return r=No(r),function(e){return Wh(e,r)}}function Oo(r,e,t){if(e===void 0)return r;switch(t??3){case 1:return function(n){return r.call(e,n)};case 3:return function(n,i,a){return r.call(e,n,i,a)};case 4:return function(n,i,a,o){return r.call(e,n,i,a,o)}}return function(){return r.apply(e,arguments)}}function qm(r,e,t){return r==null?lc:Tn(r)?Oo(r,e,t):Ur(r)&&!Hr(r)?gs(r):cc(r)}function uc(r,e){return qm(r,e,1/0)}Et.iteratee=uc;function Xn(r,e,t){return Et.iteratee!==uc?Et.iteratee(r,e):qm(r,e,t)}function Xm(r,e,t){e=Xn(e,t);for(var n=hn(r),i=n.length,a={},o=0;o<i;o++){var l=n[o];a[l]=e(r[l],l,r)}return a}function qh(){}function Ym(r){return r==null?qh:function(e){return jh(r,e)}}function $m(r,e,t){var n=Array(Math.max(0,r));e=Oo(e,t,1);for(var i=0;i<r;i++)n[i]=e(i);return n}function Ul(r,e){return e==null&&(e=r,r=0),r+Math.floor(Math.random()*(e-r+1))}const ca=Date.now||function(){return new Date().getTime()};function Jm(r){var e=function(a){return r[a]},t="(?:"+hn(r).join("|")+")",n=RegExp(t),i=RegExp(t,"g");return function(a){return a=a==null?"":""+a,n.test(a)?a.replace(i,e):a}}const Zm={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},Qm=Jm(Zm),q0=Bh(Zm),Km=Jm(q0),eg=Et.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var $c=/(.)^/,X0={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},Y0=/\\|'|\r|\n|\u2028|\u2029/g;function $0(r){return"\\"+X0[r]}var J0=/^\s*(\w|\$)+\s*$/;function tg(r,e,t){!e&&t&&(e=t),e=Hh({},e,Et.templateSettings);var n=RegExp([(e.escape||$c).source,(e.interpolate||$c).source,(e.evaluate||$c).source].join("|")+"|$","g"),i=0,a="__p+='";r.replace(n,function(h,f,m,g,_){return a+=r.slice(i,_).replace(Y0,$0),i=_+h.length,f?a+=`'+
((__t=(`+f+`))==null?'':_.escape(__t))+
'`:m?a+=`'+
((__t=(`+m+`))==null?'':__t)+
'`:g&&(a+=`';
`+g+`
__p+='`),h}),a+=`';
`;var o=e.variable;if(o){if(!J0.test(o))throw new Error("variable is not a bare identifier: "+o)}else a=`with(obj||{}){
`+a+`}
`,o="obj";a=`var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};
`+a+`return __p;
`;var l;try{l=new Function(o,"_",a)}catch(h){throw h.source=a,h}var c=function(h){return l.call(this,h,Et)};return c.source="function("+o+`){
`+a+"}",c}function ng(r,e,t){e=No(e);var n=e.length;if(!n)return Tn(t)?t.call(r):t;for(var i=0;i<n;i++){var a=r==null?void 0:r[e[i]];a===void 0&&(a=t,i=n),r=Tn(a)?a.call(r):a}return r}var Z0=0;function ig(r){var e=++Z0+"";return r?r+e:e}function rg(r){var e=Et(r);return e._chain=!0,e}function sg(r,e,t,n,i){if(!(n instanceof e))return r.apply(t,i);var a=Vm(r.prototype),o=r.apply(a,i);return Ur(o)?o:a}var ys=Rn(function(r,e){var t=ys.placeholder,n=function(){for(var i=0,a=e.length,o=Array(a),l=0;l<a;l++)o[l]=e[l]===t?arguments[i++]:e[l];for(;i<arguments.length;)o.push(arguments[i++]);return sg(r,n,this,this,o)};return n});ys.placeholder=Et;const Xh=Rn(function(r,e,t){if(!Tn(r))throw new TypeError("Bind must be called on a function");var n=Rn(function(i){return sg(r,n,e,this,t.concat(i))});return n}),Gn=Cm(Vn);function xs(r,e,t,n){if(n=n||[],!e&&e!==0)e=1/0;else if(e<=0)return n.concat(r);for(var i=n.length,a=0,o=Vn(r);a<o;a++){var l=r[a];if(Gn(l)&&(Hr(l)||oc(l)))if(e>1)xs(l,e-1,t,n),i=n.length;else for(var c=0,h=l.length;c<h;)n[i++]=l[c++];else t||(n[i++]=l)}return n}const ag=Rn(function(r,e){e=xs(e,!1,!1);var t=e.length;if(t<1)throw new Error("bindAll must be passed function names");for(;t--;){var n=e[t];r[n]=Xh(r[n],r)}return r});function og(r,e){var t=function(n){var i=t.cache,a=""+(e?e.apply(this,arguments):n);return Vr(i,a)||(i[a]=r.apply(this,arguments)),i[a]};return t.cache={},t}const Yh=Rn(function(r,e,t){return setTimeout(function(){return r.apply(null,t)},e)}),lg=ys(Yh,Et,1);function cg(r,e,t){var n,i,a,o,l=0;t||(t={});var c=function(){l=t.leading===!1?0:ca(),n=null,o=r.apply(i,a),n||(i=a=null)},h=function(){var f=ca();!l&&t.leading===!1&&(l=f);var m=e-(f-l);return i=this,a=arguments,m<=0||m>e?(n&&(clearTimeout(n),n=null),l=f,o=r.apply(i,a),n||(i=a=null)):!n&&t.trailing!==!1&&(n=setTimeout(c,m)),o};return h.cancel=function(){clearTimeout(n),l=0,n=i=a=null},h}function ug(r,e,t){var n,i,a,o,l,c=function(){var f=ca()-i;e>f?n=setTimeout(c,e-f):(n=null,t||(o=r.apply(l,a)),n||(a=l=null))},h=Rn(function(f){return l=this,a=f,i=ca(),n||(n=setTimeout(c,e),t&&(o=r.apply(l,a))),o});return h.cancel=function(){clearTimeout(n),n=a=l=null},h}function hg(r,e){return ys(e,r)}function hc(r){return function(){return!r.apply(this,arguments)}}function fg(){var r=arguments,e=r.length-1;return function(){for(var t=e,n=r[e].apply(this,arguments);t--;)n=r[t].call(this,n);return n}}function dg(r,e){return function(){if(--r<1)return e.apply(this,arguments)}}function $h(r,e){var t;return function(){return--r>0&&(t=e.apply(this,arguments)),r<=1&&(e=null),t}}const pg=ys($h,2);function Jh(r,e,t){e=Xn(e,t);for(var n=hn(r),i,a=0,o=n.length;a<o;a++)if(i=n[a],e(r[i],i,r))return i}function mg(r){return function(e,t,n){t=Xn(t,n);for(var i=Vn(e),a=r>0?0:i-1;a>=0&&a<i;a+=r)if(t(e[a],a,e))return a;return-1}}const fc=mg(1),Zh=mg(-1);function Qh(r,e,t,n){t=Xn(t,n,1);for(var i=t(e),a=0,o=Vn(r);a<o;){var l=Math.floor((a+o)/2);t(r[l])<i?a=l+1:o=l}return a}function gg(r,e,t){return function(n,i,a){var o=0,l=Vn(n);if(typeof a=="number")r>0?o=a>=0?a:Math.max(a+l,o):l=a>=0?Math.min(a+1,l):a+l+1;else if(t&&a&&l)return a=t(n,i),n[a]===i?a:-1;if(i!==i)return a=e(Do.call(n,o,l),Ph),a>=0?a+o:-1;for(a=r>0?o:l-1;a>=0&&a<l;a+=r)if(n[a]===i)return a;return-1}}const Kh=gg(1,fc,Qh),vg=gg(-1,Zh);function go(r,e,t){var n=Gn(r)?fc:Jh,i=n(r,e,t);if(i!==void 0&&i!==-1)return r[i]}function _g(r,e){return go(r,gs(e))}function Li(r,e,t){e=Oo(e,t);var n,i;if(Gn(r))for(n=0,i=r.length;n<i;n++)e(r[n],n,r);else{var a=hn(r);for(n=0,i=a.length;n<i;n++)e(r[a[n]],a[n],r)}return r}function or(r,e,t){e=Xn(e,t);for(var n=!Gn(r)&&hn(r),i=(n||r).length,a=Array(i),o=0;o<i;o++){var l=n?n[o]:o;a[o]=e(r[l],l,r)}return a}function yg(r){var e=function(t,n,i,a){var o=!Gn(t)&&hn(t),l=(o||t).length,c=r>0?0:l-1;for(a||(i=t[o?o[c]:c],c+=r);c>=0&&c<l;c+=r){var h=o?o[c]:c;i=n(i,t[h],h,t)}return i};return function(t,n,i,a){var o=arguments.length>=3;return e(t,Oo(n,a,4),i,o)}}const ea=yg(1),Hl=yg(-1);function Nr(r,e,t){var n=[];return e=Xn(e,t),Li(r,function(i,a,o){e(i,a,o)&&n.push(i)}),n}function xg(r,e,t){return Nr(r,hc(Xn(e)),t)}function Vl(r,e,t){e=Xn(e,t);for(var n=!Gn(r)&&hn(r),i=(n||r).length,a=0;a<i;a++){var o=n?n[a]:a;if(!e(r[o],o,r))return!1}return!0}function Gl(r,e,t){e=Xn(e,t);for(var n=!Gn(r)&&hn(r),i=(n||r).length,a=0;a<i;a++){var o=n?n[a]:a;if(e(r[o],o,r))return!0}return!1}function gi(r,e,t,n){return Gn(r)||(r=Dr(r)),(typeof t!="number"||n)&&(t=0),Kh(r,e,t)>=0}const wg=Rn(function(r,e,t){var n,i;return Tn(e)?i=e:(e=No(e),n=e.slice(0,-1),e=e[e.length-1]),or(r,function(a){var o=i;if(!o){if(n&&n.length&&(a=Wh(a,n)),a==null)return;o=a[e]}return o==null?o:o.apply(a,t)})});function dc(r,e){return or(r,cc(e))}function bg(r,e){return Nr(r,gs(e))}function ef(r,e,t){var n=-1/0,i=-1/0,a,o;if(e==null||typeof e=="number"&&typeof r[0]!="object"&&r!=null){r=Gn(r)?r:Dr(r);for(var l=0,c=r.length;l<c;l++)a=r[l],a!=null&&a>n&&(n=a)}else e=Xn(e,t),Li(r,function(h,f,m){o=e(h,f,m),(o>i||o===-1/0&&n===-1/0)&&(n=h,i=o)});return n}function Mg(r,e,t){var n=1/0,i=1/0,a,o;if(e==null||typeof e=="number"&&typeof r[0]!="object"&&r!=null){r=Gn(r)?r:Dr(r);for(var l=0,c=r.length;l<c;l++)a=r[l],a!=null&&a<n&&(n=a)}else e=Xn(e,t),Li(r,function(h,f,m){o=e(h,f,m),(o<i||o===1/0&&n===1/0)&&(n=h,i=o)});return n}function tf(r,e,t){if(e==null||t)return Gn(r)||(r=Dr(r)),r[Ul(r.length-1)];var n=Gn(r)?Vh(r):Dr(r),i=Vn(n);e=Math.max(Math.min(e,i),0);for(var a=i-1,o=0;o<e;o++){var l=Ul(o,a),c=n[o];n[o]=n[l],n[l]=c}return n.slice(0,e)}function Sg(r){return tf(r,1/0)}function Tg(r,e,t){var n=0;return e=Xn(e,t),dc(or(r,function(i,a,o){return{value:i,index:n++,criteria:e(i,a,o)}}).sort(function(i,a){var o=i.criteria,l=a.criteria;if(o!==l){if(o>l||o===void 0)return 1;if(o<l||l===void 0)return-1}return i.index-a.index}),"value")}function pc(r,e){return function(t,n,i){var a=e?[[],[]]:{};return n=Xn(n,i),Li(t,function(o,l){var c=n(o,l,t);r(a,o,c)}),a}}const Eg=pc(function(r,e,t){Vr(r,t)?r[t].push(e):r[t]=[e]}),Ag=pc(function(r,e,t){r[t]=e}),Cg=pc(function(r,e,t){Vr(r,t)?r[t]++:r[t]=1}),Lg=pc(function(r,e,t){r[t?0:1].push(e)},!0);var Q0=/[^\ud800-\udfff]|[\ud800-\udbff][\udc00-\udfff]|[\ud800-\udfff]/g;function Rg(r){return r?Hr(r)?Do.call(r):ac(r)?r.match(Q0):Gn(r)?or(r,lc):Dr(r):[]}function Pg(r){return r==null?0:Gn(r)?r.length:hn(r).length}function K0(r,e,t){return e in t}const nf=Rn(function(r,e){var t={},n=e[0];if(r==null)return t;Tn(n)?(e.length>1&&(n=Oo(n,e[1])),e=xa(r)):(n=K0,e=xs(e,!1,!1),r=Object(r));for(var i=0,a=e.length;i<a;i++){var o=e[i],l=r[o];n(l,o,r)&&(t[o]=l)}return t}),Ig=Rn(function(r,e){var t=e[0],n;return Tn(t)?(t=hc(t),e.length>1&&(n=e[1])):(e=or(xs(e,!1,!1),String),t=function(i,a){return!gi(e,a)}),nf(r,t,n)});function rf(r,e,t){return Do.call(r,0,Math.max(0,r.length-(e==null||t?1:e)))}function ta(r,e,t){return r==null||r.length<1?e==null||t?void 0:[]:e==null||t?r[0]:rf(r,r.length-e)}function ls(r,e,t){return Do.call(r,e==null||t?1:e)}function Dg(r,e,t){return r==null||r.length<1?e==null||t?void 0:[]:e==null||t?r[r.length-1]:ls(r,Math.max(0,r.length-e))}function Ng(r){return Nr(r,Boolean)}function Og(r,e){return xs(r,e,!1)}const sf=Rn(function(r,e){return e=xs(e,!0,!0),Nr(r,function(t){return!gi(e,t)})}),Fg=Rn(function(r,e){return sf(r,e)});function vo(r,e,t,n){Eh(e)||(n=t,t=e,e=!1),t!=null&&(t=Xn(t,n));for(var i=[],a=[],o=0,l=Vn(r);o<l;o++){var c=r[o],h=t?t(c,o,r):c;e&&!t?((!o||a!==h)&&i.push(c),a=h):t?gi(a,h)||(a.push(h),i.push(c)):gi(i,c)||i.push(c)}return i}const zg=Rn(function(r){return vo(xs(r,!0,!0))});function Bg(r){for(var e=[],t=arguments.length,n=0,i=Vn(r);n<i;n++){var a=r[n];if(!gi(e,a)){var o;for(o=1;o<t&&gi(arguments[o],a);o++);o===t&&e.push(a)}}return e}function _o(r){for(var e=r&&ef(r,Vn).length||0,t=Array(e),n=0;n<e;n++)t[n]=dc(r,n);return t}const kg=Rn(_o);function Ug(r,e){for(var t={},n=0,i=Vn(r);n<i;n++)e?t[r[n]]=e[n]:t[r[n][0]]=r[n][1];return t}function Hg(r,e,t){e==null&&(e=r||0,r=0),t||(t=e<r?-1:1);for(var n=Math.max(Math.ceil((e-r)/t),0),i=Array(n),a=0;a<n;a++,r+=t)i[a]=r;return i}function Vg(r,e){if(e==null||e<1)return[];for(var t=[],n=0,i=r.length;n<i;)t.push(Do.call(r,n,n+=e));return t}function af(r,e){return r._chain?Et(e).chain():e}function of(r){return Li(mo(r),function(e){var t=Et[e]=r[e];Et.prototype[e]=function(){var n=[this._wrapped];return L0.apply(n,arguments),af(this,t.apply(Et,n))}}),Et}Li(["pop","push","reverse","shift","sort","splice","unshift"],function(r){var e=sc[r];Et.prototype[r]=function(){var t=this._wrapped;return t!=null&&(e.apply(t,arguments),(r==="shift"||r==="splice")&&t.length===0&&delete t[0]),af(this,t)}});Li(["concat","join","slice"],function(r){var e=sc[r];Et.prototype[r]=function(){var t=this._wrapped;return t!=null&&(t=e.apply(t,arguments)),af(this,t)}});const ey=Object.freeze(Object.defineProperty({__proto__:null,VERSION:Mh,after:dg,all:Vl,allKeys:xa,any:Gl,assign:la,before:$h,bind:Xh,bindAll:ag,chain:rg,chunk:Vg,clone:Vh,collect:or,compact:Ng,compose:fg,constant:Ih,contains:gi,countBy:Cg,create:Gm,debounce:ug,default:Et,defaults:Hh,defer:lg,delay:Yh,detect:go,difference:sf,drop:ls,each:Li,escape:Qm,every:Vl,extend:Uh,extendOwn:la,filter:Nr,find:go,findIndex:fc,findKey:Jh,findLastIndex:Zh,findWhere:_g,first:ta,flatten:Og,foldl:ea,foldr:Hl,forEach:Li,functions:mo,get:jh,groupBy:Eg,has:jm,head:ta,identity:lc,include:gi,includes:gi,indexBy:Ag,indexOf:Kh,initial:rf,inject:ea,intersection:Bg,invert:Bh,invoke:wg,isArguments:oc,isArray:Hr,isArrayBuffer:Lh,isBoolean:Eh,isDataView:po,isDate:wm,isElement:xm,isEmpty:Pm,isEqual:Dm,isError:Mm,isFinite:Am,isFunction:Tn,isMap:zm,isMatch:Nh,isNaN:Ph,isNull:ym,isNumber:Ah,isObject:Ur,isRegExp:bm,isSet:km,isString:ac,isSymbol:Ch,isTypedArray:Dh,isUndefined:Th,isWeakMap:Bm,isWeakSet:Um,iteratee:uc,keys:hn,last:Dg,lastIndexOf:vg,map:or,mapObject:Xm,matcher:gs,matches:gs,max:ef,memoize:og,methods:mo,min:Mg,mixin:of,negate:hc,noop:qh,now:ca,object:Ug,omit:Ig,once:pg,pairs:Hm,partial:ys,partition:Lg,pick:nf,pluck:dc,property:cc,propertyOf:Ym,random:Ul,range:Hg,reduce:ea,reduceRight:Hl,reject:xg,rest:ls,restArguments:Rn,result:ng,sample:tf,select:Nr,shuffle:Sg,size:Pg,some:Gl,sortBy:Tg,sortedIndex:Qh,tail:ls,take:ta,tap:Wm,template:tg,templateSettings:eg,throttle:cg,times:$m,toArray:Rg,toPath:Gh,transpose:_o,unescape:Km,union:zg,uniq:vo,unique:vo,uniqueId:ig,unzip:_o,values:Dr,where:bg,without:Fg,wrap:hg,zip:kg},Symbol.toStringTag,{value:"Module"}));var lt=of(ey);lt._=lt;const ty=Object.freeze(Object.defineProperty({__proto__:null,VERSION:Mh,after:dg,all:Vl,allKeys:xa,any:Gl,assign:la,before:$h,bind:Xh,bindAll:ag,chain:rg,chunk:Vg,clone:Vh,collect:or,compact:Ng,compose:fg,constant:Ih,contains:gi,countBy:Cg,create:Gm,debounce:ug,default:lt,defaults:Hh,defer:lg,delay:Yh,detect:go,difference:sf,drop:ls,each:Li,escape:Qm,every:Vl,extend:Uh,extendOwn:la,filter:Nr,find:go,findIndex:fc,findKey:Jh,findLastIndex:Zh,findWhere:_g,first:ta,flatten:Og,foldl:ea,foldr:Hl,forEach:Li,functions:mo,get:jh,groupBy:Eg,has:jm,head:ta,identity:lc,include:gi,includes:gi,indexBy:Ag,indexOf:Kh,initial:rf,inject:ea,intersection:Bg,invert:Bh,invoke:wg,isArguments:oc,isArray:Hr,isArrayBuffer:Lh,isBoolean:Eh,isDataView:po,isDate:wm,isElement:xm,isEmpty:Pm,isEqual:Dm,isError:Mm,isFinite:Am,isFunction:Tn,isMap:zm,isMatch:Nh,isNaN:Ph,isNull:ym,isNumber:Ah,isObject:Ur,isRegExp:bm,isSet:km,isString:ac,isSymbol:Ch,isTypedArray:Dh,isUndefined:Th,isWeakMap:Bm,isWeakSet:Um,iteratee:uc,keys:hn,last:Dg,lastIndexOf:vg,map:or,mapObject:Xm,matcher:gs,matches:gs,max:ef,memoize:og,methods:mo,min:Mg,mixin:of,negate:hc,noop:qh,now:ca,object:Ug,omit:Ig,once:pg,pairs:Hm,partial:ys,partition:Lg,pick:nf,pluck:dc,property:cc,propertyOf:Ym,random:Ul,range:Hg,reduce:ea,reduceRight:Hl,reject:xg,rest:ls,restArguments:Rn,result:ng,sample:tf,select:Nr,shuffle:Sg,size:Pg,some:Gl,sortBy:Tg,sortedIndex:Qh,tail:ls,take:ta,tap:Wm,template:tg,templateSettings:eg,throttle:cg,times:$m,toArray:Rg,toPath:Gh,transpose:_o,unescape:Km,union:zg,uniq:vo,unique:vo,uniqueId:ig,unzip:_o,values:Dr,where:bg,without:Fg,wrap:hg,zip:kg},Symbol.toStringTag,{value:"Module"}));var Qa=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Gg(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}function ny(r){if(r.__esModule)return r;var e=r.default;if(typeof e=="function"){var t=function n(){return this instanceof n?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(r).forEach(function(n){var i=Object.getOwnPropertyDescriptor(r,n);Object.defineProperty(t,n,i.get?i:{enumerable:!0,get:function(){return r[n]}})}),t}var Wg={};const iy=ny(ty);var Jc={exports:{}};/*!
 * jQuery JavaScript Library v3.6.0
 * https://jquery.com/
 *
 * Includes Sizzle.js
 * https://sizzlejs.com/
 *
 * Copyright OpenJS Foundation and other contributors
 * Released under the MIT license
 * https://jquery.org/license
 *
 * Date: 2021-03-02T17:08Z
 */var Ad;function jg(){return Ad||(Ad=1,function(r){(function(e,t){r.exports=e.document?t(e,!0):function(n){if(!n.document)throw new Error("jQuery requires a window with a document");return t(n)}})(typeof window<"u"?window:Qa,function(e,t){var n=[],i=Object.getPrototypeOf,a=n.slice,o=n.flat?function(u){return n.flat.call(u)}:function(u){return n.concat.apply([],u)},l=n.push,c=n.indexOf,h={},f=h.toString,m=h.hasOwnProperty,g=m.toString,_=g.call(Object),M={},x=function(d){return typeof d=="function"&&typeof d.nodeType!="number"&&typeof d.item!="function"},C=function(d){return d!=null&&d===d.window},y=e.document,b={type:!0,src:!0,nonce:!0,noModule:!0};function O(u,d,v){v=v||y;var w,T,A=v.createElement("script");if(A.text=u,d)for(w in b)T=d[w]||d.getAttribute&&d.getAttribute(w),T&&A.setAttribute(w,T);v.head.appendChild(A).parentNode.removeChild(A)}function P(u){return u==null?u+"":typeof u=="object"||typeof u=="function"?h[f.call(u)]||"object":typeof u}var F="3.6.0",p=function(u,d){return new p.fn.init(u,d)};p.fn=p.prototype={jquery:F,constructor:p,length:0,toArray:function(){return a.call(this)},get:function(u){return u==null?a.call(this):u<0?this[u+this.length]:this[u]},pushStack:function(u){var d=p.merge(this.constructor(),u);return d.prevObject=this,d},each:function(u){return p.each(this,u)},map:function(u){return this.pushStack(p.map(this,function(d,v){return u.call(d,v,d)}))},slice:function(){return this.pushStack(a.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(p.grep(this,function(u,d){return(d+1)%2}))},odd:function(){return this.pushStack(p.grep(this,function(u,d){return d%2}))},eq:function(u){var d=this.length,v=+u+(u<0?d:0);return this.pushStack(v>=0&&v<d?[this[v]]:[])},end:function(){return this.prevObject||this.constructor()},push:l,sort:n.sort,splice:n.splice},p.extend=p.fn.extend=function(){var u,d,v,w,T,A,I=arguments[0]||{},V=1,G=arguments.length,K=!1;for(typeof I=="boolean"&&(K=I,I=arguments[V]||{},V++),typeof I!="object"&&!x(I)&&(I={}),V===G&&(I=this,V--);V<G;V++)if((u=arguments[V])!=null)for(d in u)w=u[d],!(d==="__proto__"||I===w)&&(K&&w&&(p.isPlainObject(w)||(T=Array.isArray(w)))?(v=I[d],T&&!Array.isArray(v)?A=[]:!T&&!p.isPlainObject(v)?A={}:A=v,T=!1,I[d]=p.extend(K,A,w)):w!==void 0&&(I[d]=w));return I},p.extend({expando:"jQuery"+(F+Math.random()).replace(/\D/g,""),isReady:!0,error:function(u){throw new Error(u)},noop:function(){},isPlainObject:function(u){var d,v;return!u||f.call(u)!=="[object Object]"?!1:(d=i(u),d?(v=m.call(d,"constructor")&&d.constructor,typeof v=="function"&&g.call(v)===_):!0)},isEmptyObject:function(u){var d;for(d in u)return!1;return!0},globalEval:function(u,d,v){O(u,{nonce:d&&d.nonce},v)},each:function(u,d){var v,w=0;if(L(u))for(v=u.length;w<v&&d.call(u[w],w,u[w])!==!1;w++);else for(w in u)if(d.call(u[w],w,u[w])===!1)break;return u},makeArray:function(u,d){var v=d||[];return u!=null&&(L(Object(u))?p.merge(v,typeof u=="string"?[u]:u):l.call(v,u)),v},inArray:function(u,d,v){return d==null?-1:c.call(d,u,v)},merge:function(u,d){for(var v=+d.length,w=0,T=u.length;w<v;w++)u[T++]=d[w];return u.length=T,u},grep:function(u,d,v){for(var w,T=[],A=0,I=u.length,V=!v;A<I;A++)w=!d(u[A],A),w!==V&&T.push(u[A]);return T},map:function(u,d,v){var w,T,A=0,I=[];if(L(u))for(w=u.length;A<w;A++)T=d(u[A],A,v),T!=null&&I.push(T);else for(A in u)T=d(u[A],A,v),T!=null&&I.push(T);return o(I)},guid:1,support:M}),typeof Symbol=="function"&&(p.fn[Symbol.iterator]=n[Symbol.iterator]),p.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(u,d){h["[object "+d+"]"]=d.toLowerCase()});function L(u){var d=!!u&&"length"in u&&u.length,v=P(u);return x(u)||C(u)?!1:v==="array"||d===0||typeof d=="number"&&d>0&&d-1 in u}var W=function(u){var d,v,w,T,A,I,V,G,K,he,Ae,le,ve,je,ct,qe,an,nn,Yn,Rt="sizzle"+1*new Date,ot=u.document,Dn=0,yt=0,Wt=Qo(),Fa=Qo(),$o=Qo(),$n=Qo(),Yr=function(N,U){return N===U&&(Ae=!0),0},$r={}.hasOwnProperty,Nn=[],dr=Nn.pop,oi=Nn.push,pr=Nn.push,ud=Nn.slice,Jr=function(N,U){for(var $=0,_e=N.length;$<_e;$++)if(N[$]===U)return $;return-1},Hc="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",Tt="[\\x20\\t\\r\\n\\f]",Zr="(?:\\\\[\\da-fA-F]{1,6}"+Tt+"?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",hd="\\["+Tt+"*("+Zr+")(?:"+Tt+"*([*^$|!~]?=)"+Tt+`*(?:'((?:\\\\.|[^\\\\'])*)'|"((?:\\\\.|[^\\\\"])*)"|(`+Zr+"))|)"+Tt+"*\\]",Vc=":("+Zr+`)(?:\\((('((?:\\\\.|[^\\\\'])*)'|"((?:\\\\.|[^\\\\"])*)")|((?:\\\\.|[^\\\\()[\\]]|`+hd+")*)|.*)\\)|)",p0=new RegExp(Tt+"+","g"),Jo=new RegExp("^"+Tt+"+|((?:^|[^\\\\])(?:\\\\.)*)"+Tt+"+$","g"),m0=new RegExp("^"+Tt+"*,"+Tt+"*"),fd=new RegExp("^"+Tt+"*([>+~]|"+Tt+")"+Tt+"*"),g0=new RegExp(Tt+"|>"),v0=new RegExp(Vc),_0=new RegExp("^"+Zr+"$"),Zo={ID:new RegExp("^#("+Zr+")"),CLASS:new RegExp("^\\.("+Zr+")"),TAG:new RegExp("^("+Zr+"|[*])"),ATTR:new RegExp("^"+hd),PSEUDO:new RegExp("^"+Vc),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+Tt+"*(even|odd|(([+-]|)(\\d*)n|)"+Tt+"*(?:([+-]|)"+Tt+"*(\\d+)|))"+Tt+"*\\)|)","i"),bool:new RegExp("^(?:"+Hc+")$","i"),needsContext:new RegExp("^"+Tt+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+Tt+"*((?:-\\d)?\\d*)"+Tt+"*\\)|)(?=[^-]|$)","i")},y0=/HTML$/i,x0=/^(?:input|select|textarea|button)$/i,w0=/^h\d$/i,za=/^[^{]+\{\s*\[native \w/,b0=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,Gc=/[+~]/,Ji=new RegExp("\\\\[\\da-fA-F]{1,6}"+Tt+"?|\\\\([^\\r\\n\\f])","g"),Zi=function(N,U){var $="0x"+N.slice(1)-65536;return U||($<0?String.fromCharCode($+65536):String.fromCharCode($>>10|55296,$&1023|56320))},dd=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,pd=function(N,U){return U?N==="\0"?"":N.slice(0,-1)+"\\"+N.charCodeAt(N.length-1).toString(16)+" ":"\\"+N},md=function(){le()},M0=el(function(N){return N.disabled===!0&&N.nodeName.toLowerCase()==="fieldset"},{dir:"parentNode",next:"legend"});try{pr.apply(Nn=ud.call(ot.childNodes),ot.childNodes),Nn[ot.childNodes.length].nodeType}catch{pr={apply:Nn.length?function(U,$){oi.apply(U,ud.call($))}:function(U,$){for(var _e=U.length,ee=0;U[_e++]=$[ee++];);U.length=_e-1}}}function It(N,U,$,_e){var ee,we,Ce,Fe,Ve,Ke,Ze,tt=U&&U.ownerDocument,dt=U?U.nodeType:9;if($=$||[],typeof N!="string"||!N||dt!==1&&dt!==9&&dt!==11)return $;if(!_e&&(le(U),U=U||ve,ct)){if(dt!==11&&(Ve=b0.exec(N)))if(ee=Ve[1]){if(dt===9)if(Ce=U.getElementById(ee)){if(Ce.id===ee)return $.push(Ce),$}else return $;else if(tt&&(Ce=tt.getElementById(ee))&&Yn(U,Ce)&&Ce.id===ee)return $.push(Ce),$}else{if(Ve[2])return pr.apply($,U.getElementsByTagName(N)),$;if((ee=Ve[3])&&v.getElementsByClassName&&U.getElementsByClassName)return pr.apply($,U.getElementsByClassName(ee)),$}if(v.qsa&&!$n[N+" "]&&(!qe||!qe.test(N))&&(dt!==1||U.nodeName.toLowerCase()!=="object")){if(Ze=N,tt=U,dt===1&&(g0.test(N)||fd.test(N))){for(tt=Gc.test(N)&&jc(U.parentNode)||U,(tt!==U||!v.scope)&&((Fe=U.getAttribute("id"))?Fe=Fe.replace(dd,pd):U.setAttribute("id",Fe=Rt)),Ke=I(N),we=Ke.length;we--;)Ke[we]=(Fe?"#"+Fe:":scope")+" "+Ko(Ke[we]);Ze=Ke.join(",")}try{return pr.apply($,tt.querySelectorAll(Ze)),$}catch{$n(N,!0)}finally{Fe===Rt&&U.removeAttribute("id")}}}return G(N.replace(Jo,"$1"),U,$,_e)}function Qo(){var N=[];function U($,_e){return N.push($+" ")>w.cacheLength&&delete U[N.shift()],U[$+" "]=_e}return U}function bi(N){return N[Rt]=!0,N}function Mi(N){var U=ve.createElement("fieldset");try{return!!N(U)}catch{return!1}finally{U.parentNode&&U.parentNode.removeChild(U),U=null}}function Wc(N,U){for(var $=N.split("|"),_e=$.length;_e--;)w.attrHandle[$[_e]]=U}function gd(N,U){var $=U&&N,_e=$&&N.nodeType===1&&U.nodeType===1&&N.sourceIndex-U.sourceIndex;if(_e)return _e;if($){for(;$=$.nextSibling;)if($===U)return-1}return N?1:-1}function S0(N){return function(U){var $=U.nodeName.toLowerCase();return $==="input"&&U.type===N}}function T0(N){return function(U){var $=U.nodeName.toLowerCase();return($==="input"||$==="button")&&U.type===N}}function vd(N){return function(U){return"form"in U?U.parentNode&&U.disabled===!1?"label"in U?"label"in U.parentNode?U.parentNode.disabled===N:U.disabled===N:U.isDisabled===N||U.isDisabled!==!N&&M0(U)===N:U.disabled===N:"label"in U?U.disabled===N:!1}}function Qr(N){return bi(function(U){return U=+U,bi(function($,_e){for(var ee,we=N([],$.length,U),Ce=we.length;Ce--;)$[ee=we[Ce]]&&($[ee]=!(_e[ee]=$[ee]))})})}function jc(N){return N&&typeof N.getElementsByTagName<"u"&&N}v=It.support={},A=It.isXML=function(N){var U=N&&N.namespaceURI,$=N&&(N.ownerDocument||N).documentElement;return!y0.test(U||$&&$.nodeName||"HTML")},le=It.setDocument=function(N){var U,$,_e=N?N.ownerDocument||N:ot;return _e==ve||_e.nodeType!==9||!_e.documentElement||(ve=_e,je=ve.documentElement,ct=!A(ve),ot!=ve&&($=ve.defaultView)&&$.top!==$&&($.addEventListener?$.addEventListener("unload",md,!1):$.attachEvent&&$.attachEvent("onunload",md)),v.scope=Mi(function(ee){return je.appendChild(ee).appendChild(ve.createElement("div")),typeof ee.querySelectorAll<"u"&&!ee.querySelectorAll(":scope fieldset div").length}),v.attributes=Mi(function(ee){return ee.className="i",!ee.getAttribute("className")}),v.getElementsByTagName=Mi(function(ee){return ee.appendChild(ve.createComment("")),!ee.getElementsByTagName("*").length}),v.getElementsByClassName=za.test(ve.getElementsByClassName),v.getById=Mi(function(ee){return je.appendChild(ee).id=Rt,!ve.getElementsByName||!ve.getElementsByName(Rt).length}),v.getById?(w.filter.ID=function(ee){var we=ee.replace(Ji,Zi);return function(Ce){return Ce.getAttribute("id")===we}},w.find.ID=function(ee,we){if(typeof we.getElementById<"u"&&ct){var Ce=we.getElementById(ee);return Ce?[Ce]:[]}}):(w.filter.ID=function(ee){var we=ee.replace(Ji,Zi);return function(Ce){var Fe=typeof Ce.getAttributeNode<"u"&&Ce.getAttributeNode("id");return Fe&&Fe.value===we}},w.find.ID=function(ee,we){if(typeof we.getElementById<"u"&&ct){var Ce,Fe,Ve,Ke=we.getElementById(ee);if(Ke){if(Ce=Ke.getAttributeNode("id"),Ce&&Ce.value===ee)return[Ke];for(Ve=we.getElementsByName(ee),Fe=0;Ke=Ve[Fe++];)if(Ce=Ke.getAttributeNode("id"),Ce&&Ce.value===ee)return[Ke]}return[]}}),w.find.TAG=v.getElementsByTagName?function(ee,we){if(typeof we.getElementsByTagName<"u")return we.getElementsByTagName(ee);if(v.qsa)return we.querySelectorAll(ee)}:function(ee,we){var Ce,Fe=[],Ve=0,Ke=we.getElementsByTagName(ee);if(ee==="*"){for(;Ce=Ke[Ve++];)Ce.nodeType===1&&Fe.push(Ce);return Fe}return Ke},w.find.CLASS=v.getElementsByClassName&&function(ee,we){if(typeof we.getElementsByClassName<"u"&&ct)return we.getElementsByClassName(ee)},an=[],qe=[],(v.qsa=za.test(ve.querySelectorAll))&&(Mi(function(ee){var we;je.appendChild(ee).innerHTML="<a id='"+Rt+"'></a><select id='"+Rt+"-\r\\' msallowcapture=''><option selected=''></option></select>",ee.querySelectorAll("[msallowcapture^='']").length&&qe.push("[*^$]="+Tt+`*(?:''|"")`),ee.querySelectorAll("[selected]").length||qe.push("\\["+Tt+"*(?:value|"+Hc+")"),ee.querySelectorAll("[id~="+Rt+"-]").length||qe.push("~="),we=ve.createElement("input"),we.setAttribute("name",""),ee.appendChild(we),ee.querySelectorAll("[name='']").length||qe.push("\\["+Tt+"*name"+Tt+"*="+Tt+`*(?:''|"")`),ee.querySelectorAll(":checked").length||qe.push(":checked"),ee.querySelectorAll("a#"+Rt+"+*").length||qe.push(".#.+[+~]"),ee.querySelectorAll("\\\f"),qe.push("[\\r\\n\\f]")}),Mi(function(ee){ee.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var we=ve.createElement("input");we.setAttribute("type","hidden"),ee.appendChild(we).setAttribute("name","D"),ee.querySelectorAll("[name=d]").length&&qe.push("name"+Tt+"*[*^$|!~]?="),ee.querySelectorAll(":enabled").length!==2&&qe.push(":enabled",":disabled"),je.appendChild(ee).disabled=!0,ee.querySelectorAll(":disabled").length!==2&&qe.push(":enabled",":disabled"),ee.querySelectorAll("*,:x"),qe.push(",.*:")})),(v.matchesSelector=za.test(nn=je.matches||je.webkitMatchesSelector||je.mozMatchesSelector||je.oMatchesSelector||je.msMatchesSelector))&&Mi(function(ee){v.disconnectedMatch=nn.call(ee,"*"),nn.call(ee,"[s!='']:x"),an.push("!=",Vc)}),qe=qe.length&&new RegExp(qe.join("|")),an=an.length&&new RegExp(an.join("|")),U=za.test(je.compareDocumentPosition),Yn=U||za.test(je.contains)?function(ee,we){var Ce=ee.nodeType===9?ee.documentElement:ee,Fe=we&&we.parentNode;return ee===Fe||!!(Fe&&Fe.nodeType===1&&(Ce.contains?Ce.contains(Fe):ee.compareDocumentPosition&&ee.compareDocumentPosition(Fe)&16))}:function(ee,we){if(we){for(;we=we.parentNode;)if(we===ee)return!0}return!1},Yr=U?function(ee,we){if(ee===we)return Ae=!0,0;var Ce=!ee.compareDocumentPosition-!we.compareDocumentPosition;return Ce||(Ce=(ee.ownerDocument||ee)==(we.ownerDocument||we)?ee.compareDocumentPosition(we):1,Ce&1||!v.sortDetached&&we.compareDocumentPosition(ee)===Ce?ee==ve||ee.ownerDocument==ot&&Yn(ot,ee)?-1:we==ve||we.ownerDocument==ot&&Yn(ot,we)?1:he?Jr(he,ee)-Jr(he,we):0:Ce&4?-1:1)}:function(ee,we){if(ee===we)return Ae=!0,0;var Ce,Fe=0,Ve=ee.parentNode,Ke=we.parentNode,Ze=[ee],tt=[we];if(!Ve||!Ke)return ee==ve?-1:we==ve?1:Ve?-1:Ke?1:he?Jr(he,ee)-Jr(he,we):0;if(Ve===Ke)return gd(ee,we);for(Ce=ee;Ce=Ce.parentNode;)Ze.unshift(Ce);for(Ce=we;Ce=Ce.parentNode;)tt.unshift(Ce);for(;Ze[Fe]===tt[Fe];)Fe++;return Fe?gd(Ze[Fe],tt[Fe]):Ze[Fe]==ot?-1:tt[Fe]==ot?1:0}),ve},It.matches=function(N,U){return It(N,null,null,U)},It.matchesSelector=function(N,U){if(le(N),v.matchesSelector&&ct&&!$n[U+" "]&&(!an||!an.test(U))&&(!qe||!qe.test(U)))try{var $=nn.call(N,U);if($||v.disconnectedMatch||N.document&&N.document.nodeType!==11)return $}catch{$n(U,!0)}return It(U,ve,null,[N]).length>0},It.contains=function(N,U){return(N.ownerDocument||N)!=ve&&le(N),Yn(N,U)},It.attr=function(N,U){(N.ownerDocument||N)!=ve&&le(N);var $=w.attrHandle[U.toLowerCase()],_e=$&&$r.call(w.attrHandle,U.toLowerCase())?$(N,U,!ct):void 0;return _e!==void 0?_e:v.attributes||!ct?N.getAttribute(U):(_e=N.getAttributeNode(U))&&_e.specified?_e.value:null},It.escape=function(N){return(N+"").replace(dd,pd)},It.error=function(N){throw new Error("Syntax error, unrecognized expression: "+N)},It.uniqueSort=function(N){var U,$=[],_e=0,ee=0;if(Ae=!v.detectDuplicates,he=!v.sortStable&&N.slice(0),N.sort(Yr),Ae){for(;U=N[ee++];)U===N[ee]&&(_e=$.push(ee));for(;_e--;)N.splice($[_e],1)}return he=null,N},T=It.getText=function(N){var U,$="",_e=0,ee=N.nodeType;if(ee){if(ee===1||ee===9||ee===11){if(typeof N.textContent=="string")return N.textContent;for(N=N.firstChild;N;N=N.nextSibling)$+=T(N)}else if(ee===3||ee===4)return N.nodeValue}else for(;U=N[_e++];)$+=T(U);return $},w=It.selectors={cacheLength:50,createPseudo:bi,match:Zo,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(N){return N[1]=N[1].replace(Ji,Zi),N[3]=(N[3]||N[4]||N[5]||"").replace(Ji,Zi),N[2]==="~="&&(N[3]=" "+N[3]+" "),N.slice(0,4)},CHILD:function(N){return N[1]=N[1].toLowerCase(),N[1].slice(0,3)==="nth"?(N[3]||It.error(N[0]),N[4]=+(N[4]?N[5]+(N[6]||1):2*(N[3]==="even"||N[3]==="odd")),N[5]=+(N[7]+N[8]||N[3]==="odd")):N[3]&&It.error(N[0]),N},PSEUDO:function(N){var U,$=!N[6]&&N[2];return Zo.CHILD.test(N[0])?null:(N[3]?N[2]=N[4]||N[5]||"":$&&v0.test($)&&(U=I($,!0))&&(U=$.indexOf(")",$.length-U)-$.length)&&(N[0]=N[0].slice(0,U),N[2]=$.slice(0,U)),N.slice(0,3))}},filter:{TAG:function(N){var U=N.replace(Ji,Zi).toLowerCase();return N==="*"?function(){return!0}:function($){return $.nodeName&&$.nodeName.toLowerCase()===U}},CLASS:function(N){var U=Wt[N+" "];return U||(U=new RegExp("(^|"+Tt+")"+N+"("+Tt+"|$)"))&&Wt(N,function($){return U.test(typeof $.className=="string"&&$.className||typeof $.getAttribute<"u"&&$.getAttribute("class")||"")})},ATTR:function(N,U,$){return function(_e){var ee=It.attr(_e,N);return ee==null?U==="!=":U?(ee+="",U==="="?ee===$:U==="!="?ee!==$:U==="^="?$&&ee.indexOf($)===0:U==="*="?$&&ee.indexOf($)>-1:U==="$="?$&&ee.slice(-$.length)===$:U==="~="?(" "+ee.replace(p0," ")+" ").indexOf($)>-1:U==="|="?ee===$||ee.slice(0,$.length+1)===$+"-":!1):!0}},CHILD:function(N,U,$,_e,ee){var we=N.slice(0,3)!=="nth",Ce=N.slice(-4)!=="last",Fe=U==="of-type";return _e===1&&ee===0?function(Ve){return!!Ve.parentNode}:function(Ve,Ke,Ze){var tt,dt,Dt,et,on,xn,Jn=we!==Ce?"nextSibling":"previousSibling",Ht=Ve.parentNode,Ba=Fe&&Ve.nodeName.toLowerCase(),ka=!Ze&&!Fe,Zn=!1;if(Ht){if(we){for(;Jn;){for(et=Ve;et=et[Jn];)if(Fe?et.nodeName.toLowerCase()===Ba:et.nodeType===1)return!1;xn=Jn=N==="only"&&!xn&&"nextSibling"}return!0}if(xn=[Ce?Ht.firstChild:Ht.lastChild],Ce&&ka){for(et=Ht,Dt=et[Rt]||(et[Rt]={}),dt=Dt[et.uniqueID]||(Dt[et.uniqueID]={}),tt=dt[N]||[],on=tt[0]===Dn&&tt[1],Zn=on&&tt[2],et=on&&Ht.childNodes[on];et=++on&&et&&et[Jn]||(Zn=on=0)||xn.pop();)if(et.nodeType===1&&++Zn&&et===Ve){dt[N]=[Dn,on,Zn];break}}else if(ka&&(et=Ve,Dt=et[Rt]||(et[Rt]={}),dt=Dt[et.uniqueID]||(Dt[et.uniqueID]={}),tt=dt[N]||[],on=tt[0]===Dn&&tt[1],Zn=on),Zn===!1)for(;(et=++on&&et&&et[Jn]||(Zn=on=0)||xn.pop())&&!((Fe?et.nodeName.toLowerCase()===Ba:et.nodeType===1)&&++Zn&&(ka&&(Dt=et[Rt]||(et[Rt]={}),dt=Dt[et.uniqueID]||(Dt[et.uniqueID]={}),dt[N]=[Dn,Zn]),et===Ve)););return Zn-=ee,Zn===_e||Zn%_e===0&&Zn/_e>=0}}},PSEUDO:function(N,U){var $,_e=w.pseudos[N]||w.setFilters[N.toLowerCase()]||It.error("unsupported pseudo: "+N);return _e[Rt]?_e(U):_e.length>1?($=[N,N,"",U],w.setFilters.hasOwnProperty(N.toLowerCase())?bi(function(ee,we){for(var Ce,Fe=_e(ee,U),Ve=Fe.length;Ve--;)Ce=Jr(ee,Fe[Ve]),ee[Ce]=!(we[Ce]=Fe[Ve])}):function(ee){return _e(ee,0,$)}):_e}},pseudos:{not:bi(function(N){var U=[],$=[],_e=V(N.replace(Jo,"$1"));return _e[Rt]?bi(function(ee,we,Ce,Fe){for(var Ve,Ke=_e(ee,null,Fe,[]),Ze=ee.length;Ze--;)(Ve=Ke[Ze])&&(ee[Ze]=!(we[Ze]=Ve))}):function(ee,we,Ce){return U[0]=ee,_e(U,null,Ce,$),U[0]=null,!$.pop()}}),has:bi(function(N){return function(U){return It(N,U).length>0}}),contains:bi(function(N){return N=N.replace(Ji,Zi),function(U){return(U.textContent||T(U)).indexOf(N)>-1}}),lang:bi(function(N){return _0.test(N||"")||It.error("unsupported lang: "+N),N=N.replace(Ji,Zi).toLowerCase(),function(U){var $;do if($=ct?U.lang:U.getAttribute("xml:lang")||U.getAttribute("lang"))return $=$.toLowerCase(),$===N||$.indexOf(N+"-")===0;while((U=U.parentNode)&&U.nodeType===1);return!1}}),target:function(N){var U=u.location&&u.location.hash;return U&&U.slice(1)===N.id},root:function(N){return N===je},focus:function(N){return N===ve.activeElement&&(!ve.hasFocus||ve.hasFocus())&&!!(N.type||N.href||~N.tabIndex)},enabled:vd(!1),disabled:vd(!0),checked:function(N){var U=N.nodeName.toLowerCase();return U==="input"&&!!N.checked||U==="option"&&!!N.selected},selected:function(N){return N.parentNode&&N.parentNode.selectedIndex,N.selected===!0},empty:function(N){for(N=N.firstChild;N;N=N.nextSibling)if(N.nodeType<6)return!1;return!0},parent:function(N){return!w.pseudos.empty(N)},header:function(N){return w0.test(N.nodeName)},input:function(N){return x0.test(N.nodeName)},button:function(N){var U=N.nodeName.toLowerCase();return U==="input"&&N.type==="button"||U==="button"},text:function(N){var U;return N.nodeName.toLowerCase()==="input"&&N.type==="text"&&((U=N.getAttribute("type"))==null||U.toLowerCase()==="text")},first:Qr(function(){return[0]}),last:Qr(function(N,U){return[U-1]}),eq:Qr(function(N,U,$){return[$<0?$+U:$]}),even:Qr(function(N,U){for(var $=0;$<U;$+=2)N.push($);return N}),odd:Qr(function(N,U){for(var $=1;$<U;$+=2)N.push($);return N}),lt:Qr(function(N,U,$){for(var _e=$<0?$+U:$>U?U:$;--_e>=0;)N.push(_e);return N}),gt:Qr(function(N,U,$){for(var _e=$<0?$+U:$;++_e<U;)N.push(_e);return N})}},w.pseudos.nth=w.pseudos.eq;for(d in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})w.pseudos[d]=S0(d);for(d in{submit:!0,reset:!0})w.pseudos[d]=T0(d);function _d(){}_d.prototype=w.filters=w.pseudos,w.setFilters=new _d,I=It.tokenize=function(N,U){var $,_e,ee,we,Ce,Fe,Ve,Ke=Fa[N+" "];if(Ke)return U?0:Ke.slice(0);for(Ce=N,Fe=[],Ve=w.preFilter;Ce;){(!$||(_e=m0.exec(Ce)))&&(_e&&(Ce=Ce.slice(_e[0].length)||Ce),Fe.push(ee=[])),$=!1,(_e=fd.exec(Ce))&&($=_e.shift(),ee.push({value:$,type:_e[0].replace(Jo," ")}),Ce=Ce.slice($.length));for(we in w.filter)(_e=Zo[we].exec(Ce))&&(!Ve[we]||(_e=Ve[we](_e)))&&($=_e.shift(),ee.push({value:$,type:we,matches:_e}),Ce=Ce.slice($.length));if(!$)break}return U?Ce.length:Ce?It.error(N):Fa(N,Fe).slice(0)};function Ko(N){for(var U=0,$=N.length,_e="";U<$;U++)_e+=N[U].value;return _e}function el(N,U,$){var _e=U.dir,ee=U.next,we=ee||_e,Ce=$&&we==="parentNode",Fe=yt++;return U.first?function(Ve,Ke,Ze){for(;Ve=Ve[_e];)if(Ve.nodeType===1||Ce)return N(Ve,Ke,Ze);return!1}:function(Ve,Ke,Ze){var tt,dt,Dt,et=[Dn,Fe];if(Ze){for(;Ve=Ve[_e];)if((Ve.nodeType===1||Ce)&&N(Ve,Ke,Ze))return!0}else for(;Ve=Ve[_e];)if(Ve.nodeType===1||Ce)if(Dt=Ve[Rt]||(Ve[Rt]={}),dt=Dt[Ve.uniqueID]||(Dt[Ve.uniqueID]={}),ee&&ee===Ve.nodeName.toLowerCase())Ve=Ve[_e]||Ve;else{if((tt=dt[we])&&tt[0]===Dn&&tt[1]===Fe)return et[2]=tt[2];if(dt[we]=et,et[2]=N(Ve,Ke,Ze))return!0}return!1}}function qc(N){return N.length>1?function(U,$,_e){for(var ee=N.length;ee--;)if(!N[ee](U,$,_e))return!1;return!0}:N[0]}function E0(N,U,$){for(var _e=0,ee=U.length;_e<ee;_e++)It(N,U[_e],$);return $}function tl(N,U,$,_e,ee){for(var we,Ce=[],Fe=0,Ve=N.length,Ke=U!=null;Fe<Ve;Fe++)(we=N[Fe])&&(!$||$(we,_e,ee))&&(Ce.push(we),Ke&&U.push(Fe));return Ce}function Xc(N,U,$,_e,ee,we){return _e&&!_e[Rt]&&(_e=Xc(_e)),ee&&!ee[Rt]&&(ee=Xc(ee,we)),bi(function(Ce,Fe,Ve,Ke){var Ze,tt,dt,Dt=[],et=[],on=Fe.length,xn=Ce||E0(U||"*",Ve.nodeType?[Ve]:Ve,[]),Jn=N&&(Ce||!U)?tl(xn,Dt,N,Ve,Ke):xn,Ht=$?ee||(Ce?N:on||_e)?[]:Fe:Jn;if($&&$(Jn,Ht,Ve,Ke),_e)for(Ze=tl(Ht,et),_e(Ze,[],Ve,Ke),tt=Ze.length;tt--;)(dt=Ze[tt])&&(Ht[et[tt]]=!(Jn[et[tt]]=dt));if(Ce){if(ee||N){if(ee){for(Ze=[],tt=Ht.length;tt--;)(dt=Ht[tt])&&Ze.push(Jn[tt]=dt);ee(null,Ht=[],Ze,Ke)}for(tt=Ht.length;tt--;)(dt=Ht[tt])&&(Ze=ee?Jr(Ce,dt):Dt[tt])>-1&&(Ce[Ze]=!(Fe[Ze]=dt))}}else Ht=tl(Ht===Fe?Ht.splice(on,Ht.length):Ht),ee?ee(null,Fe,Ht,Ke):pr.apply(Fe,Ht)})}function Yc(N){for(var U,$,_e,ee=N.length,we=w.relative[N[0].type],Ce=we||w.relative[" "],Fe=we?1:0,Ve=el(function(tt){return tt===U},Ce,!0),Ke=el(function(tt){return Jr(U,tt)>-1},Ce,!0),Ze=[function(tt,dt,Dt){var et=!we&&(Dt||dt!==K)||((U=dt).nodeType?Ve(tt,dt,Dt):Ke(tt,dt,Dt));return U=null,et}];Fe<ee;Fe++)if($=w.relative[N[Fe].type])Ze=[el(qc(Ze),$)];else{if($=w.filter[N[Fe].type].apply(null,N[Fe].matches),$[Rt]){for(_e=++Fe;_e<ee&&!w.relative[N[_e].type];_e++);return Xc(Fe>1&&qc(Ze),Fe>1&&Ko(N.slice(0,Fe-1).concat({value:N[Fe-2].type===" "?"*":""})).replace(Jo,"$1"),$,Fe<_e&&Yc(N.slice(Fe,_e)),_e<ee&&Yc(N=N.slice(_e)),_e<ee&&Ko(N))}Ze.push($)}return qc(Ze)}function A0(N,U){var $=U.length>0,_e=N.length>0,ee=function(we,Ce,Fe,Ve,Ke){var Ze,tt,dt,Dt=0,et="0",on=we&&[],xn=[],Jn=K,Ht=we||_e&&w.find.TAG("*",Ke),Ba=Dn+=Jn==null?1:Math.random()||.1,ka=Ht.length;for(Ke&&(K=Ce==ve||Ce||Ke);et!==ka&&(Ze=Ht[et])!=null;et++){if(_e&&Ze){for(tt=0,!Ce&&Ze.ownerDocument!=ve&&(le(Ze),Fe=!ct);dt=N[tt++];)if(dt(Ze,Ce||ve,Fe)){Ve.push(Ze);break}Ke&&(Dn=Ba)}$&&((Ze=!dt&&Ze)&&Dt--,we&&on.push(Ze))}if(Dt+=et,$&&et!==Dt){for(tt=0;dt=U[tt++];)dt(on,xn,Ce,Fe);if(we){if(Dt>0)for(;et--;)on[et]||xn[et]||(xn[et]=dr.call(Ve));xn=tl(xn)}pr.apply(Ve,xn),Ke&&!we&&xn.length>0&&Dt+U.length>1&&It.uniqueSort(Ve)}return Ke&&(Dn=Ba,K=Jn),on};return $?bi(ee):ee}return V=It.compile=function(N,U){var $,_e=[],ee=[],we=$o[N+" "];if(!we){for(U||(U=I(N)),$=U.length;$--;)we=Yc(U[$]),we[Rt]?_e.push(we):ee.push(we);we=$o(N,A0(ee,_e)),we.selector=N}return we},G=It.select=function(N,U,$,_e){var ee,we,Ce,Fe,Ve,Ke=typeof N=="function"&&N,Ze=!_e&&I(N=Ke.selector||N);if($=$||[],Ze.length===1){if(we=Ze[0]=Ze[0].slice(0),we.length>2&&(Ce=we[0]).type==="ID"&&U.nodeType===9&&ct&&w.relative[we[1].type]){if(U=(w.find.ID(Ce.matches[0].replace(Ji,Zi),U)||[])[0],U)Ke&&(U=U.parentNode);else return $;N=N.slice(we.shift().value.length)}for(ee=Zo.needsContext.test(N)?0:we.length;ee--&&(Ce=we[ee],!w.relative[Fe=Ce.type]);)if((Ve=w.find[Fe])&&(_e=Ve(Ce.matches[0].replace(Ji,Zi),Gc.test(we[0].type)&&jc(U.parentNode)||U))){if(we.splice(ee,1),N=_e.length&&Ko(we),!N)return pr.apply($,_e),$;break}}return(Ke||V(N,Ze))(_e,U,!ct,$,!U||Gc.test(N)&&jc(U.parentNode)||U),$},v.sortStable=Rt.split("").sort(Yr).join("")===Rt,v.detectDuplicates=!!Ae,le(),v.sortDetached=Mi(function(N){return N.compareDocumentPosition(ve.createElement("fieldset"))&1}),Mi(function(N){return N.innerHTML="<a href='#'></a>",N.firstChild.getAttribute("href")==="#"})||Wc("type|href|height|width",function(N,U,$){if(!$)return N.getAttribute(U,U.toLowerCase()==="type"?1:2)}),(!v.attributes||!Mi(function(N){return N.innerHTML="<input/>",N.firstChild.setAttribute("value",""),N.firstChild.getAttribute("value")===""}))&&Wc("value",function(N,U,$){if(!$&&N.nodeName.toLowerCase()==="input")return N.defaultValue}),Mi(function(N){return N.getAttribute("disabled")==null})||Wc(Hc,function(N,U,$){var _e;if(!$)return N[U]===!0?U.toLowerCase():(_e=N.getAttributeNode(U))&&_e.specified?_e.value:null}),It}(e);p.find=W,p.expr=W.selectors,p.expr[":"]=p.expr.pseudos,p.uniqueSort=p.unique=W.uniqueSort,p.text=W.getText,p.isXMLDoc=W.isXML,p.contains=W.contains,p.escapeSelector=W.escape;var X=function(u,d,v){for(var w=[],T=v!==void 0;(u=u[d])&&u.nodeType!==9;)if(u.nodeType===1){if(T&&p(u).is(v))break;w.push(u)}return w},oe=function(u,d){for(var v=[];u;u=u.nextSibling)u.nodeType===1&&u!==d&&v.push(u);return v},q=p.expr.match.needsContext;function ye(u,d){return u.nodeName&&u.nodeName.toLowerCase()===d.toLowerCase()}var ie=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function ne(u,d,v){return x(d)?p.grep(u,function(w,T){return!!d.call(w,T,w)!==v}):d.nodeType?p.grep(u,function(w){return w===d!==v}):typeof d!="string"?p.grep(u,function(w){return c.call(d,w)>-1!==v}):p.filter(d,u,v)}p.filter=function(u,d,v){var w=d[0];return v&&(u=":not("+u+")"),d.length===1&&w.nodeType===1?p.find.matchesSelector(w,u)?[w]:[]:p.find.matches(u,p.grep(d,function(T){return T.nodeType===1}))},p.fn.extend({find:function(u){var d,v,w=this.length,T=this;if(typeof u!="string")return this.pushStack(p(u).filter(function(){for(d=0;d<w;d++)if(p.contains(T[d],this))return!0}));for(v=this.pushStack([]),d=0;d<w;d++)p.find(u,T[d],v);return w>1?p.uniqueSort(v):v},filter:function(u){return this.pushStack(ne(this,u||[],!1))},not:function(u){return this.pushStack(ne(this,u||[],!0))},is:function(u){return!!ne(this,typeof u=="string"&&q.test(u)?p(u):u||[],!1).length}});var re,ae=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/,se=p.fn.init=function(u,d,v){var w,T;if(!u)return this;if(v=v||re,typeof u=="string")if(u[0]==="<"&&u[u.length-1]===">"&&u.length>=3?w=[null,u,null]:w=ae.exec(u),w&&(w[1]||!d))if(w[1]){if(d=d instanceof p?d[0]:d,p.merge(this,p.parseHTML(w[1],d&&d.nodeType?d.ownerDocument||d:y,!0)),ie.test(w[1])&&p.isPlainObject(d))for(w in d)x(this[w])?this[w](d[w]):this.attr(w,d[w]);return this}else return T=y.getElementById(w[2]),T&&(this[0]=T,this.length=1),this;else return!d||d.jquery?(d||v).find(u):this.constructor(d).find(u);else{if(u.nodeType)return this[0]=u,this.length=1,this;if(x(u))return v.ready!==void 0?v.ready(u):u(p)}return p.makeArray(u,this)};se.prototype=p.fn,re=p(y);var be=/^(?:parents|prev(?:Until|All))/,Oe={children:!0,contents:!0,next:!0,prev:!0};p.fn.extend({has:function(u){var d=p(u,this),v=d.length;return this.filter(function(){for(var w=0;w<v;w++)if(p.contains(this,d[w]))return!0})},closest:function(u,d){var v,w=0,T=this.length,A=[],I=typeof u!="string"&&p(u);if(!q.test(u)){for(;w<T;w++)for(v=this[w];v&&v!==d;v=v.parentNode)if(v.nodeType<11&&(I?I.index(v)>-1:v.nodeType===1&&p.find.matchesSelector(v,u))){A.push(v);break}}return this.pushStack(A.length>1?p.uniqueSort(A):A)},index:function(u){return u?typeof u=="string"?c.call(p(u),this[0]):c.call(this,u.jquery?u[0]:u):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(u,d){return this.pushStack(p.uniqueSort(p.merge(this.get(),p(u,d))))},addBack:function(u){return this.add(u==null?this.prevObject:this.prevObject.filter(u))}});function de(u,d){for(;(u=u[d])&&u.nodeType!==1;);return u}p.each({parent:function(u){var d=u.parentNode;return d&&d.nodeType!==11?d:null},parents:function(u){return X(u,"parentNode")},parentsUntil:function(u,d,v){return X(u,"parentNode",v)},next:function(u){return de(u,"nextSibling")},prev:function(u){return de(u,"previousSibling")},nextAll:function(u){return X(u,"nextSibling")},prevAll:function(u){return X(u,"previousSibling")},nextUntil:function(u,d,v){return X(u,"nextSibling",v)},prevUntil:function(u,d,v){return X(u,"previousSibling",v)},siblings:function(u){return oe((u.parentNode||{}).firstChild,u)},children:function(u){return oe(u.firstChild)},contents:function(u){return u.contentDocument!=null&&i(u.contentDocument)?u.contentDocument:(ye(u,"template")&&(u=u.content||u),p.merge([],u.childNodes))}},function(u,d){p.fn[u]=function(v,w){var T=p.map(this,d,v);return u.slice(-5)!=="Until"&&(w=v),w&&typeof w=="string"&&(T=p.filter(w,T)),this.length>1&&(Oe[u]||p.uniqueSort(T),be.test(u)&&T.reverse()),this.pushStack(T)}});var fe=/[^\x20\t\r\n\f]+/g;function ze(u){var d={};return p.each(u.match(fe)||[],function(v,w){d[w]=!0}),d}p.Callbacks=function(u){u=typeof u=="string"?ze(u):p.extend({},u);var d,v,w,T,A=[],I=[],V=-1,G=function(){for(T=T||u.once,w=d=!0;I.length;V=-1)for(v=I.shift();++V<A.length;)A[V].apply(v[0],v[1])===!1&&u.stopOnFalse&&(V=A.length,v=!1);u.memory||(v=!1),d=!1,T&&(v?A=[]:A="")},K={add:function(){return A&&(v&&!d&&(V=A.length-1,I.push(v)),function he(Ae){p.each(Ae,function(le,ve){x(ve)?(!u.unique||!K.has(ve))&&A.push(ve):ve&&ve.length&&P(ve)!=="string"&&he(ve)})}(arguments),v&&!d&&G()),this},remove:function(){return p.each(arguments,function(he,Ae){for(var le;(le=p.inArray(Ae,A,le))>-1;)A.splice(le,1),le<=V&&V--}),this},has:function(he){return he?p.inArray(he,A)>-1:A.length>0},empty:function(){return A&&(A=[]),this},disable:function(){return T=I=[],A=v="",this},disabled:function(){return!A},lock:function(){return T=I=[],!v&&!d&&(A=v=""),this},locked:function(){return!!T},fireWith:function(he,Ae){return T||(Ae=Ae||[],Ae=[he,Ae.slice?Ae.slice():Ae],I.push(Ae),d||G()),this},fire:function(){return K.fireWith(this,arguments),this},fired:function(){return!!w}};return K};function De(u){return u}function ke(u){throw u}function rt(u,d,v,w){var T;try{u&&x(T=u.promise)?T.call(u).done(d).fail(v):u&&x(T=u.then)?T.call(u,d,v):d.apply(void 0,[u].slice(w))}catch(A){v.apply(void 0,[A])}}p.extend({Deferred:function(u){var d=[["notify","progress",p.Callbacks("memory"),p.Callbacks("memory"),2],["resolve","done",p.Callbacks("once memory"),p.Callbacks("once memory"),0,"resolved"],["reject","fail",p.Callbacks("once memory"),p.Callbacks("once memory"),1,"rejected"]],v="pending",w={state:function(){return v},always:function(){return T.done(arguments).fail(arguments),this},catch:function(A){return w.then(null,A)},pipe:function(){var A=arguments;return p.Deferred(function(I){p.each(d,function(V,G){var K=x(A[G[4]])&&A[G[4]];T[G[1]](function(){var he=K&&K.apply(this,arguments);he&&x(he.promise)?he.promise().progress(I.notify).done(I.resolve).fail(I.reject):I[G[0]+"With"](this,K?[he]:arguments)})}),A=null}).promise()},then:function(A,I,V){var G=0;function K(he,Ae,le,ve){return function(){var je=this,ct=arguments,qe=function(){var nn,Yn;if(!(he<G)){if(nn=le.apply(je,ct),nn===Ae.promise())throw new TypeError("Thenable self-resolution");Yn=nn&&(typeof nn=="object"||typeof nn=="function")&&nn.then,x(Yn)?ve?Yn.call(nn,K(G,Ae,De,ve),K(G,Ae,ke,ve)):(G++,Yn.call(nn,K(G,Ae,De,ve),K(G,Ae,ke,ve),K(G,Ae,De,Ae.notifyWith))):(le!==De&&(je=void 0,ct=[nn]),(ve||Ae.resolveWith)(je,ct))}},an=ve?qe:function(){try{qe()}catch(nn){p.Deferred.exceptionHook&&p.Deferred.exceptionHook(nn,an.stackTrace),he+1>=G&&(le!==ke&&(je=void 0,ct=[nn]),Ae.rejectWith(je,ct))}};he?an():(p.Deferred.getStackHook&&(an.stackTrace=p.Deferred.getStackHook()),e.setTimeout(an))}}return p.Deferred(function(he){d[0][3].add(K(0,he,x(V)?V:De,he.notifyWith)),d[1][3].add(K(0,he,x(A)?A:De)),d[2][3].add(K(0,he,x(I)?I:ke))}).promise()},promise:function(A){return A!=null?p.extend(A,w):w}},T={};return p.each(d,function(A,I){var V=I[2],G=I[5];w[I[1]]=V.add,G&&V.add(function(){v=G},d[3-A][2].disable,d[3-A][3].disable,d[0][2].lock,d[0][3].lock),V.add(I[3].fire),T[I[0]]=function(){return T[I[0]+"With"](this===T?void 0:this,arguments),this},T[I[0]+"With"]=V.fireWith}),w.promise(T),u&&u.call(T,T),T},when:function(u){var d=arguments.length,v=d,w=Array(v),T=a.call(arguments),A=p.Deferred(),I=function(V){return function(G){w[V]=this,T[V]=arguments.length>1?a.call(arguments):G,--d||A.resolveWith(w,T)}};if(d<=1&&(rt(u,A.done(I(v)).resolve,A.reject,!d),A.state()==="pending"||x(T[v]&&T[v].then)))return A.then();for(;v--;)rt(T[v],I(v),A.reject);return A.promise()}});var Ee=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;p.Deferred.exceptionHook=function(u,d){e.console&&e.console.warn&&u&&Ee.test(u.name)&&e.console.warn("jQuery.Deferred exception: "+u.message,u.stack,d)},p.readyException=function(u){e.setTimeout(function(){throw u})};var Te=p.Deferred();p.fn.ready=function(u){return Te.then(u).catch(function(d){p.readyException(d)}),this},p.extend({isReady:!1,readyWait:1,ready:function(u){(u===!0?--p.readyWait:p.isReady)||(p.isReady=!0,!(u!==!0&&--p.readyWait>0)&&Te.resolveWith(y,[p]))}}),p.ready.then=Te.then;function We(){y.removeEventListener("DOMContentLoaded",We),e.removeEventListener("load",We),p.ready()}y.readyState==="complete"||y.readyState!=="loading"&&!y.documentElement.doScroll?e.setTimeout(p.ready):(y.addEventListener("DOMContentLoaded",We),e.addEventListener("load",We));var Ge=function(u,d,v,w,T,A,I){var V=0,G=u.length,K=v==null;if(P(v)==="object"){T=!0;for(V in v)Ge(u,d,V,v[V],!0,A,I)}else if(w!==void 0&&(T=!0,x(w)||(I=!0),K&&(I?(d.call(u,w),d=null):(K=d,d=function(he,Ae,le){return K.call(p(he),le)})),d))for(;V<G;V++)d(u[V],v,I?w:w.call(u[V],V,d(u[V],v)));return T?u:K?d.call(u):G?d(u[0],v):A},Xe=/^-ms-/,Ye=/-([a-z])/g;function pe(u,d){return d.toUpperCase()}function Se(u){return u.replace(Xe,"ms-").replace(Ye,pe)}var S=function(u){return u.nodeType===1||u.nodeType===9||!+u.nodeType};function R(){this.expando=p.expando+R.uid++}R.uid=1,R.prototype={cache:function(u){var d=u[this.expando];return d||(d={},S(u)&&(u.nodeType?u[this.expando]=d:Object.defineProperty(u,this.expando,{value:d,configurable:!0}))),d},set:function(u,d,v){var w,T=this.cache(u);if(typeof d=="string")T[Se(d)]=v;else for(w in d)T[Se(w)]=d[w];return T},get:function(u,d){return d===void 0?this.cache(u):u[this.expando]&&u[this.expando][Se(d)]},access:function(u,d,v){return d===void 0||d&&typeof d=="string"&&v===void 0?this.get(u,d):(this.set(u,d,v),v!==void 0?v:d)},remove:function(u,d){var v,w=u[this.expando];if(w!==void 0){if(d!==void 0)for(Array.isArray(d)?d=d.map(Se):(d=Se(d),d=d in w?[d]:d.match(fe)||[]),v=d.length;v--;)delete w[d[v]];(d===void 0||p.isEmptyObject(w))&&(u.nodeType?u[this.expando]=void 0:delete u[this.expando])}},hasData:function(u){var d=u[this.expando];return d!==void 0&&!p.isEmptyObject(d)}};var E=new R,B=new R,H=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,J=/[A-Z]/g;function Q(u){return u==="true"?!0:u==="false"?!1:u==="null"?null:u===+u+""?+u:H.test(u)?JSON.parse(u):u}function z(u,d,v){var w;if(v===void 0&&u.nodeType===1)if(w="data-"+d.replace(J,"-$&").toLowerCase(),v=u.getAttribute(w),typeof v=="string"){try{v=Q(v)}catch{}B.set(u,d,v)}else v=void 0;return v}p.extend({hasData:function(u){return B.hasData(u)||E.hasData(u)},data:function(u,d,v){return B.access(u,d,v)},removeData:function(u,d){B.remove(u,d)},_data:function(u,d,v){return E.access(u,d,v)},_removeData:function(u,d){E.remove(u,d)}}),p.fn.extend({data:function(u,d){var v,w,T,A=this[0],I=A&&A.attributes;if(u===void 0){if(this.length&&(T=B.get(A),A.nodeType===1&&!E.get(A,"hasDataAttrs"))){for(v=I.length;v--;)I[v]&&(w=I[v].name,w.indexOf("data-")===0&&(w=Se(w.slice(5)),z(A,w,T[w])));E.set(A,"hasDataAttrs",!0)}return T}return typeof u=="object"?this.each(function(){B.set(this,u)}):Ge(this,function(V){var G;if(A&&V===void 0)return G=B.get(A,u),G!==void 0||(G=z(A,u),G!==void 0)?G:void 0;this.each(function(){B.set(this,u,V)})},null,d,arguments.length>1,null,!0)},removeData:function(u){return this.each(function(){B.remove(this,u)})}}),p.extend({queue:function(u,d,v){var w;if(u)return d=(d||"fx")+"queue",w=E.get(u,d),v&&(!w||Array.isArray(v)?w=E.access(u,d,p.makeArray(v)):w.push(v)),w||[]},dequeue:function(u,d){d=d||"fx";var v=p.queue(u,d),w=v.length,T=v.shift(),A=p._queueHooks(u,d),I=function(){p.dequeue(u,d)};T==="inprogress"&&(T=v.shift(),w--),T&&(d==="fx"&&v.unshift("inprogress"),delete A.stop,T.call(u,I,A)),!w&&A&&A.empty.fire()},_queueHooks:function(u,d){var v=d+"queueHooks";return E.get(u,v)||E.access(u,v,{empty:p.Callbacks("once memory").add(function(){E.remove(u,[d+"queue",v])})})}}),p.fn.extend({queue:function(u,d){var v=2;return typeof u!="string"&&(d=u,u="fx",v--),arguments.length<v?p.queue(this[0],u):d===void 0?this:this.each(function(){var w=p.queue(this,u,d);p._queueHooks(this,u),u==="fx"&&w[0]!=="inprogress"&&p.dequeue(this,u)})},dequeue:function(u){return this.each(function(){p.dequeue(this,u)})},clearQueue:function(u){return this.queue(u||"fx",[])},promise:function(u,d){var v,w=1,T=p.Deferred(),A=this,I=this.length,V=function(){--w||T.resolveWith(A,[A])};for(typeof u!="string"&&(d=u,u=void 0),u=u||"fx";I--;)v=E.get(A[I],u+"queueHooks"),v&&v.empty&&(w++,v.empty.add(V));return V(),T.promise(d)}});var D=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,Z=new RegExp("^(?:([+-])=|)("+D+")([a-z%]*)$","i"),te=["Top","Right","Bottom","Left"],xe=y.documentElement,Le=function(u){return p.contains(u.ownerDocument,u)},Y={composed:!0};xe.getRootNode&&(Le=function(u){return p.contains(u.ownerDocument,u)||u.getRootNode(Y)===u.ownerDocument});var Ne=function(u,d){return u=d||u,u.style.display==="none"||u.style.display===""&&Le(u)&&p.css(u,"display")==="none"};function ge(u,d,v,w){var T,A,I=20,V=w?function(){return w.cur()}:function(){return p.css(u,d,"")},G=V(),K=v&&v[3]||(p.cssNumber[d]?"":"px"),he=u.nodeType&&(p.cssNumber[d]||K!=="px"&&+G)&&Z.exec(p.css(u,d));if(he&&he[3]!==K){for(G=G/2,K=K||he[3],he=+G||1;I--;)p.style(u,d,he+K),(1-A)*(1-(A=V()/G||.5))<=0&&(I=0),he=he/A;he=he*2,p.style(u,d,he+K),v=v||[]}return v&&(he=+he||+G||0,T=v[1]?he+(v[1]+1)*v[2]:+v[2],w&&(w.unit=K,w.start=he,w.end=T)),T}var Re={};function Ie(u){var d,v=u.ownerDocument,w=u.nodeName,T=Re[w];return T||(d=v.body.appendChild(v.createElement(w)),T=p.css(d,"display"),d.parentNode.removeChild(d),T==="none"&&(T="block"),Re[w]=T,T)}function Ue(u,d){for(var v,w,T=[],A=0,I=u.length;A<I;A++)w=u[A],w.style&&(v=w.style.display,d?(v==="none"&&(T[A]=E.get(w,"display")||null,T[A]||(w.style.display="")),w.style.display===""&&Ne(w)&&(T[A]=Ie(w))):v!=="none"&&(T[A]="none",E.set(w,"display",v)));for(A=0;A<I;A++)T[A]!=null&&(u[A].style.display=T[A]);return u}p.fn.extend({show:function(){return Ue(this,!0)},hide:function(){return Ue(this)},toggle:function(u){return typeof u=="boolean"?u?this.show():this.hide():this.each(function(){Ne(this)?p(this).show():p(this).hide()})}});var Be=/^(?:checkbox|radio)$/i,it=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,Mt=/^$|^module$|\/(?:java|ecma)script/i;(function(){var u=y.createDocumentFragment(),d=u.appendChild(y.createElement("div")),v=y.createElement("input");v.setAttribute("type","radio"),v.setAttribute("checked","checked"),v.setAttribute("name","t"),d.appendChild(v),M.checkClone=d.cloneNode(!0).cloneNode(!0).lastChild.checked,d.innerHTML="<textarea>x</textarea>",M.noCloneChecked=!!d.cloneNode(!0).lastChild.defaultValue,d.innerHTML="<option></option>",M.option=!!d.lastChild})();var Qe={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};Qe.tbody=Qe.tfoot=Qe.colgroup=Qe.caption=Qe.thead,Qe.th=Qe.td,M.option||(Qe.optgroup=Qe.option=[1,"<select multiple='multiple'>","</select>"]);function St(u,d){var v;return typeof u.getElementsByTagName<"u"?v=u.getElementsByTagName(d||"*"):typeof u.querySelectorAll<"u"?v=u.querySelectorAll(d||"*"):v=[],d===void 0||d&&ye(u,d)?p.merge([u],v):v}function sn(u,d){for(var v=0,w=u.length;v<w;v++)E.set(u[v],"globalEval",!d||E.get(d[v],"globalEval"))}var jr=/<|&#?\w+;/;function ur(u,d,v,w,T){for(var A,I,V,G,K,he,Ae=d.createDocumentFragment(),le=[],ve=0,je=u.length;ve<je;ve++)if(A=u[ve],A||A===0)if(P(A)==="object")p.merge(le,A.nodeType?[A]:A);else if(!jr.test(A))le.push(d.createTextNode(A));else{for(I=I||Ae.appendChild(d.createElement("div")),V=(it.exec(A)||["",""])[1].toLowerCase(),G=Qe[V]||Qe._default,I.innerHTML=G[1]+p.htmlPrefilter(A)+G[2],he=G[0];he--;)I=I.lastChild;p.merge(le,I.childNodes),I=Ae.firstChild,I.textContent=""}for(Ae.textContent="",ve=0;A=le[ve++];){if(w&&p.inArray(A,w)>-1){T&&T.push(A);continue}if(K=Le(A),I=St(Ae.appendChild(A),"script"),K&&sn(I),v)for(he=0;A=I[he++];)Mt.test(A.type||"")&&v.push(A)}return Ae}var Pa=/^([^.]*)(?:\.(.+)|)/;function In(){return!0}function Xi(){return!1}function Wo(u,d){return u===Rc()==(d==="focus")}function Rc(){try{return y.activeElement}catch{}}function hr(u,d,v,w,T,A){var I,V;if(typeof d=="object"){typeof v!="string"&&(w=w||v,v=void 0);for(V in d)hr(u,V,v,w,d[V],A);return u}if(w==null&&T==null?(T=v,w=v=void 0):T==null&&(typeof v=="string"?(T=w,w=void 0):(T=w,w=v,v=void 0)),T===!1)T=Xi;else if(!T)return u;return A===1&&(I=T,T=function(G){return p().off(G),I.apply(this,arguments)},T.guid=I.guid||(I.guid=p.guid++)),u.each(function(){p.event.add(this,d,T,w,v)})}p.event={global:{},add:function(u,d,v,w,T){var A,I,V,G,K,he,Ae,le,ve,je,ct,qe=E.get(u);if(S(u))for(v.handler&&(A=v,v=A.handler,T=A.selector),T&&p.find.matchesSelector(xe,T),v.guid||(v.guid=p.guid++),(G=qe.events)||(G=qe.events=Object.create(null)),(I=qe.handle)||(I=qe.handle=function(an){return typeof p<"u"&&p.event.triggered!==an.type?p.event.dispatch.apply(u,arguments):void 0}),d=(d||"").match(fe)||[""],K=d.length;K--;)V=Pa.exec(d[K])||[],ve=ct=V[1],je=(V[2]||"").split(".").sort(),ve&&(Ae=p.event.special[ve]||{},ve=(T?Ae.delegateType:Ae.bindType)||ve,Ae=p.event.special[ve]||{},he=p.extend({type:ve,origType:ct,data:w,handler:v,guid:v.guid,selector:T,needsContext:T&&p.expr.match.needsContext.test(T),namespace:je.join(".")},A),(le=G[ve])||(le=G[ve]=[],le.delegateCount=0,(!Ae.setup||Ae.setup.call(u,w,je,I)===!1)&&u.addEventListener&&u.addEventListener(ve,I)),Ae.add&&(Ae.add.call(u,he),he.handler.guid||(he.handler.guid=v.guid)),T?le.splice(le.delegateCount++,0,he):le.push(he),p.event.global[ve]=!0)},remove:function(u,d,v,w,T){var A,I,V,G,K,he,Ae,le,ve,je,ct,qe=E.hasData(u)&&E.get(u);if(!(!qe||!(G=qe.events))){for(d=(d||"").match(fe)||[""],K=d.length;K--;){if(V=Pa.exec(d[K])||[],ve=ct=V[1],je=(V[2]||"").split(".").sort(),!ve){for(ve in G)p.event.remove(u,ve+d[K],v,w,!0);continue}for(Ae=p.event.special[ve]||{},ve=(w?Ae.delegateType:Ae.bindType)||ve,le=G[ve]||[],V=V[2]&&new RegExp("(^|\\.)"+je.join("\\.(?:.*\\.|)")+"(\\.|$)"),I=A=le.length;A--;)he=le[A],(T||ct===he.origType)&&(!v||v.guid===he.guid)&&(!V||V.test(he.namespace))&&(!w||w===he.selector||w==="**"&&he.selector)&&(le.splice(A,1),he.selector&&le.delegateCount--,Ae.remove&&Ae.remove.call(u,he));I&&!le.length&&((!Ae.teardown||Ae.teardown.call(u,je,qe.handle)===!1)&&p.removeEvent(u,ve,qe.handle),delete G[ve])}p.isEmptyObject(G)&&E.remove(u,"handle events")}},dispatch:function(u){var d,v,w,T,A,I,V=new Array(arguments.length),G=p.event.fix(u),K=(E.get(this,"events")||Object.create(null))[G.type]||[],he=p.event.special[G.type]||{};for(V[0]=G,d=1;d<arguments.length;d++)V[d]=arguments[d];if(G.delegateTarget=this,!(he.preDispatch&&he.preDispatch.call(this,G)===!1)){for(I=p.event.handlers.call(this,G,K),d=0;(T=I[d++])&&!G.isPropagationStopped();)for(G.currentTarget=T.elem,v=0;(A=T.handlers[v++])&&!G.isImmediatePropagationStopped();)(!G.rnamespace||A.namespace===!1||G.rnamespace.test(A.namespace))&&(G.handleObj=A,G.data=A.data,w=((p.event.special[A.origType]||{}).handle||A.handler).apply(T.elem,V),w!==void 0&&(G.result=w)===!1&&(G.preventDefault(),G.stopPropagation()));return he.postDispatch&&he.postDispatch.call(this,G),G.result}},handlers:function(u,d){var v,w,T,A,I,V=[],G=d.delegateCount,K=u.target;if(G&&K.nodeType&&!(u.type==="click"&&u.button>=1)){for(;K!==this;K=K.parentNode||this)if(K.nodeType===1&&!(u.type==="click"&&K.disabled===!0)){for(A=[],I={},v=0;v<G;v++)w=d[v],T=w.selector+" ",I[T]===void 0&&(I[T]=w.needsContext?p(T,this).index(K)>-1:p.find(T,this,null,[K]).length),I[T]&&A.push(w);A.length&&V.push({elem:K,handlers:A})}}return K=this,G<d.length&&V.push({elem:K,handlers:d.slice(G)}),V},addProp:function(u,d){Object.defineProperty(p.Event.prototype,u,{enumerable:!0,configurable:!0,get:x(d)?function(){if(this.originalEvent)return d(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[u]},set:function(v){Object.defineProperty(this,u,{enumerable:!0,configurable:!0,writable:!0,value:v})}})},fix:function(u){return u[p.expando]?u:new p.Event(u)},special:{load:{noBubble:!0},click:{setup:function(u){var d=this||u;return Be.test(d.type)&&d.click&&ye(d,"input")&&Ts(d,"click",In),!1},trigger:function(u){var d=this||u;return Be.test(d.type)&&d.click&&ye(d,"input")&&Ts(d,"click"),!0},_default:function(u){var d=u.target;return Be.test(d.type)&&d.click&&ye(d,"input")&&E.get(d,"click")||ye(d,"a")}},beforeunload:{postDispatch:function(u){u.result!==void 0&&u.originalEvent&&(u.originalEvent.returnValue=u.result)}}}};function Ts(u,d,v){if(!v){E.get(u,d)===void 0&&p.event.add(u,d,In);return}E.set(u,d,!1),p.event.add(u,d,{namespace:!1,handler:function(w){var T,A,I=E.get(this,d);if(w.isTrigger&1&&this[d]){if(I.length)(p.event.special[d]||{}).delegateType&&w.stopPropagation();else if(I=a.call(arguments),E.set(this,d,I),T=v(this,d),this[d](),A=E.get(this,d),I!==A||T?E.set(this,d,!1):A={},I!==A)return w.stopImmediatePropagation(),w.preventDefault(),A&&A.value}else I.length&&(E.set(this,d,{value:p.event.trigger(p.extend(I[0],p.Event.prototype),I.slice(1),this)}),w.stopImmediatePropagation())}})}p.removeEvent=function(u,d,v){u.removeEventListener&&u.removeEventListener(d,v)},p.Event=function(u,d){if(!(this instanceof p.Event))return new p.Event(u,d);u&&u.type?(this.originalEvent=u,this.type=u.type,this.isDefaultPrevented=u.defaultPrevented||u.defaultPrevented===void 0&&u.returnValue===!1?In:Xi,this.target=u.target&&u.target.nodeType===3?u.target.parentNode:u.target,this.currentTarget=u.currentTarget,this.relatedTarget=u.relatedTarget):this.type=u,d&&p.extend(this,d),this.timeStamp=u&&u.timeStamp||Date.now(),this[p.expando]=!0},p.Event.prototype={constructor:p.Event,isDefaultPrevented:Xi,isPropagationStopped:Xi,isImmediatePropagationStopped:Xi,isSimulated:!1,preventDefault:function(){var u=this.originalEvent;this.isDefaultPrevented=In,u&&!this.isSimulated&&u.preventDefault()},stopPropagation:function(){var u=this.originalEvent;this.isPropagationStopped=In,u&&!this.isSimulated&&u.stopPropagation()},stopImmediatePropagation:function(){var u=this.originalEvent;this.isImmediatePropagationStopped=In,u&&!this.isSimulated&&u.stopImmediatePropagation(),this.stopPropagation()}},p.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:!0},p.event.addProp),p.each({focus:"focusin",blur:"focusout"},function(u,d){p.event.special[u]={setup:function(){return Ts(this,u,Wo),!1},trigger:function(){return Ts(this,u),!0},_default:function(){return!0},delegateType:d}}),p.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(u,d){p.event.special[u]={delegateType:d,bindType:d,handle:function(v){var w,T=this,A=v.relatedTarget,I=v.handleObj;return(!A||A!==T&&!p.contains(T,A))&&(v.type=I.origType,w=I.handler.apply(this,arguments),v.type=d),w}}}),p.fn.extend({on:function(u,d,v,w){return hr(this,u,d,v,w)},one:function(u,d,v,w){return hr(this,u,d,v,w,1)},off:function(u,d,v){var w,T;if(u&&u.preventDefault&&u.handleObj)return w=u.handleObj,p(u.delegateTarget).off(w.namespace?w.origType+"."+w.namespace:w.origType,w.selector,w.handler),this;if(typeof u=="object"){for(T in u)this.off(T,d,u[T]);return this}return(d===!1||typeof d=="function")&&(v=d,d=void 0),v===!1&&(v=Xi),this.each(function(){p.event.remove(this,u,v,d)})}});var Ia=/<script|<style|<link/i,jo=/checked\s*(?:[^=]|=\s*.checked.)/i,Pc=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;function qo(u,d){return ye(u,"table")&&ye(d.nodeType!==11?d:d.firstChild,"tr")&&p(u).children("tbody")[0]||u}function Ic(u){return u.type=(u.getAttribute("type")!==null)+"/"+u.type,u}function k(u){return(u.type||"").slice(0,5)==="true/"?u.type=u.type.slice(5):u.removeAttribute("type"),u}function ce(u,d){var v,w,T,A,I,V,G;if(d.nodeType===1){if(E.hasData(u)&&(A=E.get(u),G=A.events,G)){E.remove(d,"handle events");for(T in G)for(v=0,w=G[T].length;v<w;v++)p.event.add(d,T,G[T][v])}B.hasData(u)&&(I=B.access(u),V=p.extend({},I),B.set(d,V))}}function me(u,d){var v=d.nodeName.toLowerCase();v==="input"&&Be.test(u.type)?d.checked=u.checked:(v==="input"||v==="textarea")&&(d.defaultValue=u.defaultValue)}function ue(u,d,v,w){d=o(d);var T,A,I,V,G,K,he=0,Ae=u.length,le=Ae-1,ve=d[0],je=x(ve);if(je||Ae>1&&typeof ve=="string"&&!M.checkClone&&jo.test(ve))return u.each(function(ct){var qe=u.eq(ct);je&&(d[0]=ve.call(this,ct,qe.html())),ue(qe,d,v,w)});if(Ae&&(T=ur(d,u[0].ownerDocument,!1,u,w),A=T.firstChild,T.childNodes.length===1&&(T=A),A||w)){for(I=p.map(St(T,"script"),Ic),V=I.length;he<Ae;he++)G=T,he!==le&&(G=p.clone(G,!0,!0),V&&p.merge(I,St(G,"script"))),v.call(u[he],G,he);if(V)for(K=I[I.length-1].ownerDocument,p.map(I,k),he=0;he<V;he++)G=I[he],Mt.test(G.type||"")&&!E.access(G,"globalEval")&&p.contains(K,G)&&(G.src&&(G.type||"").toLowerCase()!=="module"?p._evalUrl&&!G.noModule&&p._evalUrl(G.src,{nonce:G.nonce||G.getAttribute("nonce")},K):O(G.textContent.replace(Pc,""),G,K))}return u}function Me(u,d,v){for(var w,T=d?p.filter(d,u):u,A=0;(w=T[A])!=null;A++)!v&&w.nodeType===1&&p.cleanData(St(w)),w.parentNode&&(v&&Le(w)&&sn(St(w,"script")),w.parentNode.removeChild(w));return u}p.extend({htmlPrefilter:function(u){return u},clone:function(u,d,v){var w,T,A,I,V=u.cloneNode(!0),G=Le(u);if(!M.noCloneChecked&&(u.nodeType===1||u.nodeType===11)&&!p.isXMLDoc(u))for(I=St(V),A=St(u),w=0,T=A.length;w<T;w++)me(A[w],I[w]);if(d)if(v)for(A=A||St(u),I=I||St(V),w=0,T=A.length;w<T;w++)ce(A[w],I[w]);else ce(u,V);return I=St(V,"script"),I.length>0&&sn(I,!G&&St(u,"script")),V},cleanData:function(u){for(var d,v,w,T=p.event.special,A=0;(v=u[A])!==void 0;A++)if(S(v)){if(d=v[E.expando]){if(d.events)for(w in d.events)T[w]?p.event.remove(v,w):p.removeEvent(v,w,d.handle);v[E.expando]=void 0}v[B.expando]&&(v[B.expando]=void 0)}}}),p.fn.extend({detach:function(u){return Me(this,u,!0)},remove:function(u){return Me(this,u)},text:function(u){return Ge(this,function(d){return d===void 0?p.text(this):this.empty().each(function(){(this.nodeType===1||this.nodeType===11||this.nodeType===9)&&(this.textContent=d)})},null,u,arguments.length)},append:function(){return ue(this,arguments,function(u){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var d=qo(this,u);d.appendChild(u)}})},prepend:function(){return ue(this,arguments,function(u){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var d=qo(this,u);d.insertBefore(u,d.firstChild)}})},before:function(){return ue(this,arguments,function(u){this.parentNode&&this.parentNode.insertBefore(u,this)})},after:function(){return ue(this,arguments,function(u){this.parentNode&&this.parentNode.insertBefore(u,this.nextSibling)})},empty:function(){for(var u,d=0;(u=this[d])!=null;d++)u.nodeType===1&&(p.cleanData(St(u,!1)),u.textContent="");return this},clone:function(u,d){return u=u??!1,d=d??u,this.map(function(){return p.clone(this,u,d)})},html:function(u){return Ge(this,function(d){var v=this[0]||{},w=0,T=this.length;if(d===void 0&&v.nodeType===1)return v.innerHTML;if(typeof d=="string"&&!Ia.test(d)&&!Qe[(it.exec(d)||["",""])[1].toLowerCase()]){d=p.htmlPrefilter(d);try{for(;w<T;w++)v=this[w]||{},v.nodeType===1&&(p.cleanData(St(v,!1)),v.innerHTML=d);v=0}catch{}}v&&this.empty().append(d)},null,u,arguments.length)},replaceWith:function(){var u=[];return ue(this,arguments,function(d){var v=this.parentNode;p.inArray(this,u)<0&&(p.cleanData(St(this)),v&&v.replaceChild(d,this))},u)}}),p.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(u,d){p.fn[u]=function(v){for(var w,T=[],A=p(v),I=A.length-1,V=0;V<=I;V++)w=V===I?this:this.clone(!0),p(A[V])[d](w),l.apply(T,w.get());return this.pushStack(T)}});var st=new RegExp("^("+D+")(?!px)[a-z%]+$","i"),Je=function(u){var d=u.ownerDocument.defaultView;return(!d||!d.opener)&&(d=e),d.getComputedStyle(u)},ut=function(u,d,v){var w,T,A={};for(T in d)A[T]=u.style[T],u.style[T]=d[T];w=v.call(u);for(T in d)u.style[T]=A[T];return w},at=new RegExp(te.join("|"),"i");(function(){function u(){if(K){G.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",K.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",xe.appendChild(G).appendChild(K);var he=e.getComputedStyle(K);v=he.top!=="1%",V=d(he.marginLeft)===12,K.style.right="60%",A=d(he.right)===36,w=d(he.width)===36,K.style.position="absolute",T=d(K.offsetWidth/3)===12,xe.removeChild(G),K=null}}function d(he){return Math.round(parseFloat(he))}var v,w,T,A,I,V,G=y.createElement("div"),K=y.createElement("div");K.style&&(K.style.backgroundClip="content-box",K.cloneNode(!0).style.backgroundClip="",M.clearCloneStyle=K.style.backgroundClip==="content-box",p.extend(M,{boxSizingReliable:function(){return u(),w},pixelBoxStyles:function(){return u(),A},pixelPosition:function(){return u(),v},reliableMarginLeft:function(){return u(),V},scrollboxSize:function(){return u(),T},reliableTrDimensions:function(){var he,Ae,le,ve;return I==null&&(he=y.createElement("table"),Ae=y.createElement("tr"),le=y.createElement("div"),he.style.cssText="position:absolute;left:-11111px;border-collapse:separate",Ae.style.cssText="border:1px solid",Ae.style.height="1px",le.style.height="9px",le.style.display="block",xe.appendChild(he).appendChild(Ae).appendChild(le),ve=e.getComputedStyle(Ae),I=parseInt(ve.height,10)+parseInt(ve.borderTopWidth,10)+parseInt(ve.borderBottomWidth,10)===Ae.offsetHeight,xe.removeChild(he)),I}}))})();function ft(u,d,v){var w,T,A,I,V=u.style;return v=v||Je(u),v&&(I=v.getPropertyValue(d)||v[d],I===""&&!Le(u)&&(I=p.style(u,d)),!M.pixelBoxStyles()&&st.test(I)&&at.test(d)&&(w=V.width,T=V.minWidth,A=V.maxWidth,V.minWidth=V.maxWidth=V.width=I,I=v.width,V.width=w,V.minWidth=T,V.maxWidth=A)),I!==void 0?I+"":I}function ht(u,d){return{get:function(){if(u()){delete this.get;return}return(this.get=d).apply(this,arguments)}}}var pt=["Webkit","Moz","ms"],Ut=y.createElement("div").style,Di={};function _t(u){for(var d=u[0].toUpperCase()+u.slice(1),v=pt.length;v--;)if(u=pt[v]+d,u in Ut)return u}function Yi(u){var d=p.cssProps[u]||Di[u];return d||(u in Ut?u:Di[u]=_t(u)||u)}var Pt=/^(none|table(?!-c[ea]).+)/,Ni=/^--/,$i={position:"absolute",visibility:"hidden",display:"block"},Oi={letterSpacing:"0",fontWeight:"400"};function xi(u,d,v){var w=Z.exec(d);return w?Math.max(0,w[2]-(v||0))+(w[3]||"px"):d}function zt(u,d,v,w,T,A){var I=d==="width"?1:0,V=0,G=0;if(v===(w?"border":"content"))return 0;for(;I<4;I+=2)v==="margin"&&(G+=p.css(u,v+te[I],!0,T)),w?(v==="content"&&(G-=p.css(u,"padding"+te[I],!0,T)),v!=="margin"&&(G-=p.css(u,"border"+te[I]+"Width",!0,T))):(G+=p.css(u,"padding"+te[I],!0,T),v!=="padding"?G+=p.css(u,"border"+te[I]+"Width",!0,T):V+=p.css(u,"border"+te[I]+"Width",!0,T));return!w&&A>=0&&(G+=Math.max(0,Math.ceil(u["offset"+d[0].toUpperCase()+d.slice(1)]-A-G-V-.5))||0),G}function fr(u,d,v){var w=Je(u),T=!M.boxSizingReliable()||v,A=T&&p.css(u,"boxSizing",!1,w)==="border-box",I=A,V=ft(u,d,w),G="offset"+d[0].toUpperCase()+d.slice(1);if(st.test(V)){if(!v)return V;V="auto"}return(!M.boxSizingReliable()&&A||!M.reliableTrDimensions()&&ye(u,"tr")||V==="auto"||!parseFloat(V)&&p.css(u,"display",!1,w)==="inline")&&u.getClientRects().length&&(A=p.css(u,"boxSizing",!1,w)==="border-box",I=G in u,I&&(V=u[G])),V=parseFloat(V)||0,V+zt(u,d,v||(A?"border":"content"),I,w,V)+"px"}p.extend({cssHooks:{opacity:{get:function(u,d){if(d){var v=ft(u,"opacity");return v===""?"1":v}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(u,d,v,w){if(!(!u||u.nodeType===3||u.nodeType===8||!u.style)){var T,A,I,V=Se(d),G=Ni.test(d),K=u.style;if(G||(d=Yi(V)),I=p.cssHooks[d]||p.cssHooks[V],v!==void 0){if(A=typeof v,A==="string"&&(T=Z.exec(v))&&T[1]&&(v=ge(u,d,T),A="number"),v==null||v!==v)return;A==="number"&&!G&&(v+=T&&T[3]||(p.cssNumber[V]?"":"px")),!M.clearCloneStyle&&v===""&&d.indexOf("background")===0&&(K[d]="inherit"),(!I||!("set"in I)||(v=I.set(u,v,w))!==void 0)&&(G?K.setProperty(d,v):K[d]=v)}else return I&&"get"in I&&(T=I.get(u,!1,w))!==void 0?T:K[d]}},css:function(u,d,v,w){var T,A,I,V=Se(d),G=Ni.test(d);return G||(d=Yi(V)),I=p.cssHooks[d]||p.cssHooks[V],I&&"get"in I&&(T=I.get(u,!0,v)),T===void 0&&(T=ft(u,d,w)),T==="normal"&&d in Oi&&(T=Oi[d]),v===""||v?(A=parseFloat(T),v===!0||isFinite(A)?A||0:T):T}}),p.each(["height","width"],function(u,d){p.cssHooks[d]={get:function(v,w,T){if(w)return Pt.test(p.css(v,"display"))&&(!v.getClientRects().length||!v.getBoundingClientRect().width)?ut(v,$i,function(){return fr(v,d,T)}):fr(v,d,T)},set:function(v,w,T){var A,I=Je(v),V=!M.scrollboxSize()&&I.position==="absolute",G=V||T,K=G&&p.css(v,"boxSizing",!1,I)==="border-box",he=T?zt(v,d,T,K,I):0;return K&&V&&(he-=Math.ceil(v["offset"+d[0].toUpperCase()+d.slice(1)]-parseFloat(I[d])-zt(v,d,"border",!1,I)-.5)),he&&(A=Z.exec(w))&&(A[3]||"px")!=="px"&&(v.style[d]=w,w=p.css(v,d)),xi(v,w,he)}}}),p.cssHooks.marginLeft=ht(M.reliableMarginLeft,function(u,d){if(d)return(parseFloat(ft(u,"marginLeft"))||u.getBoundingClientRect().left-ut(u,{marginLeft:0},function(){return u.getBoundingClientRect().left}))+"px"}),p.each({margin:"",padding:"",border:"Width"},function(u,d){p.cssHooks[u+d]={expand:function(v){for(var w=0,T={},A=typeof v=="string"?v.split(" "):[v];w<4;w++)T[u+te[w]+d]=A[w]||A[w-2]||A[0];return T}},u!=="margin"&&(p.cssHooks[u+d].set=xi)}),p.fn.extend({css:function(u,d){return Ge(this,function(v,w,T){var A,I,V={},G=0;if(Array.isArray(w)){for(A=Je(v),I=w.length;G<I;G++)V[w[G]]=p.css(v,w[G],!1,A);return V}return T!==void 0?p.style(v,w,T):p.css(v,w)},u,d,arguments.length>1)}});function Bt(u,d,v,w,T){return new Bt.prototype.init(u,d,v,w,T)}p.Tween=Bt,Bt.prototype={constructor:Bt,init:function(u,d,v,w,T,A){this.elem=u,this.prop=v,this.easing=T||p.easing._default,this.options=d,this.start=this.now=this.cur(),this.end=w,this.unit=A||(p.cssNumber[v]?"":"px")},cur:function(){var u=Bt.propHooks[this.prop];return u&&u.get?u.get(this):Bt.propHooks._default.get(this)},run:function(u){var d,v=Bt.propHooks[this.prop];return this.options.duration?this.pos=d=p.easing[this.easing](u,this.options.duration*u,0,1,this.options.duration):this.pos=d=u,this.now=(this.end-this.start)*d+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),v&&v.set?v.set(this):Bt.propHooks._default.set(this),this}},Bt.prototype.init.prototype=Bt.prototype,Bt.propHooks={_default:{get:function(u){var d;return u.elem.nodeType!==1||u.elem[u.prop]!=null&&u.elem.style[u.prop]==null?u.elem[u.prop]:(d=p.css(u.elem,u.prop,""),!d||d==="auto"?0:d)},set:function(u){p.fx.step[u.prop]?p.fx.step[u.prop](u):u.elem.nodeType===1&&(p.cssHooks[u.prop]||u.elem.style[Yi(u.prop)]!=null)?p.style(u.elem,u.prop,u.now+u.unit):u.elem[u.prop]=u.now}}},Bt.propHooks.scrollTop=Bt.propHooks.scrollLeft={set:function(u){u.elem.nodeType&&u.elem.parentNode&&(u.elem[u.prop]=u.now)}},p.easing={linear:function(u){return u},swing:function(u){return .5-Math.cos(u*Math.PI)/2},_default:"swing"},p.fx=Bt.prototype.init,p.fx.step={};var Es,Xo,j_=/^(?:toggle|show|hide)$/,q_=/queueHooks$/;function Dc(){Xo&&(y.hidden===!1&&e.requestAnimationFrame?e.requestAnimationFrame(Dc):e.setTimeout(Dc,p.fx.interval),p.fx.tick())}function Qf(){return e.setTimeout(function(){Es=void 0}),Es=Date.now()}function Yo(u,d){var v,w=0,T={height:u};for(d=d?1:0;w<4;w+=2-d)v=te[w],T["margin"+v]=T["padding"+v]=u;return d&&(T.opacity=T.width=u),T}function Kf(u,d,v){for(var w,T=(wi.tweeners[d]||[]).concat(wi.tweeners["*"]),A=0,I=T.length;A<I;A++)if(w=T[A].call(v,d,u))return w}function X_(u,d,v){var w,T,A,I,V,G,K,he,Ae="width"in d||"height"in d,le=this,ve={},je=u.style,ct=u.nodeType&&Ne(u),qe=E.get(u,"fxshow");v.queue||(I=p._queueHooks(u,"fx"),I.unqueued==null&&(I.unqueued=0,V=I.empty.fire,I.empty.fire=function(){I.unqueued||V()}),I.unqueued++,le.always(function(){le.always(function(){I.unqueued--,p.queue(u,"fx").length||I.empty.fire()})}));for(w in d)if(T=d[w],j_.test(T)){if(delete d[w],A=A||T==="toggle",T===(ct?"hide":"show"))if(T==="show"&&qe&&qe[w]!==void 0)ct=!0;else continue;ve[w]=qe&&qe[w]||p.style(u,w)}if(G=!p.isEmptyObject(d),!(!G&&p.isEmptyObject(ve))){Ae&&u.nodeType===1&&(v.overflow=[je.overflow,je.overflowX,je.overflowY],K=qe&&qe.display,K==null&&(K=E.get(u,"display")),he=p.css(u,"display"),he==="none"&&(K?he=K:(Ue([u],!0),K=u.style.display||K,he=p.css(u,"display"),Ue([u]))),(he==="inline"||he==="inline-block"&&K!=null)&&p.css(u,"float")==="none"&&(G||(le.done(function(){je.display=K}),K==null&&(he=je.display,K=he==="none"?"":he)),je.display="inline-block")),v.overflow&&(je.overflow="hidden",le.always(function(){je.overflow=v.overflow[0],je.overflowX=v.overflow[1],je.overflowY=v.overflow[2]})),G=!1;for(w in ve)G||(qe?"hidden"in qe&&(ct=qe.hidden):qe=E.access(u,"fxshow",{display:K}),A&&(qe.hidden=!ct),ct&&Ue([u],!0),le.done(function(){ct||Ue([u]),E.remove(u,"fxshow");for(w in ve)p.style(u,w,ve[w])})),G=Kf(ct?qe[w]:0,w,le),w in qe||(qe[w]=G.start,ct&&(G.end=G.start,G.start=0))}}function Y_(u,d){var v,w,T,A,I;for(v in u)if(w=Se(v),T=d[w],A=u[v],Array.isArray(A)&&(T=A[1],A=u[v]=A[0]),v!==w&&(u[w]=A,delete u[v]),I=p.cssHooks[w],I&&"expand"in I){A=I.expand(A),delete u[w];for(v in A)v in u||(u[v]=A[v],d[v]=T)}else d[w]=T}function wi(u,d,v){var w,T,A=0,I=wi.prefilters.length,V=p.Deferred().always(function(){delete G.elem}),G=function(){if(T)return!1;for(var Ae=Es||Qf(),le=Math.max(0,K.startTime+K.duration-Ae),ve=le/K.duration||0,je=1-ve,ct=0,qe=K.tweens.length;ct<qe;ct++)K.tweens[ct].run(je);return V.notifyWith(u,[K,je,le]),je<1&&qe?le:(qe||V.notifyWith(u,[K,1,0]),V.resolveWith(u,[K]),!1)},K=V.promise({elem:u,props:p.extend({},d),opts:p.extend(!0,{specialEasing:{},easing:p.easing._default},v),originalProperties:d,originalOptions:v,startTime:Es||Qf(),duration:v.duration,tweens:[],createTween:function(Ae,le){var ve=p.Tween(u,K.opts,Ae,le,K.opts.specialEasing[Ae]||K.opts.easing);return K.tweens.push(ve),ve},stop:function(Ae){var le=0,ve=Ae?K.tweens.length:0;if(T)return this;for(T=!0;le<ve;le++)K.tweens[le].run(1);return Ae?(V.notifyWith(u,[K,1,0]),V.resolveWith(u,[K,Ae])):V.rejectWith(u,[K,Ae]),this}}),he=K.props;for(Y_(he,K.opts.specialEasing);A<I;A++)if(w=wi.prefilters[A].call(K,u,he,K.opts),w)return x(w.stop)&&(p._queueHooks(K.elem,K.opts.queue).stop=w.stop.bind(w)),w;return p.map(he,Kf,K),x(K.opts.start)&&K.opts.start.call(u,K),K.progress(K.opts.progress).done(K.opts.done,K.opts.complete).fail(K.opts.fail).always(K.opts.always),p.fx.timer(p.extend(G,{elem:u,anim:K,queue:K.opts.queue})),K}p.Animation=p.extend(wi,{tweeners:{"*":[function(u,d){var v=this.createTween(u,d);return ge(v.elem,u,Z.exec(d),v),v}]},tweener:function(u,d){x(u)?(d=u,u=["*"]):u=u.match(fe);for(var v,w=0,T=u.length;w<T;w++)v=u[w],wi.tweeners[v]=wi.tweeners[v]||[],wi.tweeners[v].unshift(d)},prefilters:[X_],prefilter:function(u,d){d?wi.prefilters.unshift(u):wi.prefilters.push(u)}}),p.speed=function(u,d,v){var w=u&&typeof u=="object"?p.extend({},u):{complete:v||!v&&d||x(u)&&u,duration:u,easing:v&&d||d&&!x(d)&&d};return p.fx.off?w.duration=0:typeof w.duration!="number"&&(w.duration in p.fx.speeds?w.duration=p.fx.speeds[w.duration]:w.duration=p.fx.speeds._default),(w.queue==null||w.queue===!0)&&(w.queue="fx"),w.old=w.complete,w.complete=function(){x(w.old)&&w.old.call(this),w.queue&&p.dequeue(this,w.queue)},w},p.fn.extend({fadeTo:function(u,d,v,w){return this.filter(Ne).css("opacity",0).show().end().animate({opacity:d},u,v,w)},animate:function(u,d,v,w){var T=p.isEmptyObject(u),A=p.speed(d,v,w),I=function(){var V=wi(this,p.extend({},u),A);(T||E.get(this,"finish"))&&V.stop(!0)};return I.finish=I,T||A.queue===!1?this.each(I):this.queue(A.queue,I)},stop:function(u,d,v){var w=function(T){var A=T.stop;delete T.stop,A(v)};return typeof u!="string"&&(v=d,d=u,u=void 0),d&&this.queue(u||"fx",[]),this.each(function(){var T=!0,A=u!=null&&u+"queueHooks",I=p.timers,V=E.get(this);if(A)V[A]&&V[A].stop&&w(V[A]);else for(A in V)V[A]&&V[A].stop&&q_.test(A)&&w(V[A]);for(A=I.length;A--;)I[A].elem===this&&(u==null||I[A].queue===u)&&(I[A].anim.stop(v),T=!1,I.splice(A,1));(T||!v)&&p.dequeue(this,u)})},finish:function(u){return u!==!1&&(u=u||"fx"),this.each(function(){var d,v=E.get(this),w=v[u+"queue"],T=v[u+"queueHooks"],A=p.timers,I=w?w.length:0;for(v.finish=!0,p.queue(this,u,[]),T&&T.stop&&T.stop.call(this,!0),d=A.length;d--;)A[d].elem===this&&A[d].queue===u&&(A[d].anim.stop(!0),A.splice(d,1));for(d=0;d<I;d++)w[d]&&w[d].finish&&w[d].finish.call(this);delete v.finish})}}),p.each(["toggle","show","hide"],function(u,d){var v=p.fn[d];p.fn[d]=function(w,T,A){return w==null||typeof w=="boolean"?v.apply(this,arguments):this.animate(Yo(d,!0),w,T,A)}}),p.each({slideDown:Yo("show"),slideUp:Yo("hide"),slideToggle:Yo("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(u,d){p.fn[u]=function(v,w,T){return this.animate(d,v,w,T)}}),p.timers=[],p.fx.tick=function(){var u,d=0,v=p.timers;for(Es=Date.now();d<v.length;d++)u=v[d],!u()&&v[d]===u&&v.splice(d--,1);v.length||p.fx.stop(),Es=void 0},p.fx.timer=function(u){p.timers.push(u),p.fx.start()},p.fx.interval=13,p.fx.start=function(){Xo||(Xo=!0,Dc())},p.fx.stop=function(){Xo=null},p.fx.speeds={slow:600,fast:200,_default:400},p.fn.delay=function(u,d){return u=p.fx&&p.fx.speeds[u]||u,d=d||"fx",this.queue(d,function(v,w){var T=e.setTimeout(v,u);w.stop=function(){e.clearTimeout(T)}})},function(){var u=y.createElement("input"),d=y.createElement("select"),v=d.appendChild(y.createElement("option"));u.type="checkbox",M.checkOn=u.value!=="",M.optSelected=v.selected,u=y.createElement("input"),u.value="t",u.type="radio",M.radioValue=u.value==="t"}();var ed,Da=p.expr.attrHandle;p.fn.extend({attr:function(u,d){return Ge(this,p.attr,u,d,arguments.length>1)},removeAttr:function(u){return this.each(function(){p.removeAttr(this,u)})}}),p.extend({attr:function(u,d,v){var w,T,A=u.nodeType;if(!(A===3||A===8||A===2)){if(typeof u.getAttribute>"u")return p.prop(u,d,v);if((A!==1||!p.isXMLDoc(u))&&(T=p.attrHooks[d.toLowerCase()]||(p.expr.match.bool.test(d)?ed:void 0)),v!==void 0){if(v===null){p.removeAttr(u,d);return}return T&&"set"in T&&(w=T.set(u,v,d))!==void 0?w:(u.setAttribute(d,v+""),v)}return T&&"get"in T&&(w=T.get(u,d))!==null?w:(w=p.find.attr(u,d),w??void 0)}},attrHooks:{type:{set:function(u,d){if(!M.radioValue&&d==="radio"&&ye(u,"input")){var v=u.value;return u.setAttribute("type",d),v&&(u.value=v),d}}}},removeAttr:function(u,d){var v,w=0,T=d&&d.match(fe);if(T&&u.nodeType===1)for(;v=T[w++];)u.removeAttribute(v)}}),ed={set:function(u,d,v){return d===!1?p.removeAttr(u,v):u.setAttribute(v,v),v}},p.each(p.expr.match.bool.source.match(/\w+/g),function(u,d){var v=Da[d]||p.find.attr;Da[d]=function(w,T,A){var I,V,G=T.toLowerCase();return A||(V=Da[G],Da[G]=I,I=v(w,T,A)!=null?G:null,Da[G]=V),I}});var $_=/^(?:input|select|textarea|button)$/i,J_=/^(?:a|area)$/i;p.fn.extend({prop:function(u,d){return Ge(this,p.prop,u,d,arguments.length>1)},removeProp:function(u){return this.each(function(){delete this[p.propFix[u]||u]})}}),p.extend({prop:function(u,d,v){var w,T,A=u.nodeType;if(!(A===3||A===8||A===2))return(A!==1||!p.isXMLDoc(u))&&(d=p.propFix[d]||d,T=p.propHooks[d]),v!==void 0?T&&"set"in T&&(w=T.set(u,v,d))!==void 0?w:u[d]=v:T&&"get"in T&&(w=T.get(u,d))!==null?w:u[d]},propHooks:{tabIndex:{get:function(u){var d=p.find.attr(u,"tabindex");return d?parseInt(d,10):$_.test(u.nodeName)||J_.test(u.nodeName)&&u.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),M.optSelected||(p.propHooks.selected={get:function(u){var d=u.parentNode;return d&&d.parentNode&&d.parentNode.selectedIndex,null},set:function(u){var d=u.parentNode;d&&(d.selectedIndex,d.parentNode&&d.parentNode.selectedIndex)}}),p.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){p.propFix[this.toLowerCase()]=this});function qr(u){var d=u.match(fe)||[];return d.join(" ")}function Xr(u){return u.getAttribute&&u.getAttribute("class")||""}function Nc(u){return Array.isArray(u)?u:typeof u=="string"?u.match(fe)||[]:[]}p.fn.extend({addClass:function(u){var d,v,w,T,A,I,V,G=0;if(x(u))return this.each(function(K){p(this).addClass(u.call(this,K,Xr(this)))});if(d=Nc(u),d.length){for(;v=this[G++];)if(T=Xr(v),w=v.nodeType===1&&" "+qr(T)+" ",w){for(I=0;A=d[I++];)w.indexOf(" "+A+" ")<0&&(w+=A+" ");V=qr(w),T!==V&&v.setAttribute("class",V)}}return this},removeClass:function(u){var d,v,w,T,A,I,V,G=0;if(x(u))return this.each(function(K){p(this).removeClass(u.call(this,K,Xr(this)))});if(!arguments.length)return this.attr("class","");if(d=Nc(u),d.length){for(;v=this[G++];)if(T=Xr(v),w=v.nodeType===1&&" "+qr(T)+" ",w){for(I=0;A=d[I++];)for(;w.indexOf(" "+A+" ")>-1;)w=w.replace(" "+A+" "," ");V=qr(w),T!==V&&v.setAttribute("class",V)}}return this},toggleClass:function(u,d){var v=typeof u,w=v==="string"||Array.isArray(u);return typeof d=="boolean"&&w?d?this.addClass(u):this.removeClass(u):x(u)?this.each(function(T){p(this).toggleClass(u.call(this,T,Xr(this),d),d)}):this.each(function(){var T,A,I,V;if(w)for(A=0,I=p(this),V=Nc(u);T=V[A++];)I.hasClass(T)?I.removeClass(T):I.addClass(T);else(u===void 0||v==="boolean")&&(T=Xr(this),T&&E.set(this,"__className__",T),this.setAttribute&&this.setAttribute("class",T||u===!1?"":E.get(this,"__className__")||""))})},hasClass:function(u){var d,v,w=0;for(d=" "+u+" ";v=this[w++];)if(v.nodeType===1&&(" "+qr(Xr(v))+" ").indexOf(d)>-1)return!0;return!1}});var Z_=/\r/g;p.fn.extend({val:function(u){var d,v,w,T=this[0];return arguments.length?(w=x(u),this.each(function(A){var I;this.nodeType===1&&(w?I=u.call(this,A,p(this).val()):I=u,I==null?I="":typeof I=="number"?I+="":Array.isArray(I)&&(I=p.map(I,function(V){return V==null?"":V+""})),d=p.valHooks[this.type]||p.valHooks[this.nodeName.toLowerCase()],(!d||!("set"in d)||d.set(this,I,"value")===void 0)&&(this.value=I))})):T?(d=p.valHooks[T.type]||p.valHooks[T.nodeName.toLowerCase()],d&&"get"in d&&(v=d.get(T,"value"))!==void 0?v:(v=T.value,typeof v=="string"?v.replace(Z_,""):v??"")):void 0}}),p.extend({valHooks:{option:{get:function(u){var d=p.find.attr(u,"value");return d??qr(p.text(u))}},select:{get:function(u){var d,v,w,T=u.options,A=u.selectedIndex,I=u.type==="select-one",V=I?null:[],G=I?A+1:T.length;for(A<0?w=G:w=I?A:0;w<G;w++)if(v=T[w],(v.selected||w===A)&&!v.disabled&&(!v.parentNode.disabled||!ye(v.parentNode,"optgroup"))){if(d=p(v).val(),I)return d;V.push(d)}return V},set:function(u,d){for(var v,w,T=u.options,A=p.makeArray(d),I=T.length;I--;)w=T[I],(w.selected=p.inArray(p.valHooks.option.get(w),A)>-1)&&(v=!0);return v||(u.selectedIndex=-1),A}}}}),p.each(["radio","checkbox"],function(){p.valHooks[this]={set:function(u,d){if(Array.isArray(d))return u.checked=p.inArray(p(u).val(),d)>-1}},M.checkOn||(p.valHooks[this].get=function(u){return u.getAttribute("value")===null?"on":u.value})}),M.focusin="onfocusin"in e;var td=/^(?:focusinfocus|focusoutblur)$/,nd=function(u){u.stopPropagation()};p.extend(p.event,{trigger:function(u,d,v,w){var T,A,I,V,G,K,he,Ae,le=[v||y],ve=m.call(u,"type")?u.type:u,je=m.call(u,"namespace")?u.namespace.split("."):[];if(A=Ae=I=v=v||y,!(v.nodeType===3||v.nodeType===8)&&!td.test(ve+p.event.triggered)&&(ve.indexOf(".")>-1&&(je=ve.split("."),ve=je.shift(),je.sort()),G=ve.indexOf(":")<0&&"on"+ve,u=u[p.expando]?u:new p.Event(ve,typeof u=="object"&&u),u.isTrigger=w?2:3,u.namespace=je.join("."),u.rnamespace=u.namespace?new RegExp("(^|\\.)"+je.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,u.result=void 0,u.target||(u.target=v),d=d==null?[u]:p.makeArray(d,[u]),he=p.event.special[ve]||{},!(!w&&he.trigger&&he.trigger.apply(v,d)===!1))){if(!w&&!he.noBubble&&!C(v)){for(V=he.delegateType||ve,td.test(V+ve)||(A=A.parentNode);A;A=A.parentNode)le.push(A),I=A;I===(v.ownerDocument||y)&&le.push(I.defaultView||I.parentWindow||e)}for(T=0;(A=le[T++])&&!u.isPropagationStopped();)Ae=A,u.type=T>1?V:he.bindType||ve,K=(E.get(A,"events")||Object.create(null))[u.type]&&E.get(A,"handle"),K&&K.apply(A,d),K=G&&A[G],K&&K.apply&&S(A)&&(u.result=K.apply(A,d),u.result===!1&&u.preventDefault());return u.type=ve,!w&&!u.isDefaultPrevented()&&(!he._default||he._default.apply(le.pop(),d)===!1)&&S(v)&&G&&x(v[ve])&&!C(v)&&(I=v[G],I&&(v[G]=null),p.event.triggered=ve,u.isPropagationStopped()&&Ae.addEventListener(ve,nd),v[ve](),u.isPropagationStopped()&&Ae.removeEventListener(ve,nd),p.event.triggered=void 0,I&&(v[G]=I)),u.result}},simulate:function(u,d,v){var w=p.extend(new p.Event,v,{type:u,isSimulated:!0});p.event.trigger(w,null,d)}}),p.fn.extend({trigger:function(u,d){return this.each(function(){p.event.trigger(u,d,this)})},triggerHandler:function(u,d){var v=this[0];if(v)return p.event.trigger(u,d,v,!0)}}),M.focusin||p.each({focus:"focusin",blur:"focusout"},function(u,d){var v=function(w){p.event.simulate(d,w.target,p.event.fix(w))};p.event.special[d]={setup:function(){var w=this.ownerDocument||this.document||this,T=E.access(w,d);T||w.addEventListener(u,v,!0),E.access(w,d,(T||0)+1)},teardown:function(){var w=this.ownerDocument||this.document||this,T=E.access(w,d)-1;T?E.access(w,d,T):(w.removeEventListener(u,v,!0),E.remove(w,d))}}});var Na=e.location,id={guid:Date.now()},Oc=/\?/;p.parseXML=function(u){var d,v;if(!u||typeof u!="string")return null;try{d=new e.DOMParser().parseFromString(u,"text/xml")}catch{}return v=d&&d.getElementsByTagName("parsererror")[0],(!d||v)&&p.error("Invalid XML: "+(v?p.map(v.childNodes,function(w){return w.textContent}).join(`
`):u)),d};var Q_=/\[\]$/,rd=/\r?\n/g,K_=/^(?:submit|button|image|reset|file)$/i,e0=/^(?:input|select|textarea|keygen)/i;function Fc(u,d,v,w){var T;if(Array.isArray(d))p.each(d,function(A,I){v||Q_.test(u)?w(u,I):Fc(u+"["+(typeof I=="object"&&I!=null?A:"")+"]",I,v,w)});else if(!v&&P(d)==="object")for(T in d)Fc(u+"["+T+"]",d[T],v,w);else w(u,d)}p.param=function(u,d){var v,w=[],T=function(A,I){var V=x(I)?I():I;w[w.length]=encodeURIComponent(A)+"="+encodeURIComponent(V??"")};if(u==null)return"";if(Array.isArray(u)||u.jquery&&!p.isPlainObject(u))p.each(u,function(){T(this.name,this.value)});else for(v in u)Fc(v,u[v],d,T);return w.join("&")},p.fn.extend({serialize:function(){return p.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var u=p.prop(this,"elements");return u?p.makeArray(u):this}).filter(function(){var u=this.type;return this.name&&!p(this).is(":disabled")&&e0.test(this.nodeName)&&!K_.test(u)&&(this.checked||!Be.test(u))}).map(function(u,d){var v=p(this).val();return v==null?null:Array.isArray(v)?p.map(v,function(w){return{name:d.name,value:w.replace(rd,`\r
`)}}):{name:d.name,value:v.replace(rd,`\r
`)}}).get()}});var t0=/%20/g,n0=/#.*$/,i0=/([?&])_=[^&]*/,r0=/^(.*?):[ \t]*([^\r\n]*)$/mg,s0=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,a0=/^(?:GET|HEAD)$/,o0=/^\/\//,sd={},zc={},ad="*/".concat("*"),Bc=y.createElement("a");Bc.href=Na.href;function od(u){return function(d,v){typeof d!="string"&&(v=d,d="*");var w,T=0,A=d.toLowerCase().match(fe)||[];if(x(v))for(;w=A[T++];)w[0]==="+"?(w=w.slice(1)||"*",(u[w]=u[w]||[]).unshift(v)):(u[w]=u[w]||[]).push(v)}}function ld(u,d,v,w){var T={},A=u===zc;function I(V){var G;return T[V]=!0,p.each(u[V]||[],function(K,he){var Ae=he(d,v,w);if(typeof Ae=="string"&&!A&&!T[Ae])return d.dataTypes.unshift(Ae),I(Ae),!1;if(A)return!(G=Ae)}),G}return I(d.dataTypes[0])||!T["*"]&&I("*")}function kc(u,d){var v,w,T=p.ajaxSettings.flatOptions||{};for(v in d)d[v]!==void 0&&((T[v]?u:w||(w={}))[v]=d[v]);return w&&p.extend(!0,u,w),u}function l0(u,d,v){for(var w,T,A,I,V=u.contents,G=u.dataTypes;G[0]==="*";)G.shift(),w===void 0&&(w=u.mimeType||d.getResponseHeader("Content-Type"));if(w){for(T in V)if(V[T]&&V[T].test(w)){G.unshift(T);break}}if(G[0]in v)A=G[0];else{for(T in v){if(!G[0]||u.converters[T+" "+G[0]]){A=T;break}I||(I=T)}A=A||I}if(A)return A!==G[0]&&G.unshift(A),v[A]}function c0(u,d,v,w){var T,A,I,V,G,K={},he=u.dataTypes.slice();if(he[1])for(I in u.converters)K[I.toLowerCase()]=u.converters[I];for(A=he.shift();A;)if(u.responseFields[A]&&(v[u.responseFields[A]]=d),!G&&w&&u.dataFilter&&(d=u.dataFilter(d,u.dataType)),G=A,A=he.shift(),A){if(A==="*")A=G;else if(G!=="*"&&G!==A){if(I=K[G+" "+A]||K["* "+A],!I){for(T in K)if(V=T.split(" "),V[1]===A&&(I=K[G+" "+V[0]]||K["* "+V[0]],I)){I===!0?I=K[T]:K[T]!==!0&&(A=V[0],he.unshift(V[1]));break}}if(I!==!0)if(I&&u.throws)d=I(d);else try{d=I(d)}catch(Ae){return{state:"parsererror",error:I?Ae:"No conversion from "+G+" to "+A}}}}return{state:"success",data:d}}p.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Na.href,type:"GET",isLocal:s0.test(Na.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":ad,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":p.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(u,d){return d?kc(kc(u,p.ajaxSettings),d):kc(p.ajaxSettings,u)},ajaxPrefilter:od(sd),ajaxTransport:od(zc),ajax:function(u,d){typeof u=="object"&&(d=u,u=void 0),d=d||{};var v,w,T,A,I,V,G,K,he,Ae,le=p.ajaxSetup({},d),ve=le.context||le,je=le.context&&(ve.nodeType||ve.jquery)?p(ve):p.event,ct=p.Deferred(),qe=p.Callbacks("once memory"),an=le.statusCode||{},nn={},Yn={},Rt="canceled",ot={readyState:0,getResponseHeader:function(yt){var Wt;if(G){if(!A)for(A={};Wt=r0.exec(T);)A[Wt[1].toLowerCase()+" "]=(A[Wt[1].toLowerCase()+" "]||[]).concat(Wt[2]);Wt=A[yt.toLowerCase()+" "]}return Wt==null?null:Wt.join(", ")},getAllResponseHeaders:function(){return G?T:null},setRequestHeader:function(yt,Wt){return G==null&&(yt=Yn[yt.toLowerCase()]=Yn[yt.toLowerCase()]||yt,nn[yt]=Wt),this},overrideMimeType:function(yt){return G==null&&(le.mimeType=yt),this},statusCode:function(yt){var Wt;if(yt)if(G)ot.always(yt[ot.status]);else for(Wt in yt)an[Wt]=[an[Wt],yt[Wt]];return this},abort:function(yt){var Wt=yt||Rt;return v&&v.abort(Wt),Dn(0,Wt),this}};if(ct.promise(ot),le.url=((u||le.url||Na.href)+"").replace(o0,Na.protocol+"//"),le.type=d.method||d.type||le.method||le.type,le.dataTypes=(le.dataType||"*").toLowerCase().match(fe)||[""],le.crossDomain==null){V=y.createElement("a");try{V.href=le.url,V.href=V.href,le.crossDomain=Bc.protocol+"//"+Bc.host!=V.protocol+"//"+V.host}catch{le.crossDomain=!0}}if(le.data&&le.processData&&typeof le.data!="string"&&(le.data=p.param(le.data,le.traditional)),ld(sd,le,d,ot),G)return ot;K=p.event&&le.global,K&&p.active++===0&&p.event.trigger("ajaxStart"),le.type=le.type.toUpperCase(),le.hasContent=!a0.test(le.type),w=le.url.replace(n0,""),le.hasContent?le.data&&le.processData&&(le.contentType||"").indexOf("application/x-www-form-urlencoded")===0&&(le.data=le.data.replace(t0,"+")):(Ae=le.url.slice(w.length),le.data&&(le.processData||typeof le.data=="string")&&(w+=(Oc.test(w)?"&":"?")+le.data,delete le.data),le.cache===!1&&(w=w.replace(i0,"$1"),Ae=(Oc.test(w)?"&":"?")+"_="+id.guid+++Ae),le.url=w+Ae),le.ifModified&&(p.lastModified[w]&&ot.setRequestHeader("If-Modified-Since",p.lastModified[w]),p.etag[w]&&ot.setRequestHeader("If-None-Match",p.etag[w])),(le.data&&le.hasContent&&le.contentType!==!1||d.contentType)&&ot.setRequestHeader("Content-Type",le.contentType),ot.setRequestHeader("Accept",le.dataTypes[0]&&le.accepts[le.dataTypes[0]]?le.accepts[le.dataTypes[0]]+(le.dataTypes[0]!=="*"?", "+ad+"; q=0.01":""):le.accepts["*"]);for(he in le.headers)ot.setRequestHeader(he,le.headers[he]);if(le.beforeSend&&(le.beforeSend.call(ve,ot,le)===!1||G))return ot.abort();if(Rt="abort",qe.add(le.complete),ot.done(le.success),ot.fail(le.error),v=ld(zc,le,d,ot),!v)Dn(-1,"No Transport");else{if(ot.readyState=1,K&&je.trigger("ajaxSend",[ot,le]),G)return ot;le.async&&le.timeout>0&&(I=e.setTimeout(function(){ot.abort("timeout")},le.timeout));try{G=!1,v.send(nn,Dn)}catch(yt){if(G)throw yt;Dn(-1,yt)}}function Dn(yt,Wt,Fa,$o){var $n,Yr,$r,Nn,dr,oi=Wt;G||(G=!0,I&&e.clearTimeout(I),v=void 0,T=$o||"",ot.readyState=yt>0?4:0,$n=yt>=200&&yt<300||yt===304,Fa&&(Nn=l0(le,ot,Fa)),!$n&&p.inArray("script",le.dataTypes)>-1&&p.inArray("json",le.dataTypes)<0&&(le.converters["text script"]=function(){}),Nn=c0(le,Nn,ot,$n),$n?(le.ifModified&&(dr=ot.getResponseHeader("Last-Modified"),dr&&(p.lastModified[w]=dr),dr=ot.getResponseHeader("etag"),dr&&(p.etag[w]=dr)),yt===204||le.type==="HEAD"?oi="nocontent":yt===304?oi="notmodified":(oi=Nn.state,Yr=Nn.data,$r=Nn.error,$n=!$r)):($r=oi,(yt||!oi)&&(oi="error",yt<0&&(yt=0))),ot.status=yt,ot.statusText=(Wt||oi)+"",$n?ct.resolveWith(ve,[Yr,oi,ot]):ct.rejectWith(ve,[ot,oi,$r]),ot.statusCode(an),an=void 0,K&&je.trigger($n?"ajaxSuccess":"ajaxError",[ot,le,$n?Yr:$r]),qe.fireWith(ve,[ot,oi]),K&&(je.trigger("ajaxComplete",[ot,le]),--p.active||p.event.trigger("ajaxStop")))}return ot},getJSON:function(u,d,v){return p.get(u,d,v,"json")},getScript:function(u,d){return p.get(u,void 0,d,"script")}}),p.each(["get","post"],function(u,d){p[d]=function(v,w,T,A){return x(w)&&(A=A||T,T=w,w=void 0),p.ajax(p.extend({url:v,type:d,dataType:A,data:w,success:T},p.isPlainObject(v)&&v))}}),p.ajaxPrefilter(function(u){var d;for(d in u.headers)d.toLowerCase()==="content-type"&&(u.contentType=u.headers[d]||"")}),p._evalUrl=function(u,d,v){return p.ajax({url:u,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(w){p.globalEval(w,d,v)}})},p.fn.extend({wrapAll:function(u){var d;return this[0]&&(x(u)&&(u=u.call(this[0])),d=p(u,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&d.insertBefore(this[0]),d.map(function(){for(var v=this;v.firstElementChild;)v=v.firstElementChild;return v}).append(this)),this},wrapInner:function(u){return x(u)?this.each(function(d){p(this).wrapInner(u.call(this,d))}):this.each(function(){var d=p(this),v=d.contents();v.length?v.wrapAll(u):d.append(u)})},wrap:function(u){var d=x(u);return this.each(function(v){p(this).wrapAll(d?u.call(this,v):u)})},unwrap:function(u){return this.parent(u).not("body").each(function(){p(this).replaceWith(this.childNodes)}),this}}),p.expr.pseudos.hidden=function(u){return!p.expr.pseudos.visible(u)},p.expr.pseudos.visible=function(u){return!!(u.offsetWidth||u.offsetHeight||u.getClientRects().length)},p.ajaxSettings.xhr=function(){try{return new e.XMLHttpRequest}catch{}};var u0={0:200,1223:204},Oa=p.ajaxSettings.xhr();M.cors=!!Oa&&"withCredentials"in Oa,M.ajax=Oa=!!Oa,p.ajaxTransport(function(u){var d,v;if(M.cors||Oa&&!u.crossDomain)return{send:function(w,T){var A,I=u.xhr();if(I.open(u.type,u.url,u.async,u.username,u.password),u.xhrFields)for(A in u.xhrFields)I[A]=u.xhrFields[A];u.mimeType&&I.overrideMimeType&&I.overrideMimeType(u.mimeType),!u.crossDomain&&!w["X-Requested-With"]&&(w["X-Requested-With"]="XMLHttpRequest");for(A in w)I.setRequestHeader(A,w[A]);d=function(V){return function(){d&&(d=v=I.onload=I.onerror=I.onabort=I.ontimeout=I.onreadystatechange=null,V==="abort"?I.abort():V==="error"?typeof I.status!="number"?T(0,"error"):T(I.status,I.statusText):T(u0[I.status]||I.status,I.statusText,(I.responseType||"text")!=="text"||typeof I.responseText!="string"?{binary:I.response}:{text:I.responseText},I.getAllResponseHeaders()))}},I.onload=d(),v=I.onerror=I.ontimeout=d("error"),I.onabort!==void 0?I.onabort=v:I.onreadystatechange=function(){I.readyState===4&&e.setTimeout(function(){d&&v()})},d=d("abort");try{I.send(u.hasContent&&u.data||null)}catch(V){if(d)throw V}},abort:function(){d&&d()}}}),p.ajaxPrefilter(function(u){u.crossDomain&&(u.contents.script=!1)}),p.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(u){return p.globalEval(u),u}}}),p.ajaxPrefilter("script",function(u){u.cache===void 0&&(u.cache=!1),u.crossDomain&&(u.type="GET")}),p.ajaxTransport("script",function(u){if(u.crossDomain||u.scriptAttrs){var d,v;return{send:function(w,T){d=p("<script>").attr(u.scriptAttrs||{}).prop({charset:u.scriptCharset,src:u.url}).on("load error",v=function(A){d.remove(),v=null,A&&T(A.type==="error"?404:200,A.type)}),y.head.appendChild(d[0])},abort:function(){v&&v()}}}});var cd=[],Uc=/(=)\?(?=&|$)|\?\?/;p.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var u=cd.pop()||p.expando+"_"+id.guid++;return this[u]=!0,u}}),p.ajaxPrefilter("json jsonp",function(u,d,v){var w,T,A,I=u.jsonp!==!1&&(Uc.test(u.url)?"url":typeof u.data=="string"&&(u.contentType||"").indexOf("application/x-www-form-urlencoded")===0&&Uc.test(u.data)&&"data");if(I||u.dataTypes[0]==="jsonp")return w=u.jsonpCallback=x(u.jsonpCallback)?u.jsonpCallback():u.jsonpCallback,I?u[I]=u[I].replace(Uc,"$1"+w):u.jsonp!==!1&&(u.url+=(Oc.test(u.url)?"&":"?")+u.jsonp+"="+w),u.converters["script json"]=function(){return A||p.error(w+" was not called"),A[0]},u.dataTypes[0]="json",T=e[w],e[w]=function(){A=arguments},v.always(function(){T===void 0?p(e).removeProp(w):e[w]=T,u[w]&&(u.jsonpCallback=d.jsonpCallback,cd.push(w)),A&&x(T)&&T(A[0]),A=T=void 0}),"script"}),M.createHTMLDocument=function(){var u=y.implementation.createHTMLDocument("").body;return u.innerHTML="<form></form><form></form>",u.childNodes.length===2}(),p.parseHTML=function(u,d,v){if(typeof u!="string")return[];typeof d=="boolean"&&(v=d,d=!1);var w,T,A;return d||(M.createHTMLDocument?(d=y.implementation.createHTMLDocument(""),w=d.createElement("base"),w.href=y.location.href,d.head.appendChild(w)):d=y),T=ie.exec(u),A=!v&&[],T?[d.createElement(T[1])]:(T=ur([u],d,A),A&&A.length&&p(A).remove(),p.merge([],T.childNodes))},p.fn.load=function(u,d,v){var w,T,A,I=this,V=u.indexOf(" ");return V>-1&&(w=qr(u.slice(V)),u=u.slice(0,V)),x(d)?(v=d,d=void 0):d&&typeof d=="object"&&(T="POST"),I.length>0&&p.ajax({url:u,type:T||"GET",dataType:"html",data:d}).done(function(G){A=arguments,I.html(w?p("<div>").append(p.parseHTML(G)).find(w):G)}).always(v&&function(G,K){I.each(function(){v.apply(this,A||[G.responseText,K,G])})}),this},p.expr.pseudos.animated=function(u){return p.grep(p.timers,function(d){return u===d.elem}).length},p.offset={setOffset:function(u,d,v){var w,T,A,I,V,G,K,he=p.css(u,"position"),Ae=p(u),le={};he==="static"&&(u.style.position="relative"),V=Ae.offset(),A=p.css(u,"top"),G=p.css(u,"left"),K=(he==="absolute"||he==="fixed")&&(A+G).indexOf("auto")>-1,K?(w=Ae.position(),I=w.top,T=w.left):(I=parseFloat(A)||0,T=parseFloat(G)||0),x(d)&&(d=d.call(u,v,p.extend({},V))),d.top!=null&&(le.top=d.top-V.top+I),d.left!=null&&(le.left=d.left-V.left+T),"using"in d?d.using.call(u,le):Ae.css(le)}},p.fn.extend({offset:function(u){if(arguments.length)return u===void 0?this:this.each(function(T){p.offset.setOffset(this,u,T)});var d,v,w=this[0];if(w)return w.getClientRects().length?(d=w.getBoundingClientRect(),v=w.ownerDocument.defaultView,{top:d.top+v.pageYOffset,left:d.left+v.pageXOffset}):{top:0,left:0}},position:function(){if(this[0]){var u,d,v,w=this[0],T={top:0,left:0};if(p.css(w,"position")==="fixed")d=w.getBoundingClientRect();else{for(d=this.offset(),v=w.ownerDocument,u=w.offsetParent||v.documentElement;u&&(u===v.body||u===v.documentElement)&&p.css(u,"position")==="static";)u=u.parentNode;u&&u!==w&&u.nodeType===1&&(T=p(u).offset(),T.top+=p.css(u,"borderTopWidth",!0),T.left+=p.css(u,"borderLeftWidth",!0))}return{top:d.top-T.top-p.css(w,"marginTop",!0),left:d.left-T.left-p.css(w,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var u=this.offsetParent;u&&p.css(u,"position")==="static";)u=u.offsetParent;return u||xe})}}),p.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(u,d){var v=d==="pageYOffset";p.fn[u]=function(w){return Ge(this,function(T,A,I){var V;if(C(T)?V=T:T.nodeType===9&&(V=T.defaultView),I===void 0)return V?V[d]:T[A];V?V.scrollTo(v?V.pageXOffset:I,v?I:V.pageYOffset):T[A]=I},u,w,arguments.length)}}),p.each(["top","left"],function(u,d){p.cssHooks[d]=ht(M.pixelPosition,function(v,w){if(w)return w=ft(v,d),st.test(w)?p(v).position()[d]+"px":w})}),p.each({Height:"height",Width:"width"},function(u,d){p.each({padding:"inner"+u,content:d,"":"outer"+u},function(v,w){p.fn[w]=function(T,A){var I=arguments.length&&(v||typeof T!="boolean"),V=v||(T===!0||A===!0?"margin":"border");return Ge(this,function(G,K,he){var Ae;return C(G)?w.indexOf("outer")===0?G["inner"+u]:G.document.documentElement["client"+u]:G.nodeType===9?(Ae=G.documentElement,Math.max(G.body["scroll"+u],Ae["scroll"+u],G.body["offset"+u],Ae["offset"+u],Ae["client"+u])):he===void 0?p.css(G,K,V):p.style(G,K,he,V)},d,I?T:void 0,I)}})}),p.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(u,d){p.fn[d]=function(v){return this.on(d,v)}}),p.fn.extend({bind:function(u,d,v){return this.on(u,null,d,v)},unbind:function(u,d){return this.off(u,null,d)},delegate:function(u,d,v,w){return this.on(d,u,v,w)},undelegate:function(u,d,v){return arguments.length===1?this.off(u,"**"):this.off(d,u||"**",v)},hover:function(u,d){return this.mouseenter(u).mouseleave(d||u)}}),p.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(u,d){p.fn[d]=function(v,w){return arguments.length>0?this.on(d,null,v,w):this.trigger(d)}});var h0=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;p.proxy=function(u,d){var v,w,T;if(typeof d=="string"&&(v=u[d],d=u,u=v),!!x(u))return w=a.call(arguments,2),T=function(){return u.apply(d||this,w.concat(a.call(arguments)))},T.guid=u.guid=u.guid||p.guid++,T},p.holdReady=function(u){u?p.readyWait++:p.ready(!0)},p.isArray=Array.isArray,p.parseJSON=JSON.parse,p.nodeName=ye,p.isFunction=x,p.isWindow=C,p.camelCase=Se,p.type=P,p.now=Date.now,p.isNumeric=function(u){var d=p.type(u);return(d==="number"||d==="string")&&!isNaN(u-parseFloat(u))},p.trim=function(u){return u==null?"":(u+"").replace(h0,"")};var f0=e.jQuery,d0=e.$;return p.noConflict=function(u){return e.$===p&&(e.$=d0),u&&e.jQuery===p&&(e.jQuery=f0),p},typeof t>"u"&&(e.jQuery=e.$=p),p})}(Jc)),Jc.exports}(function(r){(function(e){var t=typeof self=="object"&&self.self===self&&self||typeof Qa=="object"&&Qa.global===Qa&&Qa;{var n=iy,i;try{i=jg()}catch{}e(t,r,n,i)}})(function(e,t,n,i){var a=e.Backbone,o=Array.prototype.slice;t.VERSION="1.4.0",t.$=i,t.noConflict=function(){return e.Backbone=a,this},t.emulateHTTP=!1,t.emulateJSON=!1;var l=t.Events={},c=/\s+/,h,f=function(S,R,E,B,H){var J=0,Q;if(E&&typeof E=="object")for(B!==void 0&&("context"in H)&&H.context===void 0&&(H.context=B),Q=n.keys(E);J<Q.length;J++)R=f(S,R,Q[J],E[Q[J]],H);else if(E&&c.test(E))for(Q=E.split(c);J<Q.length;J++)R=S(R,Q[J],B,H);else R=S(R,E,B,H);return R};l.on=function(S,R,E){if(this._events=f(m,this._events||{},S,R,{context:E,ctx:this,listening:h}),h){var B=this._listeners||(this._listeners={});B[h.id]=h,h.interop=!1}return this},l.listenTo=function(S,R,E){if(!S)return this;var B=S._listenId||(S._listenId=n.uniqueId("l")),H=this._listeningTo||(this._listeningTo={}),J=h=H[B];J||(this._listenId||(this._listenId=n.uniqueId("l")),J=h=H[B]=new y(this,S));var Q=g(S,R,E,this);if(h=void 0,Q)throw Q;return J.interop&&J.on(R,E),this};var m=function(S,R,E,B){if(E){var H=S[R]||(S[R]=[]),J=B.context,Q=B.ctx,z=B.listening;z&&z.count++,H.push({callback:E,context:J,ctx:J||Q,listening:z})}return S},g=function(S,R,E,B){try{S.on(R,E,B)}catch(H){return H}};l.off=function(S,R,E){return this._events?(this._events=f(_,this._events,S,R,{context:E,listeners:this._listeners}),this):this},l.stopListening=function(S,R,E){var B=this._listeningTo;if(!B)return this;for(var H=S?[S._listenId]:n.keys(B),J=0;J<H.length;J++){var Q=B[H[J]];if(!Q)break;Q.obj.off(R,E,this),Q.interop&&Q.off(R,E)}return n.isEmpty(B)&&(this._listeningTo=void 0),this};var _=function(S,R,E,B){if(S){var H=B.context,J=B.listeners,Q=0,z;if(!R&&!H&&!E){for(z=n.keys(J);Q<z.length;Q++)J[z[Q]].cleanup();return}for(z=R?[R]:n.keys(S);Q<z.length;Q++){R=z[Q];var D=S[R];if(!D)break;for(var Z=[],te=0;te<D.length;te++){var xe=D[te];if(E&&E!==xe.callback&&E!==xe.callback._callback||H&&H!==xe.context)Z.push(xe);else{var Le=xe.listening;Le&&Le.off(R,E)}}Z.length?S[R]=Z:delete S[R]}return S}};l.once=function(S,R,E){var B=f(M,{},S,R,this.off.bind(this));return typeof S=="string"&&E==null&&(R=void 0),this.on(B,R,E)},l.listenToOnce=function(S,R,E){var B=f(M,{},R,E,this.stopListening.bind(this,S));return this.listenTo(S,B)};var M=function(S,R,E,B){if(E){var H=S[R]=n.once(function(){B(R,H),E.apply(this,arguments)});H._callback=E}return S};l.trigger=function(S){if(!this._events)return this;for(var R=Math.max(0,arguments.length-1),E=Array(R),B=0;B<R;B++)E[B]=arguments[B+1];return f(x,this._events,S,void 0,E),this};var x=function(S,R,E,B){if(S){var H=S[R],J=S.all;H&&J&&(J=J.slice()),H&&C(H,B),J&&C(J,[R].concat(B))}return S},C=function(S,R){var E,B=-1,H=S.length,J=R[0],Q=R[1],z=R[2];switch(R.length){case 0:for(;++B<H;)(E=S[B]).callback.call(E.ctx);return;case 1:for(;++B<H;)(E=S[B]).callback.call(E.ctx,J);return;case 2:for(;++B<H;)(E=S[B]).callback.call(E.ctx,J,Q);return;case 3:for(;++B<H;)(E=S[B]).callback.call(E.ctx,J,Q,z);return;default:for(;++B<H;)(E=S[B]).callback.apply(E.ctx,R);return}},y=function(S,R){this.id=S._listenId,this.listener=S,this.obj=R,this.interop=!0,this.count=0,this._events=void 0};y.prototype.on=l.on,y.prototype.off=function(S,R){var E;this.interop?(this._events=f(_,this._events,S,R,{context:void 0,listeners:void 0}),E=!this._events):(this.count--,E=this.count===0),E&&this.cleanup()},y.prototype.cleanup=function(){delete this.listener._listeningTo[this.obj._listenId],this.interop||delete this.obj._listeners[this.id]},l.bind=l.on,l.unbind=l.off,n.extend(t,l);var b=t.Model=function(S,R){var E=S||{};R||(R={}),this.preinitialize.apply(this,arguments),this.cid=n.uniqueId(this.cidPrefix),this.attributes={},R.collection&&(this.collection=R.collection),R.parse&&(E=this.parse(E,R)||{});var B=n.result(this,"defaults");E=n.defaults(n.extend({},B,E),B),this.set(E,R),this.changed={},this.initialize.apply(this,arguments)};n.extend(b.prototype,l,{changed:null,validationError:null,idAttribute:"id",cidPrefix:"c",preinitialize:function(){},initialize:function(){},toJSON:function(S){return n.clone(this.attributes)},sync:function(){return t.sync.apply(this,arguments)},get:function(S){return this.attributes[S]},escape:function(S){return n.escape(this.get(S))},has:function(S){return this.get(S)!=null},matches:function(S){return!!n.iteratee(S,this)(this.attributes)},set:function(S,R,E){if(S==null)return this;var B;if(typeof S=="object"?(B=S,E=R):(B={})[S]=R,E||(E={}),!this._validate(B,E))return!1;var H=E.unset,J=E.silent,Q=[],z=this._changing;this._changing=!0,z||(this._previousAttributes=n.clone(this.attributes),this.changed={});var D=this.attributes,Z=this.changed,te=this._previousAttributes;for(var xe in B)R=B[xe],n.isEqual(D[xe],R)||Q.push(xe),n.isEqual(te[xe],R)?delete Z[xe]:Z[xe]=R,H?delete D[xe]:D[xe]=R;if(this.idAttribute in B&&(this.id=this.get(this.idAttribute)),!J){Q.length&&(this._pending=E);for(var Le=0;Le<Q.length;Le++)this.trigger("change:"+Q[Le],this,D[Q[Le]],E)}if(z)return this;if(!J)for(;this._pending;)E=this._pending,this._pending=!1,this.trigger("change",this,E);return this._pending=!1,this._changing=!1,this},unset:function(S,R){return this.set(S,void 0,n.extend({},R,{unset:!0}))},clear:function(S){var R={};for(var E in this.attributes)R[E]=void 0;return this.set(R,n.extend({},S,{unset:!0}))},hasChanged:function(S){return S==null?!n.isEmpty(this.changed):n.has(this.changed,S)},changedAttributes:function(S){if(!S)return this.hasChanged()?n.clone(this.changed):!1;var R=this._changing?this._previousAttributes:this.attributes,E={},B;for(var H in S){var J=S[H];n.isEqual(R[H],J)||(E[H]=J,B=!0)}return B?E:!1},previous:function(S){return S==null||!this._previousAttributes?null:this._previousAttributes[S]},previousAttributes:function(){return n.clone(this._previousAttributes)},fetch:function(S){S=n.extend({parse:!0},S);var R=this,E=S.success;return S.success=function(B){var H=S.parse?R.parse(B,S):B;if(!R.set(H,S))return!1;E&&E.call(S.context,R,B,S),R.trigger("sync",R,B,S)},Se(this,S),this.sync("read",this,S)},save:function(S,R,E){var B;S==null||typeof S=="object"?(B=S,E=R):(B={})[S]=R,E=n.extend({validate:!0,parse:!0},E);var H=E.wait;if(B&&!H){if(!this.set(B,E))return!1}else if(!this._validate(B,E))return!1;var J=this,Q=E.success,z=this.attributes;E.success=function(te){J.attributes=z;var xe=E.parse?J.parse(te,E):te;if(H&&(xe=n.extend({},B,xe)),xe&&!J.set(xe,E))return!1;Q&&Q.call(E.context,J,te,E),J.trigger("sync",J,te,E)},Se(this,E),B&&H&&(this.attributes=n.extend({},z,B));var D=this.isNew()?"create":E.patch?"patch":"update";D==="patch"&&!E.attrs&&(E.attrs=B);var Z=this.sync(D,this,E);return this.attributes=z,Z},destroy:function(S){S=S?n.clone(S):{};var R=this,E=S.success,B=S.wait,H=function(){R.stopListening(),R.trigger("destroy",R,R.collection,S)};S.success=function(Q){B&&H(),E&&E.call(S.context,R,Q,S),R.isNew()||R.trigger("sync",R,Q,S)};var J=!1;return this.isNew()?n.defer(S.success):(Se(this,S),J=this.sync("delete",this,S)),B||H(),J},url:function(){var S=n.result(this,"urlRoot")||n.result(this.collection,"url")||pe();if(this.isNew())return S;var R=this.get(this.idAttribute);return S.replace(/[^\/]$/,"$&/")+encodeURIComponent(R)},parse:function(S,R){return S},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return!this.has(this.idAttribute)},isValid:function(S){return this._validate({},n.extend({},S,{validate:!0}))},_validate:function(S,R){if(!R.validate||!this.validate)return!0;S=n.extend({},this.attributes,S);var E=this.validationError=this.validate(S,R)||null;return E?(this.trigger("invalid",this,E,n.extend(R,{validationError:E})),!1):!0}});var O=t.Collection=function(S,R){R||(R={}),this.preinitialize.apply(this,arguments),R.model&&(this.model=R.model),R.comparator!==void 0&&(this.comparator=R.comparator),this._reset(),this.initialize.apply(this,arguments),S&&this.reset(S,n.extend({silent:!0},R))},P={add:!0,remove:!0,merge:!0},F={add:!0,remove:!1},p=function(S,R,E){E=Math.min(Math.max(E,0),S.length);var B=Array(S.length-E),H=R.length,J;for(J=0;J<B.length;J++)B[J]=S[J+E];for(J=0;J<H;J++)S[J+E]=R[J];for(J=0;J<B.length;J++)S[J+H+E]=B[J]};n.extend(O.prototype,l,{model:b,preinitialize:function(){},initialize:function(){},toJSON:function(S){return this.map(function(R){return R.toJSON(S)})},sync:function(){return t.sync.apply(this,arguments)},add:function(S,R){return this.set(S,n.extend({merge:!1},R,F))},remove:function(S,R){R=n.extend({},R);var E=!n.isArray(S);S=E?[S]:S.slice();var B=this._removeModels(S,R);return!R.silent&&B.length&&(R.changes={added:[],merged:[],removed:B},this.trigger("update",this,R)),E?B[0]:B},set:function(S,R){if(S!=null){R=n.extend({},P,R),R.parse&&!this._isModel(S)&&(S=this.parse(S,R)||[]);var E=!n.isArray(S);S=E?[S]:S.slice();var B=R.at;B!=null&&(B=+B),B>this.length&&(B=this.length),B<0&&(B+=this.length+1);var H=[],J=[],Q=[],z=[],D={},Z=R.add,te=R.merge,xe=R.remove,Le=!1,Y=this.comparator&&B==null&&R.sort!==!1,Ne=n.isString(this.comparator)?this.comparator:null,ge,Re;for(Re=0;Re<S.length;Re++){ge=S[Re];var Ie=this.get(ge);if(Ie){if(te&&ge!==Ie){var Ue=this._isModel(ge)?ge.attributes:ge;R.parse&&(Ue=Ie.parse(Ue,R)),Ie.set(Ue,R),Q.push(Ie),Y&&!Le&&(Le=Ie.hasChanged(Ne))}D[Ie.cid]||(D[Ie.cid]=!0,H.push(Ie)),S[Re]=Ie}else Z&&(ge=S[Re]=this._prepareModel(ge,R),ge&&(J.push(ge),this._addReference(ge,R),D[ge.cid]=!0,H.push(ge)))}if(xe){for(Re=0;Re<this.length;Re++)ge=this.models[Re],D[ge.cid]||z.push(ge);z.length&&this._removeModels(z,R)}var Be=!1,it=!Y&&Z&&xe;if(H.length&&it?(Be=this.length!==H.length||n.some(this.models,function(Mt,Qe){return Mt!==H[Qe]}),this.models.length=0,p(this.models,H,0),this.length=this.models.length):J.length&&(Y&&(Le=!0),p(this.models,J,B??this.length),this.length=this.models.length),Le&&this.sort({silent:!0}),!R.silent){for(Re=0;Re<J.length;Re++)B!=null&&(R.index=B+Re),ge=J[Re],ge.trigger("add",ge,this,R);(Le||Be)&&this.trigger("sort",this,R),(J.length||z.length||Q.length)&&(R.changes={added:J,removed:z,merged:Q},this.trigger("update",this,R))}return E?S[0]:S}},reset:function(S,R){R=R?n.clone(R):{};for(var E=0;E<this.models.length;E++)this._removeReference(this.models[E],R);return R.previousModels=this.models,this._reset(),S=this.add(S,n.extend({silent:!0},R)),R.silent||this.trigger("reset",this,R),S},push:function(S,R){return this.add(S,n.extend({at:this.length},R))},pop:function(S){var R=this.at(this.length-1);return this.remove(R,S)},unshift:function(S,R){return this.add(S,n.extend({at:0},R))},shift:function(S){var R=this.at(0);return this.remove(R,S)},slice:function(){return o.apply(this.models,arguments)},get:function(S){if(S!=null)return this._byId[S]||this._byId[this.modelId(this._isModel(S)?S.attributes:S)]||S.cid&&this._byId[S.cid]},has:function(S){return this.get(S)!=null},at:function(S){return S<0&&(S+=this.length),this.models[S]},where:function(S,R){return this[R?"find":"filter"](S)},findWhere:function(S){return this.where(S,!0)},sort:function(S){var R=this.comparator;if(!R)throw new Error("Cannot sort a set without a comparator");S||(S={});var E=R.length;return n.isFunction(R)&&(R=R.bind(this)),E===1||n.isString(R)?this.models=this.sortBy(R):this.models.sort(R),S.silent||this.trigger("sort",this,S),this},pluck:function(S){return this.map(S+"")},fetch:function(S){S=n.extend({parse:!0},S);var R=S.success,E=this;return S.success=function(B){var H=S.reset?"reset":"set";E[H](B,S),R&&R.call(S.context,E,B,S),E.trigger("sync",E,B,S)},Se(this,S),this.sync("read",this,S)},create:function(S,R){R=R?n.clone(R):{};var E=R.wait;if(S=this._prepareModel(S,R),!S)return!1;E||this.add(S,R);var B=this,H=R.success;return R.success=function(J,Q,z){E&&B.add(J,z),H&&H.call(z.context,J,Q,z)},S.save(null,R),S},parse:function(S,R){return S},clone:function(){return new this.constructor(this.models,{model:this.model,comparator:this.comparator})},modelId:function(S){return S[this.model.prototype.idAttribute||"id"]},values:function(){return new W(this,X)},keys:function(){return new W(this,oe)},entries:function(){return new W(this,q)},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(S,R){if(this._isModel(S))return S.collection||(S.collection=this),S;R=R?n.clone(R):{},R.collection=this;var E=new this.model(S,R);return E.validationError?(this.trigger("invalid",this,E.validationError,R),!1):E},_removeModels:function(S,R){for(var E=[],B=0;B<S.length;B++){var H=this.get(S[B]);if(H){var J=this.indexOf(H);this.models.splice(J,1),this.length--,delete this._byId[H.cid];var Q=this.modelId(H.attributes);Q!=null&&delete this._byId[Q],R.silent||(R.index=J,H.trigger("remove",H,this,R)),E.push(H),this._removeReference(H,R)}}return E},_isModel:function(S){return S instanceof b},_addReference:function(S,R){this._byId[S.cid]=S;var E=this.modelId(S.attributes);E!=null&&(this._byId[E]=S),S.on("all",this._onModelEvent,this)},_removeReference:function(S,R){delete this._byId[S.cid];var E=this.modelId(S.attributes);E!=null&&delete this._byId[E],this===S.collection&&delete S.collection,S.off("all",this._onModelEvent,this)},_onModelEvent:function(S,R,E,B){if(R){if((S==="add"||S==="remove")&&E!==this)return;if(S==="destroy"&&this.remove(R,B),S==="change"){var H=this.modelId(R.previousAttributes()),J=this.modelId(R.attributes);H!==J&&(H!=null&&delete this._byId[H],J!=null&&(this._byId[J]=R))}}this.trigger.apply(this,arguments)}});var L=typeof Symbol=="function"&&Symbol.iterator;L&&(O.prototype[L]=O.prototype.values);var W=function(S,R){this._collection=S,this._kind=R,this._index=0},X=1,oe=2,q=3;L&&(W.prototype[L]=function(){return this}),W.prototype.next=function(){if(this._collection){if(this._index<this._collection.length){var S=this._collection.at(this._index);this._index++;var R;if(this._kind===X)R=S;else{var E=this._collection.modelId(S.attributes);this._kind===oe?R=E:R=[E,S]}return{value:R,done:!1}}this._collection=void 0}return{value:void 0,done:!0}};var ye=t.View=function(S){this.cid=n.uniqueId("view"),this.preinitialize.apply(this,arguments),n.extend(this,n.pick(S,ne)),this._ensureElement(),this.initialize.apply(this,arguments)},ie=/^(\S+)\s*(.*)$/,ne=["model","collection","el","id","attributes","className","tagName","events"];n.extend(ye.prototype,l,{tagName:"div",$:function(S){return this.$el.find(S)},preinitialize:function(){},initialize:function(){},render:function(){return this},remove:function(){return this._removeElement(),this.stopListening(),this},_removeElement:function(){this.$el.remove()},setElement:function(S){return this.undelegateEvents(),this._setElement(S),this.delegateEvents(),this},_setElement:function(S){this.$el=S instanceof t.$?S:t.$(S),this.el=this.$el[0]},delegateEvents:function(S){if(S||(S=n.result(this,"events")),!S)return this;this.undelegateEvents();for(var R in S){var E=S[R];if(n.isFunction(E)||(E=this[E]),!!E){var B=R.match(ie);this.delegate(B[1],B[2],E.bind(this))}}return this},delegate:function(S,R,E){return this.$el.on(S+".delegateEvents"+this.cid,R,E),this},undelegateEvents:function(){return this.$el&&this.$el.off(".delegateEvents"+this.cid),this},undelegate:function(S,R,E){return this.$el.off(S+".delegateEvents"+this.cid,R,E),this},_createElement:function(S){return document.createElement(S)},_ensureElement:function(){if(this.el)this.setElement(n.result(this,"el"));else{var S=n.extend({},n.result(this,"attributes"));this.id&&(S.id=n.result(this,"id")),this.className&&(S.class=n.result(this,"className")),this.setElement(this._createElement(n.result(this,"tagName"))),this._setAttributes(S)}},_setAttributes:function(S){this.$el.attr(S)}});var re=function(S,R,E,B){switch(R){case 1:return function(){return S[E](this[B])};case 2:return function(H){return S[E](this[B],H)};case 3:return function(H,J){return S[E](this[B],se(H,this),J)};case 4:return function(H,J,Q){return S[E](this[B],se(H,this),J,Q)};default:return function(){var H=o.call(arguments);return H.unshift(this[B]),S[E].apply(S,H)}}},ae=function(S,R,E,B){n.each(E,function(H,J){R[J]&&(S.prototype[J]=re(R,H,J,B))})},se=function(S,R){return n.isFunction(S)?S:n.isObject(S)&&!R._isModel(S)?be(S):n.isString(S)?function(E){return E.get(S)}:S},be=function(S){var R=n.matches(S);return function(E){return R(E.attributes)}},Oe={forEach:3,each:3,map:3,collect:3,reduce:0,foldl:0,inject:0,reduceRight:0,foldr:0,find:3,detect:3,filter:3,select:3,reject:3,every:3,all:3,some:3,any:3,include:3,includes:3,contains:3,invoke:0,max:3,min:3,toArray:1,size:1,first:3,head:3,take:3,initial:3,rest:3,tail:3,drop:3,last:3,without:0,difference:0,indexOf:3,shuffle:1,lastIndexOf:3,isEmpty:1,chain:1,sample:3,partition:3,groupBy:3,countBy:3,sortBy:3,indexBy:3,findIndex:3,findLastIndex:3},de={keys:1,values:1,pairs:1,invert:1,pick:0,omit:0,chain:1,isEmpty:1};n.each([[O,Oe,"models"],[b,de,"attributes"]],function(S){var R=S[0],E=S[1],B=S[2];R.mixin=function(H){var J=n.reduce(n.functions(H),function(Q,z){return Q[z]=0,Q},{});ae(R,H,J,B)},ae(R,n,E,B)}),t.sync=function(S,R,E){var B=fe[S];n.defaults(E||(E={}),{emulateHTTP:t.emulateHTTP,emulateJSON:t.emulateJSON});var H={type:B,dataType:"json"};if(E.url||(H.url=n.result(R,"url")||pe()),E.data==null&&R&&(S==="create"||S==="update"||S==="patch")&&(H.contentType="application/json",H.data=JSON.stringify(E.attrs||R.toJSON(E))),E.emulateJSON&&(H.contentType="application/x-www-form-urlencoded",H.data=H.data?{model:H.data}:{}),E.emulateHTTP&&(B==="PUT"||B==="DELETE"||B==="PATCH")){H.type="POST",E.emulateJSON&&(H.data._method=B);var J=E.beforeSend;E.beforeSend=function(D){if(D.setRequestHeader("X-HTTP-Method-Override",B),J)return J.apply(this,arguments)}}H.type!=="GET"&&!E.emulateJSON&&(H.processData=!1);var Q=E.error;E.error=function(D,Z,te){E.textStatus=Z,E.errorThrown=te,Q&&Q.call(E.context,D,Z,te)};var z=E.xhr=t.ajax(n.extend(H,E));return R.trigger("request",R,z,E),z};var fe={create:"POST",update:"PUT",patch:"PATCH",delete:"DELETE",read:"GET"};t.ajax=function(){return t.$.ajax.apply(t.$,arguments)};var ze=t.Router=function(S){S||(S={}),this.preinitialize.apply(this,arguments),S.routes&&(this.routes=S.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},De=/\((.*?)\)/g,ke=/(\(\?)?:\w+/g,rt=/\*\w+/g,Ee=/[\-{}\[\]+?.,\\\^$|#\s]/g;n.extend(ze.prototype,l,{preinitialize:function(){},initialize:function(){},route:function(S,R,E){n.isRegExp(S)||(S=this._routeToRegExp(S)),n.isFunction(R)&&(E=R,R=""),E||(E=this[R]);var B=this;return t.history.route(S,function(H){var J=B._extractParameters(S,H);B.execute(E,J,R)!==!1&&(B.trigger.apply(B,["route:"+R].concat(J)),B.trigger("route",R,J),t.history.trigger("route",B,R,J))}),this},execute:function(S,R,E){S&&S.apply(this,R)},navigate:function(S,R){return t.history.navigate(S,R),this},_bindRoutes:function(){if(this.routes){this.routes=n.result(this,"routes");for(var S,R=n.keys(this.routes);(S=R.pop())!=null;)this.route(S,this.routes[S])}},_routeToRegExp:function(S){return S=S.replace(Ee,"\\$&").replace(De,"(?:$1)?").replace(ke,function(R,E){return E?R:"([^/?]+)"}).replace(rt,"([^?]*?)"),new RegExp("^"+S+"(?:\\?([\\s\\S]*))?$")},_extractParameters:function(S,R){var E=S.exec(R).slice(1);return n.map(E,function(B,H){return H===E.length-1?B||null:B?decodeURIComponent(B):null})}});var Te=t.History=function(){this.handlers=[],this.checkUrl=this.checkUrl.bind(this),typeof window<"u"&&(this.location=window.location,this.history=window.history)},We=/^[#\/]|\s+$/g,Ge=/^\/+|\/+$/g,Xe=/#.*$/;Te.started=!1,n.extend(Te.prototype,l,{interval:50,atRoot:function(){var S=this.location.pathname.replace(/[^\/]$/,"$&/");return S===this.root&&!this.getSearch()},matchRoot:function(){var S=this.decodeFragment(this.location.pathname),R=S.slice(0,this.root.length-1)+"/";return R===this.root},decodeFragment:function(S){return decodeURI(S.replace(/%25/g,"%2525"))},getSearch:function(){var S=this.location.href.replace(/#.*/,"").match(/\?.+/);return S?S[0]:""},getHash:function(S){var R=(S||this).location.href.match(/#(.*)$/);return R?R[1]:""},getPath:function(){var S=this.decodeFragment(this.location.pathname+this.getSearch()).slice(this.root.length-1);return S.charAt(0)==="/"?S.slice(1):S},getFragment:function(S){return S==null&&(this._usePushState||!this._wantsHashChange?S=this.getPath():S=this.getHash()),S.replace(We,"")},start:function(S){if(Te.started)throw new Error("Backbone.history has already been started");if(Te.started=!0,this.options=n.extend({root:"/"},this.options,S),this.root=this.options.root,this._wantsHashChange=this.options.hashChange!==!1,this._hasHashChange="onhashchange"in window&&(document.documentMode===void 0||document.documentMode>7),this._useHashChange=this._wantsHashChange&&this._hasHashChange,this._wantsPushState=!!this.options.pushState,this._hasPushState=!!(this.history&&this.history.pushState),this._usePushState=this._wantsPushState&&this._hasPushState,this.fragment=this.getFragment(),this.root=("/"+this.root+"/").replace(Ge,"/"),this._wantsHashChange&&this._wantsPushState)if(!this._hasPushState&&!this.atRoot()){var R=this.root.slice(0,-1)||"/";return this.location.replace(R+"#"+this.getPath()),!0}else this._hasPushState&&this.atRoot()&&this.navigate(this.getHash(),{replace:!0});if(!this._hasHashChange&&this._wantsHashChange&&!this._usePushState){this.iframe=document.createElement("iframe"),this.iframe.src="javascript:0",this.iframe.style.display="none",this.iframe.tabIndex=-1;var E=document.body,B=E.insertBefore(this.iframe,E.firstChild).contentWindow;B.document.open(),B.document.close(),B.location.hash="#"+this.fragment}var H=window.addEventListener||function(J,Q){return attachEvent("on"+J,Q)};if(this._usePushState?H("popstate",this.checkUrl,!1):this._useHashChange&&!this.iframe?H("hashchange",this.checkUrl,!1):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),!this.options.silent)return this.loadUrl()},stop:function(){var S=window.removeEventListener||function(R,E){return detachEvent("on"+R,E)};this._usePushState?S("popstate",this.checkUrl,!1):this._useHashChange&&!this.iframe&&S("hashchange",this.checkUrl,!1),this.iframe&&(document.body.removeChild(this.iframe),this.iframe=null),this._checkUrlInterval&&clearInterval(this._checkUrlInterval),Te.started=!1},route:function(S,R){this.handlers.unshift({route:S,callback:R})},checkUrl:function(S){var R=this.getFragment();if(R===this.fragment&&this.iframe&&(R=this.getHash(this.iframe.contentWindow)),R===this.fragment)return!1;this.iframe&&this.navigate(R),this.loadUrl()},loadUrl:function(S){return this.matchRoot()?(S=this.fragment=this.getFragment(S),n.some(this.handlers,function(R){if(R.route.test(S))return R.callback(S),!0})):!1},navigate:function(S,R){if(!Te.started)return!1;(!R||R===!0)&&(R={trigger:!!R}),S=this.getFragment(S||"");var E=this.root;(S===""||S.charAt(0)==="?")&&(E=E.slice(0,-1)||"/");var B=E+S;S=S.replace(Xe,"");var H=this.decodeFragment(S);if(this.fragment!==H){if(this.fragment=H,this._usePushState)this.history[R.replace?"replaceState":"pushState"]({},document.title,B);else if(this._wantsHashChange){if(this._updateHash(this.location,S,R.replace),this.iframe&&S!==this.getHash(this.iframe.contentWindow)){var J=this.iframe.contentWindow;R.replace||(J.document.open(),J.document.close()),this._updateHash(J.location,S,R.replace)}}else return this.location.assign(B);if(R.trigger)return this.loadUrl(S)}},_updateHash:function(S,R,E){if(E){var B=S.href.replace(/(javascript:|#).*$/,"");S.replace(B+"#"+R)}else S.hash="#"+R}}),t.history=new Te;var Ye=function(S,R){var E=this,B;return S&&n.has(S,"constructor")?B=S.constructor:B=function(){return E.apply(this,arguments)},n.extend(B,E,R),B.prototype=n.create(E.prototype,S),B.prototype.constructor=B,B.__super__=E.prototype,B};b.extend=O.extend=ze.extend=ye.extend=Te.extend=Ye;var pe=function(){throw new Error('A "url" property or function must be specified')},Se=function(S,R){var E=R.error;R.error=function(B){E&&E.call(R.context,S,B,R),S.trigger("error",S,B,R)}};return t})})(Wg);const Ai=Gg(Wg),ry=Ai.Router.extend({page:null,pageOptions:null,authCheck:null,initialize(r){r&&(this.authCheck=r.authCheck),this.on("route",this.onRoute,this)},start(){Ai.history.start()},setRoutes(r){this.routeObjects=r,lt.each(r,e=>{const t=e.fragments;for(let n=0;n<t.length;n++){const i=t[n];this.route(i,e.id)}},this)},onRoute(r,e){e=this.getRouteObjectByID(r).fromURL(e),this._setPage(r,e)},_setPage(r,e){this.page=r,this.pageOptions=e,this.trigger("page",r,e)},navigate(r,e){const t={triggerRoute:!0,updateURL:!0};e||(e={});const n=e.pageOptions;lt.defaults(e,t),e.triggerRoute=e.triggerRoute!==!1,e.updateURL=e.updateURL!==!1;const i=this.getRouteObjectByID(r);let a=i.getFragment();if(n&&(a=a+"/"+i.toURL(n)),this.authCheck&&!this.authCheck.call(this,r))return!1;if(e.updateURL)return Ai.Router.prototype.navigate.call(this,a,e.triggerRoute);this._setPage(r,n)},getRouteObjectByID(r){const e=lt.where(this.routeObjects,{id:r});if(e.length===0)throw Error("You requested a page without a valid routeID: "+r);return e[0]},back(){history.back()}}),lf=new ry,sy=Ai.Model.extend({ANIM_EVENTS:{TRIGGER_ANIM:"TRIGGER_ANIM",ANIMATION_COMPLETE:"ANIMATION_COMPLETE"},PAGES:{LOADER:"LOADER",HOME:"HOME"},SECTIONS:{HOME:"HOME",ABOUT:"ABOUT",CV:"CV",WORK:"WORK"},goalSection:null,currentSection:null,setGoalSection:function(r){this.set("goalSection",r)},setCurrentSection:function(r){this.set("currentSection",r)},defaults:{page:null,pageOptions:{},postLoaderPage:null,postLoaderPageOptions:null}}),gt=new sy;var ay=jg();const Wn=Gg(ay),Cd=window.createjs,oy=Ai.Collection.extend({loadDone:!1,loaders:{},initialize(){this.on("add",this.onAdded,this),this.on("change:loaded",this.onLoaded,this)},createLoader(r){if(!this.loaders[r]){const e=new Cd.LoadQueue(!1);e.setMaxConnections(4),e.maintainScriptOrder=!1,e.addEventListener("fileload",lt.bind(this.onFileLoaded,this)),e.addEventListener("complete",lt.bind(this.onComplete,this)),e.addEventListener("progress",lt.bind(this.onProgress,this)),e.addEventListener("error",lt.bind(this.onError,this)),this.loaders[r]=e}return this.loaders[r]},onLoaded(r,e){if(!e)throw new Error("Load set to false")},onProgress(r){this.trigger("progress",r)},onAdded(r,e,t){r.has("id")||r.set({id:r.get("src")}),r.has("loadTimeout ")||r.set({loadTimeout:10*60*1e3}),lt.isUndefined(t.group)||r.set({group:t.group}),r.has("group")||r.set({group:"main"}),r.set({loaded:!1},{silent:!0});let n=this.getLoader(r.get("group"));n||(n=this.createLoader(r.get("group")));const i=r.toJSON(),a=new Cd.LoadItem().set(i);n.loadFile(a,!1)},getLoader(r){return this.loaders[r]},onFileLoaded(r){this.get(r.item.id).set(lt.extend(r.item,{loaded:!0})),this.trigger("loaded",r)},onComplete(r){this.loadDone=!0;let e;lt.each(this.loaders,function(t,n){t===r.target&&(e=n)},this),e&&lt.extend(r,{group:e}),this.trigger("complete",r)},start(r){lt.isUndefined(r)&&(r="main");const e=this.getLoader(r);e?e.load():this.onComplete({})},hasLoaded(r){let e=!0;return r&&this.loaders[r]?e=this.loaders[r].loaded:Wn.each(this.loaders,(t,n)=>{n.loaded||(e=!1)}),e},getResult(r){let e=!1;return Wn.each(this.loaders,function(t,n){const i=n.getResult(r);i&&(e=i)}),e},onError(r){window.console.error(r),this.get(r.item.id).set({loaded:!0,error:!0}),this.trigger("load_error",r)}}),Yt=new oy,ly={REQUEST_SECTION_CHANGE:"REQUEST_SECTION_CHANGE",ANIMATION_COMPLETE:"ANIMATION_COMPLETE"},ri={EVENTS:{VIEW:ly}};lt.extend(ri,Ai.Events);const cy={init(){Yt.on("complete",this.onLoaderComplete,this),lf.on("page",this.onRouterPage,this),this.addCommEvents()},addCommEvents(){ri.on(ri.EVENTS.VIEW.REQUEST_SECTION_CHANGE,this.onRequestSectionChange,this),ri.on(ri.EVENTS.VIEW.ANIMATION_COMPLETE,this.onAnimationComplete,this)},onRequestSectionChange(r){gt.trigger(gt.ANIM_EVENTS.TRIGGER_ANIM),gt.setGoalSection(r)},onAnimationComplete(){this.onSectionChange(gt.get("goalSection"))},onSectionChange(r){gt.setCurrentSection(r)},onRouterPage(r,e){r!==gt.PAGES.LOADER&&!Yt.hasLoaded("")?(gt.set({postLoaderPage:r,postLoaderPageOptions:e}),gt.set("page",gt.PAGES.LOADER)):gt.set({page:r,pageOptions:e})},onLoaderComplete(r){(r.group==="main"||!Yt.getLoader("main"))&&gt.get("postLoaderPage")&&(this.onRouterPage(gt.get("postLoaderPage"),gt.get("postLoaderPageOptions")),gt.setCurrentSection(gt.SECTIONS.HOME))}};cy.init();const $t=Ai.View.extend({initialize(r){},show(){},render(){},hide(){this.onHideComplete()},onHideComplete(){this.trigger("hideComplete")},onResize(r){},destroy(){this.stopListening(),this.off()}});class uy{constructor(e,t,n,i){lt.isArray(e)||(e=[e]),this.fragments=e,this.id=t;const a=()=>{};this.toURL=n||a,this.fromURL=i||a}getFragment(){return fragments[0]}}(function(){for(var r=0,e=["ms","moz","webkit","o"],t=0;t<e.length&&!window.requestAnimationFrame;++t)window.requestAnimationFrame=window[e[t]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[e[t]+"CancelAnimationFrame"]||window[e[t]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(n,i){var a=new Date().getTime(),o=Math.max(0,16-(a-r)),l=window.setTimeout(function(){n(a+o)},o);return r=a+o,l}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(n){clearTimeout(n)})})();var Ct={},qg=function(){};Ct.onAnimRequestFrame=function(){this.trigger("anim_frame"),window.requestAnimationFrame(qg)};qg=lt.bind(Ct.onAnimRequestFrame,Ct);lt.extend(Ct,Ai.Events);Ct.onAnimRequestFrame();function rr(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}function Xg(r,e){r.prototype=Object.create(e.prototype),r.prototype.constructor=r,r.__proto__=e}/*!
 * GSAP 3.12.2
 * https://greensock.com
 *
 * @license Copyright 2008-2023, GreenSock. All rights reserved.
 * Subject to the terms at https://greensock.com/standard-license or for
 * Club GreenSock members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/var si={autoSleep:120,force3D:"auto",nullTargetWarn:1,units:{lineHeight:""}},ua={duration:.5,overwrite:!1,delay:0},cf,Mn,Jt,hi=1e8,Ot=1/hi,Xu=Math.PI*2,hy=Xu/4,fy=0,Yg=Math.sqrt,dy=Math.cos,py=Math.sin,gn=function(e){return typeof e=="string"},Zt=function(e){return typeof e=="function"},lr=function(e){return typeof e=="number"},uf=function(e){return typeof e>"u"},Wi=function(e){return typeof e=="object"},Bn=function(e){return e!==!1},hf=function(){return typeof window<"u"},nl=function(e){return Zt(e)||gn(e)},$g=typeof ArrayBuffer=="function"&&ArrayBuffer.isView||function(){},Sn=Array.isArray,Yu=/(?:-?\.?\d|\.)+/gi,Jg=/[-+=.]*\d+[.e\-+]*\d*[e\-+]*\d*/g,Ys=/[-+=.]*\d+[.e-]*\d*[a-z%]*/g,Zc=/[-+=.]*\d+\.?\d*(?:e-|e\+)?\d*/gi,Zg=/[+-]=-?[.\d]+/,Qg=/[^,'"\[\]\s]+/gi,my=/^[+\-=e\s\d]*\d+[.\d]*([a-z]*|%)\s*$/i,jt,ui,$u,ff,ai={},Wl={},Kg,ev=function(e){return(Wl=vs(e,ai))&&jn},df=function(e,t){return console.warn("Invalid property",e,"set to",t,"Missing plugin? gsap.registerPlugin()")},jl=function(e,t){return!t&&console.warn(e)},tv=function(e,t){return e&&(ai[e]=t)&&Wl&&(Wl[e]=t)||ai},yo=function(){return 0},gy={suppressEvents:!0,isStart:!0,kill:!1},Nl={suppressEvents:!0,kill:!1},vy={suppressEvents:!0},pf={},Ar=[],Ju={},nv,ei={},Qc={},Ld=30,Ol=[],mf="",gf=function(e){var t=e[0],n,i;if(Wi(t)||Zt(t)||(e=[e]),!(n=(t._gsap||{}).harness)){for(i=Ol.length;i--&&!Ol[i].targetTest(t););n=Ol[i]}for(i=e.length;i--;)e[i]&&(e[i]._gsap||(e[i]._gsap=new Ev(e[i],n)))||e.splice(i,1);return e},cs=function(e){return e._gsap||gf(fi(e))[0]._gsap},iv=function(e,t,n){return(n=e[t])&&Zt(n)?e[t]():uf(n)&&e.getAttribute&&e.getAttribute(t)||n},kn=function(e,t){return(e=e.split(",")).forEach(t)||e},Kt=function(e){return Math.round(e*1e5)/1e5||0},_n=function(e){return Math.round(e*1e7)/1e7||0},na=function(e,t){var n=t.charAt(0),i=parseFloat(t.substr(2));return e=parseFloat(e),n==="+"?e+i:n==="-"?e-i:n==="*"?e*i:e/i},_y=function(e,t){for(var n=t.length,i=0;e.indexOf(t[i])<0&&++i<n;);return i<n},ql=function(){var e=Ar.length,t=Ar.slice(0),n,i;for(Ju={},Ar.length=0,n=0;n<e;n++)i=t[n],i&&i._lazy&&(i.render(i._lazy[0],i._lazy[1],!0)._lazy=0)},rv=function(e,t,n,i){Ar.length&&!Mn&&ql(),e.render(t,n,i||Mn&&t<0&&(e._initted||e._startAt)),Ar.length&&!Mn&&ql()},sv=function(e){var t=parseFloat(e);return(t||t===0)&&(e+"").match(Qg).length<2?t:gn(e)?e.trim():e},av=function(e){return e},_i=function(e,t){for(var n in t)n in e||(e[n]=t[n]);return e},yy=function(e){return function(t,n){for(var i in n)i in t||i==="duration"&&e||i==="ease"||(t[i]=n[i])}},vs=function(e,t){for(var n in t)e[n]=t[n];return e},Rd=function r(e,t){for(var n in t)n!=="__proto__"&&n!=="constructor"&&n!=="prototype"&&(e[n]=Wi(t[n])?r(e[n]||(e[n]={}),t[n]):t[n]);return e},Xl=function(e,t){var n={},i;for(i in e)i in t||(n[i]=e[i]);return n},so=function(e){var t=e.parent||jt,n=e.keyframes?yy(Sn(e.keyframes)):_i;if(Bn(e.inherit))for(;t;)n(e,t.vars.defaults),t=t.parent||t._dp;return e},xy=function(e,t){for(var n=e.length,i=n===t.length;i&&n--&&e[n]===t[n];);return n<0},ov=function(e,t,n,i,a){n===void 0&&(n="_first"),i===void 0&&(i="_last");var o=e[i],l;if(a)for(l=t[a];o&&o[a]>l;)o=o._prev;return o?(t._next=o._next,o._next=t):(t._next=e[n],e[n]=t),t._next?t._next._prev=t:e[i]=t,t._prev=o,t.parent=t._dp=e,t},mc=function(e,t,n,i){n===void 0&&(n="_first"),i===void 0&&(i="_last");var a=t._prev,o=t._next;a?a._next=o:e[n]===t&&(e[n]=o),o?o._prev=a:e[i]===t&&(e[i]=a),t._next=t._prev=t.parent=null},Or=function(e,t){e.parent&&(!t||e.parent.autoRemoveChildren)&&e.parent.remove&&e.parent.remove(e),e._act=0},us=function(e,t){if(e&&(!t||t._end>e._dur||t._start<0))for(var n=e;n;)n._dirty=1,n=n.parent;return e},wy=function(e){for(var t=e.parent;t&&t.parent;)t._dirty=1,t.totalDuration(),t=t.parent;return e},Zu=function(e,t,n,i){return e._startAt&&(Mn?e._startAt.revert(Nl):e.vars.immediateRender&&!e.vars.autoRevert||e._startAt.render(t,!0,i))},by=function r(e){return!e||e._ts&&r(e.parent)},Pd=function(e){return e._repeat?ha(e._tTime,e=e.duration()+e._rDelay)*e:0},ha=function(e,t){var n=Math.floor(e/=t);return e&&n===e?n-1:n},Yl=function(e,t){return(e-t._start)*t._ts+(t._ts>=0?0:t._dirty?t.totalDuration():t._tDur)},gc=function(e){return e._end=_n(e._start+(e._tDur/Math.abs(e._ts||e._rts||Ot)||0))},vc=function(e,t){var n=e._dp;return n&&n.smoothChildTiming&&e._ts&&(e._start=_n(n._time-(e._ts>0?t/e._ts:((e._dirty?e.totalDuration():e._tDur)-t)/-e._ts)),gc(e),n._dirty||us(n,e)),e},lv=function(e,t){var n;if((t._time||!t._dur&&t._initted||t._start<e._time&&(t._dur||!t.add))&&(n=Yl(e.rawTime(),t),(!t._dur||Fo(0,t.totalDuration(),n)-t._tTime>Ot)&&t.render(n,!0)),us(e,t)._dp&&e._initted&&e._time>=e._dur&&e._ts){if(e._dur<e.duration())for(n=e;n._dp;)n.rawTime()>=0&&n.totalTime(n._tTime),n=n._dp;e._zTime=-Ot}},Ui=function(e,t,n,i){return t.parent&&Or(t),t._start=_n((lr(n)?n:n||e!==jt?ci(e,n,t):e._time)+t._delay),t._end=_n(t._start+(t.totalDuration()/Math.abs(t.timeScale())||0)),ov(e,t,"_first","_last",e._sort?"_start":0),Qu(t)||(e._recent=t),i||lv(e,t),e._ts<0&&vc(e,e._tTime),e},cv=function(e,t){return(ai.ScrollTrigger||df("scrollTrigger",t))&&ai.ScrollTrigger.create(t,e)},uv=function(e,t,n,i,a){if(_f(e,t,a),!e._initted)return 1;if(!n&&e._pt&&!Mn&&(e._dur&&e.vars.lazy!==!1||!e._dur&&e.vars.lazy)&&nv!==ni.frame)return Ar.push(e),e._lazy=[a,i],1},My=function r(e){var t=e.parent;return t&&t._ts&&t._initted&&!t._lock&&(t.rawTime()<0||r(t))},Qu=function(e){var t=e.data;return t==="isFromStart"||t==="isStart"},Sy=function(e,t,n,i){var a=e.ratio,o=t<0||!t&&(!e._start&&My(e)&&!(!e._initted&&Qu(e))||(e._ts<0||e._dp._ts<0)&&!Qu(e))?0:1,l=e._rDelay,c=0,h,f,m;if(l&&e._repeat&&(c=Fo(0,e._tDur,t),f=ha(c,l),e._yoyo&&f&1&&(o=1-o),f!==ha(e._tTime,l)&&(a=1-o,e.vars.repeatRefresh&&e._initted&&e.invalidate())),o!==a||Mn||i||e._zTime===Ot||!t&&e._zTime){if(!e._initted&&uv(e,t,i,n,c))return;for(m=e._zTime,e._zTime=t||(n?Ot:0),n||(n=t&&!m),e.ratio=o,e._from&&(o=1-o),e._time=0,e._tTime=c,h=e._pt;h;)h.r(o,h.d),h=h._next;t<0&&Zu(e,t,n,!0),e._onUpdate&&!n&&di(e,"onUpdate"),c&&e._repeat&&!n&&e.parent&&di(e,"onRepeat"),(t>=e._tDur||t<0)&&e.ratio===o&&(o&&Or(e,1),!n&&!Mn&&(di(e,o?"onComplete":"onReverseComplete",!0),e._prom&&e._prom()))}else e._zTime||(e._zTime=t)},Ty=function(e,t,n){var i;if(n>t)for(i=e._first;i&&i._start<=n;){if(i.data==="isPause"&&i._start>t)return i;i=i._next}else for(i=e._last;i&&i._start>=n;){if(i.data==="isPause"&&i._start<t)return i;i=i._prev}},fa=function(e,t,n,i){var a=e._repeat,o=_n(t)||0,l=e._tTime/e._tDur;return l&&!i&&(e._time*=o/e._dur),e._dur=o,e._tDur=a?a<0?1e10:_n(o*(a+1)+e._rDelay*a):o,l>0&&!i&&vc(e,e._tTime=e._tDur*l),e.parent&&gc(e),n||us(e.parent,e),e},Id=function(e){return e instanceof zn?us(e):fa(e,e._dur)},Ey={_start:0,endTime:yo,totalDuration:yo},ci=function r(e,t,n){var i=e.labels,a=e._recent||Ey,o=e.duration()>=hi?a.endTime(!1):e._dur,l,c,h;return gn(t)&&(isNaN(t)||t in i)?(c=t.charAt(0),h=t.substr(-1)==="%",l=t.indexOf("="),c==="<"||c===">"?(l>=0&&(t=t.replace(/=/,"")),(c==="<"?a._start:a.endTime(a._repeat>=0))+(parseFloat(t.substr(1))||0)*(h?(l<0?a:n).totalDuration()/100:1)):l<0?(t in i||(i[t]=o),i[t]):(c=parseFloat(t.charAt(l-1)+t.substr(l+1)),h&&n&&(c=c/100*(Sn(n)?n[0]:n).totalDuration()),l>1?r(e,t.substr(0,l-1),n)+c:o+c)):t==null?o:+t},ao=function(e,t,n){var i=lr(t[1]),a=(i?2:1)+(e<2?0:1),o=t[a],l,c;if(i&&(o.duration=t[1]),o.parent=n,e){for(l=o,c=n;c&&!("immediateRender"in l);)l=c.vars.defaults||{},c=Bn(c.vars.inherit)&&c.parent;o.immediateRender=Bn(l.immediateRender),e<2?o.runBackwards=1:o.startAt=t[a-1]}return new rn(t[0],o,t[a+1])},Gr=function(e,t){return e||e===0?t(e):t},Fo=function(e,t,n){return n<e?e:n>t?t:n},bn=function(e,t){return!gn(e)||!(t=my.exec(e))?"":t[1]},Ay=function(e,t,n){return Gr(n,function(i){return Fo(e,t,i)})},Ku=[].slice,hv=function(e,t){return e&&Wi(e)&&"length"in e&&(!t&&!e.length||e.length-1 in e&&Wi(e[0]))&&!e.nodeType&&e!==ui},Cy=function(e,t,n){return n===void 0&&(n=[]),e.forEach(function(i){var a;return gn(i)&&!t||hv(i,1)?(a=n).push.apply(a,fi(i)):n.push(i)})||n},fi=function(e,t,n){return Jt&&!t&&Jt.selector?Jt.selector(e):gn(e)&&!n&&($u||!da())?Ku.call((t||ff).querySelectorAll(e),0):Sn(e)?Cy(e,n):hv(e)?Ku.call(e,0):e?[e]:[]},eh=function(e){return e=fi(e)[0]||jl("Invalid scope")||{},function(t){var n=e.current||e.nativeElement||e;return fi(t,n.querySelectorAll?n:n===e?jl("Invalid scope")||ff.createElement("div"):e)}},fv=function(e){return e.sort(function(){return .5-Math.random()})},dv=function(e){if(Zt(e))return e;var t=Wi(e)?e:{each:e},n=hs(t.ease),i=t.from||0,a=parseFloat(t.base)||0,o={},l=i>0&&i<1,c=isNaN(i)||l,h=t.axis,f=i,m=i;return gn(i)?f=m={center:.5,edges:.5,end:1}[i]||0:!l&&c&&(f=i[0],m=i[1]),function(g,_,M){var x=(M||t).length,C=o[x],y,b,O,P,F,p,L,W,X;if(!C){if(X=t.grid==="auto"?0:(t.grid||[1,hi])[1],!X){for(L=-hi;L<(L=M[X++].getBoundingClientRect().left)&&X<x;);X--}for(C=o[x]=[],y=c?Math.min(X,x)*f-.5:i%X,b=X===hi?0:c?x*m/X-.5:i/X|0,L=0,W=hi,p=0;p<x;p++)O=p%X-y,P=b-(p/X|0),C[p]=F=h?Math.abs(h==="y"?P:O):Yg(O*O+P*P),F>L&&(L=F),F<W&&(W=F);i==="random"&&fv(C),C.max=L-W,C.min=W,C.v=x=(parseFloat(t.amount)||parseFloat(t.each)*(X>x?x-1:h?h==="y"?x/X:X:Math.max(X,x/X))||0)*(i==="edges"?-1:1),C.b=x<0?a-x:a,C.u=bn(t.amount||t.each)||0,n=n&&x<0?Mv(n):n}return x=(C[g]-C.min)/C.max||0,_n(C.b+(n?n(x):x)*C.v)+C.u}},th=function(e){var t=Math.pow(10,((e+"").split(".")[1]||"").length);return function(n){var i=_n(Math.round(parseFloat(n)/e)*e*t);return(i-i%1)/t+(lr(n)?0:bn(n))}},pv=function(e,t){var n=Sn(e),i,a;return!n&&Wi(e)&&(i=n=e.radius||hi,e.values?(e=fi(e.values),(a=!lr(e[0]))&&(i*=i)):e=th(e.increment)),Gr(t,n?Zt(e)?function(o){return a=e(o),Math.abs(a-o)<=i?a:o}:function(o){for(var l=parseFloat(a?o.x:o),c=parseFloat(a?o.y:0),h=hi,f=0,m=e.length,g,_;m--;)a?(g=e[m].x-l,_=e[m].y-c,g=g*g+_*_):g=Math.abs(e[m]-l),g<h&&(h=g,f=m);return f=!i||h<=i?e[f]:o,a||f===o||lr(o)?f:f+bn(o)}:th(e))},mv=function(e,t,n,i){return Gr(Sn(e)?!t:n===!0?!!(n=0):!i,function(){return Sn(e)?e[~~(Math.random()*e.length)]:(n=n||1e-5)&&(i=n<1?Math.pow(10,(n+"").length-2):1)&&Math.floor(Math.round((e-n/2+Math.random()*(t-e+n*.99))/n)*n*i)/i})},Ly=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(i){return t.reduce(function(a,o){return o(a)},i)}},Ry=function(e,t){return function(n){return e(parseFloat(n))+(t||bn(n))}},Py=function(e,t,n){return vv(e,t,0,1,n)},gv=function(e,t,n){return Gr(n,function(i){return e[~~t(i)]})},Iy=function r(e,t,n){var i=t-e;return Sn(e)?gv(e,r(0,e.length),t):Gr(n,function(a){return(i+(a-e)%i)%i+e})},Dy=function r(e,t,n){var i=t-e,a=i*2;return Sn(e)?gv(e,r(0,e.length-1),t):Gr(n,function(o){return o=(a+(o-e)%a)%a||0,e+(o>i?a-o:o)})},xo=function(e){for(var t=0,n="",i,a,o,l;~(i=e.indexOf("random(",t));)o=e.indexOf(")",i),l=e.charAt(i+7)==="[",a=e.substr(i+7,o-i-7).match(l?Qg:Yu),n+=e.substr(t,i-t)+mv(l?a:+a[0],l?0:+a[1],+a[2]||1e-5),t=o+1;return n+e.substr(t,e.length-t)},vv=function(e,t,n,i,a){var o=t-e,l=i-n;return Gr(a,function(c){return n+((c-e)/o*l||0)})},Ny=function r(e,t,n,i){var a=isNaN(e+t)?0:function(_){return(1-_)*e+_*t};if(!a){var o=gn(e),l={},c,h,f,m,g;if(n===!0&&(i=1)&&(n=null),o)e={p:e},t={p:t};else if(Sn(e)&&!Sn(t)){for(f=[],m=e.length,g=m-2,h=1;h<m;h++)f.push(r(e[h-1],e[h]));m--,a=function(M){M*=m;var x=Math.min(g,~~M);return f[x](M-x)},n=t}else i||(e=vs(Sn(e)?[]:{},e));if(!f){for(c in t)vf.call(l,e,c,"get",t[c]);a=function(M){return wf(M,l)||(o?e.p:e)}}}return Gr(n,a)},Dd=function(e,t,n){var i=e.labels,a=hi,o,l,c;for(o in i)l=i[o]-t,l<0==!!n&&l&&a>(l=Math.abs(l))&&(c=o,a=l);return c},di=function(e,t,n){var i=e.vars,a=i[t],o=Jt,l=e._ctx,c,h,f;if(a)return c=i[t+"Params"],h=i.callbackScope||e,n&&Ar.length&&ql(),l&&(Jt=l),f=c?a.apply(h,c):a.call(h),Jt=o,f},Ka=function(e){return Or(e),e.scrollTrigger&&e.scrollTrigger.kill(!!Mn),e.progress()<1&&di(e,"onInterrupt"),e},$s,_v=[],yv=function(e){if(hf()&&e){e=!e.name&&e.default||e;var t=e.name,n=Zt(e),i=t&&!n&&e.init?function(){this._props=[]}:e,a={init:yo,render:wf,add:vf,kill:Jy,modifier:$y,rawVars:0},o={targetTest:0,get:0,getSetter:xf,aliases:{},register:0};if(da(),e!==i){if(ei[t])return;_i(i,_i(Xl(e,a),o)),vs(i.prototype,vs(a,Xl(e,o))),ei[i.prop=t]=i,e.targetTest&&(Ol.push(i),pf[t]=1),t=(t==="css"?"CSS":t.charAt(0).toUpperCase()+t.substr(1))+"Plugin"}tv(t,i),e.register&&e.register(jn,i,Un)}else e&&_v.push(e)},Nt=255,eo={aqua:[0,Nt,Nt],lime:[0,Nt,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,Nt],navy:[0,0,128],white:[Nt,Nt,Nt],olive:[128,128,0],yellow:[Nt,Nt,0],orange:[Nt,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[Nt,0,0],pink:[Nt,192,203],cyan:[0,Nt,Nt],transparent:[Nt,Nt,Nt,0]},Kc=function(e,t,n){return e+=e<0?1:e>1?-1:0,(e*6<1?t+(n-t)*e*6:e<.5?n:e*3<2?t+(n-t)*(2/3-e)*6:t)*Nt+.5|0},xv=function(e,t,n){var i=e?lr(e)?[e>>16,e>>8&Nt,e&Nt]:0:eo.black,a,o,l,c,h,f,m,g,_,M;if(!i){if(e.substr(-1)===","&&(e=e.substr(0,e.length-1)),eo[e])i=eo[e];else if(e.charAt(0)==="#"){if(e.length<6&&(a=e.charAt(1),o=e.charAt(2),l=e.charAt(3),e="#"+a+a+o+o+l+l+(e.length===5?e.charAt(4)+e.charAt(4):"")),e.length===9)return i=parseInt(e.substr(1,6),16),[i>>16,i>>8&Nt,i&Nt,parseInt(e.substr(7),16)/255];e=parseInt(e.substr(1),16),i=[e>>16,e>>8&Nt,e&Nt]}else if(e.substr(0,3)==="hsl"){if(i=M=e.match(Yu),!t)c=+i[0]%360/360,h=+i[1]/100,f=+i[2]/100,o=f<=.5?f*(h+1):f+h-f*h,a=f*2-o,i.length>3&&(i[3]*=1),i[0]=Kc(c+1/3,a,o),i[1]=Kc(c,a,o),i[2]=Kc(c-1/3,a,o);else if(~e.indexOf("="))return i=e.match(Jg),n&&i.length<4&&(i[3]=1),i}else i=e.match(Yu)||eo.transparent;i=i.map(Number)}return t&&!M&&(a=i[0]/Nt,o=i[1]/Nt,l=i[2]/Nt,m=Math.max(a,o,l),g=Math.min(a,o,l),f=(m+g)/2,m===g?c=h=0:(_=m-g,h=f>.5?_/(2-m-g):_/(m+g),c=m===a?(o-l)/_+(o<l?6:0):m===o?(l-a)/_+2:(a-o)/_+4,c*=60),i[0]=~~(c+.5),i[1]=~~(h*100+.5),i[2]=~~(f*100+.5)),n&&i.length<4&&(i[3]=1),i},wv=function(e){var t=[],n=[],i=-1;return e.split(Cr).forEach(function(a){var o=a.match(Ys)||[];t.push.apply(t,o),n.push(i+=o.length+1)}),t.c=n,t},Nd=function(e,t,n){var i="",a=(e+i).match(Cr),o=t?"hsla(":"rgba(",l=0,c,h,f,m;if(!a)return e;if(a=a.map(function(g){return(g=xv(g,t,1))&&o+(t?g[0]+","+g[1]+"%,"+g[2]+"%,"+g[3]:g.join(","))+")"}),n&&(f=wv(e),c=n.c,c.join(i)!==f.c.join(i)))for(h=e.replace(Cr,"1").split(Ys),m=h.length-1;l<m;l++)i+=h[l]+(~c.indexOf(l)?a.shift()||o+"0,0,0,0)":(f.length?f:a.length?a:n).shift());if(!h)for(h=e.split(Cr),m=h.length-1;l<m;l++)i+=h[l]+a[l];return i+h[m]},Cr=function(){var r="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#(?:[0-9a-f]{3,4}){1,2}\\b",e;for(e in eo)r+="|"+e+"\\b";return new RegExp(r+")","gi")}(),Oy=/hsl[a]?\(/,bv=function(e){var t=e.join(" "),n;if(Cr.lastIndex=0,Cr.test(t))return n=Oy.test(t),e[1]=Nd(e[1],n),e[0]=Nd(e[0],n,wv(e[1])),!0},wo,ni=function(){var r=Date.now,e=500,t=33,n=r(),i=n,a=1e3/240,o=a,l=[],c,h,f,m,g,_,M=function x(C){var y=r()-i,b=C===!0,O,P,F,p;if(y>e&&(n+=y-t),i+=y,F=i-n,O=F-o,(O>0||b)&&(p=++m.frame,g=F-m.time*1e3,m.time=F=F/1e3,o+=O+(O>=a?4:a-O),P=1),b||(c=h(x)),P)for(_=0;_<l.length;_++)l[_](F,g,p,C)};return m={time:0,frame:0,tick:function(){M(!0)},deltaRatio:function(C){return g/(1e3/(C||60))},wake:function(){Kg&&(!$u&&hf()&&(ui=$u=window,ff=ui.document||{},ai.gsap=jn,(ui.gsapVersions||(ui.gsapVersions=[])).push(jn.version),ev(Wl||ui.GreenSockGlobals||!ui.gsap&&ui||{}),f=ui.requestAnimationFrame,_v.forEach(yv)),c&&m.sleep(),h=f||function(C){return setTimeout(C,o-m.time*1e3+1|0)},wo=1,M(2))},sleep:function(){(f?ui.cancelAnimationFrame:clearTimeout)(c),wo=0,h=yo},lagSmoothing:function(C,y){e=C||1/0,t=Math.min(y||33,e)},fps:function(C){a=1e3/(C||240),o=m.time*1e3+a},add:function(C,y,b){var O=y?function(P,F,p,L){C(P,F,p,L),m.remove(O)}:C;return m.remove(C),l[b?"unshift":"push"](O),da(),O},remove:function(C,y){~(y=l.indexOf(C))&&l.splice(y,1)&&_>=y&&_--},_listeners:l},m}(),da=function(){return!wo&&ni.wake()},vt={},Fy=/^[\d.\-M][\d.\-,\s]/,zy=/["']/g,By=function(e){for(var t={},n=e.substr(1,e.length-3).split(":"),i=n[0],a=1,o=n.length,l,c,h;a<o;a++)c=n[a],l=a!==o-1?c.lastIndexOf(","):c.length,h=c.substr(0,l),t[i]=isNaN(h)?h.replace(zy,"").trim():+h,i=c.substr(l+1).trim();return t},ky=function(e){var t=e.indexOf("(")+1,n=e.indexOf(")"),i=e.indexOf("(",t);return e.substring(t,~i&&i<n?e.indexOf(")",n+1):n)},Uy=function(e){var t=(e+"").split("("),n=vt[t[0]];return n&&t.length>1&&n.config?n.config.apply(null,~e.indexOf("{")?[By(t[1])]:ky(e).split(",").map(sv)):vt._CE&&Fy.test(e)?vt._CE("",e):n},Mv=function(e){return function(t){return 1-e(1-t)}},Sv=function r(e,t){for(var n=e._first,i;n;)n instanceof zn?r(n,t):n.vars.yoyoEase&&(!n._yoyo||!n._repeat)&&n._yoyo!==t&&(n.timeline?r(n.timeline,t):(i=n._ease,n._ease=n._yEase,n._yEase=i,n._yoyo=t)),n=n._next},hs=function(e,t){return e&&(Zt(e)?e:vt[e]||Uy(e))||t},ws=function(e,t,n,i){n===void 0&&(n=function(c){return 1-t(1-c)}),i===void 0&&(i=function(c){return c<.5?t(c*2)/2:1-t((1-c)*2)/2});var a={easeIn:t,easeOut:n,easeInOut:i},o;return kn(e,function(l){vt[l]=ai[l]=a,vt[o=l.toLowerCase()]=n;for(var c in a)vt[o+(c==="easeIn"?".in":c==="easeOut"?".out":".inOut")]=vt[l+"."+c]=a[c]}),a},Tv=function(e){return function(t){return t<.5?(1-e(1-t*2))/2:.5+e((t-.5)*2)/2}},eu=function r(e,t,n){var i=t>=1?t:1,a=(n||(e?.3:.45))/(t<1?t:1),o=a/Xu*(Math.asin(1/i)||0),l=function(f){return f===1?1:i*Math.pow(2,-10*f)*py((f-o)*a)+1},c=e==="out"?l:e==="in"?function(h){return 1-l(1-h)}:Tv(l);return a=Xu/a,c.config=function(h,f){return r(e,h,f)},c},tu=function r(e,t){t===void 0&&(t=1.70158);var n=function(o){return o?--o*o*((t+1)*o+t)+1:0},i=e==="out"?n:e==="in"?function(a){return 1-n(1-a)}:Tv(n);return i.config=function(a){return r(e,a)},i};kn("Linear,Quad,Cubic,Quart,Quint,Strong",function(r,e){var t=e<5?e+1:e;ws(r+",Power"+(t-1),e?function(n){return Math.pow(n,t)}:function(n){return n},function(n){return 1-Math.pow(1-n,t)},function(n){return n<.5?Math.pow(n*2,t)/2:1-Math.pow((1-n)*2,t)/2})});vt.Linear.easeNone=vt.none=vt.Linear.easeIn;ws("Elastic",eu("in"),eu("out"),eu());(function(r,e){var t=1/e,n=2*t,i=2.5*t,a=function(l){return l<t?r*l*l:l<n?r*Math.pow(l-1.5/e,2)+.75:l<i?r*(l-=2.25/e)*l+.9375:r*Math.pow(l-2.625/e,2)+.984375};ws("Bounce",function(o){return 1-a(1-o)},a)})(7.5625,2.75);ws("Expo",function(r){return r?Math.pow(2,10*(r-1)):0});ws("Circ",function(r){return-(Yg(1-r*r)-1)});ws("Sine",function(r){return r===1?1:-dy(r*hy)+1});ws("Back",tu("in"),tu("out"),tu());vt.SteppedEase=vt.steps=ai.SteppedEase={config:function(e,t){e===void 0&&(e=1);var n=1/e,i=e+(t?0:1),a=t?1:0,o=1-Ot;return function(l){return((i*Fo(0,o,l)|0)+a)*n}}};ua.ease=vt["quad.out"];kn("onComplete,onUpdate,onStart,onRepeat,onReverseComplete,onInterrupt",function(r){return mf+=r+","+r+"Params,"});var Ev=function(e,t){this.id=fy++,e._gsap=this,this.target=e,this.harness=t,this.get=t?t.get:iv,this.set=t?t.getSetter:xf},bo=function(){function r(t){this.vars=t,this._delay=+t.delay||0,(this._repeat=t.repeat===1/0?-2:t.repeat||0)&&(this._rDelay=t.repeatDelay||0,this._yoyo=!!t.yoyo||!!t.yoyoEase),this._ts=1,fa(this,+t.duration,1,1),this.data=t.data,Jt&&(this._ctx=Jt,Jt.data.push(this)),wo||ni.wake()}var e=r.prototype;return e.delay=function(n){return n||n===0?(this.parent&&this.parent.smoothChildTiming&&this.startTime(this._start+n-this._delay),this._delay=n,this):this._delay},e.duration=function(n){return arguments.length?this.totalDuration(this._repeat>0?n+(n+this._rDelay)*this._repeat:n):this.totalDuration()&&this._dur},e.totalDuration=function(n){return arguments.length?(this._dirty=0,fa(this,this._repeat<0?n:(n-this._repeat*this._rDelay)/(this._repeat+1))):this._tDur},e.totalTime=function(n,i){if(da(),!arguments.length)return this._tTime;var a=this._dp;if(a&&a.smoothChildTiming&&this._ts){for(vc(this,n),!a._dp||a.parent||lv(a,this);a&&a.parent;)a.parent._time!==a._start+(a._ts>=0?a._tTime/a._ts:(a.totalDuration()-a._tTime)/-a._ts)&&a.totalTime(a._tTime,!0),a=a.parent;!this.parent&&this._dp.autoRemoveChildren&&(this._ts>0&&n<this._tDur||this._ts<0&&n>0||!this._tDur&&!n)&&Ui(this._dp,this,this._start-this._delay)}return(this._tTime!==n||!this._dur&&!i||this._initted&&Math.abs(this._zTime)===Ot||!n&&!this._initted&&(this.add||this._ptLookup))&&(this._ts||(this._pTime=n),rv(this,n,i)),this},e.time=function(n,i){return arguments.length?this.totalTime(Math.min(this.totalDuration(),n+Pd(this))%(this._dur+this._rDelay)||(n?this._dur:0),i):this._time},e.totalProgress=function(n,i){return arguments.length?this.totalTime(this.totalDuration()*n,i):this.totalDuration()?Math.min(1,this._tTime/this._tDur):this.ratio},e.progress=function(n,i){return arguments.length?this.totalTime(this.duration()*(this._yoyo&&!(this.iteration()&1)?1-n:n)+Pd(this),i):this.duration()?Math.min(1,this._time/this._dur):this.ratio},e.iteration=function(n,i){var a=this.duration()+this._rDelay;return arguments.length?this.totalTime(this._time+(n-1)*a,i):this._repeat?ha(this._tTime,a)+1:1},e.timeScale=function(n){if(!arguments.length)return this._rts===-Ot?0:this._rts;if(this._rts===n)return this;var i=this.parent&&this._ts?Yl(this.parent._time,this):this._tTime;return this._rts=+n||0,this._ts=this._ps||n===-Ot?0:this._rts,this.totalTime(Fo(-Math.abs(this._delay),this._tDur,i),!0),gc(this),wy(this)},e.paused=function(n){return arguments.length?(this._ps!==n&&(this._ps=n,n?(this._pTime=this._tTime||Math.max(-this._delay,this.rawTime()),this._ts=this._act=0):(da(),this._ts=this._rts,this.totalTime(this.parent&&!this.parent.smoothChildTiming?this.rawTime():this._tTime||this._pTime,this.progress()===1&&Math.abs(this._zTime)!==Ot&&(this._tTime-=Ot)))),this):this._ps},e.startTime=function(n){if(arguments.length){this._start=n;var i=this.parent||this._dp;return i&&(i._sort||!this.parent)&&Ui(i,this,n-this._delay),this}return this._start},e.endTime=function(n){return this._start+(Bn(n)?this.totalDuration():this.duration())/Math.abs(this._ts||1)},e.rawTime=function(n){var i=this.parent||this._dp;return i?n&&(!this._ts||this._repeat&&this._time&&this.totalProgress()<1)?this._tTime%(this._dur+this._rDelay):this._ts?Yl(i.rawTime(n),this):this._tTime:this._tTime},e.revert=function(n){n===void 0&&(n=vy);var i=Mn;return Mn=n,(this._initted||this._startAt)&&(this.timeline&&this.timeline.revert(n),this.totalTime(-.01,n.suppressEvents)),this.data!=="nested"&&n.kill!==!1&&this.kill(),Mn=i,this},e.globalTime=function(n){for(var i=this,a=arguments.length?n:i.rawTime();i;)a=i._start+a/(i._ts||1),i=i._dp;return!this.parent&&this._sat?this._sat.vars.immediateRender?-1/0:this._sat.globalTime(n):a},e.repeat=function(n){return arguments.length?(this._repeat=n===1/0?-2:n,Id(this)):this._repeat===-2?1/0:this._repeat},e.repeatDelay=function(n){if(arguments.length){var i=this._time;return this._rDelay=n,Id(this),i?this.time(i):this}return this._rDelay},e.yoyo=function(n){return arguments.length?(this._yoyo=n,this):this._yoyo},e.seek=function(n,i){return this.totalTime(ci(this,n),Bn(i))},e.restart=function(n,i){return this.play().totalTime(n?-this._delay:0,Bn(i))},e.play=function(n,i){return n!=null&&this.seek(n,i),this.reversed(!1).paused(!1)},e.reverse=function(n,i){return n!=null&&this.seek(n||this.totalDuration(),i),this.reversed(!0).paused(!1)},e.pause=function(n,i){return n!=null&&this.seek(n,i),this.paused(!0)},e.resume=function(){return this.paused(!1)},e.reversed=function(n){return arguments.length?(!!n!==this.reversed()&&this.timeScale(-this._rts||(n?-Ot:0)),this):this._rts<0},e.invalidate=function(){return this._initted=this._act=0,this._zTime=-Ot,this},e.isActive=function(){var n=this.parent||this._dp,i=this._start,a;return!!(!n||this._ts&&this._initted&&n.isActive()&&(a=n.rawTime(!0))>=i&&a<this.endTime(!0)-Ot)},e.eventCallback=function(n,i,a){var o=this.vars;return arguments.length>1?(i?(o[n]=i,a&&(o[n+"Params"]=a),n==="onUpdate"&&(this._onUpdate=i)):delete o[n],this):o[n]},e.then=function(n){var i=this;return new Promise(function(a){var o=Zt(n)?n:av,l=function(){var h=i.then;i.then=null,Zt(o)&&(o=o(i))&&(o.then||o===i)&&(i.then=h),a(o),i.then=h};i._initted&&i.totalProgress()===1&&i._ts>=0||!i._tTime&&i._ts<0?l():i._prom=l})},e.kill=function(){Ka(this)},r}();_i(bo.prototype,{_time:0,_start:0,_end:0,_tTime:0,_tDur:0,_dirty:0,_repeat:0,_yoyo:!1,parent:null,_initted:!1,_rDelay:0,_ts:1,_dp:0,ratio:0,_zTime:-Ot,_prom:0,_ps:!1,_rts:1});var zn=function(r){Xg(e,r);function e(n,i){var a;return n===void 0&&(n={}),a=r.call(this,n)||this,a.labels={},a.smoothChildTiming=!!n.smoothChildTiming,a.autoRemoveChildren=!!n.autoRemoveChildren,a._sort=Bn(n.sortChildren),jt&&Ui(n.parent||jt,rr(a),i),n.reversed&&a.reverse(),n.paused&&a.paused(!0),n.scrollTrigger&&cv(rr(a),n.scrollTrigger),a}var t=e.prototype;return t.to=function(i,a,o){return ao(0,arguments,this),this},t.from=function(i,a,o){return ao(1,arguments,this),this},t.fromTo=function(i,a,o,l){return ao(2,arguments,this),this},t.set=function(i,a,o){return a.duration=0,a.parent=this,so(a).repeatDelay||(a.repeat=0),a.immediateRender=!!a.immediateRender,new rn(i,a,ci(this,o),1),this},t.call=function(i,a,o){return Ui(this,rn.delayedCall(0,i,a),o)},t.staggerTo=function(i,a,o,l,c,h,f){return o.duration=a,o.stagger=o.stagger||l,o.onComplete=h,o.onCompleteParams=f,o.parent=this,new rn(i,o,ci(this,c)),this},t.staggerFrom=function(i,a,o,l,c,h,f){return o.runBackwards=1,so(o).immediateRender=Bn(o.immediateRender),this.staggerTo(i,a,o,l,c,h,f)},t.staggerFromTo=function(i,a,o,l,c,h,f,m){return l.startAt=o,so(l).immediateRender=Bn(l.immediateRender),this.staggerTo(i,a,l,c,h,f,m)},t.render=function(i,a,o){var l=this._time,c=this._dirty?this.totalDuration():this._tDur,h=this._dur,f=i<=0?0:_n(i),m=this._zTime<0!=i<0&&(this._initted||!h),g,_,M,x,C,y,b,O,P,F,p,L;if(this!==jt&&f>c&&i>=0&&(f=c),f!==this._tTime||o||m){if(l!==this._time&&h&&(f+=this._time-l,i+=this._time-l),g=f,P=this._start,O=this._ts,y=!O,m&&(h||(l=this._zTime),(i||!a)&&(this._zTime=i)),this._repeat){if(p=this._yoyo,C=h+this._rDelay,this._repeat<-1&&i<0)return this.totalTime(C*100+i,a,o);if(g=_n(f%C),f===c?(x=this._repeat,g=h):(x=~~(f/C),x&&x===f/C&&(g=h,x--),g>h&&(g=h)),F=ha(this._tTime,C),!l&&this._tTime&&F!==x&&this._tTime-F*C-this._dur<=0&&(F=x),p&&x&1&&(g=h-g,L=1),x!==F&&!this._lock){var W=p&&F&1,X=W===(p&&x&1);if(x<F&&(W=!W),l=W?0:f%h?h:f,this._lock=1,this.render(l||(L?0:_n(x*C)),a,!h)._lock=0,this._tTime=f,!a&&this.parent&&di(this,"onRepeat"),this.vars.repeatRefresh&&!L&&(this.invalidate()._lock=1),l&&l!==this._time||y!==!this._ts||this.vars.onRepeat&&!this.parent&&!this._act)return this;if(h=this._dur,c=this._tDur,X&&(this._lock=2,l=W?h:-1e-4,this.render(l,!0),this.vars.repeatRefresh&&!L&&this.invalidate()),this._lock=0,!this._ts&&!y)return this;Sv(this,L)}}if(this._hasPause&&!this._forcing&&this._lock<2&&(b=Ty(this,_n(l),_n(g)),b&&(f-=g-(g=b._start))),this._tTime=f,this._time=g,this._act=!O,this._initted||(this._onUpdate=this.vars.onUpdate,this._initted=1,this._zTime=i,l=0),!l&&g&&!a&&!x&&(di(this,"onStart"),this._tTime!==f))return this;if(g>=l&&i>=0)for(_=this._first;_;){if(M=_._next,(_._act||g>=_._start)&&_._ts&&b!==_){if(_.parent!==this)return this.render(i,a,o);if(_.render(_._ts>0?(g-_._start)*_._ts:(_._dirty?_.totalDuration():_._tDur)+(g-_._start)*_._ts,a,o),g!==this._time||!this._ts&&!y){b=0,M&&(f+=this._zTime=-Ot);break}}_=M}else{_=this._last;for(var oe=i<0?i:g;_;){if(M=_._prev,(_._act||oe<=_._end)&&_._ts&&b!==_){if(_.parent!==this)return this.render(i,a,o);if(_.render(_._ts>0?(oe-_._start)*_._ts:(_._dirty?_.totalDuration():_._tDur)+(oe-_._start)*_._ts,a,o||Mn&&(_._initted||_._startAt)),g!==this._time||!this._ts&&!y){b=0,M&&(f+=this._zTime=oe?-Ot:Ot);break}}_=M}}if(b&&!a&&(this.pause(),b.render(g>=l?0:-Ot)._zTime=g>=l?1:-1,this._ts))return this._start=P,gc(this),this.render(i,a,o);this._onUpdate&&!a&&di(this,"onUpdate",!0),(f===c&&this._tTime>=this.totalDuration()||!f&&l)&&(P===this._start||Math.abs(O)!==Math.abs(this._ts))&&(this._lock||((i||!h)&&(f===c&&this._ts>0||!f&&this._ts<0)&&Or(this,1),!a&&!(i<0&&!l)&&(f||l||!c)&&(di(this,f===c&&i>=0?"onComplete":"onReverseComplete",!0),this._prom&&!(f<c&&this.timeScale()>0)&&this._prom())))}return this},t.add=function(i,a){var o=this;if(lr(a)||(a=ci(this,a,i)),!(i instanceof bo)){if(Sn(i))return i.forEach(function(l){return o.add(l,a)}),this;if(gn(i))return this.addLabel(i,a);if(Zt(i))i=rn.delayedCall(0,i);else return this}return this!==i?Ui(this,i,a):this},t.getChildren=function(i,a,o,l){i===void 0&&(i=!0),a===void 0&&(a=!0),o===void 0&&(o=!0),l===void 0&&(l=-hi);for(var c=[],h=this._first;h;)h._start>=l&&(h instanceof rn?a&&c.push(h):(o&&c.push(h),i&&c.push.apply(c,h.getChildren(!0,a,o)))),h=h._next;return c},t.getById=function(i){for(var a=this.getChildren(1,1,1),o=a.length;o--;)if(a[o].vars.id===i)return a[o]},t.remove=function(i){return gn(i)?this.removeLabel(i):Zt(i)?this.killTweensOf(i):(mc(this,i),i===this._recent&&(this._recent=this._last),us(this))},t.totalTime=function(i,a){return arguments.length?(this._forcing=1,!this._dp&&this._ts&&(this._start=_n(ni.time-(this._ts>0?i/this._ts:(this.totalDuration()-i)/-this._ts))),r.prototype.totalTime.call(this,i,a),this._forcing=0,this):this._tTime},t.addLabel=function(i,a){return this.labels[i]=ci(this,a),this},t.removeLabel=function(i){return delete this.labels[i],this},t.addPause=function(i,a,o){var l=rn.delayedCall(0,a||yo,o);return l.data="isPause",this._hasPause=1,Ui(this,l,ci(this,i))},t.removePause=function(i){var a=this._first;for(i=ci(this,i);a;)a._start===i&&a.data==="isPause"&&Or(a),a=a._next},t.killTweensOf=function(i,a,o){for(var l=this.getTweensOf(i,o),c=l.length;c--;)Sr!==l[c]&&l[c].kill(i,a);return this},t.getTweensOf=function(i,a){for(var o=[],l=fi(i),c=this._first,h=lr(a),f;c;)c instanceof rn?_y(c._targets,l)&&(h?(!Sr||c._initted&&c._ts)&&c.globalTime(0)<=a&&c.globalTime(c.totalDuration())>a:!a||c.isActive())&&o.push(c):(f=c.getTweensOf(l,a)).length&&o.push.apply(o,f),c=c._next;return o},t.tweenTo=function(i,a){a=a||{};var o=this,l=ci(o,i),c=a,h=c.startAt,f=c.onStart,m=c.onStartParams,g=c.immediateRender,_,M=rn.to(o,_i({ease:a.ease||"none",lazy:!1,immediateRender:!1,time:l,overwrite:"auto",duration:a.duration||Math.abs((l-(h&&"time"in h?h.time:o._time))/o.timeScale())||Ot,onStart:function(){if(o.pause(),!_){var C=a.duration||Math.abs((l-(h&&"time"in h?h.time:o._time))/o.timeScale());M._dur!==C&&fa(M,C,0,1).render(M._time,!0,!0),_=1}f&&f.apply(M,m||[])}},a));return g?M.render(0):M},t.tweenFromTo=function(i,a,o){return this.tweenTo(a,_i({startAt:{time:ci(this,i)}},o))},t.recent=function(){return this._recent},t.nextLabel=function(i){return i===void 0&&(i=this._time),Dd(this,ci(this,i))},t.previousLabel=function(i){return i===void 0&&(i=this._time),Dd(this,ci(this,i),1)},t.currentLabel=function(i){return arguments.length?this.seek(i,!0):this.previousLabel(this._time+Ot)},t.shiftChildren=function(i,a,o){o===void 0&&(o=0);for(var l=this._first,c=this.labels,h;l;)l._start>=o&&(l._start+=i,l._end+=i),l=l._next;if(a)for(h in c)c[h]>=o&&(c[h]+=i);return us(this)},t.invalidate=function(i){var a=this._first;for(this._lock=0;a;)a.invalidate(i),a=a._next;return r.prototype.invalidate.call(this,i)},t.clear=function(i){i===void 0&&(i=!0);for(var a=this._first,o;a;)o=a._next,this.remove(a),a=o;return this._dp&&(this._time=this._tTime=this._pTime=0),i&&(this.labels={}),us(this)},t.totalDuration=function(i){var a=0,o=this,l=o._last,c=hi,h,f,m;if(arguments.length)return o.timeScale((o._repeat<0?o.duration():o.totalDuration())/(o.reversed()?-i:i));if(o._dirty){for(m=o.parent;l;)h=l._prev,l._dirty&&l.totalDuration(),f=l._start,f>c&&o._sort&&l._ts&&!o._lock?(o._lock=1,Ui(o,l,f-l._delay,1)._lock=0):c=f,f<0&&l._ts&&(a-=f,(!m&&!o._dp||m&&m.smoothChildTiming)&&(o._start+=f/o._ts,o._time-=f,o._tTime-=f),o.shiftChildren(-f,!1,-1/0),c=0),l._end>a&&l._ts&&(a=l._end),l=h;fa(o,o===jt&&o._time>a?o._time:a,1,1),o._dirty=0}return o._tDur},e.updateRoot=function(i){if(jt._ts&&(rv(jt,Yl(i,jt)),nv=ni.frame),ni.frame>=Ld){Ld+=si.autoSleep||120;var a=jt._first;if((!a||!a._ts)&&si.autoSleep&&ni._listeners.length<2){for(;a&&!a._ts;)a=a._next;a||ni.sleep()}}},e}(bo);_i(zn.prototype,{_lock:0,_hasPause:0,_forcing:0});var Hy=function(e,t,n,i,a,o,l){var c=new Un(this._pt,e,t,0,1,Iv,null,a),h=0,f=0,m,g,_,M,x,C,y,b;for(c.b=n,c.e=i,n+="",i+="",(y=~i.indexOf("random("))&&(i=xo(i)),o&&(b=[n,i],o(b,e,t),n=b[0],i=b[1]),g=n.match(Zc)||[];m=Zc.exec(i);)M=m[0],x=i.substring(h,m.index),_?_=(_+1)%5:x.substr(-5)==="rgba("&&(_=1),M!==g[f++]&&(C=parseFloat(g[f-1])||0,c._pt={_next:c._pt,p:x||f===1?x:",",s:C,c:M.charAt(1)==="="?na(C,M)-C:parseFloat(M)-C,m:_&&_<4?Math.round:0},h=Zc.lastIndex);return c.c=h<i.length?i.substring(h,i.length):"",c.fp=l,(Zg.test(i)||y)&&(c.e=0),this._pt=c,c},vf=function(e,t,n,i,a,o,l,c,h,f){Zt(i)&&(i=i(a||0,e,o));var m=e[t],g=n!=="get"?n:Zt(m)?h?e[t.indexOf("set")||!Zt(e["get"+t.substr(3)])?t:"get"+t.substr(3)](h):e[t]():m,_=Zt(m)?h?qy:Rv:yf,M;if(gn(i)&&(~i.indexOf("random(")&&(i=xo(i)),i.charAt(1)==="="&&(M=na(g,i)+(bn(g)||0),(M||M===0)&&(i=M))),!f||g!==i||nh)return!isNaN(g*i)&&i!==""?(M=new Un(this._pt,e,t,+g||0,i-(g||0),typeof m=="boolean"?Yy:Pv,0,_),h&&(M.fp=h),l&&M.modifier(l,this,e),this._pt=M):(!m&&!(t in e)&&df(t,i),Hy.call(this,e,t,g,i,_,c||si.stringFilter,h))},Vy=function(e,t,n,i,a){if(Zt(e)&&(e=oo(e,a,t,n,i)),!Wi(e)||e.style&&e.nodeType||Sn(e)||$g(e))return gn(e)?oo(e,a,t,n,i):e;var o={},l;for(l in e)o[l]=oo(e[l],a,t,n,i);return o},Av=function(e,t,n,i,a,o){var l,c,h,f;if(ei[e]&&(l=new ei[e]).init(a,l.rawVars?t[e]:Vy(t[e],i,a,o,n),n,i,o)!==!1&&(n._pt=c=new Un(n._pt,a,e,0,1,l.render,l,0,l.priority),n!==$s))for(h=n._ptLookup[n._targets.indexOf(a)],f=l._props.length;f--;)h[l._props[f]]=c;return l},Sr,nh,_f=function r(e,t,n){var i=e.vars,a=i.ease,o=i.startAt,l=i.immediateRender,c=i.lazy,h=i.onUpdate,f=i.onUpdateParams,m=i.callbackScope,g=i.runBackwards,_=i.yoyoEase,M=i.keyframes,x=i.autoRevert,C=e._dur,y=e._startAt,b=e._targets,O=e.parent,P=O&&O.data==="nested"?O.vars.targets:b,F=e._overwrite==="auto"&&!cf,p=e.timeline,L,W,X,oe,q,ye,ie,ne,re,ae,se,be,Oe;if(p&&(!M||!a)&&(a="none"),e._ease=hs(a,ua.ease),e._yEase=_?Mv(hs(_===!0?a:_,ua.ease)):0,_&&e._yoyo&&!e._repeat&&(_=e._yEase,e._yEase=e._ease,e._ease=_),e._from=!p&&!!i.runBackwards,!p||M&&!i.stagger){if(ne=b[0]?cs(b[0]).harness:0,be=ne&&i[ne.prop],L=Xl(i,pf),y&&(y._zTime<0&&y.progress(1),t<0&&g&&l&&!x?y.render(-1,!0):y.revert(g&&C?Nl:gy),y._lazy=0),o){if(Or(e._startAt=rn.set(b,_i({data:"isStart",overwrite:!1,parent:O,immediateRender:!0,lazy:!y&&Bn(c),startAt:null,delay:0,onUpdate:h,onUpdateParams:f,callbackScope:m,stagger:0},o))),e._startAt._dp=0,e._startAt._sat=e,t<0&&(Mn||!l&&!x)&&e._startAt.revert(Nl),l&&C&&t<=0&&n<=0){t&&(e._zTime=t);return}}else if(g&&C&&!y){if(t&&(l=!1),X=_i({overwrite:!1,data:"isFromStart",lazy:l&&!y&&Bn(c),immediateRender:l,stagger:0,parent:O},L),be&&(X[ne.prop]=be),Or(e._startAt=rn.set(b,X)),e._startAt._dp=0,e._startAt._sat=e,t<0&&(Mn?e._startAt.revert(Nl):e._startAt.render(-1,!0)),e._zTime=t,!l)r(e._startAt,Ot,Ot);else if(!t)return}for(e._pt=e._ptCache=0,c=C&&Bn(c)||c&&!C,W=0;W<b.length;W++){if(q=b[W],ie=q._gsap||gf(b)[W]._gsap,e._ptLookup[W]=ae={},Ju[ie.id]&&Ar.length&&ql(),se=P===b?W:P.indexOf(q),ne&&(re=new ne).init(q,be||L,e,se,P)!==!1&&(e._pt=oe=new Un(e._pt,q,re.name,0,1,re.render,re,0,re.priority),re._props.forEach(function(de){ae[de]=oe}),re.priority&&(ye=1)),!ne||be)for(X in L)ei[X]&&(re=Av(X,L,e,se,q,P))?re.priority&&(ye=1):ae[X]=oe=vf.call(e,q,X,"get",L[X],se,P,0,i.stringFilter);e._op&&e._op[W]&&e.kill(q,e._op[W]),F&&e._pt&&(Sr=e,jt.killTweensOf(q,ae,e.globalTime(t)),Oe=!e.parent,Sr=0),e._pt&&c&&(Ju[ie.id]=1)}ye&&Dv(e),e._onInit&&e._onInit(e)}e._onUpdate=h,e._initted=(!e._op||e._pt)&&!Oe,M&&t<=0&&p.render(hi,!0,!0)},Gy=function(e,t,n,i,a,o,l){var c=(e._pt&&e._ptCache||(e._ptCache={}))[t],h,f,m,g;if(!c)for(c=e._ptCache[t]=[],m=e._ptLookup,g=e._targets.length;g--;){if(h=m[g][t],h&&h.d&&h.d._pt)for(h=h.d._pt;h&&h.p!==t&&h.fp!==t;)h=h._next;if(!h)return nh=1,e.vars[t]="+=0",_f(e,l),nh=0,1;c.push(h)}for(g=c.length;g--;)f=c[g],h=f._pt||f,h.s=(i||i===0)&&!a?i:h.s+(i||0)+o*h.c,h.c=n-h.s,f.e&&(f.e=Kt(n)+bn(f.e)),f.b&&(f.b=h.s+bn(f.b))},Wy=function(e,t){var n=e[0]?cs(e[0]).harness:0,i=n&&n.aliases,a,o,l,c;if(!i)return t;a=vs({},t);for(o in i)if(o in a)for(c=i[o].split(","),l=c.length;l--;)a[c[l]]=a[o];return a},jy=function(e,t,n,i){var a=t.ease||i||"power1.inOut",o,l;if(Sn(t))l=n[e]||(n[e]=[]),t.forEach(function(c,h){return l.push({t:h/(t.length-1)*100,v:c,e:a})});else for(o in t)l=n[o]||(n[o]=[]),o==="ease"||l.push({t:parseFloat(e),v:t[o],e:a})},oo=function(e,t,n,i,a){return Zt(e)?e.call(t,n,i,a):gn(e)&&~e.indexOf("random(")?xo(e):e},Cv=mf+"repeat,repeatDelay,yoyo,repeatRefresh,yoyoEase,autoRevert",Lv={};kn(Cv+",id,stagger,delay,duration,paused,scrollTrigger",function(r){return Lv[r]=1});var rn=function(r){Xg(e,r);function e(n,i,a,o){var l;typeof i=="number"&&(a.duration=i,i=a,a=null),l=r.call(this,o?i:so(i))||this;var c=l.vars,h=c.duration,f=c.delay,m=c.immediateRender,g=c.stagger,_=c.overwrite,M=c.keyframes,x=c.defaults,C=c.scrollTrigger,y=c.yoyoEase,b=i.parent||jt,O=(Sn(n)||$g(n)?lr(n[0]):"length"in i)?[n]:fi(n),P,F,p,L,W,X,oe,q;if(l._targets=O.length?gf(O):jl("GSAP target "+n+" not found. https://greensock.com",!si.nullTargetWarn)||[],l._ptLookup=[],l._overwrite=_,M||g||nl(h)||nl(f)){if(i=l.vars,P=l.timeline=new zn({data:"nested",defaults:x||{},targets:b&&b.data==="nested"?b.vars.targets:O}),P.kill(),P.parent=P._dp=rr(l),P._start=0,g||nl(h)||nl(f)){if(L=O.length,oe=g&&dv(g),Wi(g))for(W in g)~Cv.indexOf(W)&&(q||(q={}),q[W]=g[W]);for(F=0;F<L;F++)p=Xl(i,Lv),p.stagger=0,y&&(p.yoyoEase=y),q&&vs(p,q),X=O[F],p.duration=+oo(h,rr(l),F,X,O),p.delay=(+oo(f,rr(l),F,X,O)||0)-l._delay,!g&&L===1&&p.delay&&(l._delay=f=p.delay,l._start+=f,p.delay=0),P.to(X,p,oe?oe(F,X,O):0),P._ease=vt.none;P.duration()?h=f=0:l.timeline=0}else if(M){so(_i(P.vars.defaults,{ease:"none"})),P._ease=hs(M.ease||i.ease||"none");var ye=0,ie,ne,re;if(Sn(M))M.forEach(function(ae){return P.to(O,ae,">")}),P.duration();else{p={};for(W in M)W==="ease"||W==="easeEach"||jy(W,M[W],p,M.easeEach);for(W in p)for(ie=p[W].sort(function(ae,se){return ae.t-se.t}),ye=0,F=0;F<ie.length;F++)ne=ie[F],re={ease:ne.e,duration:(ne.t-(F?ie[F-1].t:0))/100*h},re[W]=ne.v,P.to(O,re,ye),ye+=re.duration;P.duration()<h&&P.to({},{duration:h-P.duration()})}}h||l.duration(h=P.duration())}else l.timeline=0;return _===!0&&!cf&&(Sr=rr(l),jt.killTweensOf(O),Sr=0),Ui(b,rr(l),a),i.reversed&&l.reverse(),i.paused&&l.paused(!0),(m||!h&&!M&&l._start===_n(b._time)&&Bn(m)&&by(rr(l))&&b.data!=="nested")&&(l._tTime=-Ot,l.render(Math.max(0,-f)||0)),C&&cv(rr(l),C),l}var t=e.prototype;return t.render=function(i,a,o){var l=this._time,c=this._tDur,h=this._dur,f=i<0,m=i>c-Ot&&!f?c:i<Ot?0:i,g,_,M,x,C,y,b,O,P;if(!h)Sy(this,i,a,o);else if(m!==this._tTime||!i||o||!this._initted&&this._tTime||this._startAt&&this._zTime<0!==f){if(g=m,O=this.timeline,this._repeat){if(x=h+this._rDelay,this._repeat<-1&&f)return this.totalTime(x*100+i,a,o);if(g=_n(m%x),m===c?(M=this._repeat,g=h):(M=~~(m/x),M&&M===m/x&&(g=h,M--),g>h&&(g=h)),y=this._yoyo&&M&1,y&&(P=this._yEase,g=h-g),C=ha(this._tTime,x),g===l&&!o&&this._initted)return this._tTime=m,this;M!==C&&(O&&this._yEase&&Sv(O,y),this.vars.repeatRefresh&&!y&&!this._lock&&(this._lock=o=1,this.render(_n(x*M),!0).invalidate()._lock=0))}if(!this._initted){if(uv(this,f?i:g,o,a,m))return this._tTime=0,this;if(l!==this._time)return this;if(h!==this._dur)return this.render(i,a,o)}if(this._tTime=m,this._time=g,!this._act&&this._ts&&(this._act=1,this._lazy=0),this.ratio=b=(P||this._ease)(g/h),this._from&&(this.ratio=b=1-b),g&&!l&&!a&&!M&&(di(this,"onStart"),this._tTime!==m))return this;for(_=this._pt;_;)_.r(b,_.d),_=_._next;O&&O.render(i<0?i:!g&&y?-Ot:O._dur*O._ease(g/this._dur),a,o)||this._startAt&&(this._zTime=i),this._onUpdate&&!a&&(f&&Zu(this,i,a,o),di(this,"onUpdate")),this._repeat&&M!==C&&this.vars.onRepeat&&!a&&this.parent&&di(this,"onRepeat"),(m===this._tDur||!m)&&this._tTime===m&&(f&&!this._onUpdate&&Zu(this,i,!0,!0),(i||!h)&&(m===this._tDur&&this._ts>0||!m&&this._ts<0)&&Or(this,1),!a&&!(f&&!l)&&(m||l||y)&&(di(this,m===c?"onComplete":"onReverseComplete",!0),this._prom&&!(m<c&&this.timeScale()>0)&&this._prom()))}return this},t.targets=function(){return this._targets},t.invalidate=function(i){return(!i||!this.vars.runBackwards)&&(this._startAt=0),this._pt=this._op=this._onUpdate=this._lazy=this.ratio=0,this._ptLookup=[],this.timeline&&this.timeline.invalidate(i),r.prototype.invalidate.call(this,i)},t.resetTo=function(i,a,o,l){wo||ni.wake(),this._ts||this.play();var c=Math.min(this._dur,(this._dp._time-this._start)*this._ts),h;return this._initted||_f(this,c),h=this._ease(c/this._dur),Gy(this,i,a,o,l,h,c)?this.resetTo(i,a,o,l):(vc(this,0),this.parent||ov(this._dp,this,"_first","_last",this._dp._sort?"_start":0),this.render(0))},t.kill=function(i,a){if(a===void 0&&(a="all"),!i&&(!a||a==="all"))return this._lazy=this._pt=0,this.parent?Ka(this):this;if(this.timeline){var o=this.timeline.totalDuration();return this.timeline.killTweensOf(i,a,Sr&&Sr.vars.overwrite!==!0)._first||Ka(this),this.parent&&o!==this.timeline.totalDuration()&&fa(this,this._dur*this.timeline._tDur/o,0,1),this}var l=this._targets,c=i?fi(i):l,h=this._ptLookup,f=this._pt,m,g,_,M,x,C,y;if((!a||a==="all")&&xy(l,c))return a==="all"&&(this._pt=0),Ka(this);for(m=this._op=this._op||[],a!=="all"&&(gn(a)&&(x={},kn(a,function(b){return x[b]=1}),a=x),a=Wy(l,a)),y=l.length;y--;)if(~c.indexOf(l[y])){g=h[y],a==="all"?(m[y]=a,M=g,_={}):(_=m[y]=m[y]||{},M=a);for(x in M)C=g&&g[x],C&&((!("kill"in C.d)||C.d.kill(x)===!0)&&mc(this,C,"_pt"),delete g[x]),_!=="all"&&(_[x]=1)}return this._initted&&!this._pt&&f&&Ka(this),this},e.to=function(i,a){return new e(i,a,arguments[2])},e.from=function(i,a){return ao(1,arguments)},e.delayedCall=function(i,a,o,l){return new e(a,0,{immediateRender:!1,lazy:!1,overwrite:!1,delay:i,onComplete:a,onReverseComplete:a,onCompleteParams:o,onReverseCompleteParams:o,callbackScope:l})},e.fromTo=function(i,a,o){return ao(2,arguments)},e.set=function(i,a){return a.duration=0,a.repeatDelay||(a.repeat=0),new e(i,a)},e.killTweensOf=function(i,a,o){return jt.killTweensOf(i,a,o)},e}(bo);_i(rn.prototype,{_targets:[],_lazy:0,_startAt:0,_op:0,_onInit:0});kn("staggerTo,staggerFrom,staggerFromTo",function(r){rn[r]=function(){var e=new zn,t=Ku.call(arguments,0);return t.splice(r==="staggerFromTo"?5:4,0,0),e[r].apply(e,t)}});var yf=function(e,t,n){return e[t]=n},Rv=function(e,t,n){return e[t](n)},qy=function(e,t,n,i){return e[t](i.fp,n)},Xy=function(e,t,n){return e.setAttribute(t,n)},xf=function(e,t){return Zt(e[t])?Rv:uf(e[t])&&e.setAttribute?Xy:yf},Pv=function(e,t){return t.set(t.t,t.p,Math.round((t.s+t.c*e)*1e6)/1e6,t)},Yy=function(e,t){return t.set(t.t,t.p,!!(t.s+t.c*e),t)},Iv=function(e,t){var n=t._pt,i="";if(!e&&t.b)i=t.b;else if(e===1&&t.e)i=t.e;else{for(;n;)i=n.p+(n.m?n.m(n.s+n.c*e):Math.round((n.s+n.c*e)*1e4)/1e4)+i,n=n._next;i+=t.c}t.set(t.t,t.p,i,t)},wf=function(e,t){for(var n=t._pt;n;)n.r(e,n.d),n=n._next},$y=function(e,t,n,i){for(var a=this._pt,o;a;)o=a._next,a.p===i&&a.modifier(e,t,n),a=o},Jy=function(e){for(var t=this._pt,n,i;t;)i=t._next,t.p===e&&!t.op||t.op===e?mc(this,t,"_pt"):t.dep||(n=1),t=i;return!n},Zy=function(e,t,n,i){i.mSet(e,t,i.m.call(i.tween,n,i.mt),i)},Dv=function(e){for(var t=e._pt,n,i,a,o;t;){for(n=t._next,i=a;i&&i.pr>t.pr;)i=i._next;(t._prev=i?i._prev:o)?t._prev._next=t:a=t,(t._next=i)?i._prev=t:o=t,t=n}e._pt=a},Un=function(){function r(t,n,i,a,o,l,c,h,f){this.t=n,this.s=a,this.c=o,this.p=i,this.r=l||Pv,this.d=c||this,this.set=h||yf,this.pr=f||0,this._next=t,t&&(t._prev=this)}var e=r.prototype;return e.modifier=function(n,i,a){this.mSet=this.mSet||this.set,this.set=Zy,this.m=n,this.mt=a,this.tween=i},r}();kn(mf+"parent,duration,ease,delay,overwrite,runBackwards,startAt,yoyo,immediateRender,repeat,repeatDelay,data,paused,reversed,lazy,callbackScope,stringFilter,id,yoyoEase,stagger,inherit,repeatRefresh,keyframes,autoRevert,scrollTrigger",function(r){return pf[r]=1});ai.TweenMax=ai.TweenLite=rn;ai.TimelineLite=ai.TimelineMax=zn;jt=new zn({sortChildren:!1,defaults:ua,autoRemoveChildren:!0,id:"root",smoothChildTiming:!0});si.stringFilter=bv;var fs=[],Fl={},Qy=[],Od=0,Ky=0,nu=function(e){return(Fl[e]||Qy).map(function(t){return t()})},ih=function(){var e=Date.now(),t=[];e-Od>2&&(nu("matchMediaInit"),fs.forEach(function(n){var i=n.queries,a=n.conditions,o,l,c,h;for(l in i)o=ui.matchMedia(i[l]).matches,o&&(c=1),o!==a[l]&&(a[l]=o,h=1);h&&(n.revert(),c&&t.push(n))}),nu("matchMediaRevert"),t.forEach(function(n){return n.onMatch(n)}),Od=e,nu("matchMedia"))},Nv=function(){function r(t,n){this.selector=n&&eh(n),this.data=[],this._r=[],this.isReverted=!1,this.id=Ky++,t&&this.add(t)}var e=r.prototype;return e.add=function(n,i,a){Zt(n)&&(a=i,i=n,n=Zt);var o=this,l=function(){var h=Jt,f=o.selector,m;return h&&h!==o&&h.data.push(o),a&&(o.selector=eh(a)),Jt=o,m=i.apply(o,arguments),Zt(m)&&o._r.push(m),Jt=h,o.selector=f,o.isReverted=!1,m};return o.last=l,n===Zt?l(o):n?o[n]=l:l},e.ignore=function(n){var i=Jt;Jt=null,n(this),Jt=i},e.getTweens=function(){var n=[];return this.data.forEach(function(i){return i instanceof r?n.push.apply(n,i.getTweens()):i instanceof rn&&!(i.parent&&i.parent.data==="nested")&&n.push(i)}),n},e.clear=function(){this._r.length=this.data.length=0},e.kill=function(n,i){var a=this;if(n){var o=this.getTweens();this.data.forEach(function(c){c.data==="isFlip"&&(c.revert(),c.getChildren(!0,!0,!1).forEach(function(h){return o.splice(o.indexOf(h),1)}))}),o.map(function(c){return{g:c.globalTime(0),t:c}}).sort(function(c,h){return h.g-c.g||-1/0}).forEach(function(c){return c.t.revert(n)}),this.data.forEach(function(c){return!(c instanceof rn)&&c.revert&&c.revert(n)}),this._r.forEach(function(c){return c(n,a)}),this.isReverted=!0}else this.data.forEach(function(c){return c.kill&&c.kill()});if(this.clear(),i)for(var l=fs.length;l--;)fs[l].id===this.id&&fs.splice(l,1)},e.revert=function(n){this.kill(n||{})},r}(),ex=function(){function r(t){this.contexts=[],this.scope=t}var e=r.prototype;return e.add=function(n,i,a){Wi(n)||(n={matches:n});var o=new Nv(0,a||this.scope),l=o.conditions={},c,h,f;Jt&&!o.selector&&(o.selector=Jt.selector),this.contexts.push(o),i=o.add("onMatch",i),o.queries=n;for(h in n)h==="all"?f=1:(c=ui.matchMedia(n[h]),c&&(fs.indexOf(o)<0&&fs.push(o),(l[h]=c.matches)&&(f=1),c.addListener?c.addListener(ih):c.addEventListener("change",ih)));return f&&i(o),this},e.revert=function(n){this.kill(n||{})},e.kill=function(n){this.contexts.forEach(function(i){return i.kill(n,!0)})},r}(),$l={registerPlugin:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];t.forEach(function(i){return yv(i)})},timeline:function(e){return new zn(e)},getTweensOf:function(e,t){return jt.getTweensOf(e,t)},getProperty:function(e,t,n,i){gn(e)&&(e=fi(e)[0]);var a=cs(e||{}).get,o=n?av:sv;return n==="native"&&(n=""),e&&(t?o((ei[t]&&ei[t].get||a)(e,t,n,i)):function(l,c,h){return o((ei[l]&&ei[l].get||a)(e,l,c,h))})},quickSetter:function(e,t,n){if(e=fi(e),e.length>1){var i=e.map(function(f){return jn.quickSetter(f,t,n)}),a=i.length;return function(f){for(var m=a;m--;)i[m](f)}}e=e[0]||{};var o=ei[t],l=cs(e),c=l.harness&&(l.harness.aliases||{})[t]||t,h=o?function(f){var m=new o;$s._pt=0,m.init(e,n?f+n:f,$s,0,[e]),m.render(1,m),$s._pt&&wf(1,$s)}:l.set(e,c);return o?h:function(f){return h(e,c,n?f+n:f,l,1)}},quickTo:function(e,t,n){var i,a=jn.to(e,vs((i={},i[t]="+=0.1",i.paused=!0,i),n||{})),o=function(c,h,f){return a.resetTo(t,c,h,f)};return o.tween=a,o},isTweening:function(e){return jt.getTweensOf(e,!0).length>0},defaults:function(e){return e&&e.ease&&(e.ease=hs(e.ease,ua.ease)),Rd(ua,e||{})},config:function(e){return Rd(si,e||{})},registerEffect:function(e){var t=e.name,n=e.effect,i=e.plugins,a=e.defaults,o=e.extendTimeline;(i||"").split(",").forEach(function(l){return l&&!ei[l]&&!ai[l]&&jl(t+" effect requires "+l+" plugin.")}),Qc[t]=function(l,c,h){return n(fi(l),_i(c||{},a),h)},o&&(zn.prototype[t]=function(l,c,h){return this.add(Qc[t](l,Wi(c)?c:(h=c)&&{},this),h)})},registerEase:function(e,t){vt[e]=hs(t)},parseEase:function(e,t){return arguments.length?hs(e,t):vt},getById:function(e){return jt.getById(e)},exportRoot:function(e,t){e===void 0&&(e={});var n=new zn(e),i,a;for(n.smoothChildTiming=Bn(e.smoothChildTiming),jt.remove(n),n._dp=0,n._time=n._tTime=jt._time,i=jt._first;i;)a=i._next,(t||!(!i._dur&&i instanceof rn&&i.vars.onComplete===i._targets[0]))&&Ui(n,i,i._start-i._delay),i=a;return Ui(jt,n,0),n},context:function(e,t){return e?new Nv(e,t):Jt},matchMedia:function(e){return new ex(e)},matchMediaRefresh:function(){return fs.forEach(function(e){var t=e.conditions,n,i;for(i in t)t[i]&&(t[i]=!1,n=1);n&&e.revert()})||ih()},addEventListener:function(e,t){var n=Fl[e]||(Fl[e]=[]);~n.indexOf(t)||n.push(t)},removeEventListener:function(e,t){var n=Fl[e],i=n&&n.indexOf(t);i>=0&&n.splice(i,1)},utils:{wrap:Iy,wrapYoyo:Dy,distribute:dv,random:mv,snap:pv,normalize:Py,getUnit:bn,clamp:Ay,splitColor:xv,toArray:fi,selector:eh,mapRange:vv,pipe:Ly,unitize:Ry,interpolate:Ny,shuffle:fv},install:ev,effects:Qc,ticker:ni,updateRoot:zn.updateRoot,plugins:ei,globalTimeline:jt,core:{PropTween:Un,globals:tv,Tween:rn,Timeline:zn,Animation:bo,getCache:cs,_removeLinkedListItem:mc,reverting:function(){return Mn},context:function(e){return e&&Jt&&(Jt.data.push(e),e._ctx=Jt),Jt},suppressOverwrites:function(e){return cf=e}}};kn("to,from,fromTo,delayedCall,set,killTweensOf",function(r){return $l[r]=rn[r]});ni.add(zn.updateRoot);$s=$l.to({},{duration:0});var tx=function(e,t){for(var n=e._pt;n&&n.p!==t&&n.op!==t&&n.fp!==t;)n=n._next;return n},nx=function(e,t){var n=e._targets,i,a,o;for(i in t)for(a=n.length;a--;)o=e._ptLookup[a][i],o&&(o=o.d)&&(o._pt&&(o=tx(o,i)),o&&o.modifier&&o.modifier(t[i],e,n[a],i))},iu=function(e,t){return{name:e,rawVars:1,init:function(i,a,o){o._onInit=function(l){var c,h;if(gn(a)&&(c={},kn(a,function(f){return c[f]=1}),a=c),t){c={};for(h in a)c[h]=t(a[h]);a=c}nx(l,a)}}}},jn=$l.registerPlugin({name:"attr",init:function(e,t,n,i,a){var o,l,c;this.tween=n;for(o in t)c=e.getAttribute(o)||"",l=this.add(e,"setAttribute",(c||0)+"",t[o],i,a,0,0,o),l.op=o,l.b=c,this._props.push(o)},render:function(e,t){for(var n=t._pt;n;)Mn?n.set(n.t,n.p,n.b,n):n.r(e,n.d),n=n._next}},{name:"endArray",init:function(e,t){for(var n=t.length;n--;)this.add(e,n,e[n]||0,t[n],0,0,0,0,0,1)}},iu("roundProps",th),iu("modifiers"),iu("snap",pv))||$l;rn.version=zn.version=jn.version="3.12.2";Kg=1;hf()&&da();vt.Power0;vt.Power1;vt.Power2;vt.Power3;vt.Power4;vt.Linear;vt.Quad;vt.Cubic;vt.Quart;vt.Quint;vt.Strong;vt.Elastic;vt.Back;vt.SteppedEase;vt.Bounce;vt.Sine;vt.Expo;vt.Circ;/*!
 * CSSPlugin 3.12.2
 * https://greensock.com
 *
 * Copyright 2008-2023, GreenSock. All rights reserved.
 * Subject to the terms at https://greensock.com/standard-license or for
 * Club GreenSock members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/var Fd,Tr,ia,bf,os,zd,Mf,ix=function(){return typeof window<"u"},cr={},rs=180/Math.PI,ra=Math.PI/180,As=Math.atan2,Bd=1e8,Sf=/([A-Z])/g,rx=/(left|right|width|margin|padding|x)/i,sx=/[\s,\(]\S/,Hi={autoAlpha:"opacity,visibility",scale:"scaleX,scaleY",alpha:"opacity"},rh=function(e,t){return t.set(t.t,t.p,Math.round((t.s+t.c*e)*1e4)/1e4+t.u,t)},ax=function(e,t){return t.set(t.t,t.p,e===1?t.e:Math.round((t.s+t.c*e)*1e4)/1e4+t.u,t)},ox=function(e,t){return t.set(t.t,t.p,e?Math.round((t.s+t.c*e)*1e4)/1e4+t.u:t.b,t)},lx=function(e,t){var n=t.s+t.c*e;t.set(t.t,t.p,~~(n+(n<0?-.5:.5))+t.u,t)},Ov=function(e,t){return t.set(t.t,t.p,e?t.e:t.b,t)},Fv=function(e,t){return t.set(t.t,t.p,e!==1?t.b:t.e,t)},cx=function(e,t,n){return e.style[t]=n},ux=function(e,t,n){return e.style.setProperty(t,n)},hx=function(e,t,n){return e._gsap[t]=n},fx=function(e,t,n){return e._gsap.scaleX=e._gsap.scaleY=n},dx=function(e,t,n,i,a){var o=e._gsap;o.scaleX=o.scaleY=n,o.renderTransform(a,o)},px=function(e,t,n,i,a){var o=e._gsap;o[t]=n,o.renderTransform(a,o)},qt="transform",Ci=qt+"Origin",mx=function r(e,t){var n=this,i=this.target,a=i.style;if(e in cr&&a){if(this.tfm=this.tfm||{},e!=="transform")e=Hi[e]||e,~e.indexOf(",")?e.split(",").forEach(function(o){return n.tfm[o]=sr(i,o)}):this.tfm[e]=i._gsap.x?i._gsap[e]:sr(i,e);else return Hi.transform.split(",").forEach(function(o){return r.call(n,o,t)});if(this.props.indexOf(qt)>=0)return;i._gsap.svg&&(this.svgo=i.getAttribute("data-svg-origin"),this.props.push(Ci,t,"")),e=qt}(a||t)&&this.props.push(e,t,a[e])},zv=function(e){e.translate&&(e.removeProperty("translate"),e.removeProperty("scale"),e.removeProperty("rotate"))},gx=function(){var e=this.props,t=this.target,n=t.style,i=t._gsap,a,o;for(a=0;a<e.length;a+=3)e[a+1]?t[e[a]]=e[a+2]:e[a+2]?n[e[a]]=e[a+2]:n.removeProperty(e[a].substr(0,2)==="--"?e[a]:e[a].replace(Sf,"-$1").toLowerCase());if(this.tfm){for(o in this.tfm)i[o]=this.tfm[o];i.svg&&(i.renderTransform(),t.setAttribute("data-svg-origin",this.svgo||"")),a=Mf(),(!a||!a.isStart)&&!n[qt]&&(zv(n),i.uncache=1)}},Bv=function(e,t){var n={target:e,props:[],revert:gx,save:mx};return e._gsap||jn.core.getCache(e),t&&t.split(",").forEach(function(i){return n.save(i)}),n},kv,sh=function(e,t){var n=Tr.createElementNS?Tr.createElementNS((t||"http://www.w3.org/1999/xhtml").replace(/^https/,"http"),e):Tr.createElement(e);return n.style?n:Tr.createElement(e)},Vi=function r(e,t,n){var i=getComputedStyle(e);return i[t]||i.getPropertyValue(t.replace(Sf,"-$1").toLowerCase())||i.getPropertyValue(t)||!n&&r(e,pa(t)||t,1)||""},kd="O,Moz,ms,Ms,Webkit".split(","),pa=function(e,t,n){var i=t||os,a=i.style,o=5;if(e in a&&!n)return e;for(e=e.charAt(0).toUpperCase()+e.substr(1);o--&&!(kd[o]+e in a););return o<0?null:(o===3?"ms":o>=0?kd[o]:"")+e},ah=function(){ix()&&window.document&&(Fd=window,Tr=Fd.document,ia=Tr.documentElement,os=sh("div")||{style:{}},sh("div"),qt=pa(qt),Ci=qt+"Origin",os.style.cssText="border-width:0;line-height:0;position:absolute;padding:0",kv=!!pa("perspective"),Mf=jn.core.reverting,bf=1)},ru=function r(e){var t=sh("svg",this.ownerSVGElement&&this.ownerSVGElement.getAttribute("xmlns")||"http://www.w3.org/2000/svg"),n=this.parentNode,i=this.nextSibling,a=this.style.cssText,o;if(ia.appendChild(t),t.appendChild(this),this.style.display="block",e)try{o=this.getBBox(),this._gsapBBox=this.getBBox,this.getBBox=r}catch{}else this._gsapBBox&&(o=this._gsapBBox());return n&&(i?n.insertBefore(this,i):n.appendChild(this)),ia.removeChild(t),this.style.cssText=a,o},Ud=function(e,t){for(var n=t.length;n--;)if(e.hasAttribute(t[n]))return e.getAttribute(t[n])},Uv=function(e){var t;try{t=e.getBBox()}catch{t=ru.call(e,!0)}return t&&(t.width||t.height)||e.getBBox===ru||(t=ru.call(e,!0)),t&&!t.width&&!t.x&&!t.y?{x:+Ud(e,["x","cx","x1"])||0,y:+Ud(e,["y","cy","y1"])||0,width:0,height:0}:t},Hv=function(e){return!!(e.getCTM&&(!e.parentNode||e.ownerSVGElement)&&Uv(e))},Mo=function(e,t){if(t){var n=e.style;t in cr&&t!==Ci&&(t=qt),n.removeProperty?((t.substr(0,2)==="ms"||t.substr(0,6)==="webkit")&&(t="-"+t),n.removeProperty(t.replace(Sf,"-$1").toLowerCase())):n.removeAttribute(t)}},Er=function(e,t,n,i,a,o){var l=new Un(e._pt,t,n,0,1,o?Fv:Ov);return e._pt=l,l.b=i,l.e=a,e._props.push(n),l},Hd={deg:1,rad:1,turn:1},vx={grid:1,flex:1},Fr=function r(e,t,n,i){var a=parseFloat(n)||0,o=(n+"").trim().substr((a+"").length)||"px",l=os.style,c=rx.test(t),h=e.tagName.toLowerCase()==="svg",f=(h?"client":"offset")+(c?"Width":"Height"),m=100,g=i==="px",_=i==="%",M,x,C,y;return i===o||!a||Hd[i]||Hd[o]?a:(o!=="px"&&!g&&(a=r(e,t,n,"px")),y=e.getCTM&&Hv(e),(_||o==="%")&&(cr[t]||~t.indexOf("adius"))?(M=y?e.getBBox()[c?"width":"height"]:e[f],Kt(_?a/M*m:a/100*M)):(l[c?"width":"height"]=m+(g?o:i),x=~t.indexOf("adius")||i==="em"&&e.appendChild&&!h?e:e.parentNode,y&&(x=(e.ownerSVGElement||{}).parentNode),(!x||x===Tr||!x.appendChild)&&(x=Tr.body),C=x._gsap,C&&_&&C.width&&c&&C.time===ni.time&&!C.uncache?Kt(a/C.width*m):((_||o==="%")&&!vx[Vi(x,"display")]&&(l.position=Vi(e,"position")),x===e&&(l.position="static"),x.appendChild(os),M=os[f],x.removeChild(os),l.position="absolute",c&&_&&(C=cs(x),C.time=ni.time,C.width=x[f]),Kt(g?M*a/m:M&&a?m/M*a:0))))},sr=function(e,t,n,i){var a;return bf||ah(),t in Hi&&t!=="transform"&&(t=Hi[t],~t.indexOf(",")&&(t=t.split(",")[0])),cr[t]&&t!=="transform"?(a=To(e,i),a=t!=="transformOrigin"?a[t]:a.svg?a.origin:Zl(Vi(e,Ci))+" "+a.zOrigin+"px"):(a=e.style[t],(!a||a==="auto"||i||~(a+"").indexOf("calc("))&&(a=Jl[t]&&Jl[t](e,t,n)||Vi(e,t)||iv(e,t)||(t==="opacity"?1:0))),n&&!~(a+"").trim().indexOf(" ")?Fr(e,t,a,n)+n:a},_x=function(e,t,n,i){if(!n||n==="none"){var a=pa(t,e,1),o=a&&Vi(e,a,1);o&&o!==n?(t=a,n=o):t==="borderColor"&&(n=Vi(e,"borderTopColor"))}var l=new Un(this._pt,e.style,t,0,1,Iv),c=0,h=0,f,m,g,_,M,x,C,y,b,O,P,F;if(l.b=n,l.e=i,n+="",i+="",i==="auto"&&(e.style[t]=i,i=Vi(e,t)||i,e.style[t]=n),f=[n,i],bv(f),n=f[0],i=f[1],g=n.match(Ys)||[],F=i.match(Ys)||[],F.length){for(;m=Ys.exec(i);)C=m[0],b=i.substring(c,m.index),M?M=(M+1)%5:(b.substr(-5)==="rgba("||b.substr(-5)==="hsla(")&&(M=1),C!==(x=g[h++]||"")&&(_=parseFloat(x)||0,P=x.substr((_+"").length),C.charAt(1)==="="&&(C=na(_,C)+P),y=parseFloat(C),O=C.substr((y+"").length),c=Ys.lastIndex-O.length,O||(O=O||si.units[t]||P,c===i.length&&(i+=O,l.e+=O)),P!==O&&(_=Fr(e,t,x,O)||0),l._pt={_next:l._pt,p:b||h===1?b:",",s:_,c:y-_,m:M&&M<4||t==="zIndex"?Math.round:0});l.c=c<i.length?i.substring(c,i.length):""}else l.r=t==="display"&&i==="none"?Fv:Ov;return Zg.test(i)&&(l.e=0),this._pt=l,l},Vd={top:"0%",bottom:"100%",left:"0%",right:"100%",center:"50%"},yx=function(e){var t=e.split(" "),n=t[0],i=t[1]||"50%";return(n==="top"||n==="bottom"||i==="left"||i==="right")&&(e=n,n=i,i=e),t[0]=Vd[n]||n,t[1]=Vd[i]||i,t.join(" ")},xx=function(e,t){if(t.tween&&t.tween._time===t.tween._dur){var n=t.t,i=n.style,a=t.u,o=n._gsap,l,c,h;if(a==="all"||a===!0)i.cssText="",c=1;else for(a=a.split(","),h=a.length;--h>-1;)l=a[h],cr[l]&&(c=1,l=l==="transformOrigin"?Ci:qt),Mo(n,l);c&&(Mo(n,qt),o&&(o.svg&&n.removeAttribute("transform"),To(n,1),o.uncache=1,zv(i)))}},Jl={clearProps:function(e,t,n,i,a){if(a.data!=="isFromStart"){var o=e._pt=new Un(e._pt,t,n,0,0,xx);return o.u=i,o.pr=-10,o.tween=a,e._props.push(n),1}}},So=[1,0,0,1,0,0],Vv={},Gv=function(e){return e==="matrix(1, 0, 0, 1, 0, 0)"||e==="none"||!e},Gd=function(e){var t=Vi(e,qt);return Gv(t)?So:t.substr(7).match(Jg).map(Kt)},Tf=function(e,t){var n=e._gsap||cs(e),i=e.style,a=Gd(e),o,l,c,h;return n.svg&&e.getAttribute("transform")?(c=e.transform.baseVal.consolidate().matrix,a=[c.a,c.b,c.c,c.d,c.e,c.f],a.join(",")==="1,0,0,1,0,0"?So:a):(a===So&&!e.offsetParent&&e!==ia&&!n.svg&&(c=i.display,i.display="block",o=e.parentNode,(!o||!e.offsetParent)&&(h=1,l=e.nextElementSibling,ia.appendChild(e)),a=Gd(e),c?i.display=c:Mo(e,"display"),h&&(l?o.insertBefore(e,l):o?o.appendChild(e):ia.removeChild(e))),t&&a.length>6?[a[0],a[1],a[4],a[5],a[12],a[13]]:a)},oh=function(e,t,n,i,a,o){var l=e._gsap,c=a||Tf(e,!0),h=l.xOrigin||0,f=l.yOrigin||0,m=l.xOffset||0,g=l.yOffset||0,_=c[0],M=c[1],x=c[2],C=c[3],y=c[4],b=c[5],O=t.split(" "),P=parseFloat(O[0])||0,F=parseFloat(O[1])||0,p,L,W,X;n?c!==So&&(L=_*C-M*x)&&(W=P*(C/L)+F*(-x/L)+(x*b-C*y)/L,X=P*(-M/L)+F*(_/L)-(_*b-M*y)/L,P=W,F=X):(p=Uv(e),P=p.x+(~O[0].indexOf("%")?P/100*p.width:P),F=p.y+(~(O[1]||O[0]).indexOf("%")?F/100*p.height:F)),i||i!==!1&&l.smooth?(y=P-h,b=F-f,l.xOffset=m+(y*_+b*x)-y,l.yOffset=g+(y*M+b*C)-b):l.xOffset=l.yOffset=0,l.xOrigin=P,l.yOrigin=F,l.smooth=!!i,l.origin=t,l.originIsAbsolute=!!n,e.style[Ci]="0px 0px",o&&(Er(o,l,"xOrigin",h,P),Er(o,l,"yOrigin",f,F),Er(o,l,"xOffset",m,l.xOffset),Er(o,l,"yOffset",g,l.yOffset)),e.setAttribute("data-svg-origin",P+" "+F)},To=function(e,t){var n=e._gsap||new Ev(e);if("x"in n&&!t&&!n.uncache)return n;var i=e.style,a=n.scaleX<0,o="px",l="deg",c=getComputedStyle(e),h=Vi(e,Ci)||"0",f,m,g,_,M,x,C,y,b,O,P,F,p,L,W,X,oe,q,ye,ie,ne,re,ae,se,be,Oe,de,fe,ze,De,ke,rt;return f=m=g=x=C=y=b=O=P=0,_=M=1,n.svg=!!(e.getCTM&&Hv(e)),c.translate&&((c.translate!=="none"||c.scale!=="none"||c.rotate!=="none")&&(i[qt]=(c.translate!=="none"?"translate3d("+(c.translate+" 0 0").split(" ").slice(0,3).join(", ")+") ":"")+(c.rotate!=="none"?"rotate("+c.rotate+") ":"")+(c.scale!=="none"?"scale("+c.scale.split(" ").join(",")+") ":"")+(c[qt]!=="none"?c[qt]:"")),i.scale=i.rotate=i.translate="none"),L=Tf(e,n.svg),n.svg&&(n.uncache?(be=e.getBBox(),h=n.xOrigin-be.x+"px "+(n.yOrigin-be.y)+"px",se=""):se=!t&&e.getAttribute("data-svg-origin"),oh(e,se||h,!!se||n.originIsAbsolute,n.smooth!==!1,L)),F=n.xOrigin||0,p=n.yOrigin||0,L!==So&&(q=L[0],ye=L[1],ie=L[2],ne=L[3],f=re=L[4],m=ae=L[5],L.length===6?(_=Math.sqrt(q*q+ye*ye),M=Math.sqrt(ne*ne+ie*ie),x=q||ye?As(ye,q)*rs:0,b=ie||ne?As(ie,ne)*rs+x:0,b&&(M*=Math.abs(Math.cos(b*ra))),n.svg&&(f-=F-(F*q+p*ie),m-=p-(F*ye+p*ne))):(rt=L[6],De=L[7],de=L[8],fe=L[9],ze=L[10],ke=L[11],f=L[12],m=L[13],g=L[14],W=As(rt,ze),C=W*rs,W&&(X=Math.cos(-W),oe=Math.sin(-W),se=re*X+de*oe,be=ae*X+fe*oe,Oe=rt*X+ze*oe,de=re*-oe+de*X,fe=ae*-oe+fe*X,ze=rt*-oe+ze*X,ke=De*-oe+ke*X,re=se,ae=be,rt=Oe),W=As(-ie,ze),y=W*rs,W&&(X=Math.cos(-W),oe=Math.sin(-W),se=q*X-de*oe,be=ye*X-fe*oe,Oe=ie*X-ze*oe,ke=ne*oe+ke*X,q=se,ye=be,ie=Oe),W=As(ye,q),x=W*rs,W&&(X=Math.cos(W),oe=Math.sin(W),se=q*X+ye*oe,be=re*X+ae*oe,ye=ye*X-q*oe,ae=ae*X-re*oe,q=se,re=be),C&&Math.abs(C)+Math.abs(x)>359.9&&(C=x=0,y=180-y),_=Kt(Math.sqrt(q*q+ye*ye+ie*ie)),M=Kt(Math.sqrt(ae*ae+rt*rt)),W=As(re,ae),b=Math.abs(W)>2e-4?W*rs:0,P=ke?1/(ke<0?-ke:ke):0),n.svg&&(se=e.getAttribute("transform"),n.forceCSS=e.setAttribute("transform","")||!Gv(Vi(e,qt)),se&&e.setAttribute("transform",se))),Math.abs(b)>90&&Math.abs(b)<270&&(a?(_*=-1,b+=x<=0?180:-180,x+=x<=0?180:-180):(M*=-1,b+=b<=0?180:-180)),t=t||n.uncache,n.x=f-((n.xPercent=f&&(!t&&n.xPercent||(Math.round(e.offsetWidth/2)===Math.round(-f)?-50:0)))?e.offsetWidth*n.xPercent/100:0)+o,n.y=m-((n.yPercent=m&&(!t&&n.yPercent||(Math.round(e.offsetHeight/2)===Math.round(-m)?-50:0)))?e.offsetHeight*n.yPercent/100:0)+o,n.z=g+o,n.scaleX=Kt(_),n.scaleY=Kt(M),n.rotation=Kt(x)+l,n.rotationX=Kt(C)+l,n.rotationY=Kt(y)+l,n.skewX=b+l,n.skewY=O+l,n.transformPerspective=P+o,(n.zOrigin=parseFloat(h.split(" ")[2])||0)&&(i[Ci]=Zl(h)),n.xOffset=n.yOffset=0,n.force3D=si.force3D,n.renderTransform=n.svg?bx:kv?Wv:wx,n.uncache=0,n},Zl=function(e){return(e=e.split(" "))[0]+" "+e[1]},su=function(e,t,n){var i=bn(t);return Kt(parseFloat(t)+parseFloat(Fr(e,"x",n+"px",i)))+i},wx=function(e,t){t.z="0px",t.rotationY=t.rotationX="0deg",t.force3D=0,Wv(e,t)},Kr="0deg",Ua="0px",es=") ",Wv=function(e,t){var n=t||this,i=n.xPercent,a=n.yPercent,o=n.x,l=n.y,c=n.z,h=n.rotation,f=n.rotationY,m=n.rotationX,g=n.skewX,_=n.skewY,M=n.scaleX,x=n.scaleY,C=n.transformPerspective,y=n.force3D,b=n.target,O=n.zOrigin,P="",F=y==="auto"&&e&&e!==1||y===!0;if(O&&(m!==Kr||f!==Kr)){var p=parseFloat(f)*ra,L=Math.sin(p),W=Math.cos(p),X;p=parseFloat(m)*ra,X=Math.cos(p),o=su(b,o,L*X*-O),l=su(b,l,-Math.sin(p)*-O),c=su(b,c,W*X*-O+O)}C!==Ua&&(P+="perspective("+C+es),(i||a)&&(P+="translate("+i+"%, "+a+"%) "),(F||o!==Ua||l!==Ua||c!==Ua)&&(P+=c!==Ua||F?"translate3d("+o+", "+l+", "+c+") ":"translate("+o+", "+l+es),h!==Kr&&(P+="rotate("+h+es),f!==Kr&&(P+="rotateY("+f+es),m!==Kr&&(P+="rotateX("+m+es),(g!==Kr||_!==Kr)&&(P+="skew("+g+", "+_+es),(M!==1||x!==1)&&(P+="scale("+M+", "+x+es),b.style[qt]=P||"translate(0, 0)"},bx=function(e,t){var n=t||this,i=n.xPercent,a=n.yPercent,o=n.x,l=n.y,c=n.rotation,h=n.skewX,f=n.skewY,m=n.scaleX,g=n.scaleY,_=n.target,M=n.xOrigin,x=n.yOrigin,C=n.xOffset,y=n.yOffset,b=n.forceCSS,O=parseFloat(o),P=parseFloat(l),F,p,L,W,X;c=parseFloat(c),h=parseFloat(h),f=parseFloat(f),f&&(f=parseFloat(f),h+=f,c+=f),c||h?(c*=ra,h*=ra,F=Math.cos(c)*m,p=Math.sin(c)*m,L=Math.sin(c-h)*-g,W=Math.cos(c-h)*g,h&&(f*=ra,X=Math.tan(h-f),X=Math.sqrt(1+X*X),L*=X,W*=X,f&&(X=Math.tan(f),X=Math.sqrt(1+X*X),F*=X,p*=X)),F=Kt(F),p=Kt(p),L=Kt(L),W=Kt(W)):(F=m,W=g,p=L=0),(O&&!~(o+"").indexOf("px")||P&&!~(l+"").indexOf("px"))&&(O=Fr(_,"x",o,"px"),P=Fr(_,"y",l,"px")),(M||x||C||y)&&(O=Kt(O+M-(M*F+x*L)+C),P=Kt(P+x-(M*p+x*W)+y)),(i||a)&&(X=_.getBBox(),O=Kt(O+i/100*X.width),P=Kt(P+a/100*X.height)),X="matrix("+F+","+p+","+L+","+W+","+O+","+P+")",_.setAttribute("transform",X),b&&(_.style[qt]=X)},Mx=function(e,t,n,i,a){var o=360,l=gn(a),c=parseFloat(a)*(l&&~a.indexOf("rad")?rs:1),h=c-i,f=i+h+"deg",m,g;return l&&(m=a.split("_")[1],m==="short"&&(h%=o,h!==h%(o/2)&&(h+=h<0?o:-o)),m==="cw"&&h<0?h=(h+o*Bd)%o-~~(h/o)*o:m==="ccw"&&h>0&&(h=(h-o*Bd)%o-~~(h/o)*o)),e._pt=g=new Un(e._pt,t,n,i,h,ax),g.e=f,g.u="deg",e._props.push(n),g},Wd=function(e,t){for(var n in t)e[n]=t[n];return e},Sx=function(e,t,n){var i=Wd({},n._gsap),a="perspective,force3D,transformOrigin,svgOrigin",o=n.style,l,c,h,f,m,g,_,M;i.svg?(h=n.getAttribute("transform"),n.setAttribute("transform",""),o[qt]=t,l=To(n,1),Mo(n,qt),n.setAttribute("transform",h)):(h=getComputedStyle(n)[qt],o[qt]=t,l=To(n,1),o[qt]=h);for(c in cr)h=i[c],f=l[c],h!==f&&a.indexOf(c)<0&&(_=bn(h),M=bn(f),m=_!==M?Fr(n,c,h,M):parseFloat(h),g=parseFloat(f),e._pt=new Un(e._pt,l,c,m,g-m,rh),e._pt.u=M||0,e._props.push(c));Wd(l,i)};kn("padding,margin,Width,Radius",function(r,e){var t="Top",n="Right",i="Bottom",a="Left",o=(e<3?[t,n,i,a]:[t+a,t+n,i+n,i+a]).map(function(l){return e<2?r+l:"border"+l+r});Jl[e>1?"border"+r:r]=function(l,c,h,f,m){var g,_;if(arguments.length<4)return g=o.map(function(M){return sr(l,M,h)}),_=g.join(" "),_.split(g[0]).length===5?g[0]:_;g=(f+"").split(" "),_={},o.forEach(function(M,x){return _[M]=g[x]=g[x]||g[(x-1)/2|0]}),l.init(c,_,m)}});var jv={name:"css",register:ah,targetTest:function(e){return e.style&&e.nodeType},init:function(e,t,n,i,a){var o=this._props,l=e.style,c=n.vars.startAt,h,f,m,g,_,M,x,C,y,b,O,P,F,p,L,W;bf||ah(),this.styles=this.styles||Bv(e),W=this.styles.props,this.tween=n;for(x in t)if(x!=="autoRound"&&(f=t[x],!(ei[x]&&Av(x,t,n,i,e,a)))){if(_=typeof f,M=Jl[x],_==="function"&&(f=f.call(n,i,e,a),_=typeof f),_==="string"&&~f.indexOf("random(")&&(f=xo(f)),M)M(this,e,x,f,n)&&(L=1);else if(x.substr(0,2)==="--")h=(getComputedStyle(e).getPropertyValue(x)+"").trim(),f+="",Cr.lastIndex=0,Cr.test(h)||(C=bn(h),y=bn(f)),y?C!==y&&(h=Fr(e,x,h,y)+y):C&&(f+=C),this.add(l,"setProperty",h,f,i,a,0,0,x),o.push(x),W.push(x,0,l[x]);else if(_!=="undefined"){if(c&&x in c?(h=typeof c[x]=="function"?c[x].call(n,i,e,a):c[x],gn(h)&&~h.indexOf("random(")&&(h=xo(h)),bn(h+"")||(h+=si.units[x]||bn(sr(e,x))||""),(h+"").charAt(1)==="="&&(h=sr(e,x))):h=sr(e,x),g=parseFloat(h),b=_==="string"&&f.charAt(1)==="="&&f.substr(0,2),b&&(f=f.substr(2)),m=parseFloat(f),x in Hi&&(x==="autoAlpha"&&(g===1&&sr(e,"visibility")==="hidden"&&m&&(g=0),W.push("visibility",0,l.visibility),Er(this,l,"visibility",g?"inherit":"hidden",m?"inherit":"hidden",!m)),x!=="scale"&&x!=="transform"&&(x=Hi[x],~x.indexOf(",")&&(x=x.split(",")[0]))),O=x in cr,O){if(this.styles.save(x),P||(F=e._gsap,F.renderTransform&&!t.parseTransform||To(e,t.parseTransform),p=t.smoothOrigin!==!1&&F.smooth,P=this._pt=new Un(this._pt,l,qt,0,1,F.renderTransform,F,0,-1),P.dep=1),x==="scale")this._pt=new Un(this._pt,F,"scaleY",F.scaleY,(b?na(F.scaleY,b+m):m)-F.scaleY||0,rh),this._pt.u=0,o.push("scaleY",x),x+="X";else if(x==="transformOrigin"){W.push(Ci,0,l[Ci]),f=yx(f),F.svg?oh(e,f,0,p,0,this):(y=parseFloat(f.split(" ")[2])||0,y!==F.zOrigin&&Er(this,F,"zOrigin",F.zOrigin,y),Er(this,l,x,Zl(h),Zl(f)));continue}else if(x==="svgOrigin"){oh(e,f,1,p,0,this);continue}else if(x in Vv){Mx(this,F,x,g,b?na(g,b+f):f);continue}else if(x==="smoothOrigin"){Er(this,F,"smooth",F.smooth,f);continue}else if(x==="force3D"){F[x]=f;continue}else if(x==="transform"){Sx(this,f,e);continue}}else x in l||(x=pa(x)||x);if(O||(m||m===0)&&(g||g===0)&&!sx.test(f)&&x in l)C=(h+"").substr((g+"").length),m||(m=0),y=bn(f)||(x in si.units?si.units[x]:C),C!==y&&(g=Fr(e,x,h,y)),this._pt=new Un(this._pt,O?F:l,x,g,(b?na(g,b+m):m)-g,!O&&(y==="px"||x==="zIndex")&&t.autoRound!==!1?lx:rh),this._pt.u=y||0,C!==y&&y!=="%"&&(this._pt.b=h,this._pt.r=ox);else if(x in l)_x.call(this,e,x,h,b?b+f:f);else if(x in e)this.add(e,x,h||e[x],b?b+f:f,i,a);else if(x!=="parseTransform"){df(x,f);continue}O||(x in l?W.push(x,0,l[x]):W.push(x,1,h||e[x])),o.push(x)}}L&&Dv(this)},render:function(e,t){if(t.tween._time||!Mf())for(var n=t._pt;n;)n.r(e,n.d),n=n._next;else t.styles.revert()},get:sr,aliases:Hi,getSetter:function(e,t,n){var i=Hi[t];return i&&i.indexOf(",")<0&&(t=i),t in cr&&t!==Ci&&(e._gsap.x||sr(e,"x"))?n&&zd===n?t==="scale"?fx:hx:(zd=n||{})&&(t==="scale"?dx:px):e.style&&!uf(e.style[t])?cx:~t.indexOf("-")?ux:xf(e,t)},core:{_removeProperty:Mo,_getMatrix:Tf}};jn.utils.checkPrefix=pa;jn.core.getStyleSaver=Bv;(function(r,e,t,n){var i=kn(r+","+e+","+t,function(a){cr[a]=1});kn(e,function(a){si.units[a]="deg",Vv[a]=1}),Hi[i[13]]=r+","+e,kn(n,function(a){var o=a.split(":");Hi[o[1]]=i[o[0]]})})("x,y,z,scale,scaleX,scaleY,xPercent,yPercent","rotation,rotationX,rotationY,skewX,skewY","transform,transformOrigin,svgOrigin,force3D,smoothOrigin,transformPerspective","0:translateX,1:translateY,2:translateZ,8:rotate,8:rotationZ,8:rotateZ,9:rotateX,10:rotateY");kn("x,y,z,top,right,bottom,left,width,height,fontSize,padding,margin,perspective",function(r){si.units[r]="px"});jn.registerPlugin(jv);var wt=jn.registerPlugin(jv)||jn;wt.core.Tween;const Tx=$t.extend({size:400,imagePath:"/img/loader/loader.png",imageLoaded:!1,scale:0,initialize(){this.loaderCanvas=this.$(".js-loaderCanvas")[0],this.loaderCanvas.width=this.size,this.loaderCanvas.height=this.size,this.context=this.loaderCanvas.getContext("2d"),Ct.on("anim_frame",()=>this.onAnimFrame()),this.img=new Image,this.img.src=this.imagePath,this.img.onload=lt.bind(this.onLoad,this),this.currentFrame=0},getRndColor(){var r=255*Math.random()|0,e=255*Math.random()|0,t=255*Math.random()|0;return"rgb("+r+","+e+","+t+")"},onLoad(){this.imageLoaded=!0},show(){Yt.on("progress",this.onLoadProgress,this)},onAnimFrame(){this.currentFrame++,this.imageLoaded&&(this.currentFrame%2===0&&(this.context.fillStyle=this.getRndColor()),this.context.globalCompositeOperation="source-over",this.context.fillRect(0,0,this.size,this.size),this.context.globalCompositeOperation="destination-in",this.context.drawImage(this.img,0,0,this.size,this.size),this.context.globalCompositeOperation="destination-out",this.context.save(),this.context.translate(this.size/2,this.size/2),this.context.scale(this.scale,this.scale),this.context.fillRect(-this.size/2,-this.size/2,this.size,this.size),this.context.restore())},hide(){wt.to(this,{duration:1,scale:1,ease:"Power4.easeInOut",onComplete:lt.bind(this.onHideComplete,this)})},onHideComplete(){this.onAnimOutComplete()},onAnimOutComplete(){this.trigger("hideComplete"),Ct.off(null,null,this)}}),ma=Ai.View.extend({section:null,isShowing:!1,initialize(r){this.section=r.section,this.addEvents(),this.onChangeCurrentSection(null,gt.get("currentSection"))},addEvents(){gt.on("change:currentSection",this.onChangeCurrentSection,this)},onChangeCurrentSection(r,e){e===this.section&&this.isShowing===!1?(this.isShowing=!0,this.show()):this.isShowing===!0&&(this.isShowing=!1,this.hide())},removeEvents(){},show(){},hide(){}});/**
 * @license
 * Copyright 2010-2021 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const Ef="135",Ex=0,jd=1,Ax=2,qv=1,Cx=2,to=3,Eo=0,ln=1,ga=2,Xv=1,Lr=0,lo=1,qd=2,Xd=3,Yd=4,Lx=5,Xs=100,Rx=101,Px=102,$d=103,Jd=104,Ix=200,Dx=201,Nx=202,Ox=203,Yv=204,$v=205,Fx=206,zx=207,Bx=208,kx=209,Ux=210,Hx=0,Vx=1,Gx=2,lh=3,Wx=4,jx=5,qx=6,Xx=7,_c=0,Yx=1,$x=2,ds=0,Jx=1,Zx=2,Qx=3,Kx=4,ew=5,Jv=300,zo=301,Bo=302,ch=303,uh=304,yc=306,Af=307,Ri=1e3,ii=1001,hh=1002,dn=1003,Zd=1004,Qd=1005,pi=1006,tw=1007,xc=1008,zr=1009,nw=1010,iw=1011,Ao=1012,rw=1013,zl=1014,Mr=1015,sa=1016,sw=1017,aw=1018,ow=1019,aa=1020,lw=1021,ps=1022,Ln=1023,cw=1024,uw=1025,hw=Ln,ms=1026,va=1027,fw=1028,dw=1029,pw=1030,mw=1031,gw=1032,vw=1033,Kd=33776,ep=33777,tp=33778,np=33779,ip=35840,rp=35841,sp=35842,ap=35843,_w=36196,op=37492,lp=37496,yw=37808,xw=37809,ww=37810,bw=37811,Mw=37812,Sw=37813,Tw=37814,Ew=37815,Aw=37816,Cw=37817,Lw=37818,Rw=37819,Pw=37820,Iw=37821,Dw=36492,Nw=37840,Ow=37841,Fw=37842,zw=37843,Bw=37844,kw=37845,Uw=37846,Hw=37847,Vw=37848,Gw=37849,Ww=37850,jw=37851,qw=37852,Xw=37853,Yw=2200,$w=2201,Jw=2202,Ql=2300,Kl=2301,au=2302,Js=2400,Zs=2401,ec=2402,Cf=2500,Zv=2501,Zw=0,qn=3e3,wc=3001,Lf=3007,Rf=3002,Qv=3004,Kv=3005,e_=3006,Qw=3200,Kw=3201,wa=0,eb=1,ou=7680,tb=519,Co=35044,tc=35048,cp="300 es";class bs{addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const n=this._listeners;n[e]===void 0&&(n[e]=[]),n[e].indexOf(t)===-1&&n[e].push(t)}hasEventListener(e,t){if(this._listeners===void 0)return!1;const n=this._listeners;return n[e]!==void 0&&n[e].indexOf(t)!==-1}removeEventListener(e,t){if(this._listeners===void 0)return;const i=this._listeners[e];if(i!==void 0){const a=i.indexOf(t);a!==-1&&i.splice(a,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const n=this._listeners[e.type];if(n!==void 0){e.target=this;const i=n.slice(0);for(let a=0,o=i.length;a<o;a++)i[a].call(this,e);e.target=null}}}const vn=[];for(let r=0;r<256;r++)vn[r]=(r<16?"0":"")+r.toString(16);const lu=Math.PI/180,fh=180/Math.PI;function Gi(){const r=Math.random()*4294967295|0,e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,n=Math.random()*4294967295|0;return(vn[r&255]+vn[r>>8&255]+vn[r>>16&255]+vn[r>>24&255]+"-"+vn[e&255]+vn[e>>8&255]+"-"+vn[e>>16&15|64]+vn[e>>24&255]+"-"+vn[t&63|128]+vn[t>>8&255]+"-"+vn[t>>16&255]+vn[t>>24&255]+vn[n&255]+vn[n>>8&255]+vn[n>>16&255]+vn[n>>24&255]).toUpperCase()}function ti(r,e,t){return Math.max(e,Math.min(t,r))}function nb(r,e){return(r%e+e)%e}function cu(r,e,t){return(1-t)*r+t*e}function up(r){return(r&r-1)===0&&r!==0}function ib(r){return Math.pow(2,Math.floor(Math.log(r)/Math.LN2))}class Pe{constructor(e=0,t=0){this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e,t){return t!==void 0?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this)}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e,t){return t!==void 0?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this)}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,n=this.y,i=e.elements;return this.x=i[0]*t+i[3]*n+i[6],this.y=i[1]*t+i[4]*n+i[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,n=this.y-e.y;return t*t+n*n}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t,n){return n!==void 0&&console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const n=Math.cos(t),i=Math.sin(t),a=this.x-e.x,o=this.y-e.y;return this.x=a*n-o*i+e.x,this.y=a*i+o*n+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}Pe.prototype.isVector2=!0;class yn{constructor(){this.elements=[1,0,0,0,1,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}set(e,t,n,i,a,o,l,c,h){const f=this.elements;return f[0]=e,f[1]=i,f[2]=l,f[3]=t,f[4]=a,f[5]=c,f[6]=n,f[7]=o,f[8]=h,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],this}extractBasis(e,t,n){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),n.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const n=e.elements,i=t.elements,a=this.elements,o=n[0],l=n[3],c=n[6],h=n[1],f=n[4],m=n[7],g=n[2],_=n[5],M=n[8],x=i[0],C=i[3],y=i[6],b=i[1],O=i[4],P=i[7],F=i[2],p=i[5],L=i[8];return a[0]=o*x+l*b+c*F,a[3]=o*C+l*O+c*p,a[6]=o*y+l*P+c*L,a[1]=h*x+f*b+m*F,a[4]=h*C+f*O+m*p,a[7]=h*y+f*P+m*L,a[2]=g*x+_*b+M*F,a[5]=g*C+_*O+M*p,a[8]=g*y+_*P+M*L,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],n=e[1],i=e[2],a=e[3],o=e[4],l=e[5],c=e[6],h=e[7],f=e[8];return t*o*f-t*l*h-n*a*f+n*l*c+i*a*h-i*o*c}invert(){const e=this.elements,t=e[0],n=e[1],i=e[2],a=e[3],o=e[4],l=e[5],c=e[6],h=e[7],f=e[8],m=f*o-l*h,g=l*c-f*a,_=h*a-o*c,M=t*m+n*g+i*_;if(M===0)return this.set(0,0,0,0,0,0,0,0,0);const x=1/M;return e[0]=m*x,e[1]=(i*h-f*n)*x,e[2]=(l*n-i*o)*x,e[3]=g*x,e[4]=(f*t-i*c)*x,e[5]=(i*a-l*t)*x,e[6]=_*x,e[7]=(n*c-h*t)*x,e[8]=(o*t-n*a)*x,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,n,i,a,o,l){const c=Math.cos(a),h=Math.sin(a);return this.set(n*c,n*h,-n*(c*o+h*l)+o+e,-i*h,i*c,-i*(-h*o+c*l)+l+t,0,0,1),this}scale(e,t){const n=this.elements;return n[0]*=e,n[3]*=e,n[6]*=e,n[1]*=t,n[4]*=t,n[7]*=t,this}rotate(e){const t=Math.cos(e),n=Math.sin(e),i=this.elements,a=i[0],o=i[3],l=i[6],c=i[1],h=i[4],f=i[7];return i[0]=t*a+n*c,i[3]=t*o+n*h,i[6]=t*l+n*f,i[1]=-n*a+t*c,i[4]=-n*o+t*h,i[7]=-n*l+t*f,this}translate(e,t){const n=this.elements;return n[0]+=e*n[2],n[3]+=e*n[5],n[6]+=e*n[8],n[1]+=t*n[2],n[4]+=t*n[5],n[7]+=t*n[8],this}equals(e){const t=this.elements,n=e.elements;for(let i=0;i<9;i++)if(t[i]!==n[i])return!1;return!0}fromArray(e,t=0){for(let n=0;n<9;n++)this.elements[n]=e[n+t];return this}toArray(e=[],t=0){const n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e}clone(){return new this.constructor().fromArray(this.elements)}}yn.prototype.isMatrix3=!0;function t_(r){if(r.length===0)return-1/0;let e=r[0];for(let t=1,n=r.length;t<n;++t)r[t]>e&&(e=r[t]);return e}function bc(r){return document.createElementNS("http://www.w3.org/1999/xhtml",r)}function hp(r,e=0){let t=3735928559^e,n=1103547991^e;for(let i=0,a;i<r.length;i++)a=r.charCodeAt(i),t=Math.imul(t^a,2654435761),n=Math.imul(n^a,1597334677);return t=Math.imul(t^t>>>16,2246822507)^Math.imul(n^n>>>13,3266489909),n=Math.imul(n^n>>>16,2246822507)^Math.imul(t^t>>>13,3266489909),4294967296*(2097151&n)+(t>>>0)}let Cs;class ba{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{Cs===void 0&&(Cs=bc("canvas")),Cs.width=e.width,Cs.height=e.height;const n=Cs.getContext("2d");e instanceof ImageData?n.putImageData(e,0,0):n.drawImage(e,0,0,e.width,e.height),t=Cs}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}}let rb=0;class tn extends bs{constructor(e=tn.DEFAULT_IMAGE,t=tn.DEFAULT_MAPPING,n=ii,i=ii,a=pi,o=xc,l=Ln,c=zr,h=1,f=qn){super(),Object.defineProperty(this,"id",{value:rb++}),this.uuid=Gi(),this.name="",this.image=e,this.mipmaps=[],this.mapping=t,this.wrapS=n,this.wrapT=i,this.magFilter=a,this.minFilter=o,this.anisotropy=h,this.format=l,this.internalFormat=null,this.type=c,this.offset=new Pe(0,0),this.repeat=new Pe(1,1),this.center=new Pe(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new yn,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=f,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.image=e.image,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.encoding=e.encoding,this.userData=JSON.parse(JSON.stringify(e.userData)),this}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const n={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};if(this.image!==void 0){const i=this.image;if(i.uuid===void 0&&(i.uuid=Gi()),!t&&e.images[i.uuid]===void 0){let a;if(Array.isArray(i)){a=[];for(let o=0,l=i.length;o<l;o++)i[o].isDataTexture?a.push(uu(i[o].image)):a.push(uu(i[o]))}else a=uu(i);e.images[i.uuid]={uuid:i.uuid,url:a}}n.image=i.uuid}return JSON.stringify(this.userData)!=="{}"&&(n.userData=this.userData),t||(e.textures[this.uuid]=n),n}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==Jv)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case Ri:e.x=e.x-Math.floor(e.x);break;case ii:e.x=e.x<0?0:1;break;case hh:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case Ri:e.y=e.y-Math.floor(e.y);break;case ii:e.y=e.y<0?0:1;break;case hh:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&this.version++}}tn.DEFAULT_IMAGE=void 0;tn.DEFAULT_MAPPING=Jv;tn.prototype.isTexture=!0;function uu(r){return typeof HTMLImageElement<"u"&&r instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&r instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&r instanceof ImageBitmap?ba.getDataURL(r):r.data?{data:Array.prototype.slice.call(r.data),width:r.width,height:r.height,type:r.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}class Ft{constructor(e=0,t=0,n=0,i=1){this.x=e,this.y=t,this.z=n,this.w=i}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,n,i){return this.x=e,this.y=t,this.z=n,this.w=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e,t){return t!==void 0?(console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this)}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e,t){return t!==void 0?(console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this)}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,n=this.y,i=this.z,a=this.w,o=e.elements;return this.x=o[0]*t+o[4]*n+o[8]*i+o[12]*a,this.y=o[1]*t+o[5]*n+o[9]*i+o[13]*a,this.z=o[2]*t+o[6]*n+o[10]*i+o[14]*a,this.w=o[3]*t+o[7]*n+o[11]*i+o[15]*a,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,n,i,a;const c=e.elements,h=c[0],f=c[4],m=c[8],g=c[1],_=c[5],M=c[9],x=c[2],C=c[6],y=c[10];if(Math.abs(f-g)<.01&&Math.abs(m-x)<.01&&Math.abs(M-C)<.01){if(Math.abs(f+g)<.1&&Math.abs(m+x)<.1&&Math.abs(M+C)<.1&&Math.abs(h+_+y-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;const O=(h+1)/2,P=(_+1)/2,F=(y+1)/2,p=(f+g)/4,L=(m+x)/4,W=(M+C)/4;return O>P&&O>F?O<.01?(n=0,i=.707106781,a=.707106781):(n=Math.sqrt(O),i=p/n,a=L/n):P>F?P<.01?(n=.707106781,i=0,a=.707106781):(i=Math.sqrt(P),n=p/i,a=W/i):F<.01?(n=.707106781,i=.707106781,a=0):(a=Math.sqrt(F),n=L/a,i=W/a),this.set(n,i,a,t),this}let b=Math.sqrt((C-M)*(C-M)+(m-x)*(m-x)+(g-f)*(g-f));return Math.abs(b)<.001&&(b=1),this.x=(C-M)/b,this.y=(m-x)/b,this.z=(g-f)/b,this.w=Math.acos((h+_+y-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this.w=e.w+(t.w-e.w)*n,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t,n){return n!==void 0&&console.warn("THREE.Vector4: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}Ft.prototype.isVector4=!0;class vi extends bs{constructor(e,t,n={}){super(),this.width=e,this.height=t,this.depth=1,this.scissor=new Ft(0,0,e,t),this.scissorTest=!1,this.viewport=new Ft(0,0,e,t),this.texture=new tn(void 0,n.mapping,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.encoding),this.texture.isRenderTargetTexture=!0,this.texture.image={width:e,height:t,depth:1},this.texture.generateMipmaps=n.generateMipmaps!==void 0?n.generateMipmaps:!1,this.texture.internalFormat=n.internalFormat!==void 0?n.internalFormat:null,this.texture.minFilter=n.minFilter!==void 0?n.minFilter:pi,this.depthBuffer=n.depthBuffer!==void 0?n.depthBuffer:!0,this.stencilBuffer=n.stencilBuffer!==void 0?n.stencilBuffer:!1,this.depthTexture=n.depthTexture!==void 0?n.depthTexture:null}setTexture(e){e.image={width:this.width,height:this.height,depth:this.depth},this.texture=e}setSize(e,t,n=1){(this.width!==e||this.height!==t||this.depth!==n)&&(this.width=e,this.height=t,this.depth=n,this.texture.image.width=e,this.texture.image.height=t,this.texture.image.depth=n,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return new this.constructor().copy(this)}copy(e){return this.width=e.width,this.height=e.height,this.depth=e.depth,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.texture.image={...this.texture.image},this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.depthTexture=e.depthTexture,this}dispose(){this.dispatchEvent({type:"dispose"})}}vi.prototype.isWebGLRenderTarget=!0;class sb extends vi{constructor(e,t,n){super(e,t);const i=this.texture;this.texture=[];for(let a=0;a<n;a++)this.texture[a]=i.clone()}setSize(e,t,n=1){if(this.width!==e||this.height!==t||this.depth!==n){this.width=e,this.height=t,this.depth=n;for(let i=0,a=this.texture.length;i<a;i++)this.texture[i].image.width=e,this.texture[i].image.height=t,this.texture[i].image.depth=n;this.dispose()}return this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t),this}copy(e){this.dispose(),this.width=e.width,this.height=e.height,this.depth=e.depth,this.viewport.set(0,0,this.width,this.height),this.scissor.set(0,0,this.width,this.height),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.depthTexture=e.depthTexture,this.texture.length=0;for(let t=0,n=e.texture.length;t<n;t++)this.texture[t]=e.texture[t].clone();return this}}sb.prototype.isWebGLMultipleRenderTargets=!0;class Pf extends vi{constructor(e,t,n={}){super(e,t,n),this.samples=4,this.ignoreDepthForMultisampleCopy=n.ignoreDepth!==void 0?n.ignoreDepth:!0,this.useRenderToTexture=n.useRenderToTexture!==void 0?n.useRenderToTexture:!1,this.useRenderbuffer=this.useRenderToTexture===!1}copy(e){return super.copy.call(this,e),this.samples=e.samples,this.useRenderToTexture=e.useRenderToTexture,this.useRenderbuffer=e.useRenderbuffer,this}}Pf.prototype.isWebGLMultisampleRenderTarget=!0;class Hn{constructor(e=0,t=0,n=0,i=1){this._x=e,this._y=t,this._z=n,this._w=i}static slerp(e,t,n,i){return console.warn("THREE.Quaternion: Static .slerp() has been deprecated. Use qm.slerpQuaternions( qa, qb, t ) instead."),n.slerpQuaternions(e,t,i)}static slerpFlat(e,t,n,i,a,o,l){let c=n[i+0],h=n[i+1],f=n[i+2],m=n[i+3];const g=a[o+0],_=a[o+1],M=a[o+2],x=a[o+3];if(l===0){e[t+0]=c,e[t+1]=h,e[t+2]=f,e[t+3]=m;return}if(l===1){e[t+0]=g,e[t+1]=_,e[t+2]=M,e[t+3]=x;return}if(m!==x||c!==g||h!==_||f!==M){let C=1-l;const y=c*g+h*_+f*M+m*x,b=y>=0?1:-1,O=1-y*y;if(O>Number.EPSILON){const F=Math.sqrt(O),p=Math.atan2(F,y*b);C=Math.sin(C*p)/F,l=Math.sin(l*p)/F}const P=l*b;if(c=c*C+g*P,h=h*C+_*P,f=f*C+M*P,m=m*C+x*P,C===1-l){const F=1/Math.sqrt(c*c+h*h+f*f+m*m);c*=F,h*=F,f*=F,m*=F}}e[t]=c,e[t+1]=h,e[t+2]=f,e[t+3]=m}static multiplyQuaternionsFlat(e,t,n,i,a,o){const l=n[i],c=n[i+1],h=n[i+2],f=n[i+3],m=a[o],g=a[o+1],_=a[o+2],M=a[o+3];return e[t]=l*M+f*m+c*_-h*g,e[t+1]=c*M+f*g+h*m-l*_,e[t+2]=h*M+f*_+l*g-c*m,e[t+3]=f*M-l*m-c*g-h*_,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,n,i){return this._x=e,this._y=t,this._z=n,this._w=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t){if(!(e&&e.isEuler))throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");const n=e._x,i=e._y,a=e._z,o=e._order,l=Math.cos,c=Math.sin,h=l(n/2),f=l(i/2),m=l(a/2),g=c(n/2),_=c(i/2),M=c(a/2);switch(o){case"XYZ":this._x=g*f*m+h*_*M,this._y=h*_*m-g*f*M,this._z=h*f*M+g*_*m,this._w=h*f*m-g*_*M;break;case"YXZ":this._x=g*f*m+h*_*M,this._y=h*_*m-g*f*M,this._z=h*f*M-g*_*m,this._w=h*f*m+g*_*M;break;case"ZXY":this._x=g*f*m-h*_*M,this._y=h*_*m+g*f*M,this._z=h*f*M+g*_*m,this._w=h*f*m-g*_*M;break;case"ZYX":this._x=g*f*m-h*_*M,this._y=h*_*m+g*f*M,this._z=h*f*M-g*_*m,this._w=h*f*m+g*_*M;break;case"YZX":this._x=g*f*m+h*_*M,this._y=h*_*m+g*f*M,this._z=h*f*M-g*_*m,this._w=h*f*m-g*_*M;break;case"XZY":this._x=g*f*m-h*_*M,this._y=h*_*m-g*f*M,this._z=h*f*M+g*_*m,this._w=h*f*m+g*_*M;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+o)}return t!==!1&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const n=t/2,i=Math.sin(n);return this._x=e.x*i,this._y=e.y*i,this._z=e.z*i,this._w=Math.cos(n),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,n=t[0],i=t[4],a=t[8],o=t[1],l=t[5],c=t[9],h=t[2],f=t[6],m=t[10],g=n+l+m;if(g>0){const _=.5/Math.sqrt(g+1);this._w=.25/_,this._x=(f-c)*_,this._y=(a-h)*_,this._z=(o-i)*_}else if(n>l&&n>m){const _=2*Math.sqrt(1+n-l-m);this._w=(f-c)/_,this._x=.25*_,this._y=(i+o)/_,this._z=(a+h)/_}else if(l>m){const _=2*Math.sqrt(1+l-n-m);this._w=(a-h)/_,this._x=(i+o)/_,this._y=.25*_,this._z=(c+f)/_}else{const _=2*Math.sqrt(1+m-n-l);this._w=(o-i)/_,this._x=(a+h)/_,this._y=(c+f)/_,this._z=.25*_}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let n=e.dot(t)+1;return n<Number.EPSILON?(n=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=n):(this._x=0,this._y=-e.z,this._z=e.y,this._w=n)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=n),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(ti(this.dot(e),-1,1)))}rotateTowards(e,t){const n=this.angleTo(e);if(n===0)return this;const i=Math.min(1,t/n);return this.slerp(e,i),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e,t){return t!==void 0?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(e,t)):this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const n=e._x,i=e._y,a=e._z,o=e._w,l=t._x,c=t._y,h=t._z,f=t._w;return this._x=n*f+o*l+i*h-a*c,this._y=i*f+o*c+a*l-n*h,this._z=a*f+o*h+n*c-i*l,this._w=o*f-n*l-i*c-a*h,this._onChangeCallback(),this}slerp(e,t){if(t===0)return this;if(t===1)return this.copy(e);const n=this._x,i=this._y,a=this._z,o=this._w;let l=o*e._w+n*e._x+i*e._y+a*e._z;if(l<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,l=-l):this.copy(e),l>=1)return this._w=o,this._x=n,this._y=i,this._z=a,this;const c=1-l*l;if(c<=Number.EPSILON){const _=1-t;return this._w=_*o+t*this._w,this._x=_*n+t*this._x,this._y=_*i+t*this._y,this._z=_*a+t*this._z,this.normalize(),this._onChangeCallback(),this}const h=Math.sqrt(c),f=Math.atan2(h,l),m=Math.sin((1-t)*f)/h,g=Math.sin(t*f)/h;return this._w=o*m+this._w*g,this._x=n*m+this._x*g,this._y=i*m+this._y*g,this._z=a*m+this._z*g,this._onChangeCallback(),this}slerpQuaternions(e,t,n){this.copy(e).slerp(t,n)}random(){const e=Math.random(),t=Math.sqrt(1-e),n=Math.sqrt(e),i=2*Math.PI*Math.random(),a=2*Math.PI*Math.random();return this.set(t*Math.cos(i),n*Math.sin(a),n*Math.cos(a),t*Math.sin(i))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}}Hn.prototype.isQuaternion=!0;class j{constructor(e=0,t=0,n=0){this.x=e,this.y=t,this.z=n}set(e,t,n){return n===void 0&&(n=this.z),this.x=e,this.y=t,this.z=n,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e,t){return t!==void 0?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this)}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e,t){return t!==void 0?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this)}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e,t){return t!==void 0?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(e,t)):(this.x*=e.x,this.y*=e.y,this.z*=e.z,this)}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return e&&e.isEuler||console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),this.applyQuaternion(fp.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(fp.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,n=this.y,i=this.z,a=e.elements;return this.x=a[0]*t+a[3]*n+a[6]*i,this.y=a[1]*t+a[4]*n+a[7]*i,this.z=a[2]*t+a[5]*n+a[8]*i,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,n=this.y,i=this.z,a=e.elements,o=1/(a[3]*t+a[7]*n+a[11]*i+a[15]);return this.x=(a[0]*t+a[4]*n+a[8]*i+a[12])*o,this.y=(a[1]*t+a[5]*n+a[9]*i+a[13])*o,this.z=(a[2]*t+a[6]*n+a[10]*i+a[14])*o,this}applyQuaternion(e){const t=this.x,n=this.y,i=this.z,a=e.x,o=e.y,l=e.z,c=e.w,h=c*t+o*i-l*n,f=c*n+l*t-a*i,m=c*i+a*n-o*t,g=-a*t-o*n-l*i;return this.x=h*c+g*-a+f*-l-m*-o,this.y=f*c+g*-o+m*-a-h*-l,this.z=m*c+g*-l+h*-o-f*-a,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,n=this.y,i=this.z,a=e.elements;return this.x=a[0]*t+a[4]*n+a[8]*i,this.y=a[1]*t+a[5]*n+a[9]*i,this.z=a[2]*t+a[6]*n+a[10]*i,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this}cross(e,t){return t!==void 0?(console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(e,t)):this.crossVectors(this,e)}crossVectors(e,t){const n=e.x,i=e.y,a=e.z,o=t.x,l=t.y,c=t.z;return this.x=i*c-a*l,this.y=a*o-n*c,this.z=n*l-i*o,this}projectOnVector(e){const t=e.lengthSq();if(t===0)return this.set(0,0,0);const n=e.dot(this)/t;return this.copy(e).multiplyScalar(n)}projectOnPlane(e){return hu.copy(this).projectOnVector(e),this.sub(hu)}reflect(e){return this.sub(hu.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const n=this.dot(e)/t;return Math.acos(ti(n,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,n=this.y-e.y,i=this.z-e.z;return t*t+n*n+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,n){const i=Math.sin(t)*e;return this.x=i*Math.sin(n),this.y=Math.cos(t)*e,this.z=i*Math.cos(n),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,n){return this.x=e*Math.sin(t),this.y=n,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),n=this.setFromMatrixColumn(e,1).length(),i=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=n,this.z=i,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,t*4)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,t*3)}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t,n){return n!==void 0&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=(Math.random()-.5)*2,t=Math.random()*Math.PI*2,n=Math.sqrt(1-e**2);return this.x=n*Math.cos(t),this.y=n*Math.sin(t),this.z=e,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}j.prototype.isVector3=!0;const hu=new j,fp=new Hn;class Ii{constructor(e=new j(1/0,1/0,1/0),t=new j(-1/0,-1/0,-1/0)){this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){let t=1/0,n=1/0,i=1/0,a=-1/0,o=-1/0,l=-1/0;for(let c=0,h=e.length;c<h;c+=3){const f=e[c],m=e[c+1],g=e[c+2];f<t&&(t=f),m<n&&(n=m),g<i&&(i=g),f>a&&(a=f),m>o&&(o=m),g>l&&(l=g)}return this.min.set(t,n,i),this.max.set(a,o,l),this}setFromBufferAttribute(e){let t=1/0,n=1/0,i=1/0,a=-1/0,o=-1/0,l=-1/0;for(let c=0,h=e.count;c<h;c++){const f=e.getX(c),m=e.getY(c),g=e.getZ(c);f<t&&(t=f),m<n&&(n=m),g<i&&(i=g),f>a&&(a=f),m>o&&(o=m),g>l&&(l=g)}return this.min.set(t,n,i),this.max.set(a,o,l),this}setFromPoints(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const n=Ha.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}setFromObject(e){return this.makeEmpty(),this.expandByObject(e)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e){e.updateWorldMatrix(!1,!1);const t=e.geometry;t!==void 0&&(t.boundingBox===null&&t.computeBoundingBox(),fu.copy(t.boundingBox),fu.applyMatrix4(e.matrixWorld),this.union(fu));const n=e.children;for(let i=0,a=n.length;i<a;i++)this.expandByObject(n[i]);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,Ha),Ha.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,n;return e.normal.x>0?(t=e.normal.x*this.min.x,n=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,n=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,n+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,n+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,n+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,n+=e.normal.z*this.min.z),t<=-e.constant&&n>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(Va),il.subVectors(this.max,Va),Ls.subVectors(e.a,Va),Rs.subVectors(e.b,Va),Ps.subVectors(e.c,Va),mr.subVectors(Rs,Ls),gr.subVectors(Ps,Rs),ts.subVectors(Ls,Ps);let t=[0,-mr.z,mr.y,0,-gr.z,gr.y,0,-ts.z,ts.y,mr.z,0,-mr.x,gr.z,0,-gr.x,ts.z,0,-ts.x,-mr.y,mr.x,0,-gr.y,gr.x,0,-ts.y,ts.x,0];return!du(t,Ls,Rs,Ps,il)||(t=[1,0,0,0,1,0,0,0,1],!du(t,Ls,Rs,Ps,il))?!1:(rl.crossVectors(mr,gr),t=[rl.x,rl.y,rl.z],du(t,Ls,Rs,Ps,il))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return Ha.copy(e).clamp(this.min,this.max).sub(e).length()}getBoundingSphere(e){return this.getCenter(e.center),e.radius=this.getSize(Ha).length()*.5,e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(Qi[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),Qi[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),Qi[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),Qi[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),Qi[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),Qi[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),Qi[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),Qi[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(Qi),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}Ii.prototype.isBox3=!0;const Qi=[new j,new j,new j,new j,new j,new j,new j,new j],Ha=new j,fu=new Ii,Ls=new j,Rs=new j,Ps=new j,mr=new j,gr=new j,ts=new j,Va=new j,il=new j,rl=new j,ns=new j;function du(r,e,t,n,i){for(let a=0,o=r.length-3;a<=o;a+=3){ns.fromArray(r,a);const l=i.x*Math.abs(ns.x)+i.y*Math.abs(ns.y)+i.z*Math.abs(ns.z),c=e.dot(ns),h=t.dot(ns),f=n.dot(ns);if(Math.max(-Math.max(c,h,f),Math.min(c,h,f))>l)return!1}return!0}const ab=new Ii,dp=new j,pu=new j,mu=new j;class Ma{constructor(e=new j,t=-1){this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const n=this.center;t!==void 0?n.copy(t):ab.setFromPoints(e).getCenter(n);let i=0;for(let a=0,o=e.length;a<o;a++)i=Math.max(i,n.distanceToSquared(e[a]));return this.radius=Math.sqrt(i),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const n=this.center.distanceToSquared(e);return t.copy(e),n>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){mu.subVectors(e,this.center);const t=mu.lengthSq();if(t>this.radius*this.radius){const n=Math.sqrt(t),i=(n-this.radius)*.5;this.center.add(mu.multiplyScalar(i/n)),this.radius+=i}return this}union(e){return pu.subVectors(e.center,this.center).normalize().multiplyScalar(e.radius),this.expandByPoint(dp.copy(e.center).add(pu)),this.expandByPoint(dp.copy(e.center).sub(pu)),this}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}}const Ki=new j,gu=new j,sl=new j,vr=new j,vu=new j,al=new j,_u=new j;class Sa{constructor(e=new j,t=new j(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.direction).multiplyScalar(e).add(this.origin)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,Ki)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const n=t.dot(this.direction);return n<0?t.copy(this.origin):t.copy(this.direction).multiplyScalar(n).add(this.origin)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=Ki.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(Ki.copy(this.direction).multiplyScalar(t).add(this.origin),Ki.distanceToSquared(e))}distanceSqToSegment(e,t,n,i){gu.copy(e).add(t).multiplyScalar(.5),sl.copy(t).sub(e).normalize(),vr.copy(this.origin).sub(gu);const a=e.distanceTo(t)*.5,o=-this.direction.dot(sl),l=vr.dot(this.direction),c=-vr.dot(sl),h=vr.lengthSq(),f=Math.abs(1-o*o);let m,g,_,M;if(f>0)if(m=o*c-l,g=o*l-c,M=a*f,m>=0)if(g>=-M)if(g<=M){const x=1/f;m*=x,g*=x,_=m*(m+o*g+2*l)+g*(o*m+g+2*c)+h}else g=a,m=Math.max(0,-(o*g+l)),_=-m*m+g*(g+2*c)+h;else g=-a,m=Math.max(0,-(o*g+l)),_=-m*m+g*(g+2*c)+h;else g<=-M?(m=Math.max(0,-(-o*a+l)),g=m>0?-a:Math.min(Math.max(-a,-c),a),_=-m*m+g*(g+2*c)+h):g<=M?(m=0,g=Math.min(Math.max(-a,-c),a),_=g*(g+2*c)+h):(m=Math.max(0,-(o*a+l)),g=m>0?a:Math.min(Math.max(-a,-c),a),_=-m*m+g*(g+2*c)+h);else g=o>0?-a:a,m=Math.max(0,-(o*g+l)),_=-m*m+g*(g+2*c)+h;return n&&n.copy(this.direction).multiplyScalar(m).add(this.origin),i&&i.copy(sl).multiplyScalar(g).add(gu),_}intersectSphere(e,t){Ki.subVectors(e.center,this.origin);const n=Ki.dot(this.direction),i=Ki.dot(Ki)-n*n,a=e.radius*e.radius;if(i>a)return null;const o=Math.sqrt(a-i),l=n-o,c=n+o;return l<0&&c<0?null:l<0?this.at(c,t):this.at(l,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(t===0)return e.distanceToPoint(this.origin)===0?0:null;const n=-(this.origin.dot(e.normal)+e.constant)/t;return n>=0?n:null}intersectPlane(e,t){const n=this.distanceToPlane(e);return n===null?null:this.at(n,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return t===0||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let n,i,a,o,l,c;const h=1/this.direction.x,f=1/this.direction.y,m=1/this.direction.z,g=this.origin;return h>=0?(n=(e.min.x-g.x)*h,i=(e.max.x-g.x)*h):(n=(e.max.x-g.x)*h,i=(e.min.x-g.x)*h),f>=0?(a=(e.min.y-g.y)*f,o=(e.max.y-g.y)*f):(a=(e.max.y-g.y)*f,o=(e.min.y-g.y)*f),n>o||a>i||((a>n||n!==n)&&(n=a),(o<i||i!==i)&&(i=o),m>=0?(l=(e.min.z-g.z)*m,c=(e.max.z-g.z)*m):(l=(e.max.z-g.z)*m,c=(e.min.z-g.z)*m),n>c||l>i)||((l>n||n!==n)&&(n=l),(c<i||i!==i)&&(i=c),i<0)?null:this.at(n>=0?n:i,t)}intersectsBox(e){return this.intersectBox(e,Ki)!==null}intersectTriangle(e,t,n,i,a){vu.subVectors(t,e),al.subVectors(n,e),_u.crossVectors(vu,al);let o=this.direction.dot(_u),l;if(o>0){if(i)return null;l=1}else if(o<0)l=-1,o=-o;else return null;vr.subVectors(this.origin,e);const c=l*this.direction.dot(al.crossVectors(vr,al));if(c<0)return null;const h=l*this.direction.dot(vu.cross(vr));if(h<0||c+h>o)return null;const f=-l*vr.dot(_u);return f<0?null:this.at(f/o,a)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class nt{constructor(){this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}set(e,t,n,i,a,o,l,c,h,f,m,g,_,M,x,C){const y=this.elements;return y[0]=e,y[4]=t,y[8]=n,y[12]=i,y[1]=a,y[5]=o,y[9]=l,y[13]=c,y[2]=h,y[6]=f,y[10]=m,y[14]=g,y[3]=_,y[7]=M,y[11]=x,y[15]=C,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new nt().fromArray(this.elements)}copy(e){const t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],this}copyPosition(e){const t=this.elements,n=e.elements;return t[12]=n[12],t[13]=n[13],t[14]=n[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,n){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this}makeBasis(e,t,n){return this.set(e.x,t.x,n.x,0,e.y,t.y,n.y,0,e.z,t.z,n.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,n=e.elements,i=1/Is.setFromMatrixColumn(e,0).length(),a=1/Is.setFromMatrixColumn(e,1).length(),o=1/Is.setFromMatrixColumn(e,2).length();return t[0]=n[0]*i,t[1]=n[1]*i,t[2]=n[2]*i,t[3]=0,t[4]=n[4]*a,t[5]=n[5]*a,t[6]=n[6]*a,t[7]=0,t[8]=n[8]*o,t[9]=n[9]*o,t[10]=n[10]*o,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){e&&e.isEuler||console.error("THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");const t=this.elements,n=e.x,i=e.y,a=e.z,o=Math.cos(n),l=Math.sin(n),c=Math.cos(i),h=Math.sin(i),f=Math.cos(a),m=Math.sin(a);if(e.order==="XYZ"){const g=o*f,_=o*m,M=l*f,x=l*m;t[0]=c*f,t[4]=-c*m,t[8]=h,t[1]=_+M*h,t[5]=g-x*h,t[9]=-l*c,t[2]=x-g*h,t[6]=M+_*h,t[10]=o*c}else if(e.order==="YXZ"){const g=c*f,_=c*m,M=h*f,x=h*m;t[0]=g+x*l,t[4]=M*l-_,t[8]=o*h,t[1]=o*m,t[5]=o*f,t[9]=-l,t[2]=_*l-M,t[6]=x+g*l,t[10]=o*c}else if(e.order==="ZXY"){const g=c*f,_=c*m,M=h*f,x=h*m;t[0]=g-x*l,t[4]=-o*m,t[8]=M+_*l,t[1]=_+M*l,t[5]=o*f,t[9]=x-g*l,t[2]=-o*h,t[6]=l,t[10]=o*c}else if(e.order==="ZYX"){const g=o*f,_=o*m,M=l*f,x=l*m;t[0]=c*f,t[4]=M*h-_,t[8]=g*h+x,t[1]=c*m,t[5]=x*h+g,t[9]=_*h-M,t[2]=-h,t[6]=l*c,t[10]=o*c}else if(e.order==="YZX"){const g=o*c,_=o*h,M=l*c,x=l*h;t[0]=c*f,t[4]=x-g*m,t[8]=M*m+_,t[1]=m,t[5]=o*f,t[9]=-l*f,t[2]=-h*f,t[6]=_*m+M,t[10]=g-x*m}else if(e.order==="XZY"){const g=o*c,_=o*h,M=l*c,x=l*h;t[0]=c*f,t[4]=-m,t[8]=h*f,t[1]=g*m+x,t[5]=o*f,t[9]=_*m-M,t[2]=M*m-_,t[6]=l*f,t[10]=x*m+g}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(ob,e,lb)}lookAt(e,t,n){const i=this.elements;return Qn.subVectors(e,t),Qn.lengthSq()===0&&(Qn.z=1),Qn.normalize(),_r.crossVectors(n,Qn),_r.lengthSq()===0&&(Math.abs(n.z)===1?Qn.x+=1e-4:Qn.z+=1e-4,Qn.normalize(),_r.crossVectors(n,Qn)),_r.normalize(),ol.crossVectors(Qn,_r),i[0]=_r.x,i[4]=ol.x,i[8]=Qn.x,i[1]=_r.y,i[5]=ol.y,i[9]=Qn.y,i[2]=_r.z,i[6]=ol.z,i[10]=Qn.z,this}multiply(e,t){return t!==void 0?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(e,t)):this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const n=e.elements,i=t.elements,a=this.elements,o=n[0],l=n[4],c=n[8],h=n[12],f=n[1],m=n[5],g=n[9],_=n[13],M=n[2],x=n[6],C=n[10],y=n[14],b=n[3],O=n[7],P=n[11],F=n[15],p=i[0],L=i[4],W=i[8],X=i[12],oe=i[1],q=i[5],ye=i[9],ie=i[13],ne=i[2],re=i[6],ae=i[10],se=i[14],be=i[3],Oe=i[7],de=i[11],fe=i[15];return a[0]=o*p+l*oe+c*ne+h*be,a[4]=o*L+l*q+c*re+h*Oe,a[8]=o*W+l*ye+c*ae+h*de,a[12]=o*X+l*ie+c*se+h*fe,a[1]=f*p+m*oe+g*ne+_*be,a[5]=f*L+m*q+g*re+_*Oe,a[9]=f*W+m*ye+g*ae+_*de,a[13]=f*X+m*ie+g*se+_*fe,a[2]=M*p+x*oe+C*ne+y*be,a[6]=M*L+x*q+C*re+y*Oe,a[10]=M*W+x*ye+C*ae+y*de,a[14]=M*X+x*ie+C*se+y*fe,a[3]=b*p+O*oe+P*ne+F*be,a[7]=b*L+O*q+P*re+F*Oe,a[11]=b*W+O*ye+P*ae+F*de,a[15]=b*X+O*ie+P*se+F*fe,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],n=e[4],i=e[8],a=e[12],o=e[1],l=e[5],c=e[9],h=e[13],f=e[2],m=e[6],g=e[10],_=e[14],M=e[3],x=e[7],C=e[11],y=e[15];return M*(+a*c*m-i*h*m-a*l*g+n*h*g+i*l*_-n*c*_)+x*(+t*c*_-t*h*g+a*o*g-i*o*_+i*h*f-a*c*f)+C*(+t*h*m-t*l*_-a*o*m+n*o*_+a*l*f-n*h*f)+y*(-i*l*f-t*c*m+t*l*g+i*o*m-n*o*g+n*c*f)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,n){const i=this.elements;return e.isVector3?(i[12]=e.x,i[13]=e.y,i[14]=e.z):(i[12]=e,i[13]=t,i[14]=n),this}invert(){const e=this.elements,t=e[0],n=e[1],i=e[2],a=e[3],o=e[4],l=e[5],c=e[6],h=e[7],f=e[8],m=e[9],g=e[10],_=e[11],M=e[12],x=e[13],C=e[14],y=e[15],b=m*C*h-x*g*h+x*c*_-l*C*_-m*c*y+l*g*y,O=M*g*h-f*C*h-M*c*_+o*C*_+f*c*y-o*g*y,P=f*x*h-M*m*h+M*l*_-o*x*_-f*l*y+o*m*y,F=M*m*c-f*x*c-M*l*g+o*x*g+f*l*C-o*m*C,p=t*b+n*O+i*P+a*F;if(p===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const L=1/p;return e[0]=b*L,e[1]=(x*g*a-m*C*a-x*i*_+n*C*_+m*i*y-n*g*y)*L,e[2]=(l*C*a-x*c*a+x*i*h-n*C*h-l*i*y+n*c*y)*L,e[3]=(m*c*a-l*g*a-m*i*h+n*g*h+l*i*_-n*c*_)*L,e[4]=O*L,e[5]=(f*C*a-M*g*a+M*i*_-t*C*_-f*i*y+t*g*y)*L,e[6]=(M*c*a-o*C*a-M*i*h+t*C*h+o*i*y-t*c*y)*L,e[7]=(o*g*a-f*c*a+f*i*h-t*g*h-o*i*_+t*c*_)*L,e[8]=P*L,e[9]=(M*m*a-f*x*a-M*n*_+t*x*_+f*n*y-t*m*y)*L,e[10]=(o*x*a-M*l*a+M*n*h-t*x*h-o*n*y+t*l*y)*L,e[11]=(f*l*a-o*m*a-f*n*h+t*m*h+o*n*_-t*l*_)*L,e[12]=F*L,e[13]=(f*x*i-M*m*i+M*n*g-t*x*g-f*n*C+t*m*C)*L,e[14]=(M*l*i-o*x*i-M*n*c+t*x*c+o*n*C-t*l*C)*L,e[15]=(o*m*i-f*l*i+f*n*c-t*m*c-o*n*g+t*l*g)*L,this}scale(e){const t=this.elements,n=e.x,i=e.y,a=e.z;return t[0]*=n,t[4]*=i,t[8]*=a,t[1]*=n,t[5]*=i,t[9]*=a,t[2]*=n,t[6]*=i,t[10]*=a,t[3]*=n,t[7]*=i,t[11]*=a,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],n=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],i=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,n,i))}makeTranslation(e,t,n){return this.set(1,0,0,e,0,1,0,t,0,0,1,n,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),n=Math.sin(e);return this.set(1,0,0,0,0,t,-n,0,0,n,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,0,n,0,0,1,0,0,-n,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,0,n,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const n=Math.cos(t),i=Math.sin(t),a=1-n,o=e.x,l=e.y,c=e.z,h=a*o,f=a*l;return this.set(h*o+n,h*l-i*c,h*c+i*l,0,h*l+i*c,f*l+n,f*c-i*o,0,h*c-i*l,f*c+i*o,a*c*c+n,0,0,0,0,1),this}makeScale(e,t,n){return this.set(e,0,0,0,0,t,0,0,0,0,n,0,0,0,0,1),this}makeShear(e,t,n,i,a,o){return this.set(1,n,a,0,e,1,o,0,t,i,1,0,0,0,0,1),this}compose(e,t,n){const i=this.elements,a=t._x,o=t._y,l=t._z,c=t._w,h=a+a,f=o+o,m=l+l,g=a*h,_=a*f,M=a*m,x=o*f,C=o*m,y=l*m,b=c*h,O=c*f,P=c*m,F=n.x,p=n.y,L=n.z;return i[0]=(1-(x+y))*F,i[1]=(_+P)*F,i[2]=(M-O)*F,i[3]=0,i[4]=(_-P)*p,i[5]=(1-(g+y))*p,i[6]=(C+b)*p,i[7]=0,i[8]=(M+O)*L,i[9]=(C-b)*L,i[10]=(1-(g+x))*L,i[11]=0,i[12]=e.x,i[13]=e.y,i[14]=e.z,i[15]=1,this}decompose(e,t,n){const i=this.elements;let a=Is.set(i[0],i[1],i[2]).length();const o=Is.set(i[4],i[5],i[6]).length(),l=Is.set(i[8],i[9],i[10]).length();this.determinant()<0&&(a=-a),e.x=i[12],e.y=i[13],e.z=i[14],Si.copy(this);const h=1/a,f=1/o,m=1/l;return Si.elements[0]*=h,Si.elements[1]*=h,Si.elements[2]*=h,Si.elements[4]*=f,Si.elements[5]*=f,Si.elements[6]*=f,Si.elements[8]*=m,Si.elements[9]*=m,Si.elements[10]*=m,t.setFromRotationMatrix(Si),n.x=a,n.y=o,n.z=l,this}makePerspective(e,t,n,i,a,o){o===void 0&&console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");const l=this.elements,c=2*a/(t-e),h=2*a/(n-i),f=(t+e)/(t-e),m=(n+i)/(n-i),g=-(o+a)/(o-a),_=-2*o*a/(o-a);return l[0]=c,l[4]=0,l[8]=f,l[12]=0,l[1]=0,l[5]=h,l[9]=m,l[13]=0,l[2]=0,l[6]=0,l[10]=g,l[14]=_,l[3]=0,l[7]=0,l[11]=-1,l[15]=0,this}makeOrthographic(e,t,n,i,a,o){const l=this.elements,c=1/(t-e),h=1/(n-i),f=1/(o-a),m=(t+e)*c,g=(n+i)*h,_=(o+a)*f;return l[0]=2*c,l[4]=0,l[8]=0,l[12]=-m,l[1]=0,l[5]=2*h,l[9]=0,l[13]=-g,l[2]=0,l[6]=0,l[10]=-2*f,l[14]=-_,l[3]=0,l[7]=0,l[11]=0,l[15]=1,this}equals(e){const t=this.elements,n=e.elements;for(let i=0;i<16;i++)if(t[i]!==n[i])return!1;return!0}fromArray(e,t=0){for(let n=0;n<16;n++)this.elements[n]=e[n+t];return this}toArray(e=[],t=0){const n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e[t+9]=n[9],e[t+10]=n[10],e[t+11]=n[11],e[t+12]=n[12],e[t+13]=n[13],e[t+14]=n[14],e[t+15]=n[15],e}}nt.prototype.isMatrix4=!0;const Is=new j,Si=new nt,ob=new j(0,0,0),lb=new j(1,1,1),_r=new j,ol=new j,Qn=new j,pp=new nt,mp=new Hn;class Ta{constructor(e=0,t=0,n=0,i=Ta.DefaultOrder){this._x=e,this._y=t,this._z=n,this._order=i}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,n,i=this._order){return this._x=e,this._y=t,this._z=n,this._order=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,n=!0){const i=e.elements,a=i[0],o=i[4],l=i[8],c=i[1],h=i[5],f=i[9],m=i[2],g=i[6],_=i[10];switch(t){case"XYZ":this._y=Math.asin(ti(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-f,_),this._z=Math.atan2(-o,a)):(this._x=Math.atan2(g,h),this._z=0);break;case"YXZ":this._x=Math.asin(-ti(f,-1,1)),Math.abs(f)<.9999999?(this._y=Math.atan2(l,_),this._z=Math.atan2(c,h)):(this._y=Math.atan2(-m,a),this._z=0);break;case"ZXY":this._x=Math.asin(ti(g,-1,1)),Math.abs(g)<.9999999?(this._y=Math.atan2(-m,_),this._z=Math.atan2(-o,h)):(this._y=0,this._z=Math.atan2(c,a));break;case"ZYX":this._y=Math.asin(-ti(m,-1,1)),Math.abs(m)<.9999999?(this._x=Math.atan2(g,_),this._z=Math.atan2(c,a)):(this._x=0,this._z=Math.atan2(-o,h));break;case"YZX":this._z=Math.asin(ti(c,-1,1)),Math.abs(c)<.9999999?(this._x=Math.atan2(-f,h),this._y=Math.atan2(-m,a)):(this._x=0,this._y=Math.atan2(l,_));break;case"XZY":this._z=Math.asin(-ti(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(g,h),this._y=Math.atan2(l,a)):(this._x=Math.atan2(-f,_),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,n===!0&&this._onChangeCallback(),this}setFromQuaternion(e,t,n){return pp.makeRotationFromQuaternion(e),this.setFromRotationMatrix(pp,t,n)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return mp.setFromEuler(this),this.setFromQuaternion(mp,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}toVector3(e){return e?e.set(this._x,this._y,this._z):new j(this._x,this._y,this._z)}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}}Ta.prototype.isEuler=!0;Ta.DefaultOrder="XYZ";Ta.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"];class cb{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}}let ub=0;const gp=new j,Ds=new Hn,er=new nt,ll=new j,Ga=new j,hb=new j,fb=new Hn,vp=new j(1,0,0),_p=new j(0,1,0),yp=new j(0,0,1),db={type:"added"},xp={type:"removed"};class Lt extends bs{constructor(){super(),Object.defineProperty(this,"id",{value:ub++}),this.uuid=Gi(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Lt.DefaultUp.clone();const e=new j,t=new Ta,n=new Hn,i=new j(1,1,1);function a(){n.setFromEuler(t,!1)}function o(){t.setFromQuaternion(n,void 0,!1)}t._onChange(a),n._onChange(o),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:n},scale:{configurable:!0,enumerable:!0,value:i},modelViewMatrix:{value:new nt},normalMatrix:{value:new yn}}),this.matrix=new nt,this.matrixWorld=new nt,this.matrixAutoUpdate=Lt.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new cb,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return Ds.setFromAxisAngle(e,t),this.quaternion.multiply(Ds),this}rotateOnWorldAxis(e,t){return Ds.setFromAxisAngle(e,t),this.quaternion.premultiply(Ds),this}rotateX(e){return this.rotateOnAxis(vp,e)}rotateY(e){return this.rotateOnAxis(_p,e)}rotateZ(e){return this.rotateOnAxis(yp,e)}translateOnAxis(e,t){return gp.copy(e).applyQuaternion(this.quaternion),this.position.add(gp.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(vp,e)}translateY(e){return this.translateOnAxis(_p,e)}translateZ(e){return this.translateOnAxis(yp,e)}localToWorld(e){return e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return e.applyMatrix4(er.copy(this.matrixWorld).invert())}lookAt(e,t,n){e.isVector3?ll.copy(e):ll.set(e,t,n);const i=this.parent;this.updateWorldMatrix(!0,!1),Ga.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?er.lookAt(Ga,ll,this.up):er.lookAt(ll,Ga,this.up),this.quaternion.setFromRotationMatrix(er),i&&(er.extractRotation(i.matrixWorld),Ds.setFromRotationMatrix(er),this.quaternion.premultiply(Ds.invert()))}add(e){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.parent!==null&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(db)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let n=0;n<arguments.length;n++)this.remove(arguments[n]);return this}const t=this.children.indexOf(e);return t!==-1&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(xp)),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){for(let e=0;e<this.children.length;e++){const t=this.children[e];t.parent=null,t.dispatchEvent(xp)}return this.children.length=0,this}attach(e){return this.updateWorldMatrix(!0,!1),er.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),er.multiply(e.parent.matrixWorld)),e.applyMatrix4(er),this.add(e),e.updateWorldMatrix(!1,!0),this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let n=0,i=this.children.length;n<i;n++){const o=this.children[n].getObjectByProperty(e,t);if(o!==void 0)return o}}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Ga,e,hb),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Ga,fb,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let n=0,i=t.length;n<i;n++)t[n].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const t=this.children;for(let n=0,i=t.length;n<i;n++)t[n].traverseVisible(e)}traverseAncestors(e){const t=this.parent;t!==null&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let n=0,i=t.length;n<i;n++)t[n].updateMatrixWorld(e)}updateWorldMatrix(e,t){const n=this.parent;if(e===!0&&n!==null&&n.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),t===!0){const i=this.children;for(let a=0,o=i.length;a<o;a++)i[a].updateWorldMatrix(!1,!0)}}toJSON(e){const t=e===void 0||typeof e=="string",n={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{}},n.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});const i={};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.castShadow===!0&&(i.castShadow=!0),this.receiveShadow===!0&&(i.receiveShadow=!0),this.visible===!1&&(i.visible=!1),this.frustumCulled===!1&&(i.frustumCulled=!1),this.renderOrder!==0&&(i.renderOrder=this.renderOrder),JSON.stringify(this.userData)!=="{}"&&(i.userData=this.userData),i.layers=this.layers.mask,i.matrix=this.matrix.toArray(),this.matrixAutoUpdate===!1&&(i.matrixAutoUpdate=!1),this.isInstancedMesh&&(i.type="InstancedMesh",i.count=this.count,i.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(i.instanceColor=this.instanceColor.toJSON()));function a(l,c){return l[c.uuid]===void 0&&(l[c.uuid]=c.toJSON(e)),c.uuid}if(this.isScene)this.background&&(this.background.isColor?i.background=this.background.toJSON():this.background.isTexture&&(i.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&(i.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){i.geometry=a(e.geometries,this.geometry);const l=this.geometry.parameters;if(l!==void 0&&l.shapes!==void 0){const c=l.shapes;if(Array.isArray(c))for(let h=0,f=c.length;h<f;h++){const m=c[h];a(e.shapes,m)}else a(e.shapes,c)}}if(this.isSkinnedMesh&&(i.bindMode=this.bindMode,i.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(a(e.skeletons,this.skeleton),i.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const l=[];for(let c=0,h=this.material.length;c<h;c++)l.push(a(e.materials,this.material[c]));i.material=l}else i.material=a(e.materials,this.material);if(this.children.length>0){i.children=[];for(let l=0;l<this.children.length;l++)i.children.push(this.children[l].toJSON(e).object)}if(this.animations.length>0){i.animations=[];for(let l=0;l<this.animations.length;l++){const c=this.animations[l];i.animations.push(a(e.animations,c))}}if(t){const l=o(e.geometries),c=o(e.materials),h=o(e.textures),f=o(e.images),m=o(e.shapes),g=o(e.skeletons),_=o(e.animations);l.length>0&&(n.geometries=l),c.length>0&&(n.materials=c),h.length>0&&(n.textures=h),f.length>0&&(n.images=f),m.length>0&&(n.shapes=m),g.length>0&&(n.skeletons=g),_.length>0&&(n.animations=_)}return n.object=i,n;function o(l){const c=[];for(const h in l){const f=l[h];delete f.metadata,c.push(f)}return c}}clone(e){return new this.constructor().copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.userData=JSON.parse(JSON.stringify(e.userData)),t===!0)for(let n=0;n<e.children.length;n++){const i=e.children[n];this.add(i.clone())}return this}}Lt.DefaultUp=new j(0,1,0);Lt.DefaultMatrixAutoUpdate=!0;Lt.prototype.isObject3D=!0;const Ti=new j,tr=new j,yu=new j,nr=new j,Ns=new j,Os=new j,wp=new j,xu=new j,wu=new j,bu=new j;class cn{constructor(e=new j,t=new j,n=new j){this.a=e,this.b=t,this.c=n}static getNormal(e,t,n,i){i.subVectors(n,t),Ti.subVectors(e,t),i.cross(Ti);const a=i.lengthSq();return a>0?i.multiplyScalar(1/Math.sqrt(a)):i.set(0,0,0)}static getBarycoord(e,t,n,i,a){Ti.subVectors(i,t),tr.subVectors(n,t),yu.subVectors(e,t);const o=Ti.dot(Ti),l=Ti.dot(tr),c=Ti.dot(yu),h=tr.dot(tr),f=tr.dot(yu),m=o*h-l*l;if(m===0)return a.set(-2,-1,-1);const g=1/m,_=(h*c-l*f)*g,M=(o*f-l*c)*g;return a.set(1-_-M,M,_)}static containsPoint(e,t,n,i){return this.getBarycoord(e,t,n,i,nr),nr.x>=0&&nr.y>=0&&nr.x+nr.y<=1}static getUV(e,t,n,i,a,o,l,c){return this.getBarycoord(e,t,n,i,nr),c.set(0,0),c.addScaledVector(a,nr.x),c.addScaledVector(o,nr.y),c.addScaledVector(l,nr.z),c}static isFrontFacing(e,t,n,i){return Ti.subVectors(n,t),tr.subVectors(e,t),Ti.cross(tr).dot(i)<0}set(e,t,n){return this.a.copy(e),this.b.copy(t),this.c.copy(n),this}setFromPointsAndIndices(e,t,n,i){return this.a.copy(e[t]),this.b.copy(e[n]),this.c.copy(e[i]),this}setFromAttributeAndIndices(e,t,n,i){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,n),this.c.fromBufferAttribute(e,i),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return Ti.subVectors(this.c,this.b),tr.subVectors(this.a,this.b),Ti.cross(tr).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return cn.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return cn.getBarycoord(e,this.a,this.b,this.c,t)}getUV(e,t,n,i,a){return cn.getUV(e,this.a,this.b,this.c,t,n,i,a)}containsPoint(e){return cn.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return cn.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const n=this.a,i=this.b,a=this.c;let o,l;Ns.subVectors(i,n),Os.subVectors(a,n),xu.subVectors(e,n);const c=Ns.dot(xu),h=Os.dot(xu);if(c<=0&&h<=0)return t.copy(n);wu.subVectors(e,i);const f=Ns.dot(wu),m=Os.dot(wu);if(f>=0&&m<=f)return t.copy(i);const g=c*m-f*h;if(g<=0&&c>=0&&f<=0)return o=c/(c-f),t.copy(n).addScaledVector(Ns,o);bu.subVectors(e,a);const _=Ns.dot(bu),M=Os.dot(bu);if(M>=0&&_<=M)return t.copy(a);const x=_*h-c*M;if(x<=0&&h>=0&&M<=0)return l=h/(h-M),t.copy(n).addScaledVector(Os,l);const C=f*M-_*m;if(C<=0&&m-f>=0&&_-M>=0)return wp.subVectors(a,i),l=(m-f)/(m-f+(_-M)),t.copy(i).addScaledVector(wp,l);const y=1/(C+x+g);return o=x*y,l=g*y,t.copy(n).addScaledVector(Ns,o).addScaledVector(Os,l)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}let pb=0;class Cn extends bs{constructor(){super(),Object.defineProperty(this,"id",{value:pb++}),this.uuid=Gi(),this.name="",this.type="Material",this.fog=!0,this.blending=lo,this.side=Eo,this.vertexColors=!1,this.opacity=1,this.format=Ln,this.transparent=!1,this.blendSrc=Yv,this.blendDst=$v,this.blendEquation=Xs,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=lh,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=tb,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=ou,this.stencilZFail=ou,this.stencilZPass=ou,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const t in e){const n=e[t];if(n===void 0){console.warn("THREE.Material: '"+t+"' parameter is undefined.");continue}if(t==="shading"){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=n===Xv;continue}const i=this[t];if(i===void 0){console.warn("THREE."+this.type+": '"+t+"' is not a property of this material.");continue}i&&i.isColor?i.set(n):i&&i.isVector3&&n&&n.isVector3?i.copy(n):this[t]=n}}toJSON(e){const t=e===void 0||typeof e=="string";t&&(e={textures:{},images:{}});const n={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};n.uuid=this.uuid,n.type=this.type,this.name!==""&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),this.roughness!==void 0&&(n.roughness=this.roughness),this.metalness!==void 0&&(n.metalness=this.metalness),this.sheen!==void 0&&(n.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(n.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(n.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),this.emissiveIntensity&&this.emissiveIntensity!==1&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(n.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(n.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(n.shininess=this.shininess),this.clearcoat!==void 0&&(n.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(n.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(n.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(n.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(n.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,n.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(n.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(e).uuid,n.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(n.aoMap=this.aoMap.toJSON(e).uuid,n.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(e).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(e).uuid,n.normalMapType=this.normalMapType,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(e).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(n.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(n.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(n.combine=this.combine)),this.envMapIntensity!==void 0&&(n.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(n.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(n.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(n.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(n.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(n.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(n.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&(n.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(n.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(n.size=this.size),this.shadowSide!==null&&(n.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(n.sizeAttenuation=this.sizeAttenuation),this.blending!==lo&&(n.blending=this.blending),this.side!==Eo&&(n.side=this.side),this.vertexColors&&(n.vertexColors=!0),this.opacity<1&&(n.opacity=this.opacity),this.format!==Ln&&(n.format=this.format),this.transparent===!0&&(n.transparent=this.transparent),n.depthFunc=this.depthFunc,n.depthTest=this.depthTest,n.depthWrite=this.depthWrite,n.colorWrite=this.colorWrite,n.stencilWrite=this.stencilWrite,n.stencilWriteMask=this.stencilWriteMask,n.stencilFunc=this.stencilFunc,n.stencilRef=this.stencilRef,n.stencilFuncMask=this.stencilFuncMask,n.stencilFail=this.stencilFail,n.stencilZFail=this.stencilZFail,n.stencilZPass=this.stencilZPass,this.rotation&&this.rotation!==0&&(n.rotation=this.rotation),this.polygonOffset===!0&&(n.polygonOffset=!0),this.polygonOffsetFactor!==0&&(n.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(n.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth&&this.linewidth!==1&&(n.linewidth=this.linewidth),this.dashSize!==void 0&&(n.dashSize=this.dashSize),this.gapSize!==void 0&&(n.gapSize=this.gapSize),this.scale!==void 0&&(n.scale=this.scale),this.dithering===!0&&(n.dithering=!0),this.alphaTest>0&&(n.alphaTest=this.alphaTest),this.alphaToCoverage===!0&&(n.alphaToCoverage=this.alphaToCoverage),this.premultipliedAlpha===!0&&(n.premultipliedAlpha=this.premultipliedAlpha),this.wireframe===!0&&(n.wireframe=this.wireframe),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(n.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(n.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(n.flatShading=this.flatShading),this.visible===!1&&(n.visible=!1),this.toneMapped===!1&&(n.toneMapped=!1),JSON.stringify(this.userData)!=="{}"&&(n.userData=this.userData);function i(a){const o=[];for(const l in a){const c=a[l];delete c.metadata,o.push(c)}return o}if(t){const a=i(e.textures),o=i(e.images);a.length>0&&(n.textures=a),o.length>0&&(n.images=o)}return n}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.fog=e.fog,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.format=e.format,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let n=null;if(t!==null){const i=t.length;n=new Array(i);for(let a=0;a!==i;++a)n[a]=t[a].clone()}return this.clippingPlanes=n,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}}Cn.prototype.isMaterial=!0;const n_={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Ei={h:0,s:0,l:0},cl={h:0,s:0,l:0};function Mu(r,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?r+(e-r)*6*t:t<1/2?e:t<2/3?r+(e-r)*6*(2/3-t):r}function Su(r){return r<.04045?r*.0773993808:Math.pow(r*.9478672986+.0521327014,2.4)}function Tu(r){return r<.0031308?r*12.92:1.055*Math.pow(r,.41666)-.055}class $e{constructor(e,t,n){return t===void 0&&n===void 0?this.set(e):this.setRGB(e,t,n)}set(e){return e&&e.isColor?this.copy(e):typeof e=="number"?this.setHex(e):typeof e=="string"&&this.setStyle(e),this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,this}setRGB(e,t,n){return this.r=e,this.g=t,this.b=n,this}setHSL(e,t,n){if(e=nb(e,1),t=ti(t,0,1),n=ti(n,0,1),t===0)this.r=this.g=this.b=n;else{const i=n<=.5?n*(1+t):n+t-n*t,a=2*n-i;this.r=Mu(a,i,e+1/3),this.g=Mu(a,i,e),this.b=Mu(a,i,e-1/3)}return this}setStyle(e){function t(i){i!==void 0&&parseFloat(i)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let n;if(n=/^((?:rgb|hsl)a?)\(([^\)]*)\)/.exec(e)){let i;const a=n[1],o=n[2];switch(a){case"rgb":case"rgba":if(i=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return this.r=Math.min(255,parseInt(i[1],10))/255,this.g=Math.min(255,parseInt(i[2],10))/255,this.b=Math.min(255,parseInt(i[3],10))/255,t(i[4]),this;if(i=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return this.r=Math.min(100,parseInt(i[1],10))/100,this.g=Math.min(100,parseInt(i[2],10))/100,this.b=Math.min(100,parseInt(i[3],10))/100,t(i[4]),this;break;case"hsl":case"hsla":if(i=/^\s*(\d*\.?\d+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o)){const l=parseFloat(i[1])/360,c=parseInt(i[2],10)/100,h=parseInt(i[3],10)/100;return t(i[4]),this.setHSL(l,c,h)}break}}else if(n=/^\#([A-Fa-f\d]+)$/.exec(e)){const i=n[1],a=i.length;if(a===3)return this.r=parseInt(i.charAt(0)+i.charAt(0),16)/255,this.g=parseInt(i.charAt(1)+i.charAt(1),16)/255,this.b=parseInt(i.charAt(2)+i.charAt(2),16)/255,this;if(a===6)return this.r=parseInt(i.charAt(0)+i.charAt(1),16)/255,this.g=parseInt(i.charAt(2)+i.charAt(3),16)/255,this.b=parseInt(i.charAt(4)+i.charAt(5),16)/255,this}return e&&e.length>0?this.setColorName(e):this}setColorName(e){const t=n_[e.toLowerCase()];return t!==void 0?this.setHex(t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copyGammaToLinear(e,t=2){return this.r=Math.pow(e.r,t),this.g=Math.pow(e.g,t),this.b=Math.pow(e.b,t),this}copyLinearToGamma(e,t=2){const n=t>0?1/t:1;return this.r=Math.pow(e.r,n),this.g=Math.pow(e.g,n),this.b=Math.pow(e.b,n),this}convertGammaToLinear(e){return this.copyGammaToLinear(this,e),this}convertLinearToGamma(e){return this.copyLinearToGamma(this,e),this}copySRGBToLinear(e){return this.r=Su(e.r),this.g=Su(e.g),this.b=Su(e.b),this}copyLinearToSRGB(e){return this.r=Tu(e.r),this.g=Tu(e.g),this.b=Tu(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(){return this.r*255<<16^this.g*255<<8^this.b*255<<0}getHexString(){return("000000"+this.getHex().toString(16)).slice(-6)}getHSL(e){const t=this.r,n=this.g,i=this.b,a=Math.max(t,n,i),o=Math.min(t,n,i);let l,c;const h=(o+a)/2;if(o===a)l=0,c=0;else{const f=a-o;switch(c=h<=.5?f/(a+o):f/(2-a-o),a){case t:l=(n-i)/f+(n<i?6:0);break;case n:l=(i-t)/f+2;break;case i:l=(t-n)/f+4;break}l/=6}return e.h=l,e.s=c,e.l=h,e}getStyle(){return"rgb("+(this.r*255|0)+","+(this.g*255|0)+","+(this.b*255|0)+")"}offsetHSL(e,t,n){return this.getHSL(Ei),Ei.h+=e,Ei.s+=t,Ei.l+=n,this.setHSL(Ei.h,Ei.s,Ei.l),this}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,n){return this.r=e.r+(t.r-e.r)*n,this.g=e.g+(t.g-e.g)*n,this.b=e.b+(t.b-e.b)*n,this}lerpHSL(e,t){this.getHSL(Ei),e.getHSL(cl);const n=cu(Ei.h,cl.h,t),i=cu(Ei.s,cl.s,t),a=cu(Ei.l,cl.l,t);return this.setHSL(n,i,a),this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),e.normalized===!0&&(this.r/=255,this.g/=255,this.b/=255),this}toJSON(){return this.getHex()}}$e.NAMES=n_;$e.prototype.isColor=!0;$e.prototype.r=1;$e.prototype.g=1;$e.prototype.b=1;class If extends Cn{constructor(e){super(),this.type="MeshBasicMaterial",this.color=new $e(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=_c,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this}}If.prototype.isMeshBasicMaterial=!0;const kt=new j,ul=new Pe;class un{constructor(e,t,n){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.name="",this.array=e,this.itemSize=t,this.count=e!==void 0?e.length/t:0,this.normalized=n===!0,this.usage=Co,this.updateRange={offset:0,count:-1},this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this}copyAt(e,t,n){e*=this.itemSize,n*=t.itemSize;for(let i=0,a=this.itemSize;i<a;i++)this.array[e+i]=t.array[n+i];return this}copyArray(e){return this.array.set(e),this}copyColorsArray(e){const t=this.array;let n=0;for(let i=0,a=e.length;i<a;i++){let o=e[i];o===void 0&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",i),o=new $e),t[n++]=o.r,t[n++]=o.g,t[n++]=o.b}return this}copyVector2sArray(e){const t=this.array;let n=0;for(let i=0,a=e.length;i<a;i++){let o=e[i];o===void 0&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",i),o=new Pe),t[n++]=o.x,t[n++]=o.y}return this}copyVector3sArray(e){const t=this.array;let n=0;for(let i=0,a=e.length;i<a;i++){let o=e[i];o===void 0&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",i),o=new j),t[n++]=o.x,t[n++]=o.y,t[n++]=o.z}return this}copyVector4sArray(e){const t=this.array;let n=0;for(let i=0,a=e.length;i<a;i++){let o=e[i];o===void 0&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",i),o=new Ft),t[n++]=o.x,t[n++]=o.y,t[n++]=o.z,t[n++]=o.w}return this}applyMatrix3(e){if(this.itemSize===2)for(let t=0,n=this.count;t<n;t++)ul.fromBufferAttribute(this,t),ul.applyMatrix3(e),this.setXY(t,ul.x,ul.y);else if(this.itemSize===3)for(let t=0,n=this.count;t<n;t++)kt.fromBufferAttribute(this,t),kt.applyMatrix3(e),this.setXYZ(t,kt.x,kt.y,kt.z);return this}applyMatrix4(e){for(let t=0,n=this.count;t<n;t++)kt.x=this.getX(t),kt.y=this.getY(t),kt.z=this.getZ(t),kt.applyMatrix4(e),this.setXYZ(t,kt.x,kt.y,kt.z);return this}applyNormalMatrix(e){for(let t=0,n=this.count;t<n;t++)kt.x=this.getX(t),kt.y=this.getY(t),kt.z=this.getZ(t),kt.applyNormalMatrix(e),this.setXYZ(t,kt.x,kt.y,kt.z);return this}transformDirection(e){for(let t=0,n=this.count;t<n;t++)kt.x=this.getX(t),kt.y=this.getY(t),kt.z=this.getZ(t),kt.transformDirection(e),this.setXYZ(t,kt.x,kt.y,kt.z);return this}set(e,t=0){return this.array.set(e,t),this}getX(e){return this.array[e*this.itemSize]}setX(e,t){return this.array[e*this.itemSize]=t,this}getY(e){return this.array[e*this.itemSize+1]}setY(e,t){return this.array[e*this.itemSize+1]=t,this}getZ(e){return this.array[e*this.itemSize+2]}setZ(e,t){return this.array[e*this.itemSize+2]=t,this}getW(e){return this.array[e*this.itemSize+3]}setW(e,t){return this.array[e*this.itemSize+3]=t,this}setXY(e,t,n){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=n,this}setXYZ(e,t,n,i){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=i,this}setXYZW(e,t,n,i,a){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=i,this.array[e+3]=a,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.prototype.slice.call(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==Co&&(e.usage=this.usage),(this.updateRange.offset!==0||this.updateRange.count!==-1)&&(e.updateRange=this.updateRange),e}}un.prototype.isBufferAttribute=!0;class i_ extends un{constructor(e,t,n){super(new Uint16Array(e),t,n)}}class r_ extends un{constructor(e,t,n){super(new Uint32Array(e),t,n)}}class mb extends un{constructor(e,t,n){super(new Uint16Array(e),t,n)}}mb.prototype.isFloat16BufferAttribute=!0;class mn extends un{constructor(e,t,n){super(new Float32Array(e),t,n)}}let gb=0;const li=new nt,Eu=new Lt,Fs=new j,Kn=new Ii,Wa=new Ii,fn=new j;class Gt extends bs{constructor(){super(),Object.defineProperty(this,"id",{value:gb++}),this.uuid=Gi(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(t_(e)>65535?r_:i_)(e,1):this.index=e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,t,n=0){this.groups.push({start:e,count:t,materialIndex:n})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;t!==void 0&&(t.applyMatrix4(e),t.needsUpdate=!0);const n=this.attributes.normal;if(n!==void 0){const a=new yn().getNormalMatrix(e);n.applyNormalMatrix(a),n.needsUpdate=!0}const i=this.attributes.tangent;return i!==void 0&&(i.transformDirection(e),i.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return li.makeRotationFromQuaternion(e),this.applyMatrix4(li),this}rotateX(e){return li.makeRotationX(e),this.applyMatrix4(li),this}rotateY(e){return li.makeRotationY(e),this.applyMatrix4(li),this}rotateZ(e){return li.makeRotationZ(e),this.applyMatrix4(li),this}translate(e,t,n){return li.makeTranslation(e,t,n),this.applyMatrix4(li),this}scale(e,t,n){return li.makeScale(e,t,n),this.applyMatrix4(li),this}lookAt(e){return Eu.lookAt(e),Eu.updateMatrix(),this.applyMatrix4(Eu.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(Fs).negate(),this.translate(Fs.x,Fs.y,Fs.z),this}setFromPoints(e){const t=[];for(let n=0,i=e.length;n<i;n++){const a=e[n];t.push(a.x,a.y,a.z||0)}return this.setAttribute("position",new mn(t,3)),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Ii);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingBox.set(new j(-1/0,-1/0,-1/0),new j(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),t)for(let n=0,i=t.length;n<i;n++){const a=t[n];Kn.setFromBufferAttribute(a),this.morphTargetsRelative?(fn.addVectors(this.boundingBox.min,Kn.min),this.boundingBox.expandByPoint(fn),fn.addVectors(this.boundingBox.max,Kn.max),this.boundingBox.expandByPoint(fn)):(this.boundingBox.expandByPoint(Kn.min),this.boundingBox.expandByPoint(Kn.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Ma);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingSphere.set(new j,1/0);return}if(e){const n=this.boundingSphere.center;if(Kn.setFromBufferAttribute(e),t)for(let a=0,o=t.length;a<o;a++){const l=t[a];Wa.setFromBufferAttribute(l),this.morphTargetsRelative?(fn.addVectors(Kn.min,Wa.min),Kn.expandByPoint(fn),fn.addVectors(Kn.max,Wa.max),Kn.expandByPoint(fn)):(Kn.expandByPoint(Wa.min),Kn.expandByPoint(Wa.max))}Kn.getCenter(n);let i=0;for(let a=0,o=e.count;a<o;a++)fn.fromBufferAttribute(e,a),i=Math.max(i,n.distanceToSquared(fn));if(t)for(let a=0,o=t.length;a<o;a++){const l=t[a],c=this.morphTargetsRelative;for(let h=0,f=l.count;h<f;h++)fn.fromBufferAttribute(l,h),c&&(Fs.fromBufferAttribute(e,h),fn.add(Fs)),i=Math.max(i,n.distanceToSquared(fn))}this.boundingSphere.radius=Math.sqrt(i),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(e===null||t.position===void 0||t.normal===void 0||t.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const n=e.array,i=t.position.array,a=t.normal.array,o=t.uv.array,l=i.length/3;t.tangent===void 0&&this.setAttribute("tangent",new un(new Float32Array(4*l),4));const c=t.tangent.array,h=[],f=[];for(let oe=0;oe<l;oe++)h[oe]=new j,f[oe]=new j;const m=new j,g=new j,_=new j,M=new Pe,x=new Pe,C=new Pe,y=new j,b=new j;function O(oe,q,ye){m.fromArray(i,oe*3),g.fromArray(i,q*3),_.fromArray(i,ye*3),M.fromArray(o,oe*2),x.fromArray(o,q*2),C.fromArray(o,ye*2),g.sub(m),_.sub(m),x.sub(M),C.sub(M);const ie=1/(x.x*C.y-C.x*x.y);isFinite(ie)&&(y.copy(g).multiplyScalar(C.y).addScaledVector(_,-x.y).multiplyScalar(ie),b.copy(_).multiplyScalar(x.x).addScaledVector(g,-C.x).multiplyScalar(ie),h[oe].add(y),h[q].add(y),h[ye].add(y),f[oe].add(b),f[q].add(b),f[ye].add(b))}let P=this.groups;P.length===0&&(P=[{start:0,count:n.length}]);for(let oe=0,q=P.length;oe<q;++oe){const ye=P[oe],ie=ye.start,ne=ye.count;for(let re=ie,ae=ie+ne;re<ae;re+=3)O(n[re+0],n[re+1],n[re+2])}const F=new j,p=new j,L=new j,W=new j;function X(oe){L.fromArray(a,oe*3),W.copy(L);const q=h[oe];F.copy(q),F.sub(L.multiplyScalar(L.dot(q))).normalize(),p.crossVectors(W,q);const ie=p.dot(f[oe])<0?-1:1;c[oe*4]=F.x,c[oe*4+1]=F.y,c[oe*4+2]=F.z,c[oe*4+3]=ie}for(let oe=0,q=P.length;oe<q;++oe){const ye=P[oe],ie=ye.start,ne=ye.count;for(let re=ie,ae=ie+ne;re<ae;re+=3)X(n[re+0]),X(n[re+1]),X(n[re+2])}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(t!==void 0){let n=this.getAttribute("normal");if(n===void 0)n=new un(new Float32Array(t.count*3),3),this.setAttribute("normal",n);else for(let g=0,_=n.count;g<_;g++)n.setXYZ(g,0,0,0);const i=new j,a=new j,o=new j,l=new j,c=new j,h=new j,f=new j,m=new j;if(e)for(let g=0,_=e.count;g<_;g+=3){const M=e.getX(g+0),x=e.getX(g+1),C=e.getX(g+2);i.fromBufferAttribute(t,M),a.fromBufferAttribute(t,x),o.fromBufferAttribute(t,C),f.subVectors(o,a),m.subVectors(i,a),f.cross(m),l.fromBufferAttribute(n,M),c.fromBufferAttribute(n,x),h.fromBufferAttribute(n,C),l.add(f),c.add(f),h.add(f),n.setXYZ(M,l.x,l.y,l.z),n.setXYZ(x,c.x,c.y,c.z),n.setXYZ(C,h.x,h.y,h.z)}else for(let g=0,_=t.count;g<_;g+=3)i.fromBufferAttribute(t,g+0),a.fromBufferAttribute(t,g+1),o.fromBufferAttribute(t,g+2),f.subVectors(o,a),m.subVectors(i,a),f.cross(m),n.setXYZ(g+0,f.x,f.y,f.z),n.setXYZ(g+1,f.x,f.y,f.z),n.setXYZ(g+2,f.x,f.y,f.z);this.normalizeNormals(),n.needsUpdate=!0}}merge(e,t){if(!(e&&e.isBufferGeometry)){console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",e);return}t===void 0&&(t=0,console.warn("THREE.BufferGeometry.merge(): Overwriting original geometry, starting at offset=0. Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge."));const n=this.attributes;for(const i in n){if(e.attributes[i]===void 0)continue;const o=n[i].array,l=e.attributes[i],c=l.array,h=l.itemSize*t,f=Math.min(c.length,o.length-h);for(let m=0,g=h;m<f;m++,g++)o[g]=c[m]}return this}normalizeNormals(){const e=this.attributes.normal;for(let t=0,n=e.count;t<n;t++)fn.fromBufferAttribute(e,t),fn.normalize(),e.setXYZ(t,fn.x,fn.y,fn.z)}toNonIndexed(){function e(l,c){const h=l.array,f=l.itemSize,m=l.normalized,g=new h.constructor(c.length*f);let _=0,M=0;for(let x=0,C=c.length;x<C;x++){l.isInterleavedBufferAttribute?_=c[x]*l.data.stride+l.offset:_=c[x]*f;for(let y=0;y<f;y++)g[M++]=h[_++]}return new un(g,f,m)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new Gt,n=this.index.array,i=this.attributes;for(const l in i){const c=i[l],h=e(c,n);t.setAttribute(l,h)}const a=this.morphAttributes;for(const l in a){const c=[],h=a[l];for(let f=0,m=h.length;f<m;f++){const g=h[f],_=e(g,n);c.push(_)}t.morphAttributes[l]=c}t.morphTargetsRelative=this.morphTargetsRelative;const o=this.groups;for(let l=0,c=o.length;l<c;l++){const h=o[l];t.addGroup(h.start,h.count,h.materialIndex)}return t}toJSON(){const e={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const c=this.parameters;for(const h in c)c[h]!==void 0&&(e[h]=c[h]);return e}e.data={attributes:{}};const t=this.index;t!==null&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const n=this.attributes;for(const c in n){const h=n[c];e.data.attributes[c]=h.toJSON(e.data)}const i={};let a=!1;for(const c in this.morphAttributes){const h=this.morphAttributes[c],f=[];for(let m=0,g=h.length;m<g;m++){const _=h[m];f.push(_.toJSON(e.data))}f.length>0&&(i[c]=f,a=!0)}a&&(e.data.morphAttributes=i,e.data.morphTargetsRelative=this.morphTargetsRelative);const o=this.groups;o.length>0&&(e.data.groups=JSON.parse(JSON.stringify(o)));const l=this.boundingSphere;return l!==null&&(e.data.boundingSphere={center:l.center.toArray(),radius:l.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const n=e.index;n!==null&&this.setIndex(n.clone(t));const i=e.attributes;for(const h in i){const f=i[h];this.setAttribute(h,f.clone(t))}const a=e.morphAttributes;for(const h in a){const f=[],m=a[h];for(let g=0,_=m.length;g<_;g++)f.push(m[g].clone(t));this.morphAttributes[h]=f}this.morphTargetsRelative=e.morphTargetsRelative;const o=e.groups;for(let h=0,f=o.length;h<f;h++){const m=o[h];this.addGroup(m.start,m.count,m.materialIndex)}const l=e.boundingBox;l!==null&&(this.boundingBox=l.clone());const c=e.boundingSphere;return c!==null&&(this.boundingSphere=c.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,e.parameters!==void 0&&(this.parameters=Object.assign({},e.parameters)),this}dispose(){this.dispatchEvent({type:"dispose"})}}Gt.prototype.isBufferGeometry=!0;const bp=new nt,zs=new Sa,Au=new Ma,yr=new j,xr=new j,wr=new j,Cu=new j,Lu=new j,Ru=new j,hl=new j,fl=new j,dl=new j,pl=new Pe,ml=new Pe,gl=new Pe,Pu=new j,vl=new j;class pn extends Lt{constructor(e=new Gt,t=new If){super(),this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e){return super.copy(e),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=e.material,this.geometry=e.geometry,this}updateMorphTargets(){const e=this.geometry;if(e.isBufferGeometry){const t=e.morphAttributes,n=Object.keys(t);if(n.length>0){const i=t[n[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let a=0,o=i.length;a<o;a++){const l=i[a].name||String(a);this.morphTargetInfluences.push(0),this.morphTargetDictionary[l]=a}}}}else{const t=e.morphTargets;t!==void 0&&t.length>0&&console.error("THREE.Mesh.updateMorphTargets() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}}raycast(e,t){const n=this.geometry,i=this.material,a=this.matrixWorld;if(i===void 0||(n.boundingSphere===null&&n.computeBoundingSphere(),Au.copy(n.boundingSphere),Au.applyMatrix4(a),e.ray.intersectsSphere(Au)===!1)||(bp.copy(a).invert(),zs.copy(e.ray).applyMatrix4(bp),n.boundingBox!==null&&zs.intersectsBox(n.boundingBox)===!1))return;let o;if(n.isBufferGeometry){const l=n.index,c=n.attributes.position,h=n.morphAttributes.position,f=n.morphTargetsRelative,m=n.attributes.uv,g=n.attributes.uv2,_=n.groups,M=n.drawRange;if(l!==null)if(Array.isArray(i))for(let x=0,C=_.length;x<C;x++){const y=_[x],b=i[y.materialIndex],O=Math.max(y.start,M.start),P=Math.min(l.count,Math.min(y.start+y.count,M.start+M.count));for(let F=O,p=P;F<p;F+=3){const L=l.getX(F),W=l.getX(F+1),X=l.getX(F+2);o=_l(this,b,e,zs,c,h,f,m,g,L,W,X),o&&(o.faceIndex=Math.floor(F/3),o.face.materialIndex=y.materialIndex,t.push(o))}}else{const x=Math.max(0,M.start),C=Math.min(l.count,M.start+M.count);for(let y=x,b=C;y<b;y+=3){const O=l.getX(y),P=l.getX(y+1),F=l.getX(y+2);o=_l(this,i,e,zs,c,h,f,m,g,O,P,F),o&&(o.faceIndex=Math.floor(y/3),t.push(o))}}else if(c!==void 0)if(Array.isArray(i))for(let x=0,C=_.length;x<C;x++){const y=_[x],b=i[y.materialIndex],O=Math.max(y.start,M.start),P=Math.min(c.count,Math.min(y.start+y.count,M.start+M.count));for(let F=O,p=P;F<p;F+=3){const L=F,W=F+1,X=F+2;o=_l(this,b,e,zs,c,h,f,m,g,L,W,X),o&&(o.faceIndex=Math.floor(F/3),o.face.materialIndex=y.materialIndex,t.push(o))}}else{const x=Math.max(0,M.start),C=Math.min(c.count,M.start+M.count);for(let y=x,b=C;y<b;y+=3){const O=y,P=y+1,F=y+2;o=_l(this,i,e,zs,c,h,f,m,g,O,P,F),o&&(o.faceIndex=Math.floor(y/3),t.push(o))}}}else n.isGeometry&&console.error("THREE.Mesh.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}}pn.prototype.isMesh=!0;function vb(r,e,t,n,i,a,o,l){let c;if(e.side===ln?c=n.intersectTriangle(o,a,i,!0,l):c=n.intersectTriangle(i,a,o,e.side!==ga,l),c===null)return null;vl.copy(l),vl.applyMatrix4(r.matrixWorld);const h=t.ray.origin.distanceTo(vl);return h<t.near||h>t.far?null:{distance:h,point:vl.clone(),object:r}}function _l(r,e,t,n,i,a,o,l,c,h,f,m){yr.fromBufferAttribute(i,h),xr.fromBufferAttribute(i,f),wr.fromBufferAttribute(i,m);const g=r.morphTargetInfluences;if(a&&g){hl.set(0,0,0),fl.set(0,0,0),dl.set(0,0,0);for(let M=0,x=a.length;M<x;M++){const C=g[M],y=a[M];C!==0&&(Cu.fromBufferAttribute(y,h),Lu.fromBufferAttribute(y,f),Ru.fromBufferAttribute(y,m),o?(hl.addScaledVector(Cu,C),fl.addScaledVector(Lu,C),dl.addScaledVector(Ru,C)):(hl.addScaledVector(Cu.sub(yr),C),fl.addScaledVector(Lu.sub(xr),C),dl.addScaledVector(Ru.sub(wr),C)))}yr.add(hl),xr.add(fl),wr.add(dl)}r.isSkinnedMesh&&(r.boneTransform(h,yr),r.boneTransform(f,xr),r.boneTransform(m,wr));const _=vb(r,e,t,n,yr,xr,wr,Pu);if(_){l&&(pl.fromBufferAttribute(l,h),ml.fromBufferAttribute(l,f),gl.fromBufferAttribute(l,m),_.uv=cn.getUV(Pu,yr,xr,wr,pl,ml,gl,new Pe)),c&&(pl.fromBufferAttribute(c,h),ml.fromBufferAttribute(c,f),gl.fromBufferAttribute(c,m),_.uv2=cn.getUV(Pu,yr,xr,wr,pl,ml,gl,new Pe));const M={a:h,b:f,c:m,normal:new j,materialIndex:0};cn.getNormal(yr,xr,wr,M.normal),_.face=M}return _}class ko extends Gt{constructor(e=1,t=1,n=1,i=1,a=1,o=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:n,widthSegments:i,heightSegments:a,depthSegments:o};const l=this;i=Math.floor(i),a=Math.floor(a),o=Math.floor(o);const c=[],h=[],f=[],m=[];let g=0,_=0;M("z","y","x",-1,-1,n,t,e,o,a,0),M("z","y","x",1,-1,n,t,-e,o,a,1),M("x","z","y",1,1,e,n,t,i,o,2),M("x","z","y",1,-1,e,n,-t,i,o,3),M("x","y","z",1,-1,e,t,n,i,a,4),M("x","y","z",-1,-1,e,t,-n,i,a,5),this.setIndex(c),this.setAttribute("position",new mn(h,3)),this.setAttribute("normal",new mn(f,3)),this.setAttribute("uv",new mn(m,2));function M(x,C,y,b,O,P,F,p,L,W,X){const oe=P/L,q=F/W,ye=P/2,ie=F/2,ne=p/2,re=L+1,ae=W+1;let se=0,be=0;const Oe=new j;for(let de=0;de<ae;de++){const fe=de*q-ie;for(let ze=0;ze<re;ze++){const De=ze*oe-ye;Oe[x]=De*b,Oe[C]=fe*O,Oe[y]=ne,h.push(Oe.x,Oe.y,Oe.z),Oe[x]=0,Oe[C]=0,Oe[y]=p>0?1:-1,f.push(Oe.x,Oe.y,Oe.z),m.push(ze/L),m.push(1-de/W),se+=1}}for(let de=0;de<W;de++)for(let fe=0;fe<L;fe++){const ze=g+fe+re*de,De=g+fe+re*(de+1),ke=g+(fe+1)+re*(de+1),rt=g+(fe+1)+re*de;c.push(ze,De,rt),c.push(De,ke,rt),be+=6}l.addGroup(_,be,X),_+=be,g+=se}}static fromJSON(e){return new ko(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function _a(r){const e={};for(const t in r){e[t]={};for(const n in r[t]){const i=r[t][n];i&&(i.isColor||i.isMatrix3||i.isMatrix4||i.isVector2||i.isVector3||i.isVector4||i.isTexture||i.isQuaternion)?e[t][n]=i.clone():Array.isArray(i)?e[t][n]=i.slice():e[t][n]=i}}return e}function wn(r){const e={};for(let t=0;t<r.length;t++){const n=_a(r[t]);for(const i in n)e[i]=n[i]}return e}const _b={clone:_a,merge:wn};var yb=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,xb=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class Pi extends Cn{constructor(e){super(),this.type="ShaderMaterial",this.defines={},this.uniforms={},this.vertexShader=yb,this.fragmentShader=xb,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&(e.attributes!==void 0&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),this.setValues(e))}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=_a(e.uniforms),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const i in this.uniforms){const o=this.uniforms[i].value;o&&o.isTexture?t.uniforms[i]={type:"t",value:o.toJSON(e).uuid}:o&&o.isColor?t.uniforms[i]={type:"c",value:o.getHex()}:o&&o.isVector2?t.uniforms[i]={type:"v2",value:o.toArray()}:o&&o.isVector3?t.uniforms[i]={type:"v3",value:o.toArray()}:o&&o.isVector4?t.uniforms[i]={type:"v4",value:o.toArray()}:o&&o.isMatrix3?t.uniforms[i]={type:"m3",value:o.toArray()}:o&&o.isMatrix4?t.uniforms[i]={type:"m4",value:o.toArray()}:t.uniforms[i]={value:o}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader;const n={};for(const i in this.extensions)this.extensions[i]===!0&&(n[i]=!0);return Object.keys(n).length>0&&(t.extensions=n),t}}Pi.prototype.isShaderMaterial=!0;class Df extends Lt{constructor(){super(),this.type="Camera",this.matrixWorldInverse=new nt,this.projectionMatrix=new nt,this.projectionMatrixInverse=new nt}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(-t[8],-t[9],-t[10]).normalize()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}Df.prototype.isCamera=!0;class Fn extends Df{constructor(e=50,t=1,n=.1,i=2e3){super(),this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=n,this.far=i,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=fh*2*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(lu*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return fh*2*Math.atan(Math.tan(lu*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(e,t,n,i,a,o){this.aspect=e/t,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=i,this.view.width=a,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(lu*.5*this.fov)/this.zoom,n=2*t,i=this.aspect*n,a=-.5*i;const o=this.view;if(this.view!==null&&this.view.enabled){const c=o.fullWidth,h=o.fullHeight;a+=o.offsetX*i/c,t-=o.offsetY*n/h,i*=o.width/c,n*=o.height/h}const l=this.filmOffset;l!==0&&(a+=e*l/this.getFilmWidth()),this.projectionMatrix.makePerspective(a,a+i,t,t-n,e,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,this.view!==null&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}Fn.prototype.isPerspectiveCamera=!0;const Bs=90,ks=1;class Nf extends Lt{constructor(e,t,n){if(super(),this.type="CubeCamera",n.isWebGLCubeRenderTarget!==!0){console.error("THREE.CubeCamera: The constructor now expects an instance of WebGLCubeRenderTarget as third parameter.");return}this.renderTarget=n;const i=new Fn(Bs,ks,e,t);i.layers=this.layers,i.up.set(0,-1,0),i.lookAt(new j(1,0,0)),this.add(i);const a=new Fn(Bs,ks,e,t);a.layers=this.layers,a.up.set(0,-1,0),a.lookAt(new j(-1,0,0)),this.add(a);const o=new Fn(Bs,ks,e,t);o.layers=this.layers,o.up.set(0,0,1),o.lookAt(new j(0,1,0)),this.add(o);const l=new Fn(Bs,ks,e,t);l.layers=this.layers,l.up.set(0,0,-1),l.lookAt(new j(0,-1,0)),this.add(l);const c=new Fn(Bs,ks,e,t);c.layers=this.layers,c.up.set(0,-1,0),c.lookAt(new j(0,0,1)),this.add(c);const h=new Fn(Bs,ks,e,t);h.layers=this.layers,h.up.set(0,-1,0),h.lookAt(new j(0,0,-1)),this.add(h)}update(e,t){this.parent===null&&this.updateMatrixWorld();const n=this.renderTarget,[i,a,o,l,c,h]=this.children,f=e.xr.enabled,m=e.getRenderTarget();e.xr.enabled=!1;const g=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,e.setRenderTarget(n,0),e.render(t,i),e.setRenderTarget(n,1),e.render(t,a),e.setRenderTarget(n,2),e.render(t,o),e.setRenderTarget(n,3),e.render(t,l),e.setRenderTarget(n,4),e.render(t,c),n.texture.generateMipmaps=g,e.setRenderTarget(n,5),e.render(t,h),e.setRenderTarget(m),e.xr.enabled=f}}class Mc extends tn{constructor(e,t,n,i,a,o,l,c,h,f){e=e!==void 0?e:[],t=t!==void 0?t:zo,super(e,t,n,i,a,o,l,c,h,f),this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}Mc.prototype.isCubeTexture=!0;class s_ extends vi{constructor(e,t,n){Number.isInteger(t)&&(console.warn("THREE.WebGLCubeRenderTarget: constructor signature is now WebGLCubeRenderTarget( size, options )"),t=n),super(e,e,t),t=t||{},this.texture=new Mc(void 0,t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.encoding),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=t.generateMipmaps!==void 0?t.generateMipmaps:!1,this.texture.minFilter=t.minFilter!==void 0?t.minFilter:pi,this.texture._needsFlipEnvMap=!1}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.format=Ln,this.texture.encoding=t.encoding,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const n={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},i=new ko(5,5,5),a=new Pi({name:"CubemapFromEquirect",uniforms:_a(n.uniforms),vertexShader:n.vertexShader,fragmentShader:n.fragmentShader,side:ln,blending:Lr});a.uniforms.tEquirect.value=t;const o=new pn(i,a),l=t.minFilter;return t.minFilter===xc&&(t.minFilter=pi),new Nf(1,10,this).update(e,o),t.minFilter=l,o.geometry.dispose(),o.material.dispose(),this}clear(e,t,n,i){const a=e.getRenderTarget();for(let o=0;o<6;o++)e.setRenderTarget(this,o),e.clear(t,n,i);e.setRenderTarget(a)}}s_.prototype.isWebGLCubeRenderTarget=!0;const Iu=new j,wb=new j,bb=new yn;class ar{constructor(e=new j(1,0,0),t=0){this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,n,i){return this.normal.set(e,t,n),this.constant=i,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,n){const i=Iu.subVectors(n,t).cross(wb.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(i,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(this.normal).multiplyScalar(-this.distanceToPoint(e)).add(e)}intersectLine(e,t){const n=e.delta(Iu),i=this.normal.dot(n);if(i===0)return this.distanceToPoint(e.start)===0?t.copy(e.start):null;const a=-(e.start.dot(this.normal)+this.constant)/i;return a<0||a>1?null:t.copy(n).multiplyScalar(a).add(e.start)}intersectsLine(e){const t=this.distanceToPoint(e.start),n=this.distanceToPoint(e.end);return t<0&&n>0||n<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const n=t||bb.getNormalMatrix(e),i=this.coplanarPoint(Iu).applyMatrix4(e),a=this.normal.applyMatrix3(n).normalize();return this.constant=-i.dot(a),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}}ar.prototype.isPlane=!0;const Us=new Ma,yl=new j;class Sc{constructor(e=new ar,t=new ar,n=new ar,i=new ar,a=new ar,o=new ar){this.planes=[e,t,n,i,a,o]}set(e,t,n,i,a,o){const l=this.planes;return l[0].copy(e),l[1].copy(t),l[2].copy(n),l[3].copy(i),l[4].copy(a),l[5].copy(o),this}copy(e){const t=this.planes;for(let n=0;n<6;n++)t[n].copy(e.planes[n]);return this}setFromProjectionMatrix(e){const t=this.planes,n=e.elements,i=n[0],a=n[1],o=n[2],l=n[3],c=n[4],h=n[5],f=n[6],m=n[7],g=n[8],_=n[9],M=n[10],x=n[11],C=n[12],y=n[13],b=n[14],O=n[15];return t[0].setComponents(l-i,m-c,x-g,O-C).normalize(),t[1].setComponents(l+i,m+c,x+g,O+C).normalize(),t[2].setComponents(l+a,m+h,x+_,O+y).normalize(),t[3].setComponents(l-a,m-h,x-_,O-y).normalize(),t[4].setComponents(l-o,m-f,x-M,O-b).normalize(),t[5].setComponents(l+o,m+f,x+M,O+b).normalize(),this}intersectsObject(e){const t=e.geometry;return t.boundingSphere===null&&t.computeBoundingSphere(),Us.copy(t.boundingSphere).applyMatrix4(e.matrixWorld),this.intersectsSphere(Us)}intersectsSprite(e){return Us.center.set(0,0,0),Us.radius=.7071067811865476,Us.applyMatrix4(e.matrixWorld),this.intersectsSphere(Us)}intersectsSphere(e){const t=this.planes,n=e.center,i=-e.radius;for(let a=0;a<6;a++)if(t[a].distanceToPoint(n)<i)return!1;return!0}intersectsBox(e){const t=this.planes;for(let n=0;n<6;n++){const i=t[n];if(yl.x=i.normal.x>0?e.max.x:e.min.x,yl.y=i.normal.y>0?e.max.y:e.min.y,yl.z=i.normal.z>0?e.max.z:e.min.z,i.distanceToPoint(yl)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let n=0;n<6;n++)if(t[n].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}function a_(){let r=null,e=!1,t=null,n=null;function i(a,o){t(a,o),n=r.requestAnimationFrame(i)}return{start:function(){e!==!0&&t!==null&&(n=r.requestAnimationFrame(i),e=!0)},stop:function(){r.cancelAnimationFrame(n),e=!1},setAnimationLoop:function(a){t=a},setContext:function(a){r=a}}}function Mb(r,e){const t=e.isWebGL2,n=new WeakMap;function i(h,f){const m=h.array,g=h.usage,_=r.createBuffer();r.bindBuffer(f,_),r.bufferData(f,m,g),h.onUploadCallback();let M=5126;return m instanceof Float32Array?M=5126:m instanceof Float64Array?console.warn("THREE.WebGLAttributes: Unsupported data buffer format: Float64Array."):m instanceof Uint16Array?h.isFloat16BufferAttribute?t?M=5131:console.warn("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2."):M=5123:m instanceof Int16Array?M=5122:m instanceof Uint32Array?M=5125:m instanceof Int32Array?M=5124:m instanceof Int8Array?M=5120:(m instanceof Uint8Array||m instanceof Uint8ClampedArray)&&(M=5121),{buffer:_,type:M,bytesPerElement:m.BYTES_PER_ELEMENT,version:h.version}}function a(h,f,m){const g=f.array,_=f.updateRange;r.bindBuffer(m,h),_.count===-1?r.bufferSubData(m,0,g):(t?r.bufferSubData(m,_.offset*g.BYTES_PER_ELEMENT,g,_.offset,_.count):r.bufferSubData(m,_.offset*g.BYTES_PER_ELEMENT,g.subarray(_.offset,_.offset+_.count)),_.count=-1)}function o(h){return h.isInterleavedBufferAttribute&&(h=h.data),n.get(h)}function l(h){h.isInterleavedBufferAttribute&&(h=h.data);const f=n.get(h);f&&(r.deleteBuffer(f.buffer),n.delete(h))}function c(h,f){if(h.isGLBufferAttribute){const g=n.get(h);(!g||g.version<h.version)&&n.set(h,{buffer:h.buffer,type:h.type,bytesPerElement:h.elementSize,version:h.version});return}h.isInterleavedBufferAttribute&&(h=h.data);const m=n.get(h);m===void 0?n.set(h,i(h,f)):m.version<h.version&&(a(m.buffer,h,f),m.version=h.version)}return{get:o,remove:l,update:c}}class Ms extends Gt{constructor(e=1,t=1,n=1,i=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:n,heightSegments:i};const a=e/2,o=t/2,l=Math.floor(n),c=Math.floor(i),h=l+1,f=c+1,m=e/l,g=t/c,_=[],M=[],x=[],C=[];for(let y=0;y<f;y++){const b=y*g-o;for(let O=0;O<h;O++){const P=O*m-a;M.push(P,-b,0),x.push(0,0,1),C.push(O/l),C.push(1-y/c)}}for(let y=0;y<c;y++)for(let b=0;b<l;b++){const O=b+h*y,P=b+h*(y+1),F=b+1+h*(y+1),p=b+1+h*y;_.push(O,P,p),_.push(P,F,p)}this.setIndex(_),this.setAttribute("position",new mn(M,3)),this.setAttribute("normal",new mn(x,3)),this.setAttribute("uv",new mn(C,2))}static fromJSON(e){return new Ms(e.width,e.height,e.widthSegments,e.heightSegments)}}var Sb=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vUv ).g;
#endif`,Tb=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,Eb=`#ifdef USE_ALPHATEST
	if ( diffuseColor.a < alphaTest ) discard;
#endif`,Ab=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,Cb=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,Lb=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,Rb="vec3 transformed = vec3( position );",Pb=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,Ib=`vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float roughness ) {
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
	float D = D_GGX( alpha, dotNH );
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif`,Db=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vUv );
		vec2 dSTdy = dFdy( vUv );
		float Hll = bumpScale * texture2D( bumpMap, vUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );
		vec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,Nb=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#pragma unroll_loop_start
	for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
		plane = clippingPlanes[ i ];
		if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
	}
	#pragma unroll_loop_end
	#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
		bool clipped = true;
		#pragma unroll_loop_start
		for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
		}
		#pragma unroll_loop_end
		if ( clipped ) discard;
	#endif
#endif`,Ob=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,Fb=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,zb=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,Bb=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,kb=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,Ub=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	varying vec3 vColor;
#endif`,Hb=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif`,Vb=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
struct GeometricContext {
	vec3 position;
	vec3 normal;
	vec3 viewDir;
#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal;
#endif
};
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
float linearToRelativeLuminance( const in vec3 color ) {
	vec3 weights = vec3( 0.2126, 0.7152, 0.0722 );
	return dot( weights, color.rgb );
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}`,Gb=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_maxMipLevel 8.0
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_maxTileSize 256.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		float texelSize = 1.0 / ( 3.0 * cubeUV_maxTileSize );
		vec2 uv = getUV( direction, face ) * ( faceSize - 1.0 );
		vec2 f = fract( uv );
		uv += 0.5 - f;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		if ( mipInt < cubeUV_maxMipLevel ) {
			uv.y += 2.0 * cubeUV_maxTileSize;
		}
		uv.y += filterInt * 2.0 * cubeUV_minTileSize;
		uv.x += 3.0 * max( 0.0, cubeUV_maxTileSize - 2.0 * faceSize );
		uv *= texelSize;
		vec3 tl = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;
		uv.x += texelSize;
		vec3 tr = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;
		uv.y += texelSize;
		vec3 br = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;
		uv.x -= texelSize;
		vec3 bl = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;
		vec3 tm = mix( tl, tr, f.x );
		vec3 bm = mix( bl, br, f.x );
		return mix( tm, bm, f.y );
	}
	#define r0 1.0
	#define v0 0.339
	#define m0 - 2.0
	#define r1 0.8
	#define v1 0.276
	#define m1 - 1.0
	#define r4 0.4
	#define v4 0.046
	#define m4 2.0
	#define r5 0.305
	#define v5 0.016
	#define m5 3.0
	#define r6 0.21
	#define v6 0.0038
	#define m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= r1 ) {
			mip = ( r0 - roughness ) * ( m1 - m0 ) / ( r0 - r1 ) + m0;
		} else if ( roughness >= r4 ) {
			mip = ( r1 - roughness ) * ( m4 - m1 ) / ( r1 - r4 ) + m1;
		} else if ( roughness >= r5 ) {
			mip = ( r4 - roughness ) * ( m5 - m4 ) / ( r4 - r5 ) + m4;
		} else if ( roughness >= r6 ) {
			mip = ( r5 - roughness ) * ( m6 - m5 ) / ( r5 - r6 ) + m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), m0, cubeUV_maxMipLevel );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,Wb=`vec3 transformedNormal = objectNormal;
#ifdef USE_INSTANCING
	mat3 m = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );
	transformedNormal = m * transformedNormal;
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	vec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,jb=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,qb=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );
#endif`,Xb=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vUv );
	emissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,Yb=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,$b="gl_FragColor = linearToOutputTexel( gl_FragColor );",Jb=`
vec4 LinearToLinear( in vec4 value ) {
	return value;
}
vec4 GammaToLinear( in vec4 value, in float gammaFactor ) {
	return vec4( pow( value.rgb, vec3( gammaFactor ) ), value.a );
}
vec4 LinearToGamma( in vec4 value, in float gammaFactor ) {
	return vec4( pow( value.rgb, vec3( 1.0 / gammaFactor ) ), value.a );
}
vec4 sRGBToLinear( in vec4 value ) {
	return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );
}
vec4 LinearTosRGB( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}
vec4 RGBEToLinear( in vec4 value ) {
	return vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );
}
vec4 LinearToRGBE( in vec4 value ) {
	float maxComponent = max( max( value.r, value.g ), value.b );
	float fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );
	return vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );
}
vec4 RGBMToLinear( in vec4 value, in float maxRange ) {
	return vec4( value.rgb * value.a * maxRange, 1.0 );
}
vec4 LinearToRGBM( in vec4 value, in float maxRange ) {
	float maxRGB = max( value.r, max( value.g, value.b ) );
	float M = clamp( maxRGB / maxRange, 0.0, 1.0 );
	M = ceil( M * 255.0 ) / 255.0;
	return vec4( value.rgb / ( M * maxRange ), M );
}
vec4 RGBDToLinear( in vec4 value, in float maxRange ) {
	return vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );
}
vec4 LinearToRGBD( in vec4 value, in float maxRange ) {
	float maxRGB = max( value.r, max( value.g, value.b ) );
	float D = max( maxRange / maxRGB, 1.0 );
	D = clamp( floor( D ) / 255.0, 0.0, 1.0 );
	return vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );
}`,Zb=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
		envColor = envMapTexelToLinear( envColor );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 envColor = textureCubeUV( envMap, reflectVec, 0.0 );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,Qb=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,Kb=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,eM=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) ||defined( PHONG )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,tM=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,nM=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,iM=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,rM=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,sM=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,aM=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return texture2D( gradientMap, coord ).rgb;
	#else
		return ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );
	#endif
}`,oM=`#ifdef USE_LIGHTMAP
	vec4 lightMapTexel = texture2D( lightMap, vUv2 );
	vec3 lightMapIrradiance = lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;
	#ifndef PHYSICALLY_CORRECT_LIGHTS
		lightMapIrradiance *= PI;
	#endif
	reflectedLight.indirectDiffuse += lightMapIrradiance;
#endif`,lM=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,cM=`vec3 diffuse = vec3( 1.0 );
GeometricContext geometry;
geometry.position = mvPosition.xyz;
geometry.normal = normalize( transformedNormal );
geometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( -mvPosition.xyz );
GeometricContext backGeometry;
backGeometry.position = geometry.position;
backGeometry.normal = -geometry.normal;
backGeometry.viewDir = geometry.viewDir;
vLightFront = vec3( 0.0 );
vIndirectFront = vec3( 0.0 );
#ifdef DOUBLE_SIDED
	vLightBack = vec3( 0.0 );
	vIndirectBack = vec3( 0.0 );
#endif
IncidentLight directLight;
float dotNL;
vec3 directLightColor_Diffuse;
vIndirectFront += getAmbientLightIrradiance( ambientLightColor );
vIndirectFront += getLightProbeIrradiance( lightProbe, geometry.normal );
#ifdef DOUBLE_SIDED
	vIndirectBack += getAmbientLightIrradiance( ambientLightColor );
	vIndirectBack += getLightProbeIrradiance( lightProbe, backGeometry.normal );
#endif
#if NUM_POINT_LIGHTS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		getPointLightInfo( pointLights[ i ], geometry, directLight );
		dotNL = dot( geometry.normal, directLight.direction );
		directLightColor_Diffuse = directLight.color;
		vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
		#ifdef DOUBLE_SIDED
			vLightBack += saturate( - dotNL ) * directLightColor_Diffuse;
		#endif
	}
	#pragma unroll_loop_end
#endif
#if NUM_SPOT_LIGHTS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		getSpotLightInfo( spotLights[ i ], geometry, directLight );
		dotNL = dot( geometry.normal, directLight.direction );
		directLightColor_Diffuse = directLight.color;
		vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
		#ifdef DOUBLE_SIDED
			vLightBack += saturate( - dotNL ) * directLightColor_Diffuse;
		#endif
	}
	#pragma unroll_loop_end
#endif
#if NUM_DIR_LIGHTS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		getDirectionalLightInfo( directionalLights[ i ], geometry, directLight );
		dotNL = dot( geometry.normal, directLight.direction );
		directLightColor_Diffuse = directLight.color;
		vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
		#ifdef DOUBLE_SIDED
			vLightBack += saturate( - dotNL ) * directLightColor_Diffuse;
		#endif
	}
	#pragma unroll_loop_end
#endif
#if NUM_HEMI_LIGHTS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
		vIndirectFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );
		#ifdef DOUBLE_SIDED
			vIndirectBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry.normal );
		#endif
	}
	#pragma unroll_loop_end
#endif`,uM=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
uniform vec3 lightProbe[ 9 ];
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	#if defined ( PHYSICALLY_CORRECT_LIGHTS )
		float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
		if ( cutoffDistance > 0.0 ) {
			distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
		}
		return distanceFalloff;
	#else
		if ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {
			return pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );
		}
		return 1.0;
	#endif
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometry.position;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometry.position;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,hM=`#if defined( USE_ENVMAP )
	#ifdef ENVMAP_MODE_REFRACTION
		uniform float refractionRatio;
	#endif
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#if defined( ENVMAP_TYPE_CUBE_UV )
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#if defined( ENVMAP_TYPE_CUBE_UV )
			vec3 reflectVec;
			#ifdef ENVMAP_MODE_REFLECTION
				reflectVec = reflect( - viewDir, normal );
				reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			#else
				reflectVec = refract( - viewDir, normal, refractionRatio );
			#endif
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
#endif`,fM=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,dM=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon
#define Material_LightProbeLOD( material )	(0)`,pM=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,mM=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong
#define Material_LightProbeLOD( material )	(0)`,gM=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	#ifdef SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULARINTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vUv ).a;
		#endif
		#ifdef USE_SPECULARCOLORMAP
			specularColorFactor *= specularColorMapTexelToLinear( texture2D( specularColorMap, vUv ) ).rgb;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( ior - 1.0 ) / ( ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEENCOLORMAP
		material.sheenColor *= sheenColorMapTexelToLinear( texture2D( sheenColorMap, vUv ) ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEENROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vUv ).a;
	#endif
#endif`,vM=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
};
vec3 clearcoatSpecular = vec3( 0.0 );
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	vec3 FssEss = specularColor * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = specularColor + ( 1.0 - specularColor ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometry.normal;
		vec3 viewDir = geometry.viewDir;
		vec3 position = geometry.position;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecular += ccIrradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		reflectedLight.directSpecular += irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.roughness );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	computeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	vec3 diffuse = material.diffuseColor * ( 1.0 - ( singleScattering + multiScattering ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,_M=`
GeometricContext geometry;
geometry.position = - vViewPosition;
geometry.normal = normal;
geometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
#ifdef USE_CLEARCOAT
	geometry.clearcoatNormal = clearcoatNormal;
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	irradiance += getLightProbeIrradiance( lightProbe, geometry.normal );
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,yM=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vUv2 );
		vec3 lightMapIrradiance = lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;
		#ifndef PHYSICALLY_CORRECT_LIGHTS
			lightMapIrradiance *= PI;
		#endif
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometry.normal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	radiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,xM=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );
#endif`,wM=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	gl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,bM=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,MM=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		varying float vFragDepth;
		varying float vIsPerspective;
	#else
		uniform float logDepthBufFC;
	#endif
#endif`,SM=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		vFragDepth = 1.0 + gl_Position.w;
		vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
	#else
		if ( isPerspectiveMatrix( projectionMatrix ) ) {
			gl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;
			gl_Position.z *= gl_Position.w;
		}
	#endif
#endif`,TM=`#ifdef USE_MAP
	vec4 texelColor = texture2D( map, vUv );
	texelColor = mapTexelToLinear( texelColor );
	diffuseColor *= texelColor;
#endif`,EM=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,AM=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
#endif
#ifdef USE_MAP
	vec4 mapTexel = texture2D( map, uv );
	diffuseColor *= mapTexelToLinear( mapTexel );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,CM=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	uniform mat3 uvTransform;
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,LM=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vUv );
	metalnessFactor *= texelMetalness.b;
#endif`,RM=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,PM=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] > 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1, 2 ) * morphTargetInfluences[ i ];
		}
	#else
		objectNormal += morphNormal0 * morphTargetInfluences[ 0 ];
		objectNormal += morphNormal1 * morphTargetInfluences[ 1 ];
		objectNormal += morphNormal2 * morphTargetInfluences[ 2 ];
		objectNormal += morphNormal3 * morphTargetInfluences[ 3 ];
	#endif
#endif`,IM=`#ifdef USE_MORPHTARGETS
	uniform float morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
		uniform sampler2DArray morphTargetsTexture;
		uniform vec2 morphTargetsTextureSize;
		vec3 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset, const in int stride ) {
			float texelIndex = float( vertexIndex * stride + offset );
			float y = floor( texelIndex / morphTargetsTextureSize.x );
			float x = texelIndex - y * morphTargetsTextureSize.x;
			vec3 morphUV = vec3( ( x + 0.5 ) / morphTargetsTextureSize.x, y / morphTargetsTextureSize.y, morphTargetIndex );
			return texture( morphTargetsTexture, morphUV ).xyz;
		}
	#else
		#ifndef USE_MORPHNORMALS
			uniform float morphTargetInfluences[ 8 ];
		#else
			uniform float morphTargetInfluences[ 4 ];
		#endif
	#endif
#endif`,DM=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			#ifndef USE_MORPHNORMALS
				if ( morphTargetInfluences[ i ] > 0.0 ) transformed += getMorph( gl_VertexID, i, 0, 1 ) * morphTargetInfluences[ i ];
			#else
				if ( morphTargetInfluences[ i ] > 0.0 ) transformed += getMorph( gl_VertexID, i, 0, 2 ) * morphTargetInfluences[ i ];
			#endif
		}
	#else
		transformed += morphTarget0 * morphTargetInfluences[ 0 ];
		transformed += morphTarget1 * morphTargetInfluences[ 1 ];
		transformed += morphTarget2 * morphTargetInfluences[ 2 ];
		transformed += morphTarget3 * morphTargetInfluences[ 3 ];
		#ifndef USE_MORPHNORMALS
			transformed += morphTarget4 * morphTargetInfluences[ 4 ];
			transformed += morphTarget5 * morphTargetInfluences[ 5 ];
			transformed += morphTarget6 * morphTargetInfluences[ 6 ];
			transformed += morphTarget7 * morphTargetInfluences[ 7 ];
		#endif
	#endif
#endif`,NM=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );
	vec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	#ifdef USE_TANGENT
		vec3 tangent = normalize( vTangent );
		vec3 bitangent = normalize( vBitangent );
		#ifdef DOUBLE_SIDED
			tangent = tangent * faceDirection;
			bitangent = bitangent * faceDirection;
		#endif
		#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )
			mat3 vTBN = mat3( tangent, bitangent, normal );
		#endif
	#endif
#endif
vec3 geometryNormal = normal;`,OM=`#ifdef OBJECTSPACE_NORMALMAP
	normal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( TANGENTSPACE_NORMALMAP )
	vec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	#ifdef USE_TANGENT
		normal = normalize( vTBN * mapN );
	#else
		normal = perturbNormal2Arb( - vViewPosition, normal, mapN, faceDirection );
	#endif
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,FM=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,zM=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,BM=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,kM=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef OBJECTSPACE_NORMALMAP
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )
	vec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN, float faceDirection ) {
		vec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );
		vec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );
		vec2 st0 = dFdx( vUv.st );
		vec2 st1 = dFdy( vUv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : faceDirection * inversesqrt( det );
		return normalize( T * ( mapN.x * scale ) + B * ( mapN.y * scale ) + N * mapN.z );
	}
#endif`,UM=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = geometryNormal;
#endif`,HM=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	#ifdef USE_TANGENT
		clearcoatNormal = normalize( vTBN * clearcoatMapN );
	#else
		clearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN, faceDirection );
	#endif
#endif`,VM=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif`,GM=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= transmissionAlpha + 0.1;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,WM=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;
const vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );
const vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );
const float ShiftRight8 = 1. / 256.;
vec4 packDepthToRGBA( const in float v ) {
	vec4 r = vec4( fract( v * PackFactors ), v );
	r.yzw -= r.xyz * ShiftRight8;	return r * PackUpscale;
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors );
}
vec4 pack2HalfToRGBA( vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {
	return linearClipZ * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * invClipZ - far );
}`,jM=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,qM=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,XM=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,YM=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,$M=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vUv );
	roughnessFactor *= texelRoughness.g;
#endif`,JM=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,ZM=`#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		varying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );
		bool inFrustum = all( inFrustumVec );
		bvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );
		bool frustumTest = all( frustumTestVec );
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ), 
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ), 
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return shadow;
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
		vec3 lightToPosition = shadowCoord.xyz;
		float dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );		dp += shadowBias;
		vec3 bd3D = normalize( lightToPosition );
		#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
			vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
			return (
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
			) * ( 1.0 / 9.0 );
		#else
			return texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
		#endif
	}
#endif`,QM=`#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHT_SHADOWS ];
		varying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,KM=`#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0 || NUM_SPOT_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0
		vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		vec4 shadowWorldPosition;
	#endif
	#if NUM_DIR_LIGHT_SHADOWS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
		vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias, 0 );
		vSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
		vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
	#endif
#endif`,eS=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,tS=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,nS=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	#ifdef BONE_TEXTURE
		uniform highp sampler2D boneTexture;
		uniform int boneTextureSize;
		mat4 getBoneMatrix( const in float i ) {
			float j = i * 4.0;
			float x = mod( j, float( boneTextureSize ) );
			float y = floor( j / float( boneTextureSize ) );
			float dx = 1.0 / float( boneTextureSize );
			float dy = 1.0 / float( boneTextureSize );
			y = dy * ( y + 0.5 );
			vec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );
			vec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );
			vec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );
			vec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );
			mat4 bone = mat4( v1, v2, v3, v4 );
			return bone;
		}
	#else
		uniform mat4 boneMatrices[ MAX_BONES ];
		mat4 getBoneMatrix( const in float i ) {
			mat4 bone = boneMatrices[ int(i) ];
			return bone;
		}
	#endif
#endif`,iS=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,rS=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,sS=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,aS=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,oS=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,lS=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return toneMappingExposure * color;
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 OptimizedCineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,cS=`#ifdef USE_TRANSMISSION
	float transmissionAlpha = 1.0;
	float transmissionFactor = transmission;
	float thicknessFactor = thickness;
	#ifdef USE_TRANSMISSIONMAP
		transmissionFactor *= texture2D( transmissionMap, vUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		thicknessFactor *= texture2D( thicknessMap, vUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmission = getIBLVolumeRefraction(
		n, v, roughnessFactor, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, ior, thicknessFactor,
		attenuationColor, attenuationDistance );
	totalDiffuse = mix( totalDiffuse, transmission.rgb, transmissionFactor );
	transmissionAlpha = mix( transmissionAlpha, transmission.a, transmissionFactor );
#endif`,uS=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	vec3 getVolumeTransmissionRay( vec3 n, vec3 v, float thickness, float ior, mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( float roughness, float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( vec2 fragCoord, float roughness, float ior ) {
		float framebufferLod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		#ifdef TEXTURE_LOD_EXT
			return texture2DLodEXT( transmissionSamplerMap, fragCoord.xy, framebufferLod );
		#else
			return texture2D( transmissionSamplerMap, fragCoord.xy, framebufferLod );
		#endif
	}
	vec3 applyVolumeAttenuation( vec3 radiance, float transmissionDistance, vec3 attenuationColor, float attenuationDistance ) {
		if ( attenuationDistance == 0.0 ) {
			return radiance;
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance * radiance;
		}
	}
	vec4 getIBLVolumeRefraction( vec3 n, vec3 v, float roughness, vec3 diffuseColor, vec3 specularColor, float specularF90,
		vec3 position, mat4 modelMatrix, mat4 viewMatrix, mat4 projMatrix, float ior, float thickness,
		vec3 attenuationColor, float attenuationDistance ) {
		vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
		vec3 refractedRayExit = position + transmissionRay;
		vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
		vec2 refractionCoords = ndcPos.xy / ndcPos.w;
		refractionCoords += 1.0;
		refractionCoords /= 2.0;
		vec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
		vec3 attenuatedColor = applyVolumeAttenuation( transmittedLight.rgb, length( transmissionRay ), attenuationColor, attenuationDistance );
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		return vec4( ( 1.0 - F ) * attenuatedColor * diffuseColor, transmittedLight.a );
	}
#endif`,hS=`#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )
	varying vec2 vUv;
#endif`,fS=`#ifdef USE_UV
	#ifdef UVS_VERTEX_ONLY
		vec2 vUv;
	#else
		varying vec2 vUv;
	#endif
	uniform mat3 uvTransform;
#endif`,dS=`#ifdef USE_UV
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
#endif`,pS=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	varying vec2 vUv2;
#endif`,mS=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	attribute vec2 uv2;
	varying vec2 vUv2;
	uniform mat3 uv2Transform;
#endif`,gS=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	vUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;
#endif`,vS=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION )
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const _S=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,yS=`uniform sampler2D t2D;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	gl_FragColor = mapTexelToLinear( texColor );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,xS=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,wS=`#include <envmap_common_pars_fragment>
uniform float opacity;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	vec3 vReflect = vWorldDirection;
	#include <envmap_fragment>
	gl_FragColor = envColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,bS=`#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,MS=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#endif
}`,SS=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,TS=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,ES=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,AS=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	vec4 texColor = texture2D( tEquirect, sampleUV );
	gl_FragColor = mapTexelToLinear( texColor );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,CS=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <color_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,LS=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,RS=`#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,PS=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <cube_uv_reflection_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel= texture2D( lightMap, vUv2 );
		reflectedLight.indirectDiffuse += lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,IS=`#define LAMBERT
varying vec3 vLightFront;
varying vec3 vIndirectFront;
#ifdef DOUBLE_SIDED
	varying vec3 vLightBack;
	varying vec3 vIndirectBack;
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <envmap_pars_vertex>
#include <bsdfs>
#include <lights_pars_begin>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <lights_lambert_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,DS=`uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
varying vec3 vLightFront;
varying vec3 vIndirectFront;
#ifdef DOUBLE_SIDED
	varying vec3 vLightBack;
	varying vec3 vIndirectBack;
#endif
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <cube_uv_reflection_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <fog_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <emissivemap_fragment>
	#ifdef DOUBLE_SIDED
		reflectedLight.indirectDiffuse += ( gl_FrontFacing ) ? vIndirectFront : vIndirectBack;
	#else
		reflectedLight.indirectDiffuse += vIndirectFront;
	#endif
	#include <lightmap_fragment>
	reflectedLight.indirectDiffuse *= BRDF_Lambert( diffuseColor.rgb );
	#ifdef DOUBLE_SIDED
		reflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;
	#else
		reflectedLight.directDiffuse = vLightFront;
	#endif
	reflectedLight.directDiffuse *= BRDF_Lambert( diffuseColor.rgb ) * getShadowMask();
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,NS=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,OS=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
		matcapColor = matcapTexelToLinear( matcapColor );
	#else
		vec4 matcapColor = vec4( 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,FS=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	vViewPosition = - mvPosition.xyz;
#endif
}`,zS=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), opacity );
}`,BS=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,kS=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <cube_uv_reflection_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,US=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,HS=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULARINTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
	#ifdef USE_SPECULARCOLORMAP
		uniform sampler2D specularColorMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEENCOLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEENROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <bsdfs>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + clearcoatSpecular * material.clearcoat;
	#endif
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,VS=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,GS=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,WS=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <color_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,jS=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,qS=`#include <common>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,XS=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,YS=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
	vec2 scale;
	scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
	scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,$S=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,mt={alphamap_fragment:Sb,alphamap_pars_fragment:Tb,alphatest_fragment:Eb,alphatest_pars_fragment:Ab,aomap_fragment:Cb,aomap_pars_fragment:Lb,begin_vertex:Rb,beginnormal_vertex:Pb,bsdfs:Ib,bumpmap_pars_fragment:Db,clipping_planes_fragment:Nb,clipping_planes_pars_fragment:Ob,clipping_planes_pars_vertex:Fb,clipping_planes_vertex:zb,color_fragment:Bb,color_pars_fragment:kb,color_pars_vertex:Ub,color_vertex:Hb,common:Vb,cube_uv_reflection_fragment:Gb,defaultnormal_vertex:Wb,displacementmap_pars_vertex:jb,displacementmap_vertex:qb,emissivemap_fragment:Xb,emissivemap_pars_fragment:Yb,encodings_fragment:$b,encodings_pars_fragment:Jb,envmap_fragment:Zb,envmap_common_pars_fragment:Qb,envmap_pars_fragment:Kb,envmap_pars_vertex:eM,envmap_physical_pars_fragment:hM,envmap_vertex:tM,fog_vertex:nM,fog_pars_vertex:iM,fog_fragment:rM,fog_pars_fragment:sM,gradientmap_pars_fragment:aM,lightmap_fragment:oM,lightmap_pars_fragment:lM,lights_lambert_vertex:cM,lights_pars_begin:uM,lights_toon_fragment:fM,lights_toon_pars_fragment:dM,lights_phong_fragment:pM,lights_phong_pars_fragment:mM,lights_physical_fragment:gM,lights_physical_pars_fragment:vM,lights_fragment_begin:_M,lights_fragment_maps:yM,lights_fragment_end:xM,logdepthbuf_fragment:wM,logdepthbuf_pars_fragment:bM,logdepthbuf_pars_vertex:MM,logdepthbuf_vertex:SM,map_fragment:TM,map_pars_fragment:EM,map_particle_fragment:AM,map_particle_pars_fragment:CM,metalnessmap_fragment:LM,metalnessmap_pars_fragment:RM,morphnormal_vertex:PM,morphtarget_pars_vertex:IM,morphtarget_vertex:DM,normal_fragment_begin:NM,normal_fragment_maps:OM,normal_pars_fragment:FM,normal_pars_vertex:zM,normal_vertex:BM,normalmap_pars_fragment:kM,clearcoat_normal_fragment_begin:UM,clearcoat_normal_fragment_maps:HM,clearcoat_pars_fragment:VM,output_fragment:GM,packing:WM,premultiplied_alpha_fragment:jM,project_vertex:qM,dithering_fragment:XM,dithering_pars_fragment:YM,roughnessmap_fragment:$M,roughnessmap_pars_fragment:JM,shadowmap_pars_fragment:ZM,shadowmap_pars_vertex:QM,shadowmap_vertex:KM,shadowmask_pars_fragment:eS,skinbase_vertex:tS,skinning_pars_vertex:nS,skinning_vertex:iS,skinnormal_vertex:rS,specularmap_fragment:sS,specularmap_pars_fragment:aS,tonemapping_fragment:oS,tonemapping_pars_fragment:lS,transmission_fragment:cS,transmission_pars_fragment:uS,uv_pars_fragment:hS,uv_pars_vertex:fS,uv_vertex:dS,uv2_pars_fragment:pS,uv2_pars_vertex:mS,uv2_vertex:gS,worldpos_vertex:vS,background_vert:_S,background_frag:yS,cube_vert:xS,cube_frag:wS,depth_vert:bS,depth_frag:MS,distanceRGBA_vert:SS,distanceRGBA_frag:TS,equirect_vert:ES,equirect_frag:AS,linedashed_vert:CS,linedashed_frag:LS,meshbasic_vert:RS,meshbasic_frag:PS,meshlambert_vert:IS,meshlambert_frag:DS,meshmatcap_vert:NS,meshmatcap_frag:OS,meshnormal_vert:FS,meshnormal_frag:zS,meshphong_vert:BS,meshphong_frag:kS,meshphysical_vert:US,meshphysical_frag:HS,meshtoon_vert:VS,meshtoon_frag:GS,points_vert:WS,points_frag:jS,shadow_vert:qS,shadow_frag:XS,sprite_vert:YS,sprite_frag:$S},He={common:{diffuse:{value:new $e(16777215)},opacity:{value:1},map:{value:null},uvTransform:{value:new yn},uv2Transform:{value:new yn},alphaMap:{value:null},alphaTest:{value:0}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new Pe(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new $e(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new $e(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new yn}},sprite:{diffuse:{value:new $e(16777215)},opacity:{value:1},center:{value:new Pe(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new yn}}},ki={basic:{uniforms:wn([He.common,He.specularmap,He.envmap,He.aomap,He.lightmap,He.fog]),vertexShader:mt.meshbasic_vert,fragmentShader:mt.meshbasic_frag},lambert:{uniforms:wn([He.common,He.specularmap,He.envmap,He.aomap,He.lightmap,He.emissivemap,He.fog,He.lights,{emissive:{value:new $e(0)}}]),vertexShader:mt.meshlambert_vert,fragmentShader:mt.meshlambert_frag},phong:{uniforms:wn([He.common,He.specularmap,He.envmap,He.aomap,He.lightmap,He.emissivemap,He.bumpmap,He.normalmap,He.displacementmap,He.fog,He.lights,{emissive:{value:new $e(0)},specular:{value:new $e(1118481)},shininess:{value:30}}]),vertexShader:mt.meshphong_vert,fragmentShader:mt.meshphong_frag},standard:{uniforms:wn([He.common,He.envmap,He.aomap,He.lightmap,He.emissivemap,He.bumpmap,He.normalmap,He.displacementmap,He.roughnessmap,He.metalnessmap,He.fog,He.lights,{emissive:{value:new $e(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:mt.meshphysical_vert,fragmentShader:mt.meshphysical_frag},toon:{uniforms:wn([He.common,He.aomap,He.lightmap,He.emissivemap,He.bumpmap,He.normalmap,He.displacementmap,He.gradientmap,He.fog,He.lights,{emissive:{value:new $e(0)}}]),vertexShader:mt.meshtoon_vert,fragmentShader:mt.meshtoon_frag},matcap:{uniforms:wn([He.common,He.bumpmap,He.normalmap,He.displacementmap,He.fog,{matcap:{value:null}}]),vertexShader:mt.meshmatcap_vert,fragmentShader:mt.meshmatcap_frag},points:{uniforms:wn([He.points,He.fog]),vertexShader:mt.points_vert,fragmentShader:mt.points_frag},dashed:{uniforms:wn([He.common,He.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:mt.linedashed_vert,fragmentShader:mt.linedashed_frag},depth:{uniforms:wn([He.common,He.displacementmap]),vertexShader:mt.depth_vert,fragmentShader:mt.depth_frag},normal:{uniforms:wn([He.common,He.bumpmap,He.normalmap,He.displacementmap,{opacity:{value:1}}]),vertexShader:mt.meshnormal_vert,fragmentShader:mt.meshnormal_frag},sprite:{uniforms:wn([He.sprite,He.fog]),vertexShader:mt.sprite_vert,fragmentShader:mt.sprite_frag},background:{uniforms:{uvTransform:{value:new yn},t2D:{value:null}},vertexShader:mt.background_vert,fragmentShader:mt.background_frag},cube:{uniforms:wn([He.envmap,{opacity:{value:1}}]),vertexShader:mt.cube_vert,fragmentShader:mt.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:mt.equirect_vert,fragmentShader:mt.equirect_frag},distanceRGBA:{uniforms:wn([He.common,He.displacementmap,{referencePosition:{value:new j},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:mt.distanceRGBA_vert,fragmentShader:mt.distanceRGBA_frag},shadow:{uniforms:wn([He.lights,He.fog,{color:{value:new $e(0)},opacity:{value:1}}]),vertexShader:mt.shadow_vert,fragmentShader:mt.shadow_frag}};ki.physical={uniforms:wn([ki.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new Pe(1,1)},clearcoatNormalMap:{value:null},sheen:{value:0},sheenColor:{value:new $e(0)},sheenColorMap:{value:null},sheenRoughness:{value:0},sheenRoughnessMap:{value:null},transmission:{value:0},transmissionMap:{value:null},transmissionSamplerSize:{value:new Pe},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},attenuationDistance:{value:0},attenuationColor:{value:new $e(0)},specularIntensity:{value:0},specularIntensityMap:{value:null},specularColor:{value:new $e(1,1,1)},specularColorMap:{value:null}}]),vertexShader:mt.meshphysical_vert,fragmentShader:mt.meshphysical_frag};function JS(r,e,t,n,i){const a=new $e(0);let o=0,l,c,h=null,f=0,m=null;function g(M,x){let C=!1,y=x.isScene===!0?x.background:null;y&&y.isTexture&&(y=e.get(y));const b=r.xr,O=b.getSession&&b.getSession();O&&O.environmentBlendMode==="additive"&&(y=null),y===null?_(a,o):y&&y.isColor&&(_(y,1),C=!0),(r.autoClear||C)&&r.clear(r.autoClearColor,r.autoClearDepth,r.autoClearStencil),y&&(y.isCubeTexture||y.mapping===yc)?(c===void 0&&(c=new pn(new ko(1,1,1),new Pi({name:"BackgroundCubeMaterial",uniforms:_a(ki.cube.uniforms),vertexShader:ki.cube.vertexShader,fragmentShader:ki.cube.fragmentShader,side:ln,depthTest:!1,depthWrite:!1,fog:!1})),c.geometry.deleteAttribute("normal"),c.geometry.deleteAttribute("uv"),c.onBeforeRender=function(P,F,p){this.matrixWorld.copyPosition(p.matrixWorld)},Object.defineProperty(c.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),n.update(c)),c.material.uniforms.envMap.value=y,c.material.uniforms.flipEnvMap.value=y.isCubeTexture&&y.isRenderTargetTexture===!1?-1:1,(h!==y||f!==y.version||m!==r.toneMapping)&&(c.material.needsUpdate=!0,h=y,f=y.version,m=r.toneMapping),M.unshift(c,c.geometry,c.material,0,0,null)):y&&y.isTexture&&(l===void 0&&(l=new pn(new Ms(2,2),new Pi({name:"BackgroundMaterial",uniforms:_a(ki.background.uniforms),vertexShader:ki.background.vertexShader,fragmentShader:ki.background.fragmentShader,side:Eo,depthTest:!1,depthWrite:!1,fog:!1})),l.geometry.deleteAttribute("normal"),Object.defineProperty(l.material,"map",{get:function(){return this.uniforms.t2D.value}}),n.update(l)),l.material.uniforms.t2D.value=y,y.matrixAutoUpdate===!0&&y.updateMatrix(),l.material.uniforms.uvTransform.value.copy(y.matrix),(h!==y||f!==y.version||m!==r.toneMapping)&&(l.material.needsUpdate=!0,h=y,f=y.version,m=r.toneMapping),M.unshift(l,l.geometry,l.material,0,0,null))}function _(M,x){t.buffers.color.setClear(M.r,M.g,M.b,x,i)}return{getClearColor:function(){return a},setClearColor:function(M,x=1){a.set(M),o=x,_(a,o)},getClearAlpha:function(){return o},setClearAlpha:function(M){o=M,_(a,o)},render:g}}function ZS(r,e,t,n){const i=r.getParameter(34921),a=n.isWebGL2?null:e.get("OES_vertex_array_object"),o=n.isWebGL2||a!==null,l={},c=x(null);let h=c;function f(ie,ne,re,ae,se){let be=!1;if(o){const Oe=M(ae,re,ne);h!==Oe&&(h=Oe,g(h.object)),be=C(ae,se),be&&y(ae,se)}else{const Oe=ne.wireframe===!0;(h.geometry!==ae.id||h.program!==re.id||h.wireframe!==Oe)&&(h.geometry=ae.id,h.program=re.id,h.wireframe=Oe,be=!0)}ie.isInstancedMesh===!0&&(be=!0),se!==null&&t.update(se,34963),be&&(L(ie,ne,re,ae),se!==null&&r.bindBuffer(34963,t.get(se).buffer))}function m(){return n.isWebGL2?r.createVertexArray():a.createVertexArrayOES()}function g(ie){return n.isWebGL2?r.bindVertexArray(ie):a.bindVertexArrayOES(ie)}function _(ie){return n.isWebGL2?r.deleteVertexArray(ie):a.deleteVertexArrayOES(ie)}function M(ie,ne,re){const ae=re.wireframe===!0;let se=l[ie.id];se===void 0&&(se={},l[ie.id]=se);let be=se[ne.id];be===void 0&&(be={},se[ne.id]=be);let Oe=be[ae];return Oe===void 0&&(Oe=x(m()),be[ae]=Oe),Oe}function x(ie){const ne=[],re=[],ae=[];for(let se=0;se<i;se++)ne[se]=0,re[se]=0,ae[se]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:ne,enabledAttributes:re,attributeDivisors:ae,object:ie,attributes:{},index:null}}function C(ie,ne){const re=h.attributes,ae=ie.attributes;let se=0;for(const be in ae){const Oe=re[be],de=ae[be];if(Oe===void 0||Oe.attribute!==de||Oe.data!==de.data)return!0;se++}return h.attributesNum!==se||h.index!==ne}function y(ie,ne){const re={},ae=ie.attributes;let se=0;for(const be in ae){const Oe=ae[be],de={};de.attribute=Oe,Oe.data&&(de.data=Oe.data),re[be]=de,se++}h.attributes=re,h.attributesNum=se,h.index=ne}function b(){const ie=h.newAttributes;for(let ne=0,re=ie.length;ne<re;ne++)ie[ne]=0}function O(ie){P(ie,0)}function P(ie,ne){const re=h.newAttributes,ae=h.enabledAttributes,se=h.attributeDivisors;re[ie]=1,ae[ie]===0&&(r.enableVertexAttribArray(ie),ae[ie]=1),se[ie]!==ne&&((n.isWebGL2?r:e.get("ANGLE_instanced_arrays"))[n.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](ie,ne),se[ie]=ne)}function F(){const ie=h.newAttributes,ne=h.enabledAttributes;for(let re=0,ae=ne.length;re<ae;re++)ne[re]!==ie[re]&&(r.disableVertexAttribArray(re),ne[re]=0)}function p(ie,ne,re,ae,se,be){n.isWebGL2===!0&&(re===5124||re===5125)?r.vertexAttribIPointer(ie,ne,re,se,be):r.vertexAttribPointer(ie,ne,re,ae,se,be)}function L(ie,ne,re,ae){if(n.isWebGL2===!1&&(ie.isInstancedMesh||ae.isInstancedBufferGeometry)&&e.get("ANGLE_instanced_arrays")===null)return;b();const se=ae.attributes,be=re.getAttributes(),Oe=ne.defaultAttributeValues;for(const de in be){const fe=be[de];if(fe.location>=0){let ze=se[de];if(ze===void 0&&(de==="instanceMatrix"&&ie.instanceMatrix&&(ze=ie.instanceMatrix),de==="instanceColor"&&ie.instanceColor&&(ze=ie.instanceColor)),ze!==void 0){const De=ze.normalized,ke=ze.itemSize,rt=t.get(ze);if(rt===void 0)continue;const Ee=rt.buffer,Te=rt.type,We=rt.bytesPerElement;if(ze.isInterleavedBufferAttribute){const Ge=ze.data,Xe=Ge.stride,Ye=ze.offset;if(Ge&&Ge.isInstancedInterleavedBuffer){for(let pe=0;pe<fe.locationSize;pe++)P(fe.location+pe,Ge.meshPerAttribute);ie.isInstancedMesh!==!0&&ae._maxInstanceCount===void 0&&(ae._maxInstanceCount=Ge.meshPerAttribute*Ge.count)}else for(let pe=0;pe<fe.locationSize;pe++)O(fe.location+pe);r.bindBuffer(34962,Ee);for(let pe=0;pe<fe.locationSize;pe++)p(fe.location+pe,ke/fe.locationSize,Te,De,Xe*We,(Ye+ke/fe.locationSize*pe)*We)}else{if(ze.isInstancedBufferAttribute){for(let Ge=0;Ge<fe.locationSize;Ge++)P(fe.location+Ge,ze.meshPerAttribute);ie.isInstancedMesh!==!0&&ae._maxInstanceCount===void 0&&(ae._maxInstanceCount=ze.meshPerAttribute*ze.count)}else for(let Ge=0;Ge<fe.locationSize;Ge++)O(fe.location+Ge);r.bindBuffer(34962,Ee);for(let Ge=0;Ge<fe.locationSize;Ge++)p(fe.location+Ge,ke/fe.locationSize,Te,De,ke*We,ke/fe.locationSize*Ge*We)}}else if(Oe!==void 0){const De=Oe[de];if(De!==void 0)switch(De.length){case 2:r.vertexAttrib2fv(fe.location,De);break;case 3:r.vertexAttrib3fv(fe.location,De);break;case 4:r.vertexAttrib4fv(fe.location,De);break;default:r.vertexAttrib1fv(fe.location,De)}}}}F()}function W(){q();for(const ie in l){const ne=l[ie];for(const re in ne){const ae=ne[re];for(const se in ae)_(ae[se].object),delete ae[se];delete ne[re]}delete l[ie]}}function X(ie){if(l[ie.id]===void 0)return;const ne=l[ie.id];for(const re in ne){const ae=ne[re];for(const se in ae)_(ae[se].object),delete ae[se];delete ne[re]}delete l[ie.id]}function oe(ie){for(const ne in l){const re=l[ne];if(re[ie.id]===void 0)continue;const ae=re[ie.id];for(const se in ae)_(ae[se].object),delete ae[se];delete re[ie.id]}}function q(){ye(),h!==c&&(h=c,g(h.object))}function ye(){c.geometry=null,c.program=null,c.wireframe=!1}return{setup:f,reset:q,resetDefaultState:ye,dispose:W,releaseStatesOfGeometry:X,releaseStatesOfProgram:oe,initAttributes:b,enableAttribute:O,disableUnusedAttributes:F}}function QS(r,e,t,n){const i=n.isWebGL2;let a;function o(h){a=h}function l(h,f){r.drawArrays(a,h,f),t.update(f,a,1)}function c(h,f,m){if(m===0)return;let g,_;if(i)g=r,_="drawArraysInstanced";else if(g=e.get("ANGLE_instanced_arrays"),_="drawArraysInstancedANGLE",g===null){console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}g[_](a,h,f,m),t.update(f,a,m)}this.setMode=o,this.render=l,this.renderInstances=c}function KS(r,e,t){let n;function i(){if(n!==void 0)return n;if(e.has("EXT_texture_filter_anisotropic")===!0){const L=e.get("EXT_texture_filter_anisotropic");n=r.getParameter(L.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else n=0;return n}function a(L){if(L==="highp"){if(r.getShaderPrecisionFormat(35633,36338).precision>0&&r.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";L="mediump"}return L==="mediump"&&r.getShaderPrecisionFormat(35633,36337).precision>0&&r.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}const o=typeof WebGL2RenderingContext<"u"&&r instanceof WebGL2RenderingContext||typeof WebGL2ComputeRenderingContext<"u"&&r instanceof WebGL2ComputeRenderingContext;let l=t.precision!==void 0?t.precision:"highp";const c=a(l);c!==l&&(console.warn("THREE.WebGLRenderer:",l,"not supported, using",c,"instead."),l=c);const h=o||e.has("WEBGL_draw_buffers"),f=t.logarithmicDepthBuffer===!0,m=r.getParameter(34930),g=r.getParameter(35660),_=r.getParameter(3379),M=r.getParameter(34076),x=r.getParameter(34921),C=r.getParameter(36347),y=r.getParameter(36348),b=r.getParameter(36349),O=g>0,P=o||e.has("OES_texture_float"),F=O&&P,p=o?r.getParameter(36183):0;return{isWebGL2:o,drawBuffers:h,getMaxAnisotropy:i,getMaxPrecision:a,precision:l,logarithmicDepthBuffer:f,maxTextures:m,maxVertexTextures:g,maxTextureSize:_,maxCubemapSize:M,maxAttributes:x,maxVertexUniforms:C,maxVaryings:y,maxFragmentUniforms:b,vertexTextures:O,floatFragmentTextures:P,floatVertexTextures:F,maxSamples:p}}function e1(r){const e=this;let t=null,n=0,i=!1,a=!1;const o=new ar,l=new yn,c={value:null,needsUpdate:!1};this.uniform=c,this.numPlanes=0,this.numIntersection=0,this.init=function(m,g,_){const M=m.length!==0||g||n!==0||i;return i=g,t=f(m,_,0),n=m.length,M},this.beginShadows=function(){a=!0,f(null)},this.endShadows=function(){a=!1,h()},this.setState=function(m,g,_){const M=m.clippingPlanes,x=m.clipIntersection,C=m.clipShadows,y=r.get(m);if(!i||M===null||M.length===0||a&&!C)a?f(null):h();else{const b=a?0:n,O=b*4;let P=y.clippingState||null;c.value=P,P=f(M,g,O,_);for(let F=0;F!==O;++F)P[F]=t[F];y.clippingState=P,this.numIntersection=x?this.numPlanes:0,this.numPlanes+=b}};function h(){c.value!==t&&(c.value=t,c.needsUpdate=n>0),e.numPlanes=n,e.numIntersection=0}function f(m,g,_,M){const x=m!==null?m.length:0;let C=null;if(x!==0){if(C=c.value,M!==!0||C===null){const y=_+x*4,b=g.matrixWorldInverse;l.getNormalMatrix(b),(C===null||C.length<y)&&(C=new Float32Array(y));for(let O=0,P=_;O!==x;++O,P+=4)o.copy(m[O]).applyMatrix4(b,l),o.normal.toArray(C,P),C[P+3]=o.constant}c.value=C,c.needsUpdate=!0}return e.numPlanes=x,e.numIntersection=0,C}}function t1(r){let e=new WeakMap;function t(o,l){return l===ch?o.mapping=zo:l===uh&&(o.mapping=Bo),o}function n(o){if(o&&o.isTexture&&o.isRenderTargetTexture===!1){const l=o.mapping;if(l===ch||l===uh)if(e.has(o)){const c=e.get(o).texture;return t(c,o.mapping)}else{const c=o.image;if(c&&c.height>0){const h=r.getRenderTarget(),f=new s_(c.height/2);return f.fromEquirectangularTexture(r,o),e.set(o,f),r.setRenderTarget(h),o.addEventListener("dispose",i),t(f.texture,o.mapping)}else return null}}return o}function i(o){const l=o.target;l.removeEventListener("dispose",i);const c=e.get(l);c!==void 0&&(e.delete(l),c.dispose())}function a(){e=new WeakMap}return{get:n,dispose:a}}class Ss extends Df{constructor(e=-1,t=1,n=1,i=-1,a=.1,o=2e3){super(),this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=n,this.bottom=i,this.near=a,this.far=o,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,t,n,i,a,o){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=i,this.view.width=a,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,i=(this.top+this.bottom)/2;let a=n-e,o=n+e,l=i+t,c=i-t;if(this.view!==null&&this.view.enabled){const h=(this.right-this.left)/this.view.fullWidth/this.zoom,f=(this.top-this.bottom)/this.view.fullHeight/this.zoom;a+=h*this.view.offsetX,o=a+h*this.view.width,l-=f*this.view.offsetY,c=l-f*this.view.height}this.projectionMatrix.makeOrthographic(a,o,l,c,this.near,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,this.view!==null&&(t.object.view=Object.assign({},this.view)),t}}Ss.prototype.isOrthographicCamera=!0;class Tc extends Pi{constructor(e){super(e),this.type="RawShaderMaterial"}}Tc.prototype.isRawShaderMaterial=!0;const oa=4,Rr=8,zi=Math.pow(2,Rr),o_=[.125,.215,.35,.446,.526,.582],l_=Rr-oa+1+o_.length,Hs=20,_s={[qn]:0,[wc]:1,[Rf]:2,[Qv]:3,[Kv]:4,[e_]:5,[Lf]:6},Du=new Ss,{_lodPlanes:ja,_sizeLods:Mp,_sigmas:xl}=r1(),Sp=new $e;let Nu=null;const ss=(1+Math.sqrt(5))/2,Vs=1/ss,Tp=[new j(1,1,1),new j(-1,1,1),new j(1,1,-1),new j(-1,1,-1),new j(0,ss,Vs),new j(0,ss,-Vs),new j(Vs,0,ss),new j(-Vs,0,ss),new j(ss,Vs,0),new j(-ss,Vs,0)];class n1{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._blurMaterial=s1(Hs),this._equirectShader=null,this._cubemapShader=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,n=.1,i=100){Nu=this._renderer.getRenderTarget();const a=this._allocateTargets();return this._sceneToCubeUV(e,n,i,a),t>0&&this._blur(a,0,0,t),this._applyPMREM(a),this._cleanup(a),a}fromEquirectangular(e){return this._fromTexture(e)}fromCubemap(e){return this._fromTexture(e)}compileCubemapShader(){this._cubemapShader===null&&(this._cubemapShader=Cp(),this._compileMaterial(this._cubemapShader))}compileEquirectangularShader(){this._equirectShader===null&&(this._equirectShader=Ap(),this._compileMaterial(this._equirectShader))}dispose(){this._blurMaterial.dispose(),this._cubemapShader!==null&&this._cubemapShader.dispose(),this._equirectShader!==null&&this._equirectShader.dispose();for(let e=0;e<ja.length;e++)ja[e].dispose()}_cleanup(e){this._pingPongRenderTarget.dispose(),this._renderer.setRenderTarget(Nu),e.scissorTest=!1,wl(e,0,0,e.width,e.height)}_fromTexture(e){Nu=this._renderer.getRenderTarget();const t=this._allocateTargets(e);return this._textureToCubeUV(e,t),this._applyPMREM(t),this._cleanup(t),t}_allocateTargets(e){const t={magFilter:dn,minFilter:dn,generateMipmaps:!1,type:zr,format:hw,encoding:i1(e)?e.encoding:Rf,depthBuffer:!1},n=Ep(t);return n.depthBuffer=!e,this._pingPongRenderTarget=Ep(t),n}_compileMaterial(e){const t=new pn(ja[0],e);this._renderer.compile(t,Du)}_sceneToCubeUV(e,t,n,i){const l=new Fn(90,1,t,n),c=[1,-1,1,1,1,1],h=[1,1,1,-1,-1,-1],f=this._renderer,m=f.autoClear,g=f.outputEncoding,_=f.toneMapping;f.getClearColor(Sp),f.toneMapping=ds,f.outputEncoding=qn,f.autoClear=!1;const M=new If({name:"PMREM.Background",side:ln,depthWrite:!1,depthTest:!1}),x=new pn(new ko,M);let C=!1;const y=e.background;y?y.isColor&&(M.color.copy(y),e.background=null,C=!0):(M.color.copy(Sp),C=!0);for(let b=0;b<6;b++){const O=b%3;O==0?(l.up.set(0,c[b],0),l.lookAt(h[b],0,0)):O==1?(l.up.set(0,0,c[b]),l.lookAt(0,h[b],0)):(l.up.set(0,c[b],0),l.lookAt(0,0,h[b])),wl(i,O*zi,b>2?zi:0,zi,zi),f.setRenderTarget(i),C&&f.render(x,l),f.render(e,l)}x.geometry.dispose(),x.material.dispose(),f.toneMapping=_,f.outputEncoding=g,f.autoClear=m,e.background=y}_setEncoding(e,t){e.value=_s[t.encoding]}_textureToCubeUV(e,t){const n=this._renderer,i=e.mapping===zo||e.mapping===Bo;i?this._cubemapShader==null&&(this._cubemapShader=Cp()):this._equirectShader==null&&(this._equirectShader=Ap());const a=i?this._cubemapShader:this._equirectShader,o=new pn(ja[0],a),l=a.uniforms;l.envMap.value=e,i||l.texelSize.value.set(1/e.image.width,1/e.image.height),this._setEncoding(l.inputEncoding,e),this._setEncoding(l.outputEncoding,t.texture),wl(t,0,0,3*zi,2*zi),n.setRenderTarget(t),n.render(o,Du)}_applyPMREM(e){const t=this._renderer,n=t.autoClear;t.autoClear=!1;for(let i=1;i<l_;i++){const a=Math.sqrt(xl[i]*xl[i]-xl[i-1]*xl[i-1]),o=Tp[(i-1)%Tp.length];this._blur(e,i-1,i,a,o)}t.autoClear=n}_blur(e,t,n,i,a){const o=this._pingPongRenderTarget;this._halfBlur(e,o,t,n,i,"latitudinal",a),this._halfBlur(o,e,n,n,i,"longitudinal",a)}_halfBlur(e,t,n,i,a,o,l){const c=this._renderer,h=this._blurMaterial;o!=="latitudinal"&&o!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const f=3,m=new pn(ja[i],h),g=h.uniforms,_=Mp[n]-1,M=isFinite(a)?Math.PI/(2*_):2*Math.PI/(2*Hs-1),x=a/M,C=isFinite(a)?1+Math.floor(f*x):Hs;C>Hs&&console.warn(`sigmaRadians, ${a}, is too large and will clip, as it requested ${C} samples when the maximum is set to ${Hs}`);const y=[];let b=0;for(let p=0;p<Hs;++p){const L=p/x,W=Math.exp(-L*L/2);y.push(W),p==0?b+=W:p<C&&(b+=2*W)}for(let p=0;p<y.length;p++)y[p]=y[p]/b;g.envMap.value=e.texture,g.samples.value=C,g.weights.value=y,g.latitudinal.value=o==="latitudinal",l&&(g.poleAxis.value=l),g.dTheta.value=M,g.mipInt.value=Rr-n,this._setEncoding(g.inputEncoding,e.texture),this._setEncoding(g.outputEncoding,e.texture);const O=Mp[i],P=3*Math.max(0,zi-2*O),F=(i===0?0:2*zi)+2*O*(i>Rr-oa?i-Rr+oa:0);wl(t,P,F,3*O,2*O),c.setRenderTarget(t),c.render(m,Du)}}function i1(r){return r===void 0||r.type!==zr?!1:r.encoding===qn||r.encoding===wc||r.encoding===Lf}function r1(){const r=[],e=[],t=[];let n=Rr;for(let i=0;i<l_;i++){const a=Math.pow(2,n);e.push(a);let o=1/a;i>Rr-oa?o=o_[i-Rr+oa-1]:i==0&&(o=0),t.push(o);const l=1/(a-1),c=-l/2,h=1+l/2,f=[c,c,h,c,h,h,c,c,h,h,c,h],m=6,g=6,_=3,M=2,x=1,C=new Float32Array(_*g*m),y=new Float32Array(M*g*m),b=new Float32Array(x*g*m);for(let P=0;P<m;P++){const F=P%3*2/3-1,p=P>2?0:-1,L=[F,p,0,F+2/3,p,0,F+2/3,p+1,0,F,p,0,F+2/3,p+1,0,F,p+1,0];C.set(L,_*g*P),y.set(f,M*g*P);const W=[P,P,P,P,P,P];b.set(W,x*g*P)}const O=new Gt;O.setAttribute("position",new un(C,_)),O.setAttribute("uv",new un(y,M)),O.setAttribute("faceIndex",new un(b,x)),r.push(O),n>oa&&n--}return{_lodPlanes:r,_sizeLods:e,_sigmas:t}}function Ep(r){const e=new vi(3*zi,3*zi,r);return e.texture.mapping=yc,e.texture.name="PMREM.cubeUv",e.scissorTest=!0,e}function wl(r,e,t,n,i){r.viewport.set(e,t,n,i),r.scissor.set(e,t,n,i)}function s1(r){const e=new Float32Array(r),t=new j(0,1,0);return new Tc({name:"SphericalGaussianBlur",defines:{n:r},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:e},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:t},inputEncoding:{value:_s[qn]},outputEncoding:{value:_s[qn]}},vertexShader:Of(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			${Ff()}

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

				gl_FragColor = linearToOutputTexel( gl_FragColor );

			}
		`,blending:Lr,depthTest:!1,depthWrite:!1})}function Ap(){const r=new Pe(1,1);return new Tc({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null},texelSize:{value:r},inputEncoding:{value:_s[qn]},outputEncoding:{value:_s[qn]}},vertexShader:Of(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform vec2 texelSize;

			${Ff()}

			#include <common>

			void main() {

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				vec2 f = fract( uv / texelSize - 0.5 );
				uv -= f * texelSize;
				vec3 tl = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;
				uv.x += texelSize.x;
				vec3 tr = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;
				uv.y += texelSize.y;
				vec3 br = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;
				uv.x -= texelSize.x;
				vec3 bl = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;

				vec3 tm = mix( tl, tr, f.x );
				vec3 bm = mix( bl, br, f.x );
				gl_FragColor.rgb = mix( tm, bm, f.y );

				gl_FragColor = linearToOutputTexel( gl_FragColor );

			}
		`,blending:Lr,depthTest:!1,depthWrite:!1})}function Cp(){return new Tc({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},inputEncoding:{value:_s[qn]},outputEncoding:{value:_s[qn]}},vertexShader:Of(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			${Ff()}

			void main() {

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb = envMapTexelToLinear( textureCube( envMap, vec3( - vOutputDirection.x, vOutputDirection.yz ) ) ).rgb;
				gl_FragColor = linearToOutputTexel( gl_FragColor );

			}
		`,blending:Lr,depthTest:!1,depthWrite:!1})}function Of(){return`

		precision mediump float;
		precision mediump int;

		attribute vec3 position;
		attribute vec2 uv;
		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function Ff(){return`

		uniform int inputEncoding;
		uniform int outputEncoding;

		#include <encodings_pars_fragment>

		vec4 inputTexelToLinear( vec4 value ) {

			if ( inputEncoding == 0 ) {

				return value;

			} else if ( inputEncoding == 1 ) {

				return sRGBToLinear( value );

			} else if ( inputEncoding == 2 ) {

				return RGBEToLinear( value );

			} else if ( inputEncoding == 3 ) {

				return RGBMToLinear( value, 7.0 );

			} else if ( inputEncoding == 4 ) {

				return RGBMToLinear( value, 16.0 );

			} else if ( inputEncoding == 5 ) {

				return RGBDToLinear( value, 256.0 );

			} else {

				return GammaToLinear( value, 2.2 );

			}

		}

		vec4 linearToOutputTexel( vec4 value ) {

			if ( outputEncoding == 0 ) {

				return value;

			} else if ( outputEncoding == 1 ) {

				return LinearTosRGB( value );

			} else if ( outputEncoding == 2 ) {

				return LinearToRGBE( value );

			} else if ( outputEncoding == 3 ) {

				return LinearToRGBM( value, 7.0 );

			} else if ( outputEncoding == 4 ) {

				return LinearToRGBM( value, 16.0 );

			} else if ( outputEncoding == 5 ) {

				return LinearToRGBD( value, 256.0 );

			} else {

				return LinearToGamma( value, 2.2 );

			}

		}

		vec4 envMapTexelToLinear( vec4 color ) {

			return inputTexelToLinear( color );

		}
	`}function a1(r){let e=new WeakMap,t=null;function n(l){if(l&&l.isTexture&&l.isRenderTargetTexture===!1){const c=l.mapping,h=c===ch||c===uh,f=c===zo||c===Bo;if(h||f){if(e.has(l))return e.get(l).texture;{const m=l.image;if(h&&m&&m.height>0||f&&m&&i(m)){const g=r.getRenderTarget();t===null&&(t=new n1(r));const _=h?t.fromEquirectangular(l):t.fromCubemap(l);return e.set(l,_),r.setRenderTarget(g),l.addEventListener("dispose",a),_.texture}else return null}}}return l}function i(l){let c=0;const h=6;for(let f=0;f<h;f++)l[f]!==void 0&&c++;return c===h}function a(l){const c=l.target;c.removeEventListener("dispose",a);const h=e.get(c);h!==void 0&&(e.delete(c),h.dispose())}function o(){e=new WeakMap,t!==null&&(t.dispose(),t=null)}return{get:n,dispose:o}}function o1(r){const e={};function t(n){if(e[n]!==void 0)return e[n];let i;switch(n){case"WEBGL_depth_texture":i=r.getExtension("WEBGL_depth_texture")||r.getExtension("MOZ_WEBGL_depth_texture")||r.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":i=r.getExtension("EXT_texture_filter_anisotropic")||r.getExtension("MOZ_EXT_texture_filter_anisotropic")||r.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":i=r.getExtension("WEBGL_compressed_texture_s3tc")||r.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||r.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":i=r.getExtension("WEBGL_compressed_texture_pvrtc")||r.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:i=r.getExtension(n)}return e[n]=i,i}return{has:function(n){return t(n)!==null},init:function(n){n.isWebGL2?t("EXT_color_buffer_float"):(t("WEBGL_depth_texture"),t("OES_texture_float"),t("OES_texture_half_float"),t("OES_texture_half_float_linear"),t("OES_standard_derivatives"),t("OES_element_index_uint"),t("OES_vertex_array_object"),t("ANGLE_instanced_arrays")),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float"),t("WEBGL_multisampled_render_to_texture")},get:function(n){const i=t(n);return i===null&&console.warn("THREE.WebGLRenderer: "+n+" extension not supported."),i}}}function l1(r,e,t,n){const i={},a=new WeakMap;function o(m){const g=m.target;g.index!==null&&e.remove(g.index);for(const M in g.attributes)e.remove(g.attributes[M]);g.removeEventListener("dispose",o),delete i[g.id];const _=a.get(g);_&&(e.remove(_),a.delete(g)),n.releaseStatesOfGeometry(g),g.isInstancedBufferGeometry===!0&&delete g._maxInstanceCount,t.memory.geometries--}function l(m,g){return i[g.id]===!0||(g.addEventListener("dispose",o),i[g.id]=!0,t.memory.geometries++),g}function c(m){const g=m.attributes;for(const M in g)e.update(g[M],34962);const _=m.morphAttributes;for(const M in _){const x=_[M];for(let C=0,y=x.length;C<y;C++)e.update(x[C],34962)}}function h(m){const g=[],_=m.index,M=m.attributes.position;let x=0;if(_!==null){const b=_.array;x=_.version;for(let O=0,P=b.length;O<P;O+=3){const F=b[O+0],p=b[O+1],L=b[O+2];g.push(F,p,p,L,L,F)}}else{const b=M.array;x=M.version;for(let O=0,P=b.length/3-1;O<P;O+=3){const F=O+0,p=O+1,L=O+2;g.push(F,p,p,L,L,F)}}const C=new(t_(g)>65535?r_:i_)(g,1);C.version=x;const y=a.get(m);y&&e.remove(y),a.set(m,C)}function f(m){const g=a.get(m);if(g){const _=m.index;_!==null&&g.version<_.version&&h(m)}else h(m);return a.get(m)}return{get:l,update:c,getWireframeAttribute:f}}function c1(r,e,t,n){const i=n.isWebGL2;let a;function o(g){a=g}let l,c;function h(g){l=g.type,c=g.bytesPerElement}function f(g,_){r.drawElements(a,_,l,g*c),t.update(_,a,1)}function m(g,_,M){if(M===0)return;let x,C;if(i)x=r,C="drawElementsInstanced";else if(x=e.get("ANGLE_instanced_arrays"),C="drawElementsInstancedANGLE",x===null){console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}x[C](a,_,l,g*c,M),t.update(_,a,M)}this.setMode=o,this.setIndex=h,this.render=f,this.renderInstances=m}function u1(r){const e={geometries:0,textures:0},t={frame:0,calls:0,triangles:0,points:0,lines:0};function n(a,o,l){switch(t.calls++,o){case 4:t.triangles+=l*(a/3);break;case 1:t.lines+=l*(a/2);break;case 3:t.lines+=l*(a-1);break;case 2:t.lines+=l*a;break;case 0:t.points+=l*a;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",o);break}}function i(){t.frame++,t.calls=0,t.triangles=0,t.points=0,t.lines=0}return{memory:e,render:t,programs:null,autoReset:!0,reset:i,update:n}}class zf extends tn{constructor(e=null,t=1,n=1,i=1){super(null),this.image={data:e,width:t,height:n,depth:i},this.magFilter=dn,this.minFilter=dn,this.wrapR=ii,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.needsUpdate=!0}}zf.prototype.isDataTexture2DArray=!0;function h1(r,e){return r[0]-e[0]}function f1(r,e){return Math.abs(e[1])-Math.abs(r[1])}function Lp(r,e){let t=1;const n=e.isInterleavedBufferAttribute?e.data.array:e.array;n instanceof Int8Array?t=127:n instanceof Int16Array?t=32767:n instanceof Int32Array?t=2147483647:console.error("THREE.WebGLMorphtargets: Unsupported morph attribute data type: ",n),r.divideScalar(t)}function d1(r,e,t){const n={},i=new Float32Array(8),a=new WeakMap,o=new j,l=[];for(let h=0;h<8;h++)l[h]=[h,0];function c(h,f,m,g){const _=h.morphTargetInfluences;if(e.isWebGL2===!0){const M=f.morphAttributes.position.length;let x=a.get(f);if(x===void 0||x.count!==M){x!==void 0&&x.texture.dispose();const b=f.morphAttributes.normal!==void 0,O=f.morphAttributes.position,P=f.morphAttributes.normal||[],F=f.attributes.position.count,p=b===!0?2:1;let L=F*p,W=1;L>e.maxTextureSize&&(W=Math.ceil(L/e.maxTextureSize),L=e.maxTextureSize);const X=new Float32Array(L*W*4*M),oe=new zf(X,L,W,M);oe.format=Ln,oe.type=Mr;const q=p*4;for(let ye=0;ye<M;ye++){const ie=O[ye],ne=P[ye],re=L*W*4*ye;for(let ae=0;ae<ie.count;ae++){o.fromBufferAttribute(ie,ae),ie.normalized===!0&&Lp(o,ie);const se=ae*q;X[re+se+0]=o.x,X[re+se+1]=o.y,X[re+se+2]=o.z,X[re+se+3]=0,b===!0&&(o.fromBufferAttribute(ne,ae),ne.normalized===!0&&Lp(o,ne),X[re+se+4]=o.x,X[re+se+5]=o.y,X[re+se+6]=o.z,X[re+se+7]=0)}}x={count:M,texture:oe,size:new Pe(L,W)},a.set(f,x)}let C=0;for(let b=0;b<_.length;b++)C+=_[b];const y=f.morphTargetsRelative?1:1-C;g.getUniforms().setValue(r,"morphTargetBaseInfluence",y),g.getUniforms().setValue(r,"morphTargetInfluences",_),g.getUniforms().setValue(r,"morphTargetsTexture",x.texture,t),g.getUniforms().setValue(r,"morphTargetsTextureSize",x.size)}else{const M=_===void 0?0:_.length;let x=n[f.id];if(x===void 0||x.length!==M){x=[];for(let P=0;P<M;P++)x[P]=[P,0];n[f.id]=x}for(let P=0;P<M;P++){const F=x[P];F[0]=P,F[1]=_[P]}x.sort(f1);for(let P=0;P<8;P++)P<M&&x[P][1]?(l[P][0]=x[P][0],l[P][1]=x[P][1]):(l[P][0]=Number.MAX_SAFE_INTEGER,l[P][1]=0);l.sort(h1);const C=f.morphAttributes.position,y=f.morphAttributes.normal;let b=0;for(let P=0;P<8;P++){const F=l[P],p=F[0],L=F[1];p!==Number.MAX_SAFE_INTEGER&&L?(C&&f.getAttribute("morphTarget"+P)!==C[p]&&f.setAttribute("morphTarget"+P,C[p]),y&&f.getAttribute("morphNormal"+P)!==y[p]&&f.setAttribute("morphNormal"+P,y[p]),i[P]=L,b+=L):(C&&f.hasAttribute("morphTarget"+P)===!0&&f.deleteAttribute("morphTarget"+P),y&&f.hasAttribute("morphNormal"+P)===!0&&f.deleteAttribute("morphNormal"+P),i[P]=0)}const O=f.morphTargetsRelative?1:1-b;g.getUniforms().setValue(r,"morphTargetBaseInfluence",O),g.getUniforms().setValue(r,"morphTargetInfluences",i)}}return{update:c}}function p1(r,e,t,n){let i=new WeakMap;function a(c){const h=n.render.frame,f=c.geometry,m=e.get(c,f);return i.get(m)!==h&&(e.update(m),i.set(m,h)),c.isInstancedMesh&&(c.hasEventListener("dispose",l)===!1&&c.addEventListener("dispose",l),t.update(c.instanceMatrix,34962),c.instanceColor!==null&&t.update(c.instanceColor,34962)),m}function o(){i=new WeakMap}function l(c){const h=c.target;h.removeEventListener("dispose",l),t.remove(h.instanceMatrix),h.instanceColor!==null&&t.remove(h.instanceColor)}return{update:a,dispose:o}}class c_ extends tn{constructor(e=null,t=1,n=1,i=1){super(null),this.image={data:e,width:t,height:n,depth:i},this.magFilter=dn,this.minFilter=dn,this.wrapR=ii,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.needsUpdate=!0}}c_.prototype.isDataTexture3D=!0;const u_=new tn,h_=new zf,f_=new c_,d_=new Mc,Rp=[],Pp=[],Ip=new Float32Array(16),Dp=new Float32Array(9),Np=new Float32Array(4);function Ea(r,e,t){const n=r[0];if(n<=0||n>0)return r;const i=e*t;let a=Rp[i];if(a===void 0&&(a=new Float32Array(i),Rp[i]=a),e!==0){n.toArray(a,0);for(let o=1,l=0;o!==e;++o)l+=t,r[o].toArray(a,l)}return a}function Pn(r,e){if(r.length!==e.length)return!1;for(let t=0,n=r.length;t<n;t++)if(r[t]!==e[t])return!1;return!0}function En(r,e){for(let t=0,n=e.length;t<n;t++)r[t]=e[t]}function Ec(r,e){let t=Pp[e];t===void 0&&(t=new Int32Array(e),Pp[e]=t);for(let n=0;n!==e;++n)t[n]=r.allocateTextureUnit();return t}function m1(r,e){const t=this.cache;t[0]!==e&&(r.uniform1f(this.addr,e),t[0]=e)}function g1(r,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(r.uniform2f(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Pn(t,e))return;r.uniform2fv(this.addr,e),En(t,e)}}function v1(r,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(r.uniform3f(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else if(e.r!==void 0)(t[0]!==e.r||t[1]!==e.g||t[2]!==e.b)&&(r.uniform3f(this.addr,e.r,e.g,e.b),t[0]=e.r,t[1]=e.g,t[2]=e.b);else{if(Pn(t,e))return;r.uniform3fv(this.addr,e),En(t,e)}}function _1(r,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(r.uniform4f(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Pn(t,e))return;r.uniform4fv(this.addr,e),En(t,e)}}function y1(r,e){const t=this.cache,n=e.elements;if(n===void 0){if(Pn(t,e))return;r.uniformMatrix2fv(this.addr,!1,e),En(t,e)}else{if(Pn(t,n))return;Np.set(n),r.uniformMatrix2fv(this.addr,!1,Np),En(t,n)}}function x1(r,e){const t=this.cache,n=e.elements;if(n===void 0){if(Pn(t,e))return;r.uniformMatrix3fv(this.addr,!1,e),En(t,e)}else{if(Pn(t,n))return;Dp.set(n),r.uniformMatrix3fv(this.addr,!1,Dp),En(t,n)}}function w1(r,e){const t=this.cache,n=e.elements;if(n===void 0){if(Pn(t,e))return;r.uniformMatrix4fv(this.addr,!1,e),En(t,e)}else{if(Pn(t,n))return;Ip.set(n),r.uniformMatrix4fv(this.addr,!1,Ip),En(t,n)}}function b1(r,e){const t=this.cache;t[0]!==e&&(r.uniform1i(this.addr,e),t[0]=e)}function M1(r,e){const t=this.cache;Pn(t,e)||(r.uniform2iv(this.addr,e),En(t,e))}function S1(r,e){const t=this.cache;Pn(t,e)||(r.uniform3iv(this.addr,e),En(t,e))}function T1(r,e){const t=this.cache;Pn(t,e)||(r.uniform4iv(this.addr,e),En(t,e))}function E1(r,e){const t=this.cache;t[0]!==e&&(r.uniform1ui(this.addr,e),t[0]=e)}function A1(r,e){const t=this.cache;Pn(t,e)||(r.uniform2uiv(this.addr,e),En(t,e))}function C1(r,e){const t=this.cache;Pn(t,e)||(r.uniform3uiv(this.addr,e),En(t,e))}function L1(r,e){const t=this.cache;Pn(t,e)||(r.uniform4uiv(this.addr,e),En(t,e))}function R1(r,e,t){const n=this.cache,i=t.allocateTextureUnit();n[0]!==i&&(r.uniform1i(this.addr,i),n[0]=i),t.safeSetTexture2D(e||u_,i)}function P1(r,e,t){const n=this.cache,i=t.allocateTextureUnit();n[0]!==i&&(r.uniform1i(this.addr,i),n[0]=i),t.setTexture3D(e||f_,i)}function I1(r,e,t){const n=this.cache,i=t.allocateTextureUnit();n[0]!==i&&(r.uniform1i(this.addr,i),n[0]=i),t.safeSetTextureCube(e||d_,i)}function D1(r,e,t){const n=this.cache,i=t.allocateTextureUnit();n[0]!==i&&(r.uniform1i(this.addr,i),n[0]=i),t.setTexture2DArray(e||h_,i)}function N1(r){switch(r){case 5126:return m1;case 35664:return g1;case 35665:return v1;case 35666:return _1;case 35674:return y1;case 35675:return x1;case 35676:return w1;case 5124:case 35670:return b1;case 35667:case 35671:return M1;case 35668:case 35672:return S1;case 35669:case 35673:return T1;case 5125:return E1;case 36294:return A1;case 36295:return C1;case 36296:return L1;case 35678:case 36198:case 36298:case 36306:case 35682:return R1;case 35679:case 36299:case 36307:return P1;case 35680:case 36300:case 36308:case 36293:return I1;case 36289:case 36303:case 36311:case 36292:return D1}}function O1(r,e){r.uniform1fv(this.addr,e)}function F1(r,e){const t=Ea(e,this.size,2);r.uniform2fv(this.addr,t)}function z1(r,e){const t=Ea(e,this.size,3);r.uniform3fv(this.addr,t)}function B1(r,e){const t=Ea(e,this.size,4);r.uniform4fv(this.addr,t)}function k1(r,e){const t=Ea(e,this.size,4);r.uniformMatrix2fv(this.addr,!1,t)}function U1(r,e){const t=Ea(e,this.size,9);r.uniformMatrix3fv(this.addr,!1,t)}function H1(r,e){const t=Ea(e,this.size,16);r.uniformMatrix4fv(this.addr,!1,t)}function V1(r,e){r.uniform1iv(this.addr,e)}function G1(r,e){r.uniform2iv(this.addr,e)}function W1(r,e){r.uniform3iv(this.addr,e)}function j1(r,e){r.uniform4iv(this.addr,e)}function q1(r,e){r.uniform1uiv(this.addr,e)}function X1(r,e){r.uniform2uiv(this.addr,e)}function Y1(r,e){r.uniform3uiv(this.addr,e)}function $1(r,e){r.uniform4uiv(this.addr,e)}function J1(r,e,t){const n=e.length,i=Ec(t,n);r.uniform1iv(this.addr,i);for(let a=0;a!==n;++a)t.safeSetTexture2D(e[a]||u_,i[a])}function Z1(r,e,t){const n=e.length,i=Ec(t,n);r.uniform1iv(this.addr,i);for(let a=0;a!==n;++a)t.setTexture3D(e[a]||f_,i[a])}function Q1(r,e,t){const n=e.length,i=Ec(t,n);r.uniform1iv(this.addr,i);for(let a=0;a!==n;++a)t.safeSetTextureCube(e[a]||d_,i[a])}function K1(r,e,t){const n=e.length,i=Ec(t,n);r.uniform1iv(this.addr,i);for(let a=0;a!==n;++a)t.setTexture2DArray(e[a]||h_,i[a])}function eT(r){switch(r){case 5126:return O1;case 35664:return F1;case 35665:return z1;case 35666:return B1;case 35674:return k1;case 35675:return U1;case 35676:return H1;case 5124:case 35670:return V1;case 35667:case 35671:return G1;case 35668:case 35672:return W1;case 35669:case 35673:return j1;case 5125:return q1;case 36294:return X1;case 36295:return Y1;case 36296:return $1;case 35678:case 36198:case 36298:case 36306:case 35682:return J1;case 35679:case 36299:case 36307:return Z1;case 35680:case 36300:case 36308:case 36293:return Q1;case 36289:case 36303:case 36311:case 36292:return K1}}function tT(r,e,t){this.id=r,this.addr=t,this.cache=[],this.setValue=N1(e.type)}function p_(r,e,t){this.id=r,this.addr=t,this.cache=[],this.size=e.size,this.setValue=eT(e.type)}p_.prototype.updateCache=function(r){const e=this.cache;r instanceof Float32Array&&e.length!==r.length&&(this.cache=new Float32Array(r.length)),En(e,r)};function m_(r){this.id=r,this.seq=[],this.map={}}m_.prototype.setValue=function(r,e,t){const n=this.seq;for(let i=0,a=n.length;i!==a;++i){const o=n[i];o.setValue(r,e[o.id],t)}};const Ou=/(\w+)(\])?(\[|\.)?/g;function Op(r,e){r.seq.push(e),r.map[e.id]=e}function nT(r,e,t){const n=r.name,i=n.length;for(Ou.lastIndex=0;;){const a=Ou.exec(n),o=Ou.lastIndex;let l=a[1];const c=a[2]==="]",h=a[3];if(c&&(l=l|0),h===void 0||h==="["&&o+2===i){Op(t,h===void 0?new tT(l,r,e):new p_(l,r,e));break}else{let m=t.map[l];m===void 0&&(m=new m_(l),Op(t,m)),t=m}}}function Pr(r,e){this.seq=[],this.map={};const t=r.getProgramParameter(e,35718);for(let n=0;n<t;++n){const i=r.getActiveUniform(e,n),a=r.getUniformLocation(e,i.name);nT(i,a,this)}}Pr.prototype.setValue=function(r,e,t,n){const i=this.map[e];i!==void 0&&i.setValue(r,t,n)};Pr.prototype.setOptional=function(r,e,t){const n=e[t];n!==void 0&&this.setValue(r,t,n)};Pr.upload=function(r,e,t,n){for(let i=0,a=e.length;i!==a;++i){const o=e[i],l=t[o.id];l.needsUpdate!==!1&&o.setValue(r,l.value,n)}};Pr.seqWithValue=function(r,e){const t=[];for(let n=0,i=r.length;n!==i;++n){const a=r[n];a.id in e&&t.push(a)}return t};function Fp(r,e,t){const n=r.createShader(e);return r.shaderSource(n,t),r.compileShader(n),n}let iT=0;function rT(r){const e=r.split(`
`);for(let t=0;t<e.length;t++)e[t]=t+1+": "+e[t];return e.join(`
`)}function g_(r){switch(r){case qn:return["Linear","( value )"];case wc:return["sRGB","( value )"];case Rf:return["RGBE","( value )"];case Qv:return["RGBM","( value, 7.0 )"];case Kv:return["RGBM","( value, 16.0 )"];case e_:return["RGBD","( value, 256.0 )"];case Lf:return["Gamma","( value, float( GAMMA_FACTOR ) )"];default:return console.warn("THREE.WebGLProgram: Unsupported encoding:",r),["Linear","( value )"]}}function zp(r,e,t){const n=r.getShaderParameter(e,35713),i=r.getShaderInfoLog(e).trim();return n&&i===""?"":t.toUpperCase()+`

`+i+`

`+rT(r.getShaderSource(e))}function is(r,e){const t=g_(e);return"vec4 "+r+"( vec4 value ) { return "+t[0]+"ToLinear"+t[1]+"; }"}function sT(r,e){const t=g_(e);return"vec4 "+r+"( vec4 value ) { return LinearTo"+t[0]+t[1]+"; }"}function aT(r,e){let t;switch(e){case Jx:t="Linear";break;case Zx:t="Reinhard";break;case Qx:t="OptimizedCineon";break;case Kx:t="ACESFilmic";break;case ew:t="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),t="Linear"}return"vec3 "+r+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}function oT(r){return[r.extensionDerivatives||r.envMapCubeUV||r.bumpMap||r.tangentSpaceNormalMap||r.clearcoatNormalMap||r.flatShading||r.shaderID==="physical"?"#extension GL_OES_standard_derivatives : enable":"",(r.extensionFragDepth||r.logarithmicDepthBuffer)&&r.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",r.extensionDrawBuffers&&r.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(r.extensionShaderTextureLOD||r.envMap||r.transmission)&&r.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(no).join(`
`)}function lT(r){const e=[];for(const t in r){const n=r[t];n!==!1&&e.push("#define "+t+" "+n)}return e.join(`
`)}function cT(r,e){const t={},n=r.getProgramParameter(e,35721);for(let i=0;i<n;i++){const a=r.getActiveAttrib(e,i),o=a.name;let l=1;a.type===35674&&(l=2),a.type===35675&&(l=3),a.type===35676&&(l=4),t[o]={type:a.type,location:r.getAttribLocation(e,o),locationSize:l}}return t}function no(r){return r!==""}function Bp(r,e){return r.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function kp(r,e){return r.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const uT=/^[ \t]*#include +<([\w\d./]+)>/gm;function dh(r){return r.replace(uT,hT)}function hT(r,e){const t=mt[e];if(t===void 0)throw new Error("Can not resolve #include <"+e+">");return dh(t)}const fT=/#pragma unroll_loop[\s]+?for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g,dT=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function Up(r){return r.replace(dT,v_).replace(fT,pT)}function pT(r,e,t,n){return console.warn("WebGLProgram: #pragma unroll_loop shader syntax is deprecated. Please use #pragma unroll_loop_start syntax instead."),v_(r,e,t,n)}function v_(r,e,t,n){let i="";for(let a=parseInt(e);a<parseInt(t);a++)i+=n.replace(/\[\s*i\s*\]/g,"[ "+a+" ]").replace(/UNROLLED_LOOP_INDEX/g,a);return i}function Hp(r){let e="precision "+r.precision+` float;
precision `+r.precision+" int;";return r.precision==="highp"?e+=`
#define HIGH_PRECISION`:r.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:r.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function mT(r){let e="SHADOWMAP_TYPE_BASIC";return r.shadowMapType===qv?e="SHADOWMAP_TYPE_PCF":r.shadowMapType===Cx?e="SHADOWMAP_TYPE_PCF_SOFT":r.shadowMapType===to&&(e="SHADOWMAP_TYPE_VSM"),e}function gT(r){let e="ENVMAP_TYPE_CUBE";if(r.envMap)switch(r.envMapMode){case zo:case Bo:e="ENVMAP_TYPE_CUBE";break;case yc:case Af:e="ENVMAP_TYPE_CUBE_UV";break}return e}function vT(r){let e="ENVMAP_MODE_REFLECTION";if(r.envMap)switch(r.envMapMode){case Bo:case Af:e="ENVMAP_MODE_REFRACTION";break}return e}function _T(r){let e="ENVMAP_BLENDING_NONE";if(r.envMap)switch(r.combine){case _c:e="ENVMAP_BLENDING_MULTIPLY";break;case Yx:e="ENVMAP_BLENDING_MIX";break;case $x:e="ENVMAP_BLENDING_ADD";break}return e}function yT(r,e,t,n){const i=r.getContext(),a=t.defines;let o=t.vertexShader,l=t.fragmentShader;const c=mT(t),h=gT(t),f=vT(t),m=_T(t),g=r.gammaFactor>0?r.gammaFactor:1,_=t.isWebGL2?"":oT(t),M=lT(a),x=i.createProgram();let C,y,b=t.glslVersion?"#version "+t.glslVersion+`
`:"";t.isRawShaderMaterial?(C=[M].filter(no).join(`
`),C.length>0&&(C+=`
`),y=[_,M].filter(no).join(`
`),y.length>0&&(y+=`
`)):(C=[Hp(t),"#define SHADER_NAME "+t.shaderName,M,t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.supportsVertexTextures?"#define VERTEX_TEXTURES":"","#define GAMMA_FACTOR "+g,"#define MAX_BONES "+t.maxBones,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+f:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMap&&t.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",t.normalMap&&t.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.displacementMap&&t.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",t.specularColorMap?"#define USE_SPECULARCOLORMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.sheenColorMap?"#define USE_SHEENCOLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",t.vertexTangents?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUvs?"#define USE_UV":"",t.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.useVertexTexture?"#define BONE_TEXTURE":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&t.flatShading===!1?"#define USE_MORPHNORMALS":"",t.morphTargets&&t.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",t.morphTargets&&t.isWebGL2?"#define MORPHTARGETS_COUNT "+t.morphTargetsCount:"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+c:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","	attribute vec3 morphTarget0;","	attribute vec3 morphTarget1;","	attribute vec3 morphTarget2;","	attribute vec3 morphTarget3;","	#ifdef USE_MORPHNORMALS","		attribute vec3 morphNormal0;","		attribute vec3 morphNormal1;","		attribute vec3 morphNormal2;","		attribute vec3 morphNormal3;","	#else","		attribute vec3 morphTarget4;","		attribute vec3 morphTarget5;","		attribute vec3 morphTarget6;","		attribute vec3 morphTarget7;","	#endif","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(no).join(`
`),y=[_,Hp(t),"#define SHADER_NAME "+t.shaderName,M,"#define GAMMA_FACTOR "+g,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+h:"",t.envMap?"#define "+f:"",t.envMap?"#define "+m:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMap&&t.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",t.normalMap&&t.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",t.clearcoat?"#define USE_CLEARCOAT":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",t.specularColorMap?"#define USE_SPECULARCOLORMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaTest?"#define USE_ALPHATEST":"",t.sheen?"#define USE_SHEEN":"",t.sheenColorMap?"#define USE_SHEENCOLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.vertexTangents?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUvs?"#define USE_UV":"",t.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+c:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",t.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"",(t.extensionShaderTextureLOD||t.envMap)&&t.rendererExtensionShaderTextureLod?"#define TEXTURE_LOD_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",t.toneMapping!==ds?"#define TONE_MAPPING":"",t.toneMapping!==ds?mt.tonemapping_pars_fragment:"",t.toneMapping!==ds?aT("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",t.format===ps?"#define OPAQUE":"",mt.encodings_pars_fragment,t.map?is("mapTexelToLinear",t.mapEncoding):"",t.matcap?is("matcapTexelToLinear",t.matcapEncoding):"",t.envMap?is("envMapTexelToLinear",t.envMapEncoding):"",t.emissiveMap?is("emissiveMapTexelToLinear",t.emissiveMapEncoding):"",t.specularColorMap?is("specularColorMapTexelToLinear",t.specularColorMapEncoding):"",t.sheenColorMap?is("sheenColorMapTexelToLinear",t.sheenColorMapEncoding):"",t.lightMap?is("lightMapTexelToLinear",t.lightMapEncoding):"",sT("linearToOutputTexel",t.outputEncoding),t.depthPacking?"#define DEPTH_PACKING "+t.depthPacking:"",`
`].filter(no).join(`
`)),o=dh(o),o=Bp(o,t),o=kp(o,t),l=dh(l),l=Bp(l,t),l=kp(l,t),o=Up(o),l=Up(l),t.isWebGL2&&t.isRawShaderMaterial!==!0&&(b=`#version 300 es
`,C=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+C,y=["#define varying in",t.glslVersion===cp?"":"out highp vec4 pc_fragColor;",t.glslVersion===cp?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+y);const O=b+C+o,P=b+y+l,F=Fp(i,35633,O),p=Fp(i,35632,P);if(i.attachShader(x,F),i.attachShader(x,p),t.index0AttributeName!==void 0?i.bindAttribLocation(x,0,t.index0AttributeName):t.morphTargets===!0&&i.bindAttribLocation(x,0,"position"),i.linkProgram(x),r.debug.checkShaderErrors){const X=i.getProgramInfoLog(x).trim(),oe=i.getShaderInfoLog(F).trim(),q=i.getShaderInfoLog(p).trim();let ye=!0,ie=!0;if(i.getProgramParameter(x,35714)===!1){ye=!1;const ne=zp(i,F,"vertex"),re=zp(i,p,"fragment");console.error("THREE.WebGLProgram: Shader Error "+i.getError()+" - VALIDATE_STATUS "+i.getProgramParameter(x,35715)+`

Program Info Log: `+X+`
`+ne+`
`+re)}else X!==""?console.warn("THREE.WebGLProgram: Program Info Log:",X):(oe===""||q==="")&&(ie=!1);ie&&(this.diagnostics={runnable:ye,programLog:X,vertexShader:{log:oe,prefix:C},fragmentShader:{log:q,prefix:y}})}i.deleteShader(F),i.deleteShader(p);let L;this.getUniforms=function(){return L===void 0&&(L=new Pr(i,x)),L};let W;return this.getAttributes=function(){return W===void 0&&(W=cT(i,x)),W},this.destroy=function(){n.releaseStatesOfProgram(this),i.deleteProgram(x),this.program=void 0},this.name=t.shaderName,this.id=iT++,this.cacheKey=e,this.usedTimes=1,this.program=x,this.vertexShader=F,this.fragmentShader=p,this}function xT(r,e,t,n,i,a,o){const l=[],c=i.isWebGL2,h=i.logarithmicDepthBuffer,f=i.floatVertexTextures,m=i.maxVertexUniforms,g=i.vertexTextures;let _=i.precision;const M={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"},x=["precision","isWebGL2","supportsVertexTextures","outputEncoding","instancing","instancingColor","map","mapEncoding","matcap","matcapEncoding","envMap","envMapMode","envMapEncoding","envMapCubeUV","lightMap","lightMapEncoding","aoMap","emissiveMap","emissiveMapEncoding","bumpMap","normalMap","objectSpaceNormalMap","tangentSpaceNormalMap","clearcoat","clearcoatMap","clearcoatRoughnessMap","clearcoatNormalMap","displacementMap","specularMap",,"roughnessMap","metalnessMap","gradientMap","alphaMap","alphaTest","combine","vertexColors","vertexAlphas","vertexTangents","vertexUvs","uvsVertexOnly","fog","useFog","fogExp2","flatShading","sizeAttenuation","logarithmicDepthBuffer","skinning","maxBones","useVertexTexture","morphTargets","morphNormals","morphTargetsCount","premultipliedAlpha","numDirLights","numPointLights","numSpotLights","numHemiLights","numRectAreaLights","numDirLightShadows","numPointLightShadows","numSpotLightShadows","shadowMapEnabled","shadowMapType","toneMapping","physicallyCorrectLights","doubleSided","flipSided","numClippingPlanes","numClipIntersection","depthPacking","dithering","format","specularIntensityMap","specularColorMap","specularColorMapEncoding","transmission","transmissionMap","thicknessMap","sheen","sheenColorMap","sheenColorMapEncoding","sheenRoughnessMap"];function C(L){const X=L.skeleton.bones;if(f)return 1024;{const q=Math.floor((m-20)/4),ye=Math.min(q,X.length);return ye<X.length?(console.warn("THREE.WebGLRenderer: Skeleton has "+X.length+" bones. This GPU supports "+ye+"."),0):ye}}function y(L){let W;return L&&L.isTexture?W=L.encoding:L&&L.isWebGLRenderTarget?(console.warn("THREE.WebGLPrograms.getTextureEncodingFromMap: don't use render targets as textures. Use their .texture property instead."),W=L.texture.encoding):W=qn,W}function b(L,W,X,oe,q){const ye=oe.fog,ie=L.isMeshStandardMaterial?oe.environment:null,ne=(L.isMeshStandardMaterial?t:e).get(L.envMap||ie),re=M[L.type],ae=q.isSkinnedMesh?C(q):0;L.precision!==null&&(_=i.getMaxPrecision(L.precision),_!==L.precision&&console.warn("THREE.WebGLProgram.getParameters:",L.precision,"not supported, using",_,"instead."));let se,be;if(re){const De=ki[re];se=De.vertexShader,be=De.fragmentShader}else se=L.vertexShader,be=L.fragmentShader;const Oe=r.getRenderTarget(),de=L.alphaTest>0,fe=L.clearcoat>0;return{isWebGL2:c,shaderID:re,shaderName:L.type,vertexShader:se,fragmentShader:be,defines:L.defines,isRawShaderMaterial:L.isRawShaderMaterial===!0,glslVersion:L.glslVersion,precision:_,instancing:q.isInstancedMesh===!0,instancingColor:q.isInstancedMesh===!0&&q.instanceColor!==null,supportsVertexTextures:g,outputEncoding:Oe!==null?y(Oe.texture):r.outputEncoding,map:!!L.map,mapEncoding:y(L.map),matcap:!!L.matcap,matcapEncoding:y(L.matcap),envMap:!!ne,envMapMode:ne&&ne.mapping,envMapEncoding:y(ne),envMapCubeUV:!!ne&&(ne.mapping===yc||ne.mapping===Af),lightMap:!!L.lightMap,lightMapEncoding:y(L.lightMap),aoMap:!!L.aoMap,emissiveMap:!!L.emissiveMap,emissiveMapEncoding:y(L.emissiveMap),bumpMap:!!L.bumpMap,normalMap:!!L.normalMap,objectSpaceNormalMap:L.normalMapType===eb,tangentSpaceNormalMap:L.normalMapType===wa,clearcoat:fe,clearcoatMap:fe&&!!L.clearcoatMap,clearcoatRoughnessMap:fe&&!!L.clearcoatRoughnessMap,clearcoatNormalMap:fe&&!!L.clearcoatNormalMap,displacementMap:!!L.displacementMap,roughnessMap:!!L.roughnessMap,metalnessMap:!!L.metalnessMap,specularMap:!!L.specularMap,specularIntensityMap:!!L.specularIntensityMap,specularColorMap:!!L.specularColorMap,specularColorMapEncoding:y(L.specularColorMap),alphaMap:!!L.alphaMap,alphaTest:de,gradientMap:!!L.gradientMap,sheen:L.sheen>0,sheenColorMap:!!L.sheenColorMap,sheenColorMapEncoding:y(L.sheenColorMap),sheenRoughnessMap:!!L.sheenRoughnessMap,transmission:L.transmission>0,transmissionMap:!!L.transmissionMap,thicknessMap:!!L.thicknessMap,combine:L.combine,vertexTangents:!!L.normalMap&&!!q.geometry&&!!q.geometry.attributes.tangent,vertexColors:L.vertexColors,vertexAlphas:L.vertexColors===!0&&!!q.geometry&&!!q.geometry.attributes.color&&q.geometry.attributes.color.itemSize===4,vertexUvs:!!L.map||!!L.bumpMap||!!L.normalMap||!!L.specularMap||!!L.alphaMap||!!L.emissiveMap||!!L.roughnessMap||!!L.metalnessMap||!!L.clearcoatMap||!!L.clearcoatRoughnessMap||!!L.clearcoatNormalMap||!!L.displacementMap||!!L.transmissionMap||!!L.thicknessMap||!!L.specularIntensityMap||!!L.specularColorMap||!!L.sheenColorMap||L.sheenRoughnessMap,uvsVertexOnly:!(L.map||L.bumpMap||L.normalMap||L.specularMap||L.alphaMap||L.emissiveMap||L.roughnessMap||L.metalnessMap||L.clearcoatNormalMap||L.transmission>0||L.transmissionMap||L.thicknessMap||L.specularIntensityMap||L.specularColorMap||L.sheen>0||L.sheenColorMap||L.sheenRoughnessMap)&&!!L.displacementMap,fog:!!ye,useFog:L.fog,fogExp2:ye&&ye.isFogExp2,flatShading:!!L.flatShading,sizeAttenuation:L.sizeAttenuation,logarithmicDepthBuffer:h,skinning:q.isSkinnedMesh===!0&&ae>0,maxBones:ae,useVertexTexture:f,morphTargets:!!q.geometry&&!!q.geometry.morphAttributes.position,morphNormals:!!q.geometry&&!!q.geometry.morphAttributes.normal,morphTargetsCount:q.geometry&&q.geometry.morphAttributes.position?q.geometry.morphAttributes.position.length:0,numDirLights:W.directional.length,numPointLights:W.point.length,numSpotLights:W.spot.length,numRectAreaLights:W.rectArea.length,numHemiLights:W.hemi.length,numDirLightShadows:W.directionalShadowMap.length,numPointLightShadows:W.pointShadowMap.length,numSpotLightShadows:W.spotShadowMap.length,numClippingPlanes:o.numPlanes,numClipIntersection:o.numIntersection,format:L.format,dithering:L.dithering,shadowMapEnabled:r.shadowMap.enabled&&X.length>0,shadowMapType:r.shadowMap.type,toneMapping:L.toneMapped?r.toneMapping:ds,physicallyCorrectLights:r.physicallyCorrectLights,premultipliedAlpha:L.premultipliedAlpha,doubleSided:L.side===ga,flipSided:L.side===ln,depthPacking:L.depthPacking!==void 0?L.depthPacking:!1,index0AttributeName:L.index0AttributeName,extensionDerivatives:L.extensions&&L.extensions.derivatives,extensionFragDepth:L.extensions&&L.extensions.fragDepth,extensionDrawBuffers:L.extensions&&L.extensions.drawBuffers,extensionShaderTextureLOD:L.extensions&&L.extensions.shaderTextureLOD,rendererExtensionFragDepth:c||n.has("EXT_frag_depth"),rendererExtensionDrawBuffers:c||n.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:c||n.has("EXT_shader_texture_lod"),customProgramCacheKey:L.customProgramCacheKey()}}function O(L){const W=[];if(L.shaderID?W.push(L.shaderID):(W.push(hp(L.fragmentShader)),W.push(hp(L.vertexShader))),L.defines!==void 0)for(const X in L.defines)W.push(X),W.push(L.defines[X]);if(L.isRawShaderMaterial===!1){for(let X=0;X<x.length;X++)W.push(L[x[X]]);W.push(r.outputEncoding),W.push(r.gammaFactor)}return W.push(L.customProgramCacheKey),W.join()}function P(L){const W=M[L.type];let X;if(W){const oe=ki[W];X=_b.clone(oe.uniforms)}else X=L.uniforms;return X}function F(L,W){let X;for(let oe=0,q=l.length;oe<q;oe++){const ye=l[oe];if(ye.cacheKey===W){X=ye,++X.usedTimes;break}}return X===void 0&&(X=new yT(r,W,L,a),l.push(X)),X}function p(L){if(--L.usedTimes===0){const W=l.indexOf(L);l[W]=l[l.length-1],l.pop(),L.destroy()}}return{getParameters:b,getProgramCacheKey:O,getUniforms:P,acquireProgram:F,releaseProgram:p,programs:l}}function wT(){let r=new WeakMap;function e(a){let o=r.get(a);return o===void 0&&(o={},r.set(a,o)),o}function t(a){r.delete(a)}function n(a,o,l){r.get(a)[o]=l}function i(){r=new WeakMap}return{get:e,remove:t,update:n,dispose:i}}function bT(r,e){return r.groupOrder!==e.groupOrder?r.groupOrder-e.groupOrder:r.renderOrder!==e.renderOrder?r.renderOrder-e.renderOrder:r.program!==e.program?r.program.id-e.program.id:r.material.id!==e.material.id?r.material.id-e.material.id:r.z!==e.z?r.z-e.z:r.id-e.id}function Vp(r,e){return r.groupOrder!==e.groupOrder?r.groupOrder-e.groupOrder:r.renderOrder!==e.renderOrder?r.renderOrder-e.renderOrder:r.z!==e.z?e.z-r.z:r.id-e.id}function Gp(r){const e=[];let t=0;const n=[],i=[],a=[],o={id:-1};function l(){t=0,n.length=0,i.length=0,a.length=0}function c(_,M,x,C,y,b){let O=e[t];const P=r.get(x);return O===void 0?(O={id:_.id,object:_,geometry:M,material:x,program:P.program||o,groupOrder:C,renderOrder:_.renderOrder,z:y,group:b},e[t]=O):(O.id=_.id,O.object=_,O.geometry=M,O.material=x,O.program=P.program||o,O.groupOrder=C,O.renderOrder=_.renderOrder,O.z=y,O.group=b),t++,O}function h(_,M,x,C,y,b){const O=c(_,M,x,C,y,b);x.transmission>0?i.push(O):x.transparent===!0?a.push(O):n.push(O)}function f(_,M,x,C,y,b){const O=c(_,M,x,C,y,b);x.transmission>0?i.unshift(O):x.transparent===!0?a.unshift(O):n.unshift(O)}function m(_,M){n.length>1&&n.sort(_||bT),i.length>1&&i.sort(M||Vp),a.length>1&&a.sort(M||Vp)}function g(){for(let _=t,M=e.length;_<M;_++){const x=e[_];if(x.id===null)break;x.id=null,x.object=null,x.geometry=null,x.material=null,x.program=null,x.group=null}}return{opaque:n,transmissive:i,transparent:a,init:l,push:h,unshift:f,finish:g,sort:m}}function MT(r){let e=new WeakMap;function t(i,a){let o;return e.has(i)===!1?(o=new Gp(r),e.set(i,[o])):a>=e.get(i).length?(o=new Gp(r),e.get(i).push(o)):o=e.get(i)[a],o}function n(){e=new WeakMap}return{get:t,dispose:n}}function ST(){const r={};return{get:function(e){if(r[e.id]!==void 0)return r[e.id];let t;switch(e.type){case"DirectionalLight":t={direction:new j,color:new $e};break;case"SpotLight":t={position:new j,direction:new j,color:new $e,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":t={position:new j,color:new $e,distance:0,decay:0};break;case"HemisphereLight":t={direction:new j,skyColor:new $e,groundColor:new $e};break;case"RectAreaLight":t={color:new $e,position:new j,halfWidth:new j,halfHeight:new j};break}return r[e.id]=t,t}}}function TT(){const r={};return{get:function(e){if(r[e.id]!==void 0)return r[e.id];let t;switch(e.type){case"DirectionalLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Pe};break;case"SpotLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Pe};break;case"PointLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Pe,shadowCameraNear:1,shadowCameraFar:1e3};break}return r[e.id]=t,t}}}let ET=0;function AT(r,e){return(e.castShadow?1:0)-(r.castShadow?1:0)}function CT(r,e){const t=new ST,n=TT(),i={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadow:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[]};for(let f=0;f<9;f++)i.probe.push(new j);const a=new j,o=new nt,l=new nt;function c(f,m){let g=0,_=0,M=0;for(let X=0;X<9;X++)i.probe[X].set(0,0,0);let x=0,C=0,y=0,b=0,O=0,P=0,F=0,p=0;f.sort(AT);const L=m!==!0?Math.PI:1;for(let X=0,oe=f.length;X<oe;X++){const q=f[X],ye=q.color,ie=q.intensity,ne=q.distance,re=q.shadow&&q.shadow.map?q.shadow.map.texture:null;if(q.isAmbientLight)g+=ye.r*ie*L,_+=ye.g*ie*L,M+=ye.b*ie*L;else if(q.isLightProbe)for(let ae=0;ae<9;ae++)i.probe[ae].addScaledVector(q.sh.coefficients[ae],ie);else if(q.isDirectionalLight){const ae=t.get(q);if(ae.color.copy(q.color).multiplyScalar(q.intensity*L),q.castShadow){const se=q.shadow,be=n.get(q);be.shadowBias=se.bias,be.shadowNormalBias=se.normalBias,be.shadowRadius=se.radius,be.shadowMapSize=se.mapSize,i.directionalShadow[x]=be,i.directionalShadowMap[x]=re,i.directionalShadowMatrix[x]=q.shadow.matrix,P++}i.directional[x]=ae,x++}else if(q.isSpotLight){const ae=t.get(q);if(ae.position.setFromMatrixPosition(q.matrixWorld),ae.color.copy(ye).multiplyScalar(ie*L),ae.distance=ne,ae.coneCos=Math.cos(q.angle),ae.penumbraCos=Math.cos(q.angle*(1-q.penumbra)),ae.decay=q.decay,q.castShadow){const se=q.shadow,be=n.get(q);be.shadowBias=se.bias,be.shadowNormalBias=se.normalBias,be.shadowRadius=se.radius,be.shadowMapSize=se.mapSize,i.spotShadow[y]=be,i.spotShadowMap[y]=re,i.spotShadowMatrix[y]=q.shadow.matrix,p++}i.spot[y]=ae,y++}else if(q.isRectAreaLight){const ae=t.get(q);ae.color.copy(ye).multiplyScalar(ie),ae.halfWidth.set(q.width*.5,0,0),ae.halfHeight.set(0,q.height*.5,0),i.rectArea[b]=ae,b++}else if(q.isPointLight){const ae=t.get(q);if(ae.color.copy(q.color).multiplyScalar(q.intensity*L),ae.distance=q.distance,ae.decay=q.decay,q.castShadow){const se=q.shadow,be=n.get(q);be.shadowBias=se.bias,be.shadowNormalBias=se.normalBias,be.shadowRadius=se.radius,be.shadowMapSize=se.mapSize,be.shadowCameraNear=se.camera.near,be.shadowCameraFar=se.camera.far,i.pointShadow[C]=be,i.pointShadowMap[C]=re,i.pointShadowMatrix[C]=q.shadow.matrix,F++}i.point[C]=ae,C++}else if(q.isHemisphereLight){const ae=t.get(q);ae.skyColor.copy(q.color).multiplyScalar(ie*L),ae.groundColor.copy(q.groundColor).multiplyScalar(ie*L),i.hemi[O]=ae,O++}}b>0&&(e.isWebGL2||r.has("OES_texture_float_linear")===!0?(i.rectAreaLTC1=He.LTC_FLOAT_1,i.rectAreaLTC2=He.LTC_FLOAT_2):r.has("OES_texture_half_float_linear")===!0?(i.rectAreaLTC1=He.LTC_HALF_1,i.rectAreaLTC2=He.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),i.ambient[0]=g,i.ambient[1]=_,i.ambient[2]=M;const W=i.hash;(W.directionalLength!==x||W.pointLength!==C||W.spotLength!==y||W.rectAreaLength!==b||W.hemiLength!==O||W.numDirectionalShadows!==P||W.numPointShadows!==F||W.numSpotShadows!==p)&&(i.directional.length=x,i.spot.length=y,i.rectArea.length=b,i.point.length=C,i.hemi.length=O,i.directionalShadow.length=P,i.directionalShadowMap.length=P,i.pointShadow.length=F,i.pointShadowMap.length=F,i.spotShadow.length=p,i.spotShadowMap.length=p,i.directionalShadowMatrix.length=P,i.pointShadowMatrix.length=F,i.spotShadowMatrix.length=p,W.directionalLength=x,W.pointLength=C,W.spotLength=y,W.rectAreaLength=b,W.hemiLength=O,W.numDirectionalShadows=P,W.numPointShadows=F,W.numSpotShadows=p,i.version=ET++)}function h(f,m){let g=0,_=0,M=0,x=0,C=0;const y=m.matrixWorldInverse;for(let b=0,O=f.length;b<O;b++){const P=f[b];if(P.isDirectionalLight){const F=i.directional[g];F.direction.setFromMatrixPosition(P.matrixWorld),a.setFromMatrixPosition(P.target.matrixWorld),F.direction.sub(a),F.direction.transformDirection(y),g++}else if(P.isSpotLight){const F=i.spot[M];F.position.setFromMatrixPosition(P.matrixWorld),F.position.applyMatrix4(y),F.direction.setFromMatrixPosition(P.matrixWorld),a.setFromMatrixPosition(P.target.matrixWorld),F.direction.sub(a),F.direction.transformDirection(y),M++}else if(P.isRectAreaLight){const F=i.rectArea[x];F.position.setFromMatrixPosition(P.matrixWorld),F.position.applyMatrix4(y),l.identity(),o.copy(P.matrixWorld),o.premultiply(y),l.extractRotation(o),F.halfWidth.set(P.width*.5,0,0),F.halfHeight.set(0,P.height*.5,0),F.halfWidth.applyMatrix4(l),F.halfHeight.applyMatrix4(l),x++}else if(P.isPointLight){const F=i.point[_];F.position.setFromMatrixPosition(P.matrixWorld),F.position.applyMatrix4(y),_++}else if(P.isHemisphereLight){const F=i.hemi[C];F.direction.setFromMatrixPosition(P.matrixWorld),F.direction.transformDirection(y),F.direction.normalize(),C++}}}return{setup:c,setupView:h,state:i}}function Wp(r,e){const t=new CT(r,e),n=[],i=[];function a(){n.length=0,i.length=0}function o(m){n.push(m)}function l(m){i.push(m)}function c(m){t.setup(n,m)}function h(m){t.setupView(n,m)}return{init:a,state:{lightsArray:n,shadowsArray:i,lights:t},setupLights:c,setupLightsView:h,pushLight:o,pushShadow:l}}function LT(r,e){let t=new WeakMap;function n(a,o=0){let l;return t.has(a)===!1?(l=new Wp(r,e),t.set(a,[l])):o>=t.get(a).length?(l=new Wp(r,e),t.get(a).push(l)):l=t.get(a)[o],l}function i(){t=new WeakMap}return{get:n,dispose:i}}class __ extends Cn{constructor(e){super(),this.type="MeshDepthMaterial",this.depthPacking=Qw,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}__.prototype.isMeshDepthMaterial=!0;class y_ extends Cn{constructor(e){super(),this.type="MeshDistanceMaterial",this.referencePosition=new j,this.nearDistance=1,this.farDistance=1e3,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.fog=!1,this.setValues(e)}copy(e){return super.copy(e),this.referencePosition.copy(e.referencePosition),this.nearDistance=e.nearDistance,this.farDistance=e.farDistance,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}y_.prototype.isMeshDistanceMaterial=!0;const RT=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,PT=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function x_(r,e,t){let n=new Sc;const i=new Pe,a=new Pe,o=new Ft,l=new __({depthPacking:Kw}),c=new y_,h={},f=t.maxTextureSize,m={0:ln,1:Eo,2:ga},g=new Pi({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new Pe},radius:{value:4}},vertexShader:RT,fragmentShader:PT}),_=g.clone();_.defines.HORIZONTAL_PASS=1;const M=new Gt;M.setAttribute("position",new un(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const x=new pn(M,g),C=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=qv,this.render=function(P,F,p){if(C.enabled===!1||C.autoUpdate===!1&&C.needsUpdate===!1||P.length===0)return;const L=r.getRenderTarget(),W=r.getActiveCubeFace(),X=r.getActiveMipmapLevel(),oe=r.state;oe.setBlending(Lr),oe.buffers.color.setClear(1,1,1,1),oe.buffers.depth.setTest(!0),oe.setScissorTest(!1);for(let q=0,ye=P.length;q<ye;q++){const ie=P[q],ne=ie.shadow;if(ne===void 0){console.warn("THREE.WebGLShadowMap:",ie,"has no shadow.");continue}if(ne.autoUpdate===!1&&ne.needsUpdate===!1)continue;i.copy(ne.mapSize);const re=ne.getFrameExtents();if(i.multiply(re),a.copy(ne.mapSize),(i.x>f||i.y>f)&&(i.x>f&&(a.x=Math.floor(f/re.x),i.x=a.x*re.x,ne.mapSize.x=a.x),i.y>f&&(a.y=Math.floor(f/re.y),i.y=a.y*re.y,ne.mapSize.y=a.y)),ne.map===null&&!ne.isPointLightShadow&&this.type===to){const se={minFilter:pi,magFilter:pi,format:Ln};ne.map=new vi(i.x,i.y,se),ne.map.texture.name=ie.name+".shadowMap",ne.mapPass=new vi(i.x,i.y,se),ne.camera.updateProjectionMatrix()}if(ne.map===null){const se={minFilter:dn,magFilter:dn,format:Ln};ne.map=new vi(i.x,i.y,se),ne.map.texture.name=ie.name+".shadowMap",ne.camera.updateProjectionMatrix()}r.setRenderTarget(ne.map),r.clear();const ae=ne.getViewportCount();for(let se=0;se<ae;se++){const be=ne.getViewport(se);o.set(a.x*be.x,a.y*be.y,a.x*be.z,a.y*be.w),oe.viewport(o),ne.updateMatrices(ie,se),n=ne.getFrustum(),O(F,p,ne.camera,ie,this.type)}!ne.isPointLightShadow&&this.type===to&&y(ne,p),ne.needsUpdate=!1}C.needsUpdate=!1,r.setRenderTarget(L,W,X)};function y(P,F){const p=e.update(x);g.defines.VSM_SAMPLES!==P.blurSamples&&(g.defines.VSM_SAMPLES=P.blurSamples,_.defines.VSM_SAMPLES=P.blurSamples,g.needsUpdate=!0,_.needsUpdate=!0),g.uniforms.shadow_pass.value=P.map.texture,g.uniforms.resolution.value=P.mapSize,g.uniforms.radius.value=P.radius,r.setRenderTarget(P.mapPass),r.clear(),r.renderBufferDirect(F,null,p,g,x,null),_.uniforms.shadow_pass.value=P.mapPass.texture,_.uniforms.resolution.value=P.mapSize,_.uniforms.radius.value=P.radius,r.setRenderTarget(P.map),r.clear(),r.renderBufferDirect(F,null,p,_,x,null)}function b(P,F,p,L,W,X,oe){let q=null;const ye=L.isPointLight===!0?P.customDistanceMaterial:P.customDepthMaterial;if(ye!==void 0?q=ye:q=L.isPointLight===!0?c:l,r.localClippingEnabled&&p.clipShadows===!0&&p.clippingPlanes.length!==0||p.displacementMap&&p.displacementScale!==0||p.alphaMap&&p.alphaTest>0){const ie=q.uuid,ne=p.uuid;let re=h[ie];re===void 0&&(re={},h[ie]=re);let ae=re[ne];ae===void 0&&(ae=q.clone(),re[ne]=ae),q=ae}return q.visible=p.visible,q.wireframe=p.wireframe,oe===to?q.side=p.shadowSide!==null?p.shadowSide:p.side:q.side=p.shadowSide!==null?p.shadowSide:m[p.side],q.alphaMap=p.alphaMap,q.alphaTest=p.alphaTest,q.clipShadows=p.clipShadows,q.clippingPlanes=p.clippingPlanes,q.clipIntersection=p.clipIntersection,q.displacementMap=p.displacementMap,q.displacementScale=p.displacementScale,q.displacementBias=p.displacementBias,q.wireframeLinewidth=p.wireframeLinewidth,q.linewidth=p.linewidth,L.isPointLight===!0&&q.isMeshDistanceMaterial===!0&&(q.referencePosition.setFromMatrixPosition(L.matrixWorld),q.nearDistance=W,q.farDistance=X),q}function O(P,F,p,L,W){if(P.visible===!1)return;if(P.layers.test(F.layers)&&(P.isMesh||P.isLine||P.isPoints)&&(P.castShadow||P.receiveShadow&&W===to)&&(!P.frustumCulled||n.intersectsObject(P))){P.modelViewMatrix.multiplyMatrices(p.matrixWorldInverse,P.matrixWorld);const q=e.update(P),ye=P.material;if(Array.isArray(ye)){const ie=q.groups;for(let ne=0,re=ie.length;ne<re;ne++){const ae=ie[ne],se=ye[ae.materialIndex];if(se&&se.visible){const be=b(P,q,se,L,p.near,p.far,W);r.renderBufferDirect(p,null,q,be,P,ae)}}}else if(ye.visible){const ie=b(P,q,ye,L,p.near,p.far,W);r.renderBufferDirect(p,null,q,ie,P,null)}}const oe=P.children;for(let q=0,ye=oe.length;q<ye;q++)O(oe[q],F,p,L,W)}}function IT(r,e,t){const n=t.isWebGL2;function i(){let Y=!1;const Ne=new Ft;let ge=null;const Re=new Ft(0,0,0,0);return{setMask:function(Ie){ge!==Ie&&!Y&&(r.colorMask(Ie,Ie,Ie,Ie),ge=Ie)},setLocked:function(Ie){Y=Ie},setClear:function(Ie,Ue,Be,it,Mt){Mt===!0&&(Ie*=it,Ue*=it,Be*=it),Ne.set(Ie,Ue,Be,it),Re.equals(Ne)===!1&&(r.clearColor(Ie,Ue,Be,it),Re.copy(Ne))},reset:function(){Y=!1,ge=null,Re.set(-1,0,0,0)}}}function a(){let Y=!1,Ne=null,ge=null,Re=null;return{setTest:function(Ie){Ie?De(2929):ke(2929)},setMask:function(Ie){Ne!==Ie&&!Y&&(r.depthMask(Ie),Ne=Ie)},setFunc:function(Ie){if(ge!==Ie){if(Ie)switch(Ie){case Hx:r.depthFunc(512);break;case Vx:r.depthFunc(519);break;case Gx:r.depthFunc(513);break;case lh:r.depthFunc(515);break;case Wx:r.depthFunc(514);break;case jx:r.depthFunc(518);break;case qx:r.depthFunc(516);break;case Xx:r.depthFunc(517);break;default:r.depthFunc(515)}else r.depthFunc(515);ge=Ie}},setLocked:function(Ie){Y=Ie},setClear:function(Ie){Re!==Ie&&(r.clearDepth(Ie),Re=Ie)},reset:function(){Y=!1,Ne=null,ge=null,Re=null}}}function o(){let Y=!1,Ne=null,ge=null,Re=null,Ie=null,Ue=null,Be=null,it=null,Mt=null;return{setTest:function(Qe){Y||(Qe?De(2960):ke(2960))},setMask:function(Qe){Ne!==Qe&&!Y&&(r.stencilMask(Qe),Ne=Qe)},setFunc:function(Qe,St,sn){(ge!==Qe||Re!==St||Ie!==sn)&&(r.stencilFunc(Qe,St,sn),ge=Qe,Re=St,Ie=sn)},setOp:function(Qe,St,sn){(Ue!==Qe||Be!==St||it!==sn)&&(r.stencilOp(Qe,St,sn),Ue=Qe,Be=St,it=sn)},setLocked:function(Qe){Y=Qe},setClear:function(Qe){Mt!==Qe&&(r.clearStencil(Qe),Mt=Qe)},reset:function(){Y=!1,Ne=null,ge=null,Re=null,Ie=null,Ue=null,Be=null,it=null,Mt=null}}}const l=new i,c=new a,h=new o;let f={},m={},g=null,_=!1,M=null,x=null,C=null,y=null,b=null,O=null,P=null,F=!1,p=null,L=null,W=null,X=null,oe=null;const q=r.getParameter(35661);let ye=!1,ie=0;const ne=r.getParameter(7938);ne.indexOf("WebGL")!==-1?(ie=parseFloat(/^WebGL (\d)/.exec(ne)[1]),ye=ie>=1):ne.indexOf("OpenGL ES")!==-1&&(ie=parseFloat(/^OpenGL ES (\d)/.exec(ne)[1]),ye=ie>=2);let re=null,ae={};const se=r.getParameter(3088),be=r.getParameter(2978),Oe=new Ft().fromArray(se),de=new Ft().fromArray(be);function fe(Y,Ne,ge){const Re=new Uint8Array(4),Ie=r.createTexture();r.bindTexture(Y,Ie),r.texParameteri(Y,10241,9728),r.texParameteri(Y,10240,9728);for(let Ue=0;Ue<ge;Ue++)r.texImage2D(Ne+Ue,0,6408,1,1,0,6408,5121,Re);return Ie}const ze={};ze[3553]=fe(3553,3553,1),ze[34067]=fe(34067,34069,6),l.setClear(0,0,0,1),c.setClear(1),h.setClear(0),De(2929),c.setFunc(lh),Ye(!1),pe(jd),De(2884),Ge(Lr);function De(Y){f[Y]!==!0&&(r.enable(Y),f[Y]=!0)}function ke(Y){f[Y]!==!1&&(r.disable(Y),f[Y]=!1)}function rt(Y,Ne){return m[Y]!==Ne?(r.bindFramebuffer(Y,Ne),m[Y]=Ne,n&&(Y===36009&&(m[36160]=Ne),Y===36160&&(m[36009]=Ne)),!0):!1}function Ee(Y){return g!==Y?(r.useProgram(Y),g=Y,!0):!1}const Te={[Xs]:32774,[Rx]:32778,[Px]:32779};if(n)Te[$d]=32775,Te[Jd]=32776;else{const Y=e.get("EXT_blend_minmax");Y!==null&&(Te[$d]=Y.MIN_EXT,Te[Jd]=Y.MAX_EXT)}const We={[Ix]:0,[Dx]:1,[Nx]:768,[Yv]:770,[Ux]:776,[Bx]:774,[Fx]:772,[Ox]:769,[$v]:771,[kx]:775,[zx]:773};function Ge(Y,Ne,ge,Re,Ie,Ue,Be,it){if(Y===Lr){_===!0&&(ke(3042),_=!1);return}if(_===!1&&(De(3042),_=!0),Y!==Lx){if(Y!==M||it!==F){if((x!==Xs||b!==Xs)&&(r.blendEquation(32774),x=Xs,b=Xs),it)switch(Y){case lo:r.blendFuncSeparate(1,771,1,771);break;case qd:r.blendFunc(1,1);break;case Xd:r.blendFuncSeparate(0,0,769,771);break;case Yd:r.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",Y);break}else switch(Y){case lo:r.blendFuncSeparate(770,771,1,771);break;case qd:r.blendFunc(770,1);break;case Xd:r.blendFunc(0,769);break;case Yd:r.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",Y);break}C=null,y=null,O=null,P=null,M=Y,F=it}return}Ie=Ie||Ne,Ue=Ue||ge,Be=Be||Re,(Ne!==x||Ie!==b)&&(r.blendEquationSeparate(Te[Ne],Te[Ie]),x=Ne,b=Ie),(ge!==C||Re!==y||Ue!==O||Be!==P)&&(r.blendFuncSeparate(We[ge],We[Re],We[Ue],We[Be]),C=ge,y=Re,O=Ue,P=Be),M=Y,F=null}function Xe(Y,Ne){Y.side===ga?ke(2884):De(2884);let ge=Y.side===ln;Ne&&(ge=!ge),Ye(ge),Y.blending===lo&&Y.transparent===!1?Ge(Lr):Ge(Y.blending,Y.blendEquation,Y.blendSrc,Y.blendDst,Y.blendEquationAlpha,Y.blendSrcAlpha,Y.blendDstAlpha,Y.premultipliedAlpha),c.setFunc(Y.depthFunc),c.setTest(Y.depthTest),c.setMask(Y.depthWrite),l.setMask(Y.colorWrite);const Re=Y.stencilWrite;h.setTest(Re),Re&&(h.setMask(Y.stencilWriteMask),h.setFunc(Y.stencilFunc,Y.stencilRef,Y.stencilFuncMask),h.setOp(Y.stencilFail,Y.stencilZFail,Y.stencilZPass)),S(Y.polygonOffset,Y.polygonOffsetFactor,Y.polygonOffsetUnits),Y.alphaToCoverage===!0?De(32926):ke(32926)}function Ye(Y){p!==Y&&(Y?r.frontFace(2304):r.frontFace(2305),p=Y)}function pe(Y){Y!==Ex?(De(2884),Y!==L&&(Y===jd?r.cullFace(1029):Y===Ax?r.cullFace(1028):r.cullFace(1032))):ke(2884),L=Y}function Se(Y){Y!==W&&(ye&&r.lineWidth(Y),W=Y)}function S(Y,Ne,ge){Y?(De(32823),(X!==Ne||oe!==ge)&&(r.polygonOffset(Ne,ge),X=Ne,oe=ge)):ke(32823)}function R(Y){Y?De(3089):ke(3089)}function E(Y){Y===void 0&&(Y=33984+q-1),re!==Y&&(r.activeTexture(Y),re=Y)}function B(Y,Ne){re===null&&E();let ge=ae[re];ge===void 0&&(ge={type:void 0,texture:void 0},ae[re]=ge),(ge.type!==Y||ge.texture!==Ne)&&(r.bindTexture(Y,Ne||ze[Y]),ge.type=Y,ge.texture=Ne)}function H(){const Y=ae[re];Y!==void 0&&Y.type!==void 0&&(r.bindTexture(Y.type,null),Y.type=void 0,Y.texture=void 0)}function J(){try{r.compressedTexImage2D.apply(r,arguments)}catch(Y){console.error("THREE.WebGLState:",Y)}}function Q(){try{r.texSubImage2D.apply(r,arguments)}catch(Y){console.error("THREE.WebGLState:",Y)}}function z(){try{r.texStorage2D.apply(r,arguments)}catch(Y){console.error("THREE.WebGLState:",Y)}}function D(){try{r.texImage2D.apply(r,arguments)}catch(Y){console.error("THREE.WebGLState:",Y)}}function Z(){try{r.texImage3D.apply(r,arguments)}catch(Y){console.error("THREE.WebGLState:",Y)}}function te(Y){Oe.equals(Y)===!1&&(r.scissor(Y.x,Y.y,Y.z,Y.w),Oe.copy(Y))}function xe(Y){de.equals(Y)===!1&&(r.viewport(Y.x,Y.y,Y.z,Y.w),de.copy(Y))}function Le(){r.disable(3042),r.disable(2884),r.disable(2929),r.disable(32823),r.disable(3089),r.disable(2960),r.disable(32926),r.blendEquation(32774),r.blendFunc(1,0),r.blendFuncSeparate(1,0,1,0),r.colorMask(!0,!0,!0,!0),r.clearColor(0,0,0,0),r.depthMask(!0),r.depthFunc(513),r.clearDepth(1),r.stencilMask(4294967295),r.stencilFunc(519,0,4294967295),r.stencilOp(7680,7680,7680),r.clearStencil(0),r.cullFace(1029),r.frontFace(2305),r.polygonOffset(0,0),r.activeTexture(33984),r.bindFramebuffer(36160,null),n===!0&&(r.bindFramebuffer(36009,null),r.bindFramebuffer(36008,null)),r.useProgram(null),r.lineWidth(1),r.scissor(0,0,r.canvas.width,r.canvas.height),r.viewport(0,0,r.canvas.width,r.canvas.height),f={},re=null,ae={},m={},g=null,_=!1,M=null,x=null,C=null,y=null,b=null,O=null,P=null,F=!1,p=null,L=null,W=null,X=null,oe=null,Oe.set(0,0,r.canvas.width,r.canvas.height),de.set(0,0,r.canvas.width,r.canvas.height),l.reset(),c.reset(),h.reset()}return{buffers:{color:l,depth:c,stencil:h},enable:De,disable:ke,bindFramebuffer:rt,useProgram:Ee,setBlending:Ge,setMaterial:Xe,setFlipSided:Ye,setCullFace:pe,setLineWidth:Se,setPolygonOffset:S,setScissorTest:R,activeTexture:E,bindTexture:B,unbindTexture:H,compressedTexImage2D:J,texImage2D:D,texImage3D:Z,texStorage2D:z,texSubImage2D:Q,scissor:te,viewport:xe,reset:Le}}function DT(r,e,t,n,i,a,o){const l=i.isWebGL2,c=i.maxTextures,h=i.maxCubemapSize,f=i.maxTextureSize,m=i.maxSamples,_=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):void 0,M=new WeakMap;let x,C=!1;try{C=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function y(z,D){return C?new OffscreenCanvas(z,D):bc("canvas")}function b(z,D,Z,te){let xe=1;if((z.width>te||z.height>te)&&(xe=te/Math.max(z.width,z.height)),xe<1||D===!0)if(typeof HTMLImageElement<"u"&&z instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&z instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&z instanceof ImageBitmap){const Le=D?ib:Math.floor,Y=Le(xe*z.width),Ne=Le(xe*z.height);x===void 0&&(x=y(Y,Ne));const ge=Z?y(Y,Ne):x;return ge.width=Y,ge.height=Ne,ge.getContext("2d").drawImage(z,0,0,Y,Ne),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+z.width+"x"+z.height+") to ("+Y+"x"+Ne+")."),ge}else return"data"in z&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+z.width+"x"+z.height+")."),z;return z}function O(z){return up(z.width)&&up(z.height)}function P(z){return l?!1:z.wrapS!==ii||z.wrapT!==ii||z.minFilter!==dn&&z.minFilter!==pi}function F(z,D){return z.generateMipmaps&&D&&z.minFilter!==dn&&z.minFilter!==pi}function p(z){r.generateMipmap(z)}function L(z,D,Z){if(l===!1)return D;if(z!==null){if(r[z]!==void 0)return r[z];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+z+"'")}let te=D;return D===6403&&(Z===5126&&(te=33326),Z===5131&&(te=33325),Z===5121&&(te=33321)),D===6407&&(Z===5126&&(te=34837),Z===5131&&(te=34843),Z===5121&&(te=32849)),D===6408&&(Z===5126&&(te=34836),Z===5131&&(te=34842),Z===5121&&(te=32856)),(te===33325||te===33326||te===34842||te===34836)&&e.get("EXT_color_buffer_float"),te}function W(z,D,Z){return F(z,Z)===!0?Math.log2(Math.max(D.width,D.height))+1:z.mipmaps.length>0?z.mipmaps.length:1}function X(z){return z===dn||z===Zd||z===Qd?9728:9729}function oe(z){const D=z.target;D.removeEventListener("dispose",oe),ye(D),D.isVideoTexture&&M.delete(D),o.memory.textures--}function q(z){const D=z.target;D.removeEventListener("dispose",q),ie(D)}function ye(z){const D=n.get(z);D.__webglInit!==void 0&&(r.deleteTexture(D.__webglTexture),n.remove(z))}function ie(z){const D=z.texture,Z=n.get(z),te=n.get(D);if(z){if(te.__webglTexture!==void 0&&(r.deleteTexture(te.__webglTexture),o.memory.textures--),z.depthTexture&&z.depthTexture.dispose(),z.isWebGLCubeRenderTarget)for(let xe=0;xe<6;xe++)r.deleteFramebuffer(Z.__webglFramebuffer[xe]),Z.__webglDepthbuffer&&r.deleteRenderbuffer(Z.__webglDepthbuffer[xe]);else r.deleteFramebuffer(Z.__webglFramebuffer),Z.__webglDepthbuffer&&r.deleteRenderbuffer(Z.__webglDepthbuffer),Z.__webglMultisampledFramebuffer&&r.deleteFramebuffer(Z.__webglMultisampledFramebuffer),Z.__webglColorRenderbuffer&&r.deleteRenderbuffer(Z.__webglColorRenderbuffer),Z.__webglDepthRenderbuffer&&r.deleteRenderbuffer(Z.__webglDepthRenderbuffer);if(z.isWebGLMultipleRenderTargets)for(let xe=0,Le=D.length;xe<Le;xe++){const Y=n.get(D[xe]);Y.__webglTexture&&(r.deleteTexture(Y.__webglTexture),o.memory.textures--),n.remove(D[xe])}n.remove(D),n.remove(z)}}let ne=0;function re(){ne=0}function ae(){const z=ne;return z>=c&&console.warn("THREE.WebGLTextures: Trying to use "+z+" texture units while this GPU supports only "+c),ne+=1,z}function se(z,D){const Z=n.get(z);if(z.isVideoTexture&&E(z),z.version>0&&Z.__version!==z.version){const te=z.image;if(te===void 0)console.warn("THREE.WebGLRenderer: Texture marked for update but image is undefined");else if(te.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{rt(Z,z,D);return}}t.activeTexture(33984+D),t.bindTexture(3553,Z.__webglTexture)}function be(z,D){const Z=n.get(z);if(z.version>0&&Z.__version!==z.version){rt(Z,z,D);return}t.activeTexture(33984+D),t.bindTexture(35866,Z.__webglTexture)}function Oe(z,D){const Z=n.get(z);if(z.version>0&&Z.__version!==z.version){rt(Z,z,D);return}t.activeTexture(33984+D),t.bindTexture(32879,Z.__webglTexture)}function de(z,D){const Z=n.get(z);if(z.version>0&&Z.__version!==z.version){Ee(Z,z,D);return}t.activeTexture(33984+D),t.bindTexture(34067,Z.__webglTexture)}const fe={[Ri]:10497,[ii]:33071,[hh]:33648},ze={[dn]:9728,[Zd]:9984,[Qd]:9986,[pi]:9729,[tw]:9985,[xc]:9987};function De(z,D,Z){if(Z?(r.texParameteri(z,10242,fe[D.wrapS]),r.texParameteri(z,10243,fe[D.wrapT]),(z===32879||z===35866)&&r.texParameteri(z,32882,fe[D.wrapR]),r.texParameteri(z,10240,ze[D.magFilter]),r.texParameteri(z,10241,ze[D.minFilter])):(r.texParameteri(z,10242,33071),r.texParameteri(z,10243,33071),(z===32879||z===35866)&&r.texParameteri(z,32882,33071),(D.wrapS!==ii||D.wrapT!==ii)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),r.texParameteri(z,10240,X(D.magFilter)),r.texParameteri(z,10241,X(D.minFilter)),D.minFilter!==dn&&D.minFilter!==pi&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),e.has("EXT_texture_filter_anisotropic")===!0){const te=e.get("EXT_texture_filter_anisotropic");if(D.type===Mr&&e.has("OES_texture_float_linear")===!1||l===!1&&D.type===sa&&e.has("OES_texture_half_float_linear")===!1)return;(D.anisotropy>1||n.get(D).__currentAnisotropy)&&(r.texParameterf(z,te.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(D.anisotropy,i.getMaxAnisotropy())),n.get(D).__currentAnisotropy=D.anisotropy)}}function ke(z,D){z.__webglInit===void 0&&(z.__webglInit=!0,D.addEventListener("dispose",oe),z.__webglTexture=r.createTexture(),o.memory.textures++)}function rt(z,D,Z){let te=3553;D.isDataTexture2DArray&&(te=35866),D.isDataTexture3D&&(te=32879),ke(z,D),t.activeTexture(33984+Z),t.bindTexture(te,z.__webglTexture),r.pixelStorei(37440,D.flipY),r.pixelStorei(37441,D.premultiplyAlpha),r.pixelStorei(3317,D.unpackAlignment),r.pixelStorei(37443,0);const xe=P(D)&&O(D.image)===!1,Le=b(D.image,xe,!1,f),Y=O(Le)||l,Ne=a.convert(D.format);let ge=a.convert(D.type),Re=L(D.internalFormat,Ne,ge,D.encoding);De(te,D,Y);let Ie;const Ue=D.mipmaps;if(D.isDepthTexture)Re=6402,l?D.type===Mr?Re=36012:D.type===zl?Re=33190:D.type===aa?Re=35056:Re=33189:D.type===Mr&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),D.format===ms&&Re===6402&&D.type!==Ao&&D.type!==zl&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),D.type=Ao,ge=a.convert(D.type)),D.format===va&&Re===6402&&(Re=34041,D.type!==aa&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),D.type=aa,ge=a.convert(D.type))),t.texImage2D(3553,0,Re,Le.width,Le.height,0,Ne,ge,null);else if(D.isDataTexture)if(Ue.length>0&&Y){for(let Be=0,it=Ue.length;Be<it;Be++)Ie=Ue[Be],t.texImage2D(3553,Be,Re,Ie.width,Ie.height,0,Ne,ge,Ie.data);D.generateMipmaps=!1}else t.texImage2D(3553,0,Re,Le.width,Le.height,0,Ne,ge,Le.data);else if(D.isCompressedTexture)for(let Be=0,it=Ue.length;Be<it;Be++)Ie=Ue[Be],D.format!==Ln&&D.format!==ps?Ne!==null?t.compressedTexImage2D(3553,Be,Re,Ie.width,Ie.height,0,Ie.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):t.texImage2D(3553,Be,Re,Ie.width,Ie.height,0,Ne,ge,Ie.data);else if(D.isDataTexture2DArray)t.texImage3D(35866,0,Re,Le.width,Le.height,Le.depth,0,Ne,ge,Le.data);else if(D.isDataTexture3D)t.texImage3D(32879,0,Re,Le.width,Le.height,Le.depth,0,Ne,ge,Le.data);else{const Be=W(D,Le,Y),it=l&&D.isVideoTexture!==!0,Mt=z.__version===void 0;if(Ue.length>0&&Y){it&&Mt&&t.texStorage2D(3553,Be,Re,Ue[0].width,Ue[0].height);for(let Qe=0,St=Ue.length;Qe<St;Qe++)Ie=Ue[Qe],it?t.texSubImage2D(3553,Qe,0,0,Ne,ge,Ie):t.texImage2D(3553,Qe,Re,Ne,ge,Ie);D.generateMipmaps=!1}else it?(Mt&&t.texStorage2D(3553,Be,Re,Le.width,Le.height),t.texSubImage2D(3553,0,0,0,Ne,ge,Le)):t.texImage2D(3553,0,Re,Ne,ge,Le)}F(D,Y)&&p(te),z.__version=D.version,D.onUpdate&&D.onUpdate(D)}function Ee(z,D,Z){if(D.image.length!==6)return;ke(z,D),t.activeTexture(33984+Z),t.bindTexture(34067,z.__webglTexture),r.pixelStorei(37440,D.flipY),r.pixelStorei(37441,D.premultiplyAlpha),r.pixelStorei(3317,D.unpackAlignment),r.pixelStorei(37443,0);const te=D&&(D.isCompressedTexture||D.image[0].isCompressedTexture),xe=D.image[0]&&D.image[0].isDataTexture,Le=[];for(let Be=0;Be<6;Be++)!te&&!xe?Le[Be]=b(D.image[Be],!1,!0,h):Le[Be]=xe?D.image[Be].image:D.image[Be];const Y=Le[0],Ne=O(Y)||l,ge=a.convert(D.format),Re=a.convert(D.type),Ie=L(D.internalFormat,ge,Re,D.encoding);De(34067,D,Ne);let Ue;if(te)for(let Be=0;Be<6;Be++){Ue=Le[Be].mipmaps;for(let it=0;it<Ue.length;it++){const Mt=Ue[it];D.format!==Ln&&D.format!==ps?ge!==null?t.compressedTexImage2D(34069+Be,it,Ie,Mt.width,Mt.height,0,Mt.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):t.texImage2D(34069+Be,it,Ie,Mt.width,Mt.height,0,ge,Re,Mt.data)}}else{Ue=D.mipmaps;for(let Be=0;Be<6;Be++)if(xe){t.texImage2D(34069+Be,0,Ie,Le[Be].width,Le[Be].height,0,ge,Re,Le[Be].data);for(let it=0;it<Ue.length;it++){const Qe=Ue[it].image[Be].image;t.texImage2D(34069+Be,it+1,Ie,Qe.width,Qe.height,0,ge,Re,Qe.data)}}else{t.texImage2D(34069+Be,0,Ie,ge,Re,Le[Be]);for(let it=0;it<Ue.length;it++){const Mt=Ue[it];t.texImage2D(34069+Be,it+1,Ie,ge,Re,Mt.image[Be])}}}F(D,Ne)&&p(34067),z.__version=D.version,D.onUpdate&&D.onUpdate(D)}function Te(z,D,Z,te,xe){const Le=a.convert(Z.format),Y=a.convert(Z.type),Ne=L(Z.internalFormat,Le,Y,Z.encoding);n.get(D).__hasExternalTextures||(xe===32879||xe===35866?t.texImage3D(xe,0,Ne,D.width,D.height,D.depth,0,Le,Y,null):t.texImage2D(xe,0,Ne,D.width,D.height,0,Le,Y,null)),t.bindFramebuffer(36160,z),D.useRenderToTexture?_.framebufferTexture2DMultisampleEXT(36160,te,xe,n.get(Z).__webglTexture,0,R(D)):r.framebufferTexture2D(36160,te,xe,n.get(Z).__webglTexture,0),t.bindFramebuffer(36160,null)}function We(z,D,Z){if(r.bindRenderbuffer(36161,z),D.depthBuffer&&!D.stencilBuffer){let te=33189;if(Z||D.useRenderToTexture){const xe=D.depthTexture;xe&&xe.isDepthTexture&&(xe.type===Mr?te=36012:xe.type===zl&&(te=33190));const Le=R(D);D.useRenderToTexture?_.renderbufferStorageMultisampleEXT(36161,Le,te,D.width,D.height):r.renderbufferStorageMultisample(36161,Le,te,D.width,D.height)}else r.renderbufferStorage(36161,te,D.width,D.height);r.framebufferRenderbuffer(36160,36096,36161,z)}else if(D.depthBuffer&&D.stencilBuffer){const te=R(D);Z&&D.useRenderbuffer?r.renderbufferStorageMultisample(36161,te,35056,D.width,D.height):D.useRenderToTexture?_.renderbufferStorageMultisampleEXT(36161,te,35056,D.width,D.height):r.renderbufferStorage(36161,34041,D.width,D.height),r.framebufferRenderbuffer(36160,33306,36161,z)}else{const te=D.isWebGLMultipleRenderTargets===!0?D.texture[0]:D.texture,xe=a.convert(te.format),Le=a.convert(te.type),Y=L(te.internalFormat,xe,Le,te.encoding),Ne=R(D);Z&&D.useRenderbuffer?r.renderbufferStorageMultisample(36161,Ne,Y,D.width,D.height):D.useRenderToTexture?_.renderbufferStorageMultisampleEXT(36161,Ne,Y,D.width,D.height):r.renderbufferStorage(36161,Y,D.width,D.height)}r.bindRenderbuffer(36161,null)}function Ge(z,D){if(D&&D.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(36160,z),!(D.depthTexture&&D.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!n.get(D.depthTexture).__webglTexture||D.depthTexture.image.width!==D.width||D.depthTexture.image.height!==D.height)&&(D.depthTexture.image.width=D.width,D.depthTexture.image.height=D.height,D.depthTexture.needsUpdate=!0),se(D.depthTexture,0);const te=n.get(D.depthTexture).__webglTexture,xe=R(D);if(D.depthTexture.format===ms)D.useRenderToTexture?_.framebufferTexture2DMultisampleEXT(36160,36096,3553,te,0,xe):r.framebufferTexture2D(36160,36096,3553,te,0);else if(D.depthTexture.format===va)D.useRenderToTexture?_.framebufferTexture2DMultisampleEXT(36160,33306,3553,te,0,xe):r.framebufferTexture2D(36160,33306,3553,te,0);else throw new Error("Unknown depthTexture format")}function Xe(z){const D=n.get(z),Z=z.isWebGLCubeRenderTarget===!0;if(z.depthTexture&&!D.__autoAllocateDepthBuffer){if(Z)throw new Error("target.depthTexture not supported in Cube render targets");Ge(D.__webglFramebuffer,z)}else if(Z){D.__webglDepthbuffer=[];for(let te=0;te<6;te++)t.bindFramebuffer(36160,D.__webglFramebuffer[te]),D.__webglDepthbuffer[te]=r.createRenderbuffer(),We(D.__webglDepthbuffer[te],z,!1)}else t.bindFramebuffer(36160,D.__webglFramebuffer),D.__webglDepthbuffer=r.createRenderbuffer(),We(D.__webglDepthbuffer,z,!1);t.bindFramebuffer(36160,null)}function Ye(z,D,Z){const te=n.get(z);D!==void 0&&Te(te.__webglFramebuffer,z,z.texture,36064,3553),Z!==void 0&&Xe(z)}function pe(z){const D=z.texture,Z=n.get(z),te=n.get(D);z.addEventListener("dispose",q),z.isWebGLMultipleRenderTargets!==!0&&(te.__webglTexture===void 0&&(te.__webglTexture=r.createTexture()),te.__version=D.version,o.memory.textures++);const xe=z.isWebGLCubeRenderTarget===!0,Le=z.isWebGLMultipleRenderTargets===!0,Y=D.isDataTexture3D||D.isDataTexture2DArray,Ne=O(z)||l;if(l&&D.format===ps&&(D.type===Mr||D.type===sa)&&(D.format=Ln,console.warn("THREE.WebGLRenderer: Rendering to textures with RGB format is not supported. Using RGBA format instead.")),xe){Z.__webglFramebuffer=[];for(let ge=0;ge<6;ge++)Z.__webglFramebuffer[ge]=r.createFramebuffer()}else if(Z.__webglFramebuffer=r.createFramebuffer(),Le)if(i.drawBuffers){const ge=z.texture;for(let Re=0,Ie=ge.length;Re<Ie;Re++){const Ue=n.get(ge[Re]);Ue.__webglTexture===void 0&&(Ue.__webglTexture=r.createTexture(),o.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");else if(z.useRenderbuffer)if(l){Z.__webglMultisampledFramebuffer=r.createFramebuffer(),Z.__webglColorRenderbuffer=r.createRenderbuffer(),r.bindRenderbuffer(36161,Z.__webglColorRenderbuffer);const ge=a.convert(D.format),Re=a.convert(D.type),Ie=L(D.internalFormat,ge,Re,D.encoding),Ue=R(z);r.renderbufferStorageMultisample(36161,Ue,Ie,z.width,z.height),t.bindFramebuffer(36160,Z.__webglMultisampledFramebuffer),r.framebufferRenderbuffer(36160,36064,36161,Z.__webglColorRenderbuffer),r.bindRenderbuffer(36161,null),z.depthBuffer&&(Z.__webglDepthRenderbuffer=r.createRenderbuffer(),We(Z.__webglDepthRenderbuffer,z,!0)),t.bindFramebuffer(36160,null)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.");if(xe){t.bindTexture(34067,te.__webglTexture),De(34067,D,Ne);for(let ge=0;ge<6;ge++)Te(Z.__webglFramebuffer[ge],z,D,36064,34069+ge);F(D,Ne)&&p(34067),t.unbindTexture()}else if(Le){const ge=z.texture;for(let Re=0,Ie=ge.length;Re<Ie;Re++){const Ue=ge[Re],Be=n.get(Ue);t.bindTexture(3553,Be.__webglTexture),De(3553,Ue,Ne),Te(Z.__webglFramebuffer,z,Ue,36064+Re,3553),F(Ue,Ne)&&p(3553)}t.unbindTexture()}else{let ge=3553;Y&&(l?ge=D.isDataTexture3D?32879:35866:console.warn("THREE.DataTexture3D and THREE.DataTexture2DArray only supported with WebGL2.")),t.bindTexture(ge,te.__webglTexture),De(ge,D,Ne),Te(Z.__webglFramebuffer,z,D,36064,ge),F(D,Ne)&&p(ge),t.unbindTexture()}z.depthBuffer&&Xe(z)}function Se(z){const D=O(z)||l,Z=z.isWebGLMultipleRenderTargets===!0?z.texture:[z.texture];for(let te=0,xe=Z.length;te<xe;te++){const Le=Z[te];if(F(Le,D)){const Y=z.isWebGLCubeRenderTarget?34067:3553,Ne=n.get(Le).__webglTexture;t.bindTexture(Y,Ne),p(Y),t.unbindTexture()}}}function S(z){if(z.useRenderbuffer)if(l){const D=z.width,Z=z.height;let te=16384;const xe=[36064],Le=z.stencilBuffer?33306:36096;z.depthBuffer&&xe.push(Le),z.ignoreDepthForMultisampleCopy||(z.depthBuffer&&(te|=256),z.stencilBuffer&&(te|=1024));const Y=n.get(z);t.bindFramebuffer(36008,Y.__webglMultisampledFramebuffer),t.bindFramebuffer(36009,Y.__webglFramebuffer),z.ignoreDepthForMultisampleCopy&&(r.invalidateFramebuffer(36008,[Le]),r.invalidateFramebuffer(36009,[Le])),r.blitFramebuffer(0,0,D,Z,0,0,D,Z,te,9728),r.invalidateFramebuffer(36008,xe),t.bindFramebuffer(36008,null),t.bindFramebuffer(36009,Y.__webglMultisampledFramebuffer)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.")}function R(z){return l&&(z.useRenderbuffer||z.useRenderToTexture)?Math.min(m,z.samples):0}function E(z){const D=o.render.frame;M.get(z)!==D&&(M.set(z,D),z.update())}let B=!1,H=!1;function J(z,D){z&&z.isWebGLRenderTarget&&(B===!1&&(console.warn("THREE.WebGLTextures.safeSetTexture2D: don't use render targets as textures. Use their .texture property instead."),B=!0),z=z.texture),se(z,D)}function Q(z,D){z&&z.isWebGLCubeRenderTarget&&(H===!1&&(console.warn("THREE.WebGLTextures.safeSetTextureCube: don't use cube render targets as textures. Use their .texture property instead."),H=!0),z=z.texture),de(z,D)}this.allocateTextureUnit=ae,this.resetTextureUnits=re,this.setTexture2D=se,this.setTexture2DArray=be,this.setTexture3D=Oe,this.setTextureCube=de,this.rebindTextures=Ye,this.setupRenderTarget=pe,this.updateRenderTargetMipmap=Se,this.updateMultisampleRenderTarget=S,this.setupDepthRenderbuffer=Xe,this.setupFrameBufferTexture=Te,this.safeSetTexture2D=J,this.safeSetTextureCube=Q}function NT(r,e,t){const n=t.isWebGL2;function i(a){let o;if(a===zr)return 5121;if(a===sw)return 32819;if(a===aw)return 32820;if(a===ow)return 33635;if(a===nw)return 5120;if(a===iw)return 5122;if(a===Ao)return 5123;if(a===rw)return 5124;if(a===zl)return 5125;if(a===Mr)return 5126;if(a===sa)return n?5131:(o=e.get("OES_texture_half_float"),o!==null?o.HALF_FLOAT_OES:null);if(a===lw)return 6406;if(a===ps)return 6407;if(a===Ln)return 6408;if(a===cw)return 6409;if(a===uw)return 6410;if(a===ms)return 6402;if(a===va)return 34041;if(a===fw)return 6403;if(a===dw)return 36244;if(a===pw)return 33319;if(a===mw)return 33320;if(a===gw)return 36248;if(a===vw)return 36249;if(a===Kd||a===ep||a===tp||a===np)if(o=e.get("WEBGL_compressed_texture_s3tc"),o!==null){if(a===Kd)return o.COMPRESSED_RGB_S3TC_DXT1_EXT;if(a===ep)return o.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(a===tp)return o.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(a===np)return o.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(a===ip||a===rp||a===sp||a===ap)if(o=e.get("WEBGL_compressed_texture_pvrtc"),o!==null){if(a===ip)return o.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(a===rp)return o.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(a===sp)return o.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(a===ap)return o.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(a===_w)return o=e.get("WEBGL_compressed_texture_etc1"),o!==null?o.COMPRESSED_RGB_ETC1_WEBGL:null;if((a===op||a===lp)&&(o=e.get("WEBGL_compressed_texture_etc"),o!==null)){if(a===op)return o.COMPRESSED_RGB8_ETC2;if(a===lp)return o.COMPRESSED_RGBA8_ETC2_EAC}if(a===yw||a===xw||a===ww||a===bw||a===Mw||a===Sw||a===Tw||a===Ew||a===Aw||a===Cw||a===Lw||a===Rw||a===Pw||a===Iw||a===Nw||a===Ow||a===Fw||a===zw||a===Bw||a===kw||a===Uw||a===Hw||a===Vw||a===Gw||a===Ww||a===jw||a===qw||a===Xw)return o=e.get("WEBGL_compressed_texture_astc"),o!==null?a:null;if(a===Dw)return o=e.get("EXT_texture_compression_bptc"),o!==null?a:null;if(a===aa)return n?34042:(o=e.get("WEBGL_depth_texture"),o!==null?o.UNSIGNED_INT_24_8_WEBGL:null)}return{convert:i}}class w_ extends Fn{constructor(e=[]){super(),this.cameras=e}}w_.prototype.isArrayCamera=!0;class io extends Lt{constructor(){super(),this.type="Group"}}io.prototype.isGroup=!0;const OT={type:"move"};class Fu{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new io,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new io,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new j,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new j),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new io,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new j,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new j),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,t,n){let i=null,a=null,o=null;const l=this._targetRay,c=this._grip,h=this._hand;if(e&&t.session.visibilityState!=="visible-blurred")if(l!==null&&(i=t.getPose(e.targetRaySpace,n),i!==null&&(l.matrix.fromArray(i.transform.matrix),l.matrix.decompose(l.position,l.rotation,l.scale),i.linearVelocity?(l.hasLinearVelocity=!0,l.linearVelocity.copy(i.linearVelocity)):l.hasLinearVelocity=!1,i.angularVelocity?(l.hasAngularVelocity=!0,l.angularVelocity.copy(i.angularVelocity)):l.hasAngularVelocity=!1,this.dispatchEvent(OT))),h&&e.hand){o=!0;for(const x of e.hand.values()){const C=t.getJointPose(x,n);if(h.joints[x.jointName]===void 0){const b=new io;b.matrixAutoUpdate=!1,b.visible=!1,h.joints[x.jointName]=b,h.add(b)}const y=h.joints[x.jointName];C!==null&&(y.matrix.fromArray(C.transform.matrix),y.matrix.decompose(y.position,y.rotation,y.scale),y.jointRadius=C.radius),y.visible=C!==null}const f=h.joints["index-finger-tip"],m=h.joints["thumb-tip"],g=f.position.distanceTo(m.position),_=.02,M=.005;h.inputState.pinching&&g>_+M?(h.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!h.inputState.pinching&&g<=_-M&&(h.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else c!==null&&e.gripSpace&&(a=t.getPose(e.gripSpace,n),a!==null&&(c.matrix.fromArray(a.transform.matrix),c.matrix.decompose(c.position,c.rotation,c.scale),a.linearVelocity?(c.hasLinearVelocity=!0,c.linearVelocity.copy(a.linearVelocity)):c.hasLinearVelocity=!1,a.angularVelocity?(c.hasAngularVelocity=!0,c.angularVelocity.copy(a.angularVelocity)):c.hasAngularVelocity=!1));return l!==null&&(l.visible=i!==null),c!==null&&(c.visible=a!==null),h!==null&&(h.visible=o!==null),this}}class ph extends tn{constructor(e,t,n,i,a,o,l,c,h,f){if(f=f!==void 0?f:ms,f!==ms&&f!==va)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");n===void 0&&f===ms&&(n=Ao),n===void 0&&f===va&&(n=aa),super(null,i,a,o,l,c,f,n,h),this.image={width:e,height:t},this.magFilter=l!==void 0?l:dn,this.minFilter=c!==void 0?c:dn,this.flipY=!1,this.generateMipmaps=!1}}ph.prototype.isDepthTexture=!0;class FT extends bs{constructor(e,t){super();const n=this;let i=null,a=1,o=null,l="local-floor";const c=e.extensions.has("WEBGL_multisampled_render_to_texture");let h=null,f=null,m=null,g=null,_=!1,M=null;const x=t.getContextAttributes();let C=null,y=null;const b=[],O=new Map,P=new Fn;P.layers.enable(1),P.viewport=new Ft;const F=new Fn;F.layers.enable(2),F.viewport=new Ft;const p=[P,F],L=new w_;L.layers.enable(1),L.layers.enable(2);let W=null,X=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(de){let fe=b[de];return fe===void 0&&(fe=new Fu,b[de]=fe),fe.getTargetRaySpace()},this.getControllerGrip=function(de){let fe=b[de];return fe===void 0&&(fe=new Fu,b[de]=fe),fe.getGripSpace()},this.getHand=function(de){let fe=b[de];return fe===void 0&&(fe=new Fu,b[de]=fe),fe.getHandSpace()};function oe(de){const fe=O.get(de.inputSource);fe&&fe.dispatchEvent({type:de.type,data:de.inputSource})}function q(){O.forEach(function(de,fe){de.disconnect(fe)}),O.clear(),W=null,X=null,e.setRenderTarget(C),g=null,m=null,f=null,i=null,y=null,Oe.stop(),n.isPresenting=!1,n.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(de){a=de,n.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(de){l=de,n.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return o},this.getBaseLayer=function(){return m!==null?m:g},this.getBinding=function(){return f},this.getFrame=function(){return M},this.getSession=function(){return i},this.setSession=async function(de){if(i=de,i!==null){if(C=e.getRenderTarget(),i.addEventListener("select",oe),i.addEventListener("selectstart",oe),i.addEventListener("selectend",oe),i.addEventListener("squeeze",oe),i.addEventListener("squeezestart",oe),i.addEventListener("squeezeend",oe),i.addEventListener("end",q),i.addEventListener("inputsourceschange",ye),x.xrCompatible!==!0&&await t.makeXRCompatible(),i.renderState.layers===void 0||e.capabilities.isWebGL2===!1){const fe={antialias:i.renderState.layers===void 0?x.antialias:!0,alpha:x.alpha,depth:x.depth,stencil:x.stencil,framebufferScaleFactor:a};g=new XRWebGLLayer(i,t,fe),i.updateRenderState({baseLayer:g}),y=new vi(g.framebufferWidth,g.framebufferHeight)}else{_=x.antialias;let fe=null,ze=null,De=null;x.depth&&(De=x.stencil?35056:33189,fe=x.stencil?va:ms,ze=x.stencil?aa:Ao);const ke={colorFormat:x.alpha||_?32856:32849,depthFormat:De,scaleFactor:a};f=new XRWebGLBinding(i,t),m=f.createProjectionLayer(ke),i.updateRenderState({layers:[m]}),_?y=new Pf(m.textureWidth,m.textureHeight,{format:Ln,type:zr,depthTexture:new ph(m.textureWidth,m.textureHeight,ze,void 0,void 0,void 0,void 0,void 0,void 0,fe),stencilBuffer:x.stencil,ignoreDepth:m.ignoreDepthValues,useRenderToTexture:c}):y=new vi(m.textureWidth,m.textureHeight,{format:x.alpha?Ln:ps,type:zr,depthTexture:new ph(m.textureWidth,m.textureHeight,ze,void 0,void 0,void 0,void 0,void 0,void 0,fe),stencilBuffer:x.stencil,ignoreDepth:m.ignoreDepthValues})}this.setFoveation(0),o=await i.requestReferenceSpace(l),Oe.setContext(i),Oe.start(),n.isPresenting=!0,n.dispatchEvent({type:"sessionstart"})}};function ye(de){const fe=i.inputSources;for(let ze=0;ze<b.length;ze++)O.set(fe[ze],b[ze]);for(let ze=0;ze<de.removed.length;ze++){const De=de.removed[ze],ke=O.get(De);ke&&(ke.dispatchEvent({type:"disconnected",data:De}),O.delete(De))}for(let ze=0;ze<de.added.length;ze++){const De=de.added[ze],ke=O.get(De);ke&&ke.dispatchEvent({type:"connected",data:De})}}const ie=new j,ne=new j;function re(de,fe,ze){ie.setFromMatrixPosition(fe.matrixWorld),ne.setFromMatrixPosition(ze.matrixWorld);const De=ie.distanceTo(ne),ke=fe.projectionMatrix.elements,rt=ze.projectionMatrix.elements,Ee=ke[14]/(ke[10]-1),Te=ke[14]/(ke[10]+1),We=(ke[9]+1)/ke[5],Ge=(ke[9]-1)/ke[5],Xe=(ke[8]-1)/ke[0],Ye=(rt[8]+1)/rt[0],pe=Ee*Xe,Se=Ee*Ye,S=De/(-Xe+Ye),R=S*-Xe;fe.matrixWorld.decompose(de.position,de.quaternion,de.scale),de.translateX(R),de.translateZ(S),de.matrixWorld.compose(de.position,de.quaternion,de.scale),de.matrixWorldInverse.copy(de.matrixWorld).invert();const E=Ee+S,B=Te+S,H=pe-R,J=Se+(De-R),Q=We*Te/B*E,z=Ge*Te/B*E;de.projectionMatrix.makePerspective(H,J,Q,z,E,B)}function ae(de,fe){fe===null?de.matrixWorld.copy(de.matrix):de.matrixWorld.multiplyMatrices(fe.matrixWorld,de.matrix),de.matrixWorldInverse.copy(de.matrixWorld).invert()}this.updateCamera=function(de){if(i===null)return;L.near=F.near=P.near=de.near,L.far=F.far=P.far=de.far,(W!==L.near||X!==L.far)&&(i.updateRenderState({depthNear:L.near,depthFar:L.far}),W=L.near,X=L.far);const fe=de.parent,ze=L.cameras;ae(L,fe);for(let ke=0;ke<ze.length;ke++)ae(ze[ke],fe);L.matrixWorld.decompose(L.position,L.quaternion,L.scale),de.position.copy(L.position),de.quaternion.copy(L.quaternion),de.scale.copy(L.scale),de.matrix.copy(L.matrix),de.matrixWorld.copy(L.matrixWorld);const De=de.children;for(let ke=0,rt=De.length;ke<rt;ke++)De[ke].updateMatrixWorld(!0);ze.length===2?re(L,P,F):L.projectionMatrix.copy(P.projectionMatrix)},this.getCamera=function(){return L},this.getFoveation=function(){if(m!==null)return m.fixedFoveation;if(g!==null)return g.fixedFoveation},this.setFoveation=function(de){m!==null&&(m.fixedFoveation=de),g!==null&&g.fixedFoveation!==void 0&&(g.fixedFoveation=de)};let se=null;function be(de,fe){if(h=fe.getViewerPose(o),M=fe,h!==null){const De=h.views;g!==null&&(e.setRenderTargetFramebuffer(y,g.framebuffer),e.setRenderTarget(y));let ke=!1;De.length!==L.cameras.length&&(L.cameras.length=0,ke=!0);for(let rt=0;rt<De.length;rt++){const Ee=De[rt];let Te=null;if(g!==null)Te=g.getViewport(Ee);else{const Ge=f.getViewSubImage(m,Ee);Te=Ge.viewport,rt===0&&(e.setRenderTargetTextures(y,Ge.colorTexture,m.ignoreDepthValues?void 0:Ge.depthStencilTexture),e.setRenderTarget(y))}const We=p[rt];We.matrix.fromArray(Ee.transform.matrix),We.projectionMatrix.fromArray(Ee.projectionMatrix),We.viewport.set(Te.x,Te.y,Te.width,Te.height),rt===0&&L.matrix.copy(We.matrix),ke===!0&&L.cameras.push(We)}}const ze=i.inputSources;for(let De=0;De<b.length;De++){const ke=b[De],rt=ze[De];ke.update(rt,fe,o)}se&&se(de,fe),M=null}const Oe=new a_;Oe.setAnimationLoop(be),this.setAnimationLoop=function(de){se=de},this.dispose=function(){}}}function zT(r){function e(y,b){y.fogColor.value.copy(b.color),b.isFog?(y.fogNear.value=b.near,y.fogFar.value=b.far):b.isFogExp2&&(y.fogDensity.value=b.density)}function t(y,b,O,P,F){b.isMeshBasicMaterial?n(y,b):b.isMeshLambertMaterial?(n(y,b),c(y,b)):b.isMeshToonMaterial?(n(y,b),f(y,b)):b.isMeshPhongMaterial?(n(y,b),h(y,b)):b.isMeshStandardMaterial?(n(y,b),b.isMeshPhysicalMaterial?g(y,b,F):m(y,b)):b.isMeshMatcapMaterial?(n(y,b),_(y,b)):b.isMeshDepthMaterial?(n(y,b),M(y,b)):b.isMeshDistanceMaterial?(n(y,b),x(y,b)):b.isMeshNormalMaterial?(n(y,b),C(y,b)):b.isLineBasicMaterial?(i(y,b),b.isLineDashedMaterial&&a(y,b)):b.isPointsMaterial?o(y,b,O,P):b.isSpriteMaterial?l(y,b):b.isShadowMaterial?(y.color.value.copy(b.color),y.opacity.value=b.opacity):b.isShaderMaterial&&(b.uniformsNeedUpdate=!1)}function n(y,b){y.opacity.value=b.opacity,b.color&&y.diffuse.value.copy(b.color),b.emissive&&y.emissive.value.copy(b.emissive).multiplyScalar(b.emissiveIntensity),b.map&&(y.map.value=b.map),b.alphaMap&&(y.alphaMap.value=b.alphaMap),b.specularMap&&(y.specularMap.value=b.specularMap),b.alphaTest>0&&(y.alphaTest.value=b.alphaTest);const O=r.get(b).envMap;O&&(y.envMap.value=O,y.flipEnvMap.value=O.isCubeTexture&&O.isRenderTargetTexture===!1?-1:1,y.reflectivity.value=b.reflectivity,y.ior.value=b.ior,y.refractionRatio.value=b.refractionRatio),b.lightMap&&(y.lightMap.value=b.lightMap,y.lightMapIntensity.value=b.lightMapIntensity),b.aoMap&&(y.aoMap.value=b.aoMap,y.aoMapIntensity.value=b.aoMapIntensity);let P;b.map?P=b.map:b.specularMap?P=b.specularMap:b.displacementMap?P=b.displacementMap:b.normalMap?P=b.normalMap:b.bumpMap?P=b.bumpMap:b.roughnessMap?P=b.roughnessMap:b.metalnessMap?P=b.metalnessMap:b.alphaMap?P=b.alphaMap:b.emissiveMap?P=b.emissiveMap:b.clearcoatMap?P=b.clearcoatMap:b.clearcoatNormalMap?P=b.clearcoatNormalMap:b.clearcoatRoughnessMap?P=b.clearcoatRoughnessMap:b.specularIntensityMap?P=b.specularIntensityMap:b.specularColorMap?P=b.specularColorMap:b.transmissionMap?P=b.transmissionMap:b.thicknessMap?P=b.thicknessMap:b.sheenColorMap?P=b.sheenColorMap:b.sheenRoughnessMap&&(P=b.sheenRoughnessMap),P!==void 0&&(P.isWebGLRenderTarget&&(P=P.texture),P.matrixAutoUpdate===!0&&P.updateMatrix(),y.uvTransform.value.copy(P.matrix));let F;b.aoMap?F=b.aoMap:b.lightMap&&(F=b.lightMap),F!==void 0&&(F.isWebGLRenderTarget&&(F=F.texture),F.matrixAutoUpdate===!0&&F.updateMatrix(),y.uv2Transform.value.copy(F.matrix))}function i(y,b){y.diffuse.value.copy(b.color),y.opacity.value=b.opacity}function a(y,b){y.dashSize.value=b.dashSize,y.totalSize.value=b.dashSize+b.gapSize,y.scale.value=b.scale}function o(y,b,O,P){y.diffuse.value.copy(b.color),y.opacity.value=b.opacity,y.size.value=b.size*O,y.scale.value=P*.5,b.map&&(y.map.value=b.map),b.alphaMap&&(y.alphaMap.value=b.alphaMap),b.alphaTest>0&&(y.alphaTest.value=b.alphaTest);let F;b.map?F=b.map:b.alphaMap&&(F=b.alphaMap),F!==void 0&&(F.matrixAutoUpdate===!0&&F.updateMatrix(),y.uvTransform.value.copy(F.matrix))}function l(y,b){y.diffuse.value.copy(b.color),y.opacity.value=b.opacity,y.rotation.value=b.rotation,b.map&&(y.map.value=b.map),b.alphaMap&&(y.alphaMap.value=b.alphaMap),b.alphaTest>0&&(y.alphaTest.value=b.alphaTest);let O;b.map?O=b.map:b.alphaMap&&(O=b.alphaMap),O!==void 0&&(O.matrixAutoUpdate===!0&&O.updateMatrix(),y.uvTransform.value.copy(O.matrix))}function c(y,b){b.emissiveMap&&(y.emissiveMap.value=b.emissiveMap)}function h(y,b){y.specular.value.copy(b.specular),y.shininess.value=Math.max(b.shininess,1e-4),b.emissiveMap&&(y.emissiveMap.value=b.emissiveMap),b.bumpMap&&(y.bumpMap.value=b.bumpMap,y.bumpScale.value=b.bumpScale,b.side===ln&&(y.bumpScale.value*=-1)),b.normalMap&&(y.normalMap.value=b.normalMap,y.normalScale.value.copy(b.normalScale),b.side===ln&&y.normalScale.value.negate()),b.displacementMap&&(y.displacementMap.value=b.displacementMap,y.displacementScale.value=b.displacementScale,y.displacementBias.value=b.displacementBias)}function f(y,b){b.gradientMap&&(y.gradientMap.value=b.gradientMap),b.emissiveMap&&(y.emissiveMap.value=b.emissiveMap),b.bumpMap&&(y.bumpMap.value=b.bumpMap,y.bumpScale.value=b.bumpScale,b.side===ln&&(y.bumpScale.value*=-1)),b.normalMap&&(y.normalMap.value=b.normalMap,y.normalScale.value.copy(b.normalScale),b.side===ln&&y.normalScale.value.negate()),b.displacementMap&&(y.displacementMap.value=b.displacementMap,y.displacementScale.value=b.displacementScale,y.displacementBias.value=b.displacementBias)}function m(y,b){y.roughness.value=b.roughness,y.metalness.value=b.metalness,b.roughnessMap&&(y.roughnessMap.value=b.roughnessMap),b.metalnessMap&&(y.metalnessMap.value=b.metalnessMap),b.emissiveMap&&(y.emissiveMap.value=b.emissiveMap),b.bumpMap&&(y.bumpMap.value=b.bumpMap,y.bumpScale.value=b.bumpScale,b.side===ln&&(y.bumpScale.value*=-1)),b.normalMap&&(y.normalMap.value=b.normalMap,y.normalScale.value.copy(b.normalScale),b.side===ln&&y.normalScale.value.negate()),b.displacementMap&&(y.displacementMap.value=b.displacementMap,y.displacementScale.value=b.displacementScale,y.displacementBias.value=b.displacementBias),r.get(b).envMap&&(y.envMapIntensity.value=b.envMapIntensity)}function g(y,b,O){m(y,b),y.ior.value=b.ior,b.sheen>0&&(y.sheenColor.value.copy(b.sheenColor).multiplyScalar(b.sheen),y.sheenRoughness.value=b.sheenRoughness,b.sheenColorMap&&(y.sheenColorMap.value=b.sheenColorMap),b.sheenRoughnessMap&&(y.sheenRoughnessMap.value=b.sheenRoughnessMap)),b.clearcoat>0&&(y.clearcoat.value=b.clearcoat,y.clearcoatRoughness.value=b.clearcoatRoughness,b.clearcoatMap&&(y.clearcoatMap.value=b.clearcoatMap),b.clearcoatRoughnessMap&&(y.clearcoatRoughnessMap.value=b.clearcoatRoughnessMap),b.clearcoatNormalMap&&(y.clearcoatNormalScale.value.copy(b.clearcoatNormalScale),y.clearcoatNormalMap.value=b.clearcoatNormalMap,b.side===ln&&y.clearcoatNormalScale.value.negate())),b.transmission>0&&(y.transmission.value=b.transmission,y.transmissionSamplerMap.value=O.texture,y.transmissionSamplerSize.value.set(O.width,O.height),b.transmissionMap&&(y.transmissionMap.value=b.transmissionMap),y.thickness.value=b.thickness,b.thicknessMap&&(y.thicknessMap.value=b.thicknessMap),y.attenuationDistance.value=b.attenuationDistance,y.attenuationColor.value.copy(b.attenuationColor)),y.specularIntensity.value=b.specularIntensity,y.specularColor.value.copy(b.specularColor),b.specularIntensityMap&&(y.specularIntensityMap.value=b.specularIntensityMap),b.specularColorMap&&(y.specularColorMap.value=b.specularColorMap)}function _(y,b){b.matcap&&(y.matcap.value=b.matcap),b.bumpMap&&(y.bumpMap.value=b.bumpMap,y.bumpScale.value=b.bumpScale,b.side===ln&&(y.bumpScale.value*=-1)),b.normalMap&&(y.normalMap.value=b.normalMap,y.normalScale.value.copy(b.normalScale),b.side===ln&&y.normalScale.value.negate()),b.displacementMap&&(y.displacementMap.value=b.displacementMap,y.displacementScale.value=b.displacementScale,y.displacementBias.value=b.displacementBias)}function M(y,b){b.displacementMap&&(y.displacementMap.value=b.displacementMap,y.displacementScale.value=b.displacementScale,y.displacementBias.value=b.displacementBias)}function x(y,b){b.displacementMap&&(y.displacementMap.value=b.displacementMap,y.displacementScale.value=b.displacementScale,y.displacementBias.value=b.displacementBias),y.referencePosition.value.copy(b.referencePosition),y.nearDistance.value=b.nearDistance,y.farDistance.value=b.farDistance}function C(y,b){b.bumpMap&&(y.bumpMap.value=b.bumpMap,y.bumpScale.value=b.bumpScale,b.side===ln&&(y.bumpScale.value*=-1)),b.normalMap&&(y.normalMap.value=b.normalMap,y.normalScale.value.copy(b.normalScale),b.side===ln&&y.normalScale.value.negate()),b.displacementMap&&(y.displacementMap.value=b.displacementMap,y.displacementScale.value=b.displacementScale,y.displacementBias.value=b.displacementBias)}return{refreshFogUniforms:e,refreshMaterialUniforms:t}}function BT(){const r=bc("canvas");return r.style.display="block",r}function bt(r={}){const e=r.canvas!==void 0?r.canvas:BT(),t=r.context!==void 0?r.context:null,n=r.alpha!==void 0?r.alpha:!1,i=r.depth!==void 0?r.depth:!0,a=r.stencil!==void 0?r.stencil:!0,o=r.antialias!==void 0?r.antialias:!1,l=r.premultipliedAlpha!==void 0?r.premultipliedAlpha:!0,c=r.preserveDrawingBuffer!==void 0?r.preserveDrawingBuffer:!1,h=r.powerPreference!==void 0?r.powerPreference:"default",f=r.failIfMajorPerformanceCaveat!==void 0?r.failIfMajorPerformanceCaveat:!1;let m=null,g=null;const _=[],M=[];this.domElement=e,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.gammaFactor=2,this.outputEncoding=qn,this.physicallyCorrectLights=!1,this.toneMapping=ds,this.toneMappingExposure=1;const x=this;let C=!1,y=0,b=0,O=null,P=-1,F=null;const p=new Ft,L=new Ft;let W=null,X=e.width,oe=e.height,q=1,ye=null,ie=null;const ne=new Ft(0,0,X,oe),re=new Ft(0,0,X,oe);let ae=!1;const se=[],be=new Sc;let Oe=!1,de=!1,fe=null;const ze=new nt,De=new j,ke={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function rt(){return O===null?q:1}let Ee=t;function Te(k,ce){for(let me=0;me<k.length;me++){const ue=k[me],Me=e.getContext(ue,ce);if(Me!==null)return Me}return null}try{const k={alpha:n,depth:i,stencil:a,antialias:o,premultipliedAlpha:l,preserveDrawingBuffer:c,powerPreference:h,failIfMajorPerformanceCaveat:f};if("setAttribute"in e&&e.setAttribute("data-engine",`three.js r${Ef}`),e.addEventListener("webglcontextlost",Be,!1),e.addEventListener("webglcontextrestored",it,!1),Ee===null){const ce=["webgl2","webgl","experimental-webgl"];if(x.isWebGL1Renderer===!0&&ce.shift(),Ee=Te(ce,k),Ee===null)throw Te(ce)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}Ee.getShaderPrecisionFormat===void 0&&(Ee.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(k){throw console.error("THREE.WebGLRenderer: "+k.message),k}let We,Ge,Xe,Ye,pe,Se,S,R,E,B,H,J,Q,z,D,Z,te,xe,Le,Y,Ne,ge,Re;function Ie(){We=new o1(Ee),Ge=new KS(Ee,We,r),We.init(Ge),ge=new NT(Ee,We,Ge),Xe=new IT(Ee,We,Ge),se[0]=1029,Ye=new u1,pe=new wT,Se=new DT(Ee,We,Xe,pe,Ge,ge,Ye),S=new t1(x),R=new a1(x),E=new Mb(Ee,Ge),Re=new ZS(Ee,We,E,Ge),B=new l1(Ee,E,Ye,Re),H=new p1(Ee,B,E,Ye),Le=new d1(Ee,Ge,Se),Z=new e1(pe),J=new xT(x,S,R,We,Ge,Re,Z),Q=new zT(pe),z=new MT(pe),D=new LT(We,Ge),xe=new JS(x,S,Xe,H,l),te=new x_(x,H,Ge),Y=new QS(Ee,We,Ye,Ge),Ne=new c1(Ee,We,Ye,Ge),Ye.programs=J.programs,x.capabilities=Ge,x.extensions=We,x.properties=pe,x.renderLists=z,x.shadowMap=te,x.state=Xe,x.info=Ye}Ie();const Ue=new FT(x,Ee);this.xr=Ue,this.getContext=function(){return Ee},this.getContextAttributes=function(){return Ee.getContextAttributes()},this.forceContextLoss=function(){const k=We.get("WEBGL_lose_context");k&&k.loseContext()},this.forceContextRestore=function(){const k=We.get("WEBGL_lose_context");k&&k.restoreContext()},this.getPixelRatio=function(){return q},this.setPixelRatio=function(k){k!==void 0&&(q=k,this.setSize(X,oe,!1))},this.getSize=function(k){return k.set(X,oe)},this.setSize=function(k,ce,me){if(Ue.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}X=k,oe=ce,e.width=Math.floor(k*q),e.height=Math.floor(ce*q),me!==!1&&(e.style.width=k+"px",e.style.height=ce+"px"),this.setViewport(0,0,k,ce)},this.getDrawingBufferSize=function(k){return k.set(X*q,oe*q).floor()},this.setDrawingBufferSize=function(k,ce,me){X=k,oe=ce,q=me,e.width=Math.floor(k*me),e.height=Math.floor(ce*me),this.setViewport(0,0,k,ce)},this.getCurrentViewport=function(k){return k.copy(p)},this.getViewport=function(k){return k.copy(ne)},this.setViewport=function(k,ce,me,ue){k.isVector4?ne.set(k.x,k.y,k.z,k.w):ne.set(k,ce,me,ue),Xe.viewport(p.copy(ne).multiplyScalar(q).floor())},this.getScissor=function(k){return k.copy(re)},this.setScissor=function(k,ce,me,ue){k.isVector4?re.set(k.x,k.y,k.z,k.w):re.set(k,ce,me,ue),Xe.scissor(L.copy(re).multiplyScalar(q).floor())},this.getScissorTest=function(){return ae},this.setScissorTest=function(k){Xe.setScissorTest(ae=k)},this.setOpaqueSort=function(k){ye=k},this.setTransparentSort=function(k){ie=k},this.getClearColor=function(k){return k.copy(xe.getClearColor())},this.setClearColor=function(){xe.setClearColor.apply(xe,arguments)},this.getClearAlpha=function(){return xe.getClearAlpha()},this.setClearAlpha=function(){xe.setClearAlpha.apply(xe,arguments)},this.clear=function(k,ce,me){let ue=0;(k===void 0||k)&&(ue|=16384),(ce===void 0||ce)&&(ue|=256),(me===void 0||me)&&(ue|=1024),Ee.clear(ue)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){e.removeEventListener("webglcontextlost",Be,!1),e.removeEventListener("webglcontextrestored",it,!1),z.dispose(),D.dispose(),pe.dispose(),S.dispose(),R.dispose(),H.dispose(),Re.dispose(),Ue.dispose(),Ue.removeEventListener("sessionstart",ur),Ue.removeEventListener("sessionend",Pa),fe&&(fe.dispose(),fe=null),In.stop()};function Be(k){k.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),C=!0}function it(){console.log("THREE.WebGLRenderer: Context Restored."),C=!1;const k=Ye.autoReset,ce=te.enabled,me=te.autoUpdate,ue=te.needsUpdate,Me=te.type;Ie(),Ye.autoReset=k,te.enabled=ce,te.autoUpdate=me,te.needsUpdate=ue,te.type=Me}function Mt(k){const ce=k.target;ce.removeEventListener("dispose",Mt),Qe(ce)}function Qe(k){St(k),pe.remove(k)}function St(k){const ce=pe.get(k).programs;ce!==void 0&&ce.forEach(function(me){J.releaseProgram(me)})}this.renderBufferDirect=function(k,ce,me,ue,Me,st){ce===null&&(ce=ke);const Je=Me.isMesh&&Me.matrixWorld.determinant()<0,ut=Pc(k,ce,me,ue,Me);Xe.setMaterial(ue,Je);let at=me.index;const ft=me.attributes.position;if(at===null){if(ft===void 0||ft.count===0)return}else if(at.count===0)return;let ht=1;ue.wireframe===!0&&(at=B.getWireframeAttribute(me),ht=2),Re.setup(Me,ue,ut,me,at);let pt,Ut=Y;at!==null&&(pt=E.get(at),Ut=Ne,Ut.setIndex(pt));const Di=at!==null?at.count:ft.count,_t=me.drawRange.start*ht,Yi=me.drawRange.count*ht,Pt=st!==null?st.start*ht:0,Ni=st!==null?st.count*ht:1/0,$i=Math.max(_t,Pt),Oi=Math.min(Di,_t+Yi,Pt+Ni)-1,xi=Math.max(0,Oi-$i+1);if(xi!==0){if(Me.isMesh)ue.wireframe===!0?(Xe.setLineWidth(ue.wireframeLinewidth*rt()),Ut.setMode(1)):Ut.setMode(4);else if(Me.isLine){let zt=ue.linewidth;zt===void 0&&(zt=1),Xe.setLineWidth(zt*rt()),Me.isLineSegments?Ut.setMode(1):Me.isLineLoop?Ut.setMode(2):Ut.setMode(3)}else Me.isPoints?Ut.setMode(0):Me.isSprite&&Ut.setMode(4);if(Me.isInstancedMesh)Ut.renderInstances($i,xi,Me.count);else if(me.isInstancedBufferGeometry){const zt=Math.min(me.instanceCount,me._maxInstanceCount);Ut.renderInstances($i,xi,zt)}else Ut.render($i,xi)}},this.compile=function(k,ce){g=D.get(k),g.init(),M.push(g),k.traverseVisible(function(me){me.isLight&&me.layers.test(ce.layers)&&(g.pushLight(me),me.castShadow&&g.pushShadow(me))}),g.setupLights(x.physicallyCorrectLights),k.traverse(function(me){const ue=me.material;if(ue)if(Array.isArray(ue))for(let Me=0;Me<ue.length;Me++){const st=ue[Me];Ia(st,k,me)}else Ia(ue,k,me)}),M.pop(),g=null};let sn=null;function jr(k){sn&&sn(k)}function ur(){In.stop()}function Pa(){In.start()}const In=new a_;In.setAnimationLoop(jr),typeof window<"u"&&In.setContext(window),this.setAnimationLoop=function(k){sn=k,Ue.setAnimationLoop(k),k===null?In.stop():In.start()},Ue.addEventListener("sessionstart",ur),Ue.addEventListener("sessionend",Pa),this.render=function(k,ce){if(ce!==void 0&&ce.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(C===!0)return;k.autoUpdate===!0&&k.updateMatrixWorld(),ce.parent===null&&ce.updateMatrixWorld(),Ue.enabled===!0&&Ue.isPresenting===!0&&(Ue.cameraAutoUpdate===!0&&Ue.updateCamera(ce),ce=Ue.getCamera()),k.isScene===!0&&k.onBeforeRender(x,k,ce,O),g=D.get(k,M.length),g.init(),M.push(g),ze.multiplyMatrices(ce.projectionMatrix,ce.matrixWorldInverse),be.setFromProjectionMatrix(ze),de=this.localClippingEnabled,Oe=Z.init(this.clippingPlanes,de,ce),m=z.get(k,_.length),m.init(),_.push(m),Xi(k,ce,0,x.sortObjects),m.finish(),x.sortObjects===!0&&m.sort(ye,ie),Oe===!0&&Z.beginShadows();const me=g.state.shadowsArray;if(te.render(me,k,ce),Oe===!0&&Z.endShadows(),this.info.autoReset===!0&&this.info.reset(),xe.render(m,k),g.setupLights(x.physicallyCorrectLights),ce.isArrayCamera){const ue=ce.cameras;for(let Me=0,st=ue.length;Me<st;Me++){const Je=ue[Me];Wo(m,k,Je,Je.viewport)}}else Wo(m,k,ce);O!==null&&(Se.updateMultisampleRenderTarget(O),Se.updateRenderTargetMipmap(O)),k.isScene===!0&&k.onAfterRender(x,k,ce),Xe.buffers.depth.setTest(!0),Xe.buffers.depth.setMask(!0),Xe.buffers.color.setMask(!0),Xe.setPolygonOffset(!1),Re.resetDefaultState(),P=-1,F=null,M.pop(),M.length>0?g=M[M.length-1]:g=null,_.pop(),_.length>0?m=_[_.length-1]:m=null};function Xi(k,ce,me,ue){if(k.visible===!1)return;if(k.layers.test(ce.layers)){if(k.isGroup)me=k.renderOrder;else if(k.isLOD)k.autoUpdate===!0&&k.update(ce);else if(k.isLight)g.pushLight(k),k.castShadow&&g.pushShadow(k);else if(k.isSprite){if(!k.frustumCulled||be.intersectsSprite(k)){ue&&De.setFromMatrixPosition(k.matrixWorld).applyMatrix4(ze);const Je=H.update(k),ut=k.material;ut.visible&&m.push(k,Je,ut,me,De.z,null)}}else if((k.isMesh||k.isLine||k.isPoints)&&(k.isSkinnedMesh&&k.skeleton.frame!==Ye.render.frame&&(k.skeleton.update(),k.skeleton.frame=Ye.render.frame),!k.frustumCulled||be.intersectsObject(k))){ue&&De.setFromMatrixPosition(k.matrixWorld).applyMatrix4(ze);const Je=H.update(k),ut=k.material;if(Array.isArray(ut)){const at=Je.groups;for(let ft=0,ht=at.length;ft<ht;ft++){const pt=at[ft],Ut=ut[pt.materialIndex];Ut&&Ut.visible&&m.push(k,Je,Ut,me,De.z,pt)}}else ut.visible&&m.push(k,Je,ut,me,De.z,null)}}const st=k.children;for(let Je=0,ut=st.length;Je<ut;Je++)Xi(st[Je],ce,me,ue)}function Wo(k,ce,me,ue){const Me=k.opaque,st=k.transmissive,Je=k.transparent;g.setupLightsView(me),st.length>0&&Rc(Me,ce,me),ue&&Xe.viewport(p.copy(ue)),Me.length>0&&hr(Me,ce,me),st.length>0&&hr(st,ce,me),Je.length>0&&hr(Je,ce,me)}function Rc(k,ce,me){if(fe===null){const Je=o===!0&&Ge.isWebGL2===!0?Pf:vi;fe=new Je(1024,1024,{generateMipmaps:!0,type:ge.convert(sa)!==null?sa:zr,minFilter:xc,magFilter:dn,wrapS:ii,wrapT:ii,useRenderToTexture:We.has("WEBGL_multisampled_render_to_texture")})}const ue=x.getRenderTarget();x.setRenderTarget(fe),x.clear();const Me=x.toneMapping;x.toneMapping=ds,hr(k,ce,me),x.toneMapping=Me,Se.updateMultisampleRenderTarget(fe),Se.updateRenderTargetMipmap(fe),x.setRenderTarget(ue)}function hr(k,ce,me){const ue=ce.isScene===!0?ce.overrideMaterial:null;for(let Me=0,st=k.length;Me<st;Me++){const Je=k[Me],ut=Je.object,at=Je.geometry,ft=ue===null?Je.material:ue,ht=Je.group;ut.layers.test(me.layers)&&Ts(ut,ce,me,at,ft,ht)}}function Ts(k,ce,me,ue,Me,st){k.onBeforeRender(x,ce,me,ue,Me,st),k.modelViewMatrix.multiplyMatrices(me.matrixWorldInverse,k.matrixWorld),k.normalMatrix.getNormalMatrix(k.modelViewMatrix),Me.onBeforeRender(x,ce,me,ue,k,st),Me.transparent===!0&&Me.side===ga?(Me.side=ln,Me.needsUpdate=!0,x.renderBufferDirect(me,ce,ue,Me,k,st),Me.side=Eo,Me.needsUpdate=!0,x.renderBufferDirect(me,ce,ue,Me,k,st),Me.side=ga):x.renderBufferDirect(me,ce,ue,Me,k,st),k.onAfterRender(x,ce,me,ue,Me,st)}function Ia(k,ce,me){ce.isScene!==!0&&(ce=ke);const ue=pe.get(k),Me=g.state.lights,st=g.state.shadowsArray,Je=Me.state.version,ut=J.getParameters(k,Me.state,st,ce,me),at=J.getProgramCacheKey(ut);let ft=ue.programs;ue.environment=k.isMeshStandardMaterial?ce.environment:null,ue.fog=ce.fog,ue.envMap=(k.isMeshStandardMaterial?R:S).get(k.envMap||ue.environment),ft===void 0&&(k.addEventListener("dispose",Mt),ft=new Map,ue.programs=ft);let ht=ft.get(at);if(ht!==void 0){if(ue.currentProgram===ht&&ue.lightsStateVersion===Je)return jo(k,ut),ht}else ut.uniforms=J.getUniforms(k),k.onBuild(me,ut,x),k.onBeforeCompile(ut,x),ht=J.acquireProgram(ut,at),ft.set(at,ht),ue.uniforms=ut.uniforms;const pt=ue.uniforms;(!k.isShaderMaterial&&!k.isRawShaderMaterial||k.clipping===!0)&&(pt.clippingPlanes=Z.uniform),jo(k,ut),ue.needsLights=Ic(k),ue.lightsStateVersion=Je,ue.needsLights&&(pt.ambientLightColor.value=Me.state.ambient,pt.lightProbe.value=Me.state.probe,pt.directionalLights.value=Me.state.directional,pt.directionalLightShadows.value=Me.state.directionalShadow,pt.spotLights.value=Me.state.spot,pt.spotLightShadows.value=Me.state.spotShadow,pt.rectAreaLights.value=Me.state.rectArea,pt.ltc_1.value=Me.state.rectAreaLTC1,pt.ltc_2.value=Me.state.rectAreaLTC2,pt.pointLights.value=Me.state.point,pt.pointLightShadows.value=Me.state.pointShadow,pt.hemisphereLights.value=Me.state.hemi,pt.directionalShadowMap.value=Me.state.directionalShadowMap,pt.directionalShadowMatrix.value=Me.state.directionalShadowMatrix,pt.spotShadowMap.value=Me.state.spotShadowMap,pt.spotShadowMatrix.value=Me.state.spotShadowMatrix,pt.pointShadowMap.value=Me.state.pointShadowMap,pt.pointShadowMatrix.value=Me.state.pointShadowMatrix);const Ut=ht.getUniforms(),Di=Pr.seqWithValue(Ut.seq,pt);return ue.currentProgram=ht,ue.uniformsList=Di,ht}function jo(k,ce){const me=pe.get(k);me.outputEncoding=ce.outputEncoding,me.instancing=ce.instancing,me.skinning=ce.skinning,me.morphTargets=ce.morphTargets,me.morphNormals=ce.morphNormals,me.morphTargetsCount=ce.morphTargetsCount,me.numClippingPlanes=ce.numClippingPlanes,me.numIntersection=ce.numClipIntersection,me.vertexAlphas=ce.vertexAlphas,me.vertexTangents=ce.vertexTangents}function Pc(k,ce,me,ue,Me){ce.isScene!==!0&&(ce=ke),Se.resetTextureUnits();const st=ce.fog,Je=ue.isMeshStandardMaterial?ce.environment:null,ut=O===null?x.outputEncoding:O.texture.encoding,at=(ue.isMeshStandardMaterial?R:S).get(ue.envMap||Je),ft=ue.vertexColors===!0&&!!me.attributes.color&&me.attributes.color.itemSize===4,ht=!!ue.normalMap&&!!me.attributes.tangent,pt=!!me.morphAttributes.position,Ut=!!me.morphAttributes.normal,Di=me.morphAttributes.position?me.morphAttributes.position.length:0,_t=pe.get(ue),Yi=g.state.lights;if(Oe===!0&&(de===!0||k!==F)){const Bt=k===F&&ue.id===P;Z.setState(ue,k,Bt)}let Pt=!1;ue.version===_t.__version?(_t.needsLights&&_t.lightsStateVersion!==Yi.state.version||_t.outputEncoding!==ut||Me.isInstancedMesh&&_t.instancing===!1||!Me.isInstancedMesh&&_t.instancing===!0||Me.isSkinnedMesh&&_t.skinning===!1||!Me.isSkinnedMesh&&_t.skinning===!0||_t.envMap!==at||ue.fog&&_t.fog!==st||_t.numClippingPlanes!==void 0&&(_t.numClippingPlanes!==Z.numPlanes||_t.numIntersection!==Z.numIntersection)||_t.vertexAlphas!==ft||_t.vertexTangents!==ht||_t.morphTargets!==pt||_t.morphNormals!==Ut||Ge.isWebGL2===!0&&_t.morphTargetsCount!==Di)&&(Pt=!0):(Pt=!0,_t.__version=ue.version);let Ni=_t.currentProgram;Pt===!0&&(Ni=Ia(ue,ce,Me));let $i=!1,Oi=!1,xi=!1;const zt=Ni.getUniforms(),fr=_t.uniforms;if(Xe.useProgram(Ni.program)&&($i=!0,Oi=!0,xi=!0),ue.id!==P&&(P=ue.id,Oi=!0),$i||F!==k){if(zt.setValue(Ee,"projectionMatrix",k.projectionMatrix),Ge.logarithmicDepthBuffer&&zt.setValue(Ee,"logDepthBufFC",2/(Math.log(k.far+1)/Math.LN2)),F!==k&&(F=k,Oi=!0,xi=!0),ue.isShaderMaterial||ue.isMeshPhongMaterial||ue.isMeshToonMaterial||ue.isMeshStandardMaterial||ue.envMap){const Bt=zt.map.cameraPosition;Bt!==void 0&&Bt.setValue(Ee,De.setFromMatrixPosition(k.matrixWorld))}(ue.isMeshPhongMaterial||ue.isMeshToonMaterial||ue.isMeshLambertMaterial||ue.isMeshBasicMaterial||ue.isMeshStandardMaterial||ue.isShaderMaterial)&&zt.setValue(Ee,"isOrthographic",k.isOrthographicCamera===!0),(ue.isMeshPhongMaterial||ue.isMeshToonMaterial||ue.isMeshLambertMaterial||ue.isMeshBasicMaterial||ue.isMeshStandardMaterial||ue.isShaderMaterial||ue.isShadowMaterial||Me.isSkinnedMesh)&&zt.setValue(Ee,"viewMatrix",k.matrixWorldInverse)}if(Me.isSkinnedMesh){zt.setOptional(Ee,Me,"bindMatrix"),zt.setOptional(Ee,Me,"bindMatrixInverse");const Bt=Me.skeleton;Bt&&(Ge.floatVertexTextures?(Bt.boneTexture===null&&Bt.computeBoneTexture(),zt.setValue(Ee,"boneTexture",Bt.boneTexture,Se),zt.setValue(Ee,"boneTextureSize",Bt.boneTextureSize)):zt.setOptional(Ee,Bt,"boneMatrices"))}return me&&(me.morphAttributes.position!==void 0||me.morphAttributes.normal!==void 0)&&Le.update(Me,me,ue,Ni),(Oi||_t.receiveShadow!==Me.receiveShadow)&&(_t.receiveShadow=Me.receiveShadow,zt.setValue(Ee,"receiveShadow",Me.receiveShadow)),Oi&&(zt.setValue(Ee,"toneMappingExposure",x.toneMappingExposure),_t.needsLights&&qo(fr,xi),st&&ue.fog&&Q.refreshFogUniforms(fr,st),Q.refreshMaterialUniforms(fr,ue,q,oe,fe),Pr.upload(Ee,_t.uniformsList,fr,Se)),ue.isShaderMaterial&&ue.uniformsNeedUpdate===!0&&(Pr.upload(Ee,_t.uniformsList,fr,Se),ue.uniformsNeedUpdate=!1),ue.isSpriteMaterial&&zt.setValue(Ee,"center",Me.center),zt.setValue(Ee,"modelViewMatrix",Me.modelViewMatrix),zt.setValue(Ee,"normalMatrix",Me.normalMatrix),zt.setValue(Ee,"modelMatrix",Me.matrixWorld),Ni}function qo(k,ce){k.ambientLightColor.needsUpdate=ce,k.lightProbe.needsUpdate=ce,k.directionalLights.needsUpdate=ce,k.directionalLightShadows.needsUpdate=ce,k.pointLights.needsUpdate=ce,k.pointLightShadows.needsUpdate=ce,k.spotLights.needsUpdate=ce,k.spotLightShadows.needsUpdate=ce,k.rectAreaLights.needsUpdate=ce,k.hemisphereLights.needsUpdate=ce}function Ic(k){return k.isMeshLambertMaterial||k.isMeshToonMaterial||k.isMeshPhongMaterial||k.isMeshStandardMaterial||k.isShadowMaterial||k.isShaderMaterial&&k.lights===!0}this.getActiveCubeFace=function(){return y},this.getActiveMipmapLevel=function(){return b},this.getRenderTarget=function(){return O},this.setRenderTargetTextures=function(k,ce,me){pe.get(k.texture).__webglTexture=ce,pe.get(k.depthTexture).__webglTexture=me;const ue=pe.get(k);ue.__hasExternalTextures=!0,ue.__hasExternalTextures&&(ue.__autoAllocateDepthBuffer=me===void 0,ue.__autoAllocateDepthBuffer||k.useRenderToTexture&&(console.warn("render-to-texture extension was disabled because an external texture was provided"),k.useRenderToTexture=!1,k.useRenderbuffer=!0))},this.setRenderTargetFramebuffer=function(k,ce){const me=pe.get(k);me.__webglFramebuffer=ce,me.__useDefaultFramebuffer=ce===void 0},this.setRenderTarget=function(k,ce=0,me=0){O=k,y=ce,b=me;let ue=!0;if(k){const at=pe.get(k);at.__useDefaultFramebuffer!==void 0?(Xe.bindFramebuffer(36160,null),ue=!1):at.__webglFramebuffer===void 0?Se.setupRenderTarget(k):at.__hasExternalTextures&&Se.rebindTextures(k,pe.get(k.texture).__webglTexture,pe.get(k.depthTexture).__webglTexture)}let Me=null,st=!1,Je=!1;if(k){const at=k.texture;(at.isDataTexture3D||at.isDataTexture2DArray)&&(Je=!0);const ft=pe.get(k).__webglFramebuffer;k.isWebGLCubeRenderTarget?(Me=ft[ce],st=!0):k.useRenderbuffer?Me=pe.get(k).__webglMultisampledFramebuffer:Me=ft,p.copy(k.viewport),L.copy(k.scissor),W=k.scissorTest}else p.copy(ne).multiplyScalar(q).floor(),L.copy(re).multiplyScalar(q).floor(),W=ae;if(Xe.bindFramebuffer(36160,Me)&&Ge.drawBuffers&&ue){let at=!1;if(k)if(k.isWebGLMultipleRenderTargets){const ft=k.texture;if(se.length!==ft.length||se[0]!==36064){for(let ht=0,pt=ft.length;ht<pt;ht++)se[ht]=36064+ht;se.length=ft.length,at=!0}}else(se.length!==1||se[0]!==36064)&&(se[0]=36064,se.length=1,at=!0);else(se.length!==1||se[0]!==1029)&&(se[0]=1029,se.length=1,at=!0);at&&(Ge.isWebGL2?Ee.drawBuffers(se):We.get("WEBGL_draw_buffers").drawBuffersWEBGL(se))}if(Xe.viewport(p),Xe.scissor(L),Xe.setScissorTest(W),st){const at=pe.get(k.texture);Ee.framebufferTexture2D(36160,36064,34069+ce,at.__webglTexture,me)}else if(Je){const at=pe.get(k.texture),ft=ce||0;Ee.framebufferTextureLayer(36160,36064,at.__webglTexture,me||0,ft)}P=-1},this.readRenderTargetPixels=function(k,ce,me,ue,Me,st,Je){if(!(k&&k.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let ut=pe.get(k).__webglFramebuffer;if(k.isWebGLCubeRenderTarget&&Je!==void 0&&(ut=ut[Je]),ut){Xe.bindFramebuffer(36160,ut);try{const at=k.texture,ft=at.format,ht=at.type;if(ft!==Ln&&ge.convert(ft)!==Ee.getParameter(35739)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}const pt=ht===sa&&(We.has("EXT_color_buffer_half_float")||Ge.isWebGL2&&We.has("EXT_color_buffer_float"));if(ht!==zr&&ge.convert(ht)!==Ee.getParameter(35738)&&!(ht===Mr&&(Ge.isWebGL2||We.has("OES_texture_float")||We.has("WEBGL_color_buffer_float")))&&!pt){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}Ee.checkFramebufferStatus(36160)===36053?ce>=0&&ce<=k.width-ue&&me>=0&&me<=k.height-Me&&Ee.readPixels(ce,me,ue,Me,ge.convert(ft),ge.convert(ht),st):console.error("THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete.")}finally{const at=O!==null?pe.get(O).__webglFramebuffer:null;Xe.bindFramebuffer(36160,at)}}},this.copyFramebufferToTexture=function(k,ce,me=0){const ue=Math.pow(2,-me),Me=Math.floor(ce.image.width*ue),st=Math.floor(ce.image.height*ue);let Je=ge.convert(ce.format);Ge.isWebGL2&&(Je===6407&&(Je=32849),Je===6408&&(Je=32856)),Se.setTexture2D(ce,0),Ee.copyTexImage2D(3553,me,Je,k.x,k.y,Me,st,0),Xe.unbindTexture()},this.copyTextureToTexture=function(k,ce,me,ue=0){const Me=ce.image.width,st=ce.image.height,Je=ge.convert(me.format),ut=ge.convert(me.type);Se.setTexture2D(me,0),Ee.pixelStorei(37440,me.flipY),Ee.pixelStorei(37441,me.premultiplyAlpha),Ee.pixelStorei(3317,me.unpackAlignment),ce.isDataTexture?Ee.texSubImage2D(3553,ue,k.x,k.y,Me,st,Je,ut,ce.image.data):ce.isCompressedTexture?Ee.compressedTexSubImage2D(3553,ue,k.x,k.y,ce.mipmaps[0].width,ce.mipmaps[0].height,Je,ce.mipmaps[0].data):Ee.texSubImage2D(3553,ue,k.x,k.y,Je,ut,ce.image),ue===0&&me.generateMipmaps&&Ee.generateMipmap(3553),Xe.unbindTexture()},this.copyTextureToTexture3D=function(k,ce,me,ue,Me=0){if(x.isWebGL1Renderer){console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");return}const st=k.max.x-k.min.x+1,Je=k.max.y-k.min.y+1,ut=k.max.z-k.min.z+1,at=ge.convert(ue.format),ft=ge.convert(ue.type);let ht;if(ue.isDataTexture3D)Se.setTexture3D(ue,0),ht=32879;else if(ue.isDataTexture2DArray)Se.setTexture2DArray(ue,0),ht=35866;else{console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");return}Ee.pixelStorei(37440,ue.flipY),Ee.pixelStorei(37441,ue.premultiplyAlpha),Ee.pixelStorei(3317,ue.unpackAlignment);const pt=Ee.getParameter(3314),Ut=Ee.getParameter(32878),Di=Ee.getParameter(3316),_t=Ee.getParameter(3315),Yi=Ee.getParameter(32877),Pt=me.isCompressedTexture?me.mipmaps[0]:me.image;Ee.pixelStorei(3314,Pt.width),Ee.pixelStorei(32878,Pt.height),Ee.pixelStorei(3316,k.min.x),Ee.pixelStorei(3315,k.min.y),Ee.pixelStorei(32877,k.min.z),me.isDataTexture||me.isDataTexture3D?Ee.texSubImage3D(ht,Me,ce.x,ce.y,ce.z,st,Je,ut,at,ft,Pt.data):me.isCompressedTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),Ee.compressedTexSubImage3D(ht,Me,ce.x,ce.y,ce.z,st,Je,ut,at,Pt.data)):Ee.texSubImage3D(ht,Me,ce.x,ce.y,ce.z,st,Je,ut,at,ft,Pt),Ee.pixelStorei(3314,pt),Ee.pixelStorei(32878,Ut),Ee.pixelStorei(3316,Di),Ee.pixelStorei(3315,_t),Ee.pixelStorei(32877,Yi),Me===0&&ue.generateMipmaps&&Ee.generateMipmap(ht),Xe.unbindTexture()},this.initTexture=function(k){Se.setTexture2D(k,0),Xe.unbindTexture()},this.resetState=function(){y=0,b=0,O=null,Xe.reset(),Re.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}bt.prototype.isWebGLRenderer=!0;class kT extends bt{}kT.prototype.isWebGL1Renderer=!0;class Aa extends Lt{constructor(){super(),this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.overrideMaterial=null,this.autoUpdate=!0,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.autoUpdate=e.autoUpdate,this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return this.fog!==null&&(t.object.fog=this.fog.toJSON()),t}}Aa.prototype.isScene=!0;class Uo{constructor(e,t){this.array=e,this.stride=t,this.count=e!==void 0?e.length/t:0,this.usage=Co,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=Gi()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,n){e*=this.stride,n*=t.stride;for(let i=0,a=this.stride;i<a;i++)this.array[e+i]=t.array[n+i];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Gi()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),n=new this.constructor(t,this.stride);return n.setUsage(this.usage),n}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Gi()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.prototype.slice.call(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}Uo.prototype.isInterleavedBuffer=!0;const Qt=new j;class Lo{constructor(e,t,n,i=!1){this.name="",this.data=e,this.itemSize=t,this.offset=n,this.normalized=i===!0}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,n=this.data.count;t<n;t++)Qt.x=this.getX(t),Qt.y=this.getY(t),Qt.z=this.getZ(t),Qt.applyMatrix4(e),this.setXYZ(t,Qt.x,Qt.y,Qt.z);return this}applyNormalMatrix(e){for(let t=0,n=this.count;t<n;t++)Qt.x=this.getX(t),Qt.y=this.getY(t),Qt.z=this.getZ(t),Qt.applyNormalMatrix(e),this.setXYZ(t,Qt.x,Qt.y,Qt.z);return this}transformDirection(e){for(let t=0,n=this.count;t<n;t++)Qt.x=this.getX(t),Qt.y=this.getY(t),Qt.z=this.getZ(t),Qt.transformDirection(e),this.setXYZ(t,Qt.x,Qt.y,Qt.z);return this}setX(e,t){return this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){return this.data.array[e*this.data.stride+this.offset]}getY(e){return this.data.array[e*this.data.stride+this.offset+1]}getZ(e){return this.data.array[e*this.data.stride+this.offset+2]}getW(e){return this.data.array[e*this.data.stride+this.offset+3]}setXY(e,t,n){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=n,this}setXYZ(e,t,n,i){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=i,this}setXYZW(e,t,n,i,a){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=i,this.data.array[e+3]=a,this}clone(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interlaved buffer attribute will deinterleave buffer data.");const t=[];for(let n=0;n<this.count;n++){const i=n*this.data.stride+this.offset;for(let a=0;a<this.itemSize;a++)t.push(this.data.array[i+a])}return new un(new this.array.constructor(t),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new Lo(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interlaved buffer attribute will deinterleave buffer data.");const t=[];for(let n=0;n<this.count;n++){const i=n*this.data.stride+this.offset;for(let a=0;a<this.itemSize;a++)t.push(this.data.array[i+a])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}Lo.prototype.isInterleavedBufferAttribute=!0;class b_ extends Cn{constructor(e){super(),this.type="SpriteMaterial",this.color=new $e(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this}}b_.prototype.isSpriteMaterial=!0;let Gs;const qa=new j,Ws=new j,js=new j,qs=new Pe,Xa=new Pe,M_=new nt,bl=new j,Ya=new j,Ml=new j,jp=new Pe,zu=new Pe,qp=new Pe;class UT extends Lt{constructor(e){if(super(),this.type="Sprite",Gs===void 0){Gs=new Gt;const t=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),n=new Uo(t,5);Gs.setIndex([0,1,2,0,2,3]),Gs.setAttribute("position",new Lo(n,3,0,!1)),Gs.setAttribute("uv",new Lo(n,2,3,!1))}this.geometry=Gs,this.material=e!==void 0?e:new b_,this.center=new Pe(.5,.5)}raycast(e,t){e.camera===null&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),Ws.setFromMatrixScale(this.matrixWorld),M_.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),js.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&Ws.multiplyScalar(-js.z);const n=this.material.rotation;let i,a;n!==0&&(a=Math.cos(n),i=Math.sin(n));const o=this.center;Sl(bl.set(-.5,-.5,0),js,o,Ws,i,a),Sl(Ya.set(.5,-.5,0),js,o,Ws,i,a),Sl(Ml.set(.5,.5,0),js,o,Ws,i,a),jp.set(0,0),zu.set(1,0),qp.set(1,1);let l=e.ray.intersectTriangle(bl,Ya,Ml,!1,qa);if(l===null&&(Sl(Ya.set(-.5,.5,0),js,o,Ws,i,a),zu.set(0,1),l=e.ray.intersectTriangle(bl,Ml,Ya,!1,qa),l===null))return;const c=e.ray.origin.distanceTo(qa);c<e.near||c>e.far||t.push({distance:c,point:qa.clone(),uv:cn.getUV(qa,bl,Ya,Ml,jp,zu,qp,new Pe),face:null,object:this})}copy(e){return super.copy(e),e.center!==void 0&&this.center.copy(e.center),this.material=e.material,this}}UT.prototype.isSprite=!0;function Sl(r,e,t,n,i,a){qs.subVectors(r,t).addScalar(.5).multiply(n),i!==void 0?(Xa.x=a*qs.x-i*qs.y,Xa.y=i*qs.x+a*qs.y):Xa.copy(qs),r.copy(e),r.x+=Xa.x,r.y+=Xa.y,r.applyMatrix4(M_)}const Xp=new j,Yp=new Ft,$p=new Ft,HT=new j,Jp=new nt;class S_ extends pn{constructor(e,t){super(e,t),this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new nt,this.bindMatrixInverse=new nt}copy(e){return super.copy(e),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,this}bind(e,t){this.skeleton=e,t===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new Ft,t=this.geometry.attributes.skinWeight;for(let n=0,i=t.count;n<i;n++){e.x=t.getX(n),e.y=t.getY(n),e.z=t.getZ(n),e.w=t.getW(n);const a=1/e.manhattanLength();a!==1/0?e.multiplyScalar(a):e.set(1,0,0,0),t.setXYZW(n,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode==="attached"?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode==="detached"?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}boneTransform(e,t){const n=this.skeleton,i=this.geometry;Yp.fromBufferAttribute(i.attributes.skinIndex,e),$p.fromBufferAttribute(i.attributes.skinWeight,e),Xp.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let a=0;a<4;a++){const o=$p.getComponent(a);if(o!==0){const l=Yp.getComponent(a);Jp.multiplyMatrices(n.bones[l].matrixWorld,n.boneInverses[l]),t.addScaledVector(HT.copy(Xp).applyMatrix4(Jp),o)}}return t.applyMatrix4(this.bindMatrixInverse)}}S_.prototype.isSkinnedMesh=!0;class VT extends Lt{constructor(){super(),this.type="Bone"}}VT.prototype.isBone=!0;class GT extends tn{constructor(e=null,t=1,n=1,i,a,o,l,c,h=dn,f=dn,m,g){super(null,o,l,c,h,f,i,a,m,g),this.image={data:e,width:t,height:n},this.magFilter=h,this.minFilter=f,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.needsUpdate=!0}}GT.prototype.isDataTexture=!0;class mh extends un{constructor(e,t,n,i=1){typeof n=="number"&&(i=n,n=!1,console.error("THREE.InstancedBufferAttribute: The constructor now expects normalized as the third argument.")),super(e,t,n),this.meshPerAttribute=i}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}mh.prototype.isInstancedBufferAttribute=!0;const Zp=new nt,Qp=new nt,Tl=[],$a=new pn;class WT extends pn{constructor(e,t,n){super(e,t),this.instanceMatrix=new mh(new Float32Array(n*16),16),this.instanceColor=null,this.count=n,this.frustumCulled=!1}copy(e){return super.copy(e),this.instanceMatrix.copy(e.instanceMatrix),e.instanceColor!==null&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,this}getColorAt(e,t){t.fromArray(this.instanceColor.array,e*3)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,e*16)}raycast(e,t){const n=this.matrixWorld,i=this.count;if($a.geometry=this.geometry,$a.material=this.material,$a.material!==void 0)for(let a=0;a<i;a++){this.getMatrixAt(a,Zp),Qp.multiplyMatrices(n,Zp),$a.matrixWorld=Qp,$a.raycast(e,Tl);for(let o=0,l=Tl.length;o<l;o++){const c=Tl[o];c.instanceId=a,c.object=this,t.push(c)}Tl.length=0}}setColorAt(e,t){this.instanceColor===null&&(this.instanceColor=new mh(new Float32Array(this.instanceMatrix.count*3),3)),t.toArray(this.instanceColor.array,e*3)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,e*16)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"})}}WT.prototype.isInstancedMesh=!0;class Ho extends Cn{constructor(e){super(),this.type="LineBasicMaterial",this.color=new $e(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this}}Ho.prototype.isLineBasicMaterial=!0;const Kp=new j,em=new j,tm=new nt,Bu=new Sa,El=new Ma;class Bf extends Lt{constructor(e=new Gt,t=new Ho){super(),this.type="Line",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e){return super.copy(e),this.material=e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.isBufferGeometry)if(e.index===null){const t=e.attributes.position,n=[0];for(let i=1,a=t.count;i<a;i++)Kp.fromBufferAttribute(t,i-1),em.fromBufferAttribute(t,i),n[i]=n[i-1],n[i]+=Kp.distanceTo(em);e.setAttribute("lineDistance",new mn(n,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else e.isGeometry&&console.error("THREE.Line.computeLineDistances() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.");return this}raycast(e,t){const n=this.geometry,i=this.matrixWorld,a=e.params.Line.threshold,o=n.drawRange;if(n.boundingSphere===null&&n.computeBoundingSphere(),El.copy(n.boundingSphere),El.applyMatrix4(i),El.radius+=a,e.ray.intersectsSphere(El)===!1)return;tm.copy(i).invert(),Bu.copy(e.ray).applyMatrix4(tm);const l=a/((this.scale.x+this.scale.y+this.scale.z)/3),c=l*l,h=new j,f=new j,m=new j,g=new j,_=this.isLineSegments?2:1;if(n.isBufferGeometry){const M=n.index,C=n.attributes.position;if(M!==null){const y=Math.max(0,o.start),b=Math.min(M.count,o.start+o.count);for(let O=y,P=b-1;O<P;O+=_){const F=M.getX(O),p=M.getX(O+1);if(h.fromBufferAttribute(C,F),f.fromBufferAttribute(C,p),Bu.distanceSqToSegment(h,f,g,m)>c)continue;g.applyMatrix4(this.matrixWorld);const W=e.ray.origin.distanceTo(g);W<e.near||W>e.far||t.push({distance:W,point:m.clone().applyMatrix4(this.matrixWorld),index:O,face:null,faceIndex:null,object:this})}}else{const y=Math.max(0,o.start),b=Math.min(C.count,o.start+o.count);for(let O=y,P=b-1;O<P;O+=_){if(h.fromBufferAttribute(C,O),f.fromBufferAttribute(C,O+1),Bu.distanceSqToSegment(h,f,g,m)>c)continue;g.applyMatrix4(this.matrixWorld);const p=e.ray.origin.distanceTo(g);p<e.near||p>e.far||t.push({distance:p,point:m.clone().applyMatrix4(this.matrixWorld),index:O,face:null,faceIndex:null,object:this})}}}else n.isGeometry&&console.error("THREE.Line.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}updateMorphTargets(){const e=this.geometry;if(e.isBufferGeometry){const t=e.morphAttributes,n=Object.keys(t);if(n.length>0){const i=t[n[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let a=0,o=i.length;a<o;a++){const l=i[a].name||String(a);this.morphTargetInfluences.push(0),this.morphTargetDictionary[l]=a}}}}else{const t=e.morphTargets;t!==void 0&&t.length>0&&console.error("THREE.Line.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}}}Bf.prototype.isLine=!0;const nm=new j,im=new j;class kf extends Bf{constructor(e,t){super(e,t),this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.isBufferGeometry)if(e.index===null){const t=e.attributes.position,n=[];for(let i=0,a=t.count;i<a;i+=2)nm.fromBufferAttribute(t,i),im.fromBufferAttribute(t,i+1),n[i]=i===0?0:n[i-1],n[i+1]=n[i]+nm.distanceTo(im);e.setAttribute("lineDistance",new mn(n,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else e.isGeometry&&console.error("THREE.LineSegments.computeLineDistances() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.");return this}}kf.prototype.isLineSegments=!0;class jT extends Bf{constructor(e,t){super(e,t),this.type="LineLoop"}}jT.prototype.isLineLoop=!0;class T_ extends Cn{constructor(e){super(),this.type="PointsMaterial",this.color=new $e(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this}}T_.prototype.isPointsMaterial=!0;const rm=new nt,gh=new Sa,Al=new Ma,Cl=new j;class qT extends Lt{constructor(e=new Gt,t=new T_){super(),this.type="Points",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e){return super.copy(e),this.material=e.material,this.geometry=e.geometry,this}raycast(e,t){const n=this.geometry,i=this.matrixWorld,a=e.params.Points.threshold,o=n.drawRange;if(n.boundingSphere===null&&n.computeBoundingSphere(),Al.copy(n.boundingSphere),Al.applyMatrix4(i),Al.radius+=a,e.ray.intersectsSphere(Al)===!1)return;rm.copy(i).invert(),gh.copy(e.ray).applyMatrix4(rm);const l=a/((this.scale.x+this.scale.y+this.scale.z)/3),c=l*l;if(n.isBufferGeometry){const h=n.index,m=n.attributes.position;if(h!==null){const g=Math.max(0,o.start),_=Math.min(h.count,o.start+o.count);for(let M=g,x=_;M<x;M++){const C=h.getX(M);Cl.fromBufferAttribute(m,C),sm(Cl,C,c,i,e,t,this)}}else{const g=Math.max(0,o.start),_=Math.min(m.count,o.start+o.count);for(let M=g,x=_;M<x;M++)Cl.fromBufferAttribute(m,M),sm(Cl,M,c,i,e,t,this)}}else console.error("THREE.Points.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}updateMorphTargets(){const e=this.geometry;if(e.isBufferGeometry){const t=e.morphAttributes,n=Object.keys(t);if(n.length>0){const i=t[n[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let a=0,o=i.length;a<o;a++){const l=i[a].name||String(a);this.morphTargetInfluences.push(0),this.morphTargetDictionary[l]=a}}}}else{const t=e.morphTargets;t!==void 0&&t.length>0&&console.error("THREE.Points.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}}}qT.prototype.isPoints=!0;function sm(r,e,t,n,i,a,o){const l=gh.distanceSqToPoint(r);if(l<t){const c=new j;gh.closestPointToPoint(r,c),c.applyMatrix4(n);const h=i.ray.origin.distanceTo(c);if(h<i.near||h>i.far)return;a.push({distance:h,distanceToRay:Math.sqrt(l),point:c,index:e,face:null,object:o})}}class XT extends tn{constructor(e,t,n,i,a,o,l,c,h){super(e,t,n,i,a,o,l,c,h),this.format=l!==void 0?l:ps,this.minFilter=o!==void 0?o:pi,this.magFilter=a!==void 0?a:pi,this.generateMipmaps=!1;const f=this;function m(){f.needsUpdate=!0,e.requestVideoFrameCallback(m)}"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback(m)}clone(){return new this.constructor(this.image).copy(this)}update(){const e=this.image;"requestVideoFrameCallback"in e===!1&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}XT.prototype.isVideoTexture=!0;class YT extends tn{constructor(e,t,n,i,a,o,l,c,h,f,m,g){super(null,o,l,c,h,f,i,a,m,g),this.image={width:t,height:n},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}YT.prototype.isCompressedTexture=!0;class $T extends tn{constructor(e,t,n,i,a,o,l,c,h){super(e,t,n,i,a,o,l,c,h),this.needsUpdate=!0}}$T.prototype.isCanvasTexture=!0;class yi{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(e,t){const n=this.getUtoTmapping(e);return this.getPoint(n,t)}getPoints(e=5){const t=[];for(let n=0;n<=e;n++)t.push(this.getPoint(n/e));return t}getSpacedPoints(e=5){const t=[];for(let n=0;n<=e;n++)t.push(this.getPointAt(n/e));return t}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const t=[];let n,i=this.getPoint(0),a=0;t.push(0);for(let o=1;o<=e;o++)n=this.getPoint(o/e),a+=n.distanceTo(i),t.push(a),i=n;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t){const n=this.getLengths();let i=0;const a=n.length;let o;t?o=t:o=e*n[a-1];let l=0,c=a-1,h;for(;l<=c;)if(i=Math.floor(l+(c-l)/2),h=n[i]-o,h<0)l=i+1;else if(h>0)c=i-1;else{c=i;break}if(i=c,n[i]===o)return i/(a-1);const f=n[i],g=n[i+1]-f,_=(o-f)/g;return(i+_)/(a-1)}getTangent(e,t){let i=e-1e-4,a=e+1e-4;i<0&&(i=0),a>1&&(a=1);const o=this.getPoint(i),l=this.getPoint(a),c=t||(o.isVector2?new Pe:new j);return c.copy(l).sub(o).normalize(),c}getTangentAt(e,t){const n=this.getUtoTmapping(e);return this.getTangent(n,t)}computeFrenetFrames(e,t){const n=new j,i=[],a=[],o=[],l=new j,c=new nt;for(let _=0;_<=e;_++){const M=_/e;i[_]=this.getTangentAt(M,new j)}a[0]=new j,o[0]=new j;let h=Number.MAX_VALUE;const f=Math.abs(i[0].x),m=Math.abs(i[0].y),g=Math.abs(i[0].z);f<=h&&(h=f,n.set(1,0,0)),m<=h&&(h=m,n.set(0,1,0)),g<=h&&n.set(0,0,1),l.crossVectors(i[0],n).normalize(),a[0].crossVectors(i[0],l),o[0].crossVectors(i[0],a[0]);for(let _=1;_<=e;_++){if(a[_]=a[_-1].clone(),o[_]=o[_-1].clone(),l.crossVectors(i[_-1],i[_]),l.length()>Number.EPSILON){l.normalize();const M=Math.acos(ti(i[_-1].dot(i[_]),-1,1));a[_].applyMatrix4(c.makeRotationAxis(l,M))}o[_].crossVectors(i[_],a[_])}if(t===!0){let _=Math.acos(ti(a[0].dot(a[e]),-1,1));_/=e,i[0].dot(l.crossVectors(a[0],a[e]))>0&&(_=-_);for(let M=1;M<=e;M++)a[M].applyMatrix4(c.makeRotationAxis(i[M],_*M)),o[M].crossVectors(i[M],a[M])}return{tangents:i,normals:a,binormals:o}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class Ac extends yi{constructor(e=0,t=0,n=1,i=1,a=0,o=Math.PI*2,l=!1,c=0){super(),this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=n,this.yRadius=i,this.aStartAngle=a,this.aEndAngle=o,this.aClockwise=l,this.aRotation=c}getPoint(e,t){const n=t||new Pe,i=Math.PI*2;let a=this.aEndAngle-this.aStartAngle;const o=Math.abs(a)<Number.EPSILON;for(;a<0;)a+=i;for(;a>i;)a-=i;a<Number.EPSILON&&(o?a=0:a=i),this.aClockwise===!0&&!o&&(a===i?a=-i:a=a-i);const l=this.aStartAngle+e*a;let c=this.aX+this.xRadius*Math.cos(l),h=this.aY+this.yRadius*Math.sin(l);if(this.aRotation!==0){const f=Math.cos(this.aRotation),m=Math.sin(this.aRotation),g=c-this.aX,_=h-this.aY;c=g*f-_*m+this.aX,h=g*m+_*f+this.aY}return n.set(c,h)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}Ac.prototype.isEllipseCurve=!0;class E_ extends Ac{constructor(e,t,n,i,a,o){super(e,t,n,n,i,a,o),this.type="ArcCurve"}}E_.prototype.isArcCurve=!0;function Uf(){let r=0,e=0,t=0,n=0;function i(a,o,l,c){r=a,e=l,t=-3*a+3*o-2*l-c,n=2*a-2*o+l+c}return{initCatmullRom:function(a,o,l,c,h){i(o,l,h*(l-a),h*(c-o))},initNonuniformCatmullRom:function(a,o,l,c,h,f,m){let g=(o-a)/h-(l-a)/(h+f)+(l-o)/f,_=(l-o)/f-(c-o)/(f+m)+(c-l)/m;g*=f,_*=f,i(o,l,g,_)},calc:function(a){const o=a*a,l=o*a;return r+e*a+t*o+n*l}}}const Ll=new j,ku=new Uf,Uu=new Uf,Hu=new Uf;class A_ extends yi{constructor(e=[],t=!1,n="centripetal",i=.5){super(),this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=n,this.tension=i}getPoint(e,t=new j){const n=t,i=this.points,a=i.length,o=(a-(this.closed?0:1))*e;let l=Math.floor(o),c=o-l;this.closed?l+=l>0?0:(Math.floor(Math.abs(l)/a)+1)*a:c===0&&l===a-1&&(l=a-2,c=1);let h,f;this.closed||l>0?h=i[(l-1)%a]:(Ll.subVectors(i[0],i[1]).add(i[0]),h=Ll);const m=i[l%a],g=i[(l+1)%a];if(this.closed||l+2<a?f=i[(l+2)%a]:(Ll.subVectors(i[a-1],i[a-2]).add(i[a-1]),f=Ll),this.curveType==="centripetal"||this.curveType==="chordal"){const _=this.curveType==="chordal"?.5:.25;let M=Math.pow(h.distanceToSquared(m),_),x=Math.pow(m.distanceToSquared(g),_),C=Math.pow(g.distanceToSquared(f),_);x<1e-4&&(x=1),M<1e-4&&(M=x),C<1e-4&&(C=x),ku.initNonuniformCatmullRom(h.x,m.x,g.x,f.x,M,x,C),Uu.initNonuniformCatmullRom(h.y,m.y,g.y,f.y,M,x,C),Hu.initNonuniformCatmullRom(h.z,m.z,g.z,f.z,M,x,C)}else this.curveType==="catmullrom"&&(ku.initCatmullRom(h.x,m.x,g.x,f.x,this.tension),Uu.initCatmullRom(h.y,m.y,g.y,f.y,this.tension),Hu.initCatmullRom(h.z,m.z,g.z,f.z,this.tension));return n.set(ku.calc(c),Uu.calc(c),Hu.calc(c)),n}copy(e){super.copy(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const i=e.points[t];this.points.push(i.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,n=this.points.length;t<n;t++){const i=this.points[t];e.points.push(i.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const i=e.points[t];this.points.push(new j().fromArray(i))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}A_.prototype.isCatmullRomCurve3=!0;function am(r,e,t,n,i){const a=(n-e)*.5,o=(i-t)*.5,l=r*r,c=r*l;return(2*t-2*n+a+o)*c+(-3*t+3*n-2*a-o)*l+a*r+t}function JT(r,e){const t=1-r;return t*t*e}function ZT(r,e){return 2*(1-r)*r*e}function QT(r,e){return r*r*e}function co(r,e,t,n){return JT(r,e)+ZT(r,t)+QT(r,n)}function KT(r,e){const t=1-r;return t*t*t*e}function eE(r,e){const t=1-r;return 3*t*t*r*e}function tE(r,e){return 3*(1-r)*r*r*e}function nE(r,e){return r*r*r*e}function uo(r,e,t,n,i){return KT(r,e)+eE(r,t)+tE(r,n)+nE(r,i)}class Hf extends yi{constructor(e=new Pe,t=new Pe,n=new Pe,i=new Pe){super(),this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=n,this.v3=i}getPoint(e,t=new Pe){const n=t,i=this.v0,a=this.v1,o=this.v2,l=this.v3;return n.set(uo(e,i.x,a.x,o.x,l.x),uo(e,i.y,a.y,o.y,l.y)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}Hf.prototype.isCubicBezierCurve=!0;class C_ extends yi{constructor(e=new j,t=new j,n=new j,i=new j){super(),this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=n,this.v3=i}getPoint(e,t=new j){const n=t,i=this.v0,a=this.v1,o=this.v2,l=this.v3;return n.set(uo(e,i.x,a.x,o.x,l.x),uo(e,i.y,a.y,o.y,l.y),uo(e,i.z,a.z,o.z,l.z)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}C_.prototype.isCubicBezierCurve3=!0;class Cc extends yi{constructor(e=new Pe,t=new Pe){super(),this.type="LineCurve",this.v1=e,this.v2=t}getPoint(e,t=new Pe){const n=t;return e===1?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t){const n=t||new Pe;return n.copy(this.v2).sub(this.v1).normalize(),n}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}Cc.prototype.isLineCurve=!0;class iE extends yi{constructor(e=new j,t=new j){super(),this.type="LineCurve3",this.isLineCurve3=!0,this.v1=e,this.v2=t}getPoint(e,t=new j){const n=t;return e===1?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n}getPointAt(e,t){return this.getPoint(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class Vf extends yi{constructor(e=new Pe,t=new Pe,n=new Pe){super(),this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=n}getPoint(e,t=new Pe){const n=t,i=this.v0,a=this.v1,o=this.v2;return n.set(co(e,i.x,a.x,o.x),co(e,i.y,a.y,o.y)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}Vf.prototype.isQuadraticBezierCurve=!0;class L_ extends yi{constructor(e=new j,t=new j,n=new j){super(),this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=n}getPoint(e,t=new j){const n=t,i=this.v0,a=this.v1,o=this.v2;return n.set(co(e,i.x,a.x,o.x),co(e,i.y,a.y,o.y),co(e,i.z,a.z,o.z)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}L_.prototype.isQuadraticBezierCurve3=!0;class Gf extends yi{constructor(e=[]){super(),this.type="SplineCurve",this.points=e}getPoint(e,t=new Pe){const n=t,i=this.points,a=(i.length-1)*e,o=Math.floor(a),l=a-o,c=i[o===0?o:o-1],h=i[o],f=i[o>i.length-2?i.length-1:o+1],m=i[o>i.length-3?i.length-1:o+2];return n.set(am(l,c.x,h.x,f.x,m.x),am(l,c.y,h.y,f.y,m.y)),n}copy(e){super.copy(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const i=e.points[t];this.points.push(i.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,n=this.points.length;t<n;t++){const i=this.points[t];e.points.push(i.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const i=e.points[t];this.points.push(new Pe().fromArray(i))}return this}}Gf.prototype.isSplineCurve=!0;var R_=Object.freeze({__proto__:null,ArcCurve:E_,CatmullRomCurve3:A_,CubicBezierCurve:Hf,CubicBezierCurve3:C_,EllipseCurve:Ac,LineCurve:Cc,LineCurve3:iE,QuadraticBezierCurve:Vf,QuadraticBezierCurve3:L_,SplineCurve:Gf});class rE extends yi{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);e.equals(t)||this.curves.push(new Cc(t,e))}getPoint(e,t){const n=e*this.getLength(),i=this.getCurveLengths();let a=0;for(;a<i.length;){if(i[a]>=n){const o=i[a]-n,l=this.curves[a],c=l.getLength(),h=c===0?0:1-o/c;return l.getPointAt(h,t)}a++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let t=0;for(let n=0,i=this.curves.length;n<i;n++)t+=this.curves[n].getLength(),e.push(t);return this.cacheLengths=e,e}getSpacedPoints(e=40){const t=[];for(let n=0;n<=e;n++)t.push(this.getPoint(n/e));return this.autoClose&&t.push(t[0]),t}getPoints(e=12){const t=[];let n;for(let i=0,a=this.curves;i<a.length;i++){const o=a[i],l=o&&o.isEllipseCurve?e*2:o&&(o.isLineCurve||o.isLineCurve3)?1:o&&o.isSplineCurve?e*o.points.length:e,c=o.getPoints(l);for(let h=0;h<c.length;h++){const f=c[h];n&&n.equals(f)||(t.push(f),n=f)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t}copy(e){super.copy(e),this.curves=[];for(let t=0,n=e.curves.length;t<n;t++){const i=e.curves[t];this.curves.push(i.clone())}return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let t=0,n=this.curves.length;t<n;t++){const i=this.curves[t];e.curves.push(i.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,n=e.curves.length;t<n;t++){const i=e.curves[t];this.curves.push(new R_[i.type]().fromJSON(i))}return this}}class vh extends rE{constructor(e){super(),this.type="Path",this.currentPoint=new Pe,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let t=1,n=e.length;t<n;t++)this.lineTo(e[t].x,e[t].y);return this}moveTo(e,t){return this.currentPoint.set(e,t),this}lineTo(e,t){const n=new Cc(this.currentPoint.clone(),new Pe(e,t));return this.curves.push(n),this.currentPoint.set(e,t),this}quadraticCurveTo(e,t,n,i){const a=new Vf(this.currentPoint.clone(),new Pe(e,t),new Pe(n,i));return this.curves.push(a),this.currentPoint.set(n,i),this}bezierCurveTo(e,t,n,i,a,o){const l=new Hf(this.currentPoint.clone(),new Pe(e,t),new Pe(n,i),new Pe(a,o));return this.curves.push(l),this.currentPoint.set(a,o),this}splineThru(e){const t=[this.currentPoint.clone()].concat(e),n=new Gf(t);return this.curves.push(n),this.currentPoint.copy(e[e.length-1]),this}arc(e,t,n,i,a,o){const l=this.currentPoint.x,c=this.currentPoint.y;return this.absarc(e+l,t+c,n,i,a,o),this}absarc(e,t,n,i,a,o){return this.absellipse(e,t,n,n,i,a,o),this}ellipse(e,t,n,i,a,o,l,c){const h=this.currentPoint.x,f=this.currentPoint.y;return this.absellipse(e+h,t+f,n,i,a,o,l,c),this}absellipse(e,t,n,i,a,o,l,c){const h=new Ac(e,t,n,i,a,o,l,c);if(this.curves.length>0){const m=h.getPoint(0);m.equals(this.currentPoint)||this.lineTo(m.x,m.y)}this.curves.push(h);const f=h.getPoint(1);return this.currentPoint.copy(f),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}class Vo extends vh{constructor(e){super(e),this.uuid=Gi(),this.type="Shape",this.holes=[]}getPointsHoles(e){const t=[];for(let n=0,i=this.holes.length;n<i;n++)t[n]=this.holes[n].getPoints(e);return t}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let t=0,n=e.holes.length;t<n;t++){const i=e.holes[t];this.holes.push(i.clone())}return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let t=0,n=this.holes.length;t<n;t++){const i=this.holes[t];e.holes.push(i.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let t=0,n=e.holes.length;t<n;t++){const i=e.holes[t];this.holes.push(new vh().fromJSON(i))}return this}}const sE={triangulate:function(r,e,t=2){const n=e&&e.length,i=n?e[0]*t:r.length;let a=P_(r,0,i,t,!0);const o=[];if(!a||a.next===a.prev)return o;let l,c,h,f,m,g,_;if(n&&(a=uE(r,e,a,t)),r.length>80*t){l=h=r[0],c=f=r[1];for(let M=t;M<i;M+=t)m=r[M],g=r[M+1],m<l&&(l=m),g<c&&(c=g),m>h&&(h=m),g>f&&(f=g);_=Math.max(h-l,f-c),_=_!==0?1/_:0}return Ro(a,o,t,l,c,_),o}};function P_(r,e,t,n,i){let a,o;if(i===wE(r,e,t,n)>0)for(a=e;a<t;a+=n)o=om(a,r[a],r[a+1],o);else for(a=t-n;a>=e;a-=n)o=om(a,r[a],r[a+1],o);return o&&Lc(o,o.next)&&(Io(o),o=o.next),o}function Br(r,e){if(!r)return r;e||(e=r);let t=r,n;do if(n=!1,!t.steiner&&(Lc(t,t.next)||Xt(t.prev,t,t.next)===0)){if(Io(t),t=e=t.prev,t===t.next)break;n=!0}else t=t.next;while(n||t!==e);return e}function Ro(r,e,t,n,i,a,o){if(!r)return;!o&&a&&mE(r,n,i,a);let l=r,c,h;for(;r.prev!==r.next;){if(c=r.prev,h=r.next,a?oE(r,n,i,a):aE(r)){e.push(c.i/t),e.push(r.i/t),e.push(h.i/t),Io(r),r=h.next,l=h.next;continue}if(r=h,r===l){o?o===1?(r=lE(Br(r),e,t),Ro(r,e,t,n,i,a,2)):o===2&&cE(r,e,t,n,i,a):Ro(Br(r),e,t,n,i,a,1);break}}}function aE(r){const e=r.prev,t=r,n=r.next;if(Xt(e,t,n)>=0)return!1;let i=r.next.next;for(;i!==r.prev;){if(Qs(e.x,e.y,t.x,t.y,n.x,n.y,i.x,i.y)&&Xt(i.prev,i,i.next)>=0)return!1;i=i.next}return!0}function oE(r,e,t,n){const i=r.prev,a=r,o=r.next;if(Xt(i,a,o)>=0)return!1;const l=i.x<a.x?i.x<o.x?i.x:o.x:a.x<o.x?a.x:o.x,c=i.y<a.y?i.y<o.y?i.y:o.y:a.y<o.y?a.y:o.y,h=i.x>a.x?i.x>o.x?i.x:o.x:a.x>o.x?a.x:o.x,f=i.y>a.y?i.y>o.y?i.y:o.y:a.y>o.y?a.y:o.y,m=_h(l,c,e,t,n),g=_h(h,f,e,t,n);let _=r.prevZ,M=r.nextZ;for(;_&&_.z>=m&&M&&M.z<=g;){if(_!==r.prev&&_!==r.next&&Qs(i.x,i.y,a.x,a.y,o.x,o.y,_.x,_.y)&&Xt(_.prev,_,_.next)>=0||(_=_.prevZ,M!==r.prev&&M!==r.next&&Qs(i.x,i.y,a.x,a.y,o.x,o.y,M.x,M.y)&&Xt(M.prev,M,M.next)>=0))return!1;M=M.nextZ}for(;_&&_.z>=m;){if(_!==r.prev&&_!==r.next&&Qs(i.x,i.y,a.x,a.y,o.x,o.y,_.x,_.y)&&Xt(_.prev,_,_.next)>=0)return!1;_=_.prevZ}for(;M&&M.z<=g;){if(M!==r.prev&&M!==r.next&&Qs(i.x,i.y,a.x,a.y,o.x,o.y,M.x,M.y)&&Xt(M.prev,M,M.next)>=0)return!1;M=M.nextZ}return!0}function lE(r,e,t){let n=r;do{const i=n.prev,a=n.next.next;!Lc(i,a)&&I_(i,n,n.next,a)&&Po(i,a)&&Po(a,i)&&(e.push(i.i/t),e.push(n.i/t),e.push(a.i/t),Io(n),Io(n.next),n=r=a),n=n.next}while(n!==r);return Br(n)}function cE(r,e,t,n,i,a){let o=r;do{let l=o.next.next;for(;l!==o.prev;){if(o.i!==l.i&&_E(o,l)){let c=D_(o,l);o=Br(o,o.next),c=Br(c,c.next),Ro(o,e,t,n,i,a),Ro(c,e,t,n,i,a);return}l=l.next}o=o.next}while(o!==r)}function uE(r,e,t,n){const i=[];let a,o,l,c,h;for(a=0,o=e.length;a<o;a++)l=e[a]*n,c=a<o-1?e[a+1]*n:r.length,h=P_(r,l,c,n,!1),h===h.next&&(h.steiner=!0),i.push(vE(h));for(i.sort(hE),a=0;a<i.length;a++)fE(i[a],t),t=Br(t,t.next);return t}function hE(r,e){return r.x-e.x}function fE(r,e){if(e=dE(r,e),e){const t=D_(e,r);Br(e,e.next),Br(t,t.next)}}function dE(r,e){let t=e;const n=r.x,i=r.y;let a=-1/0,o;do{if(i<=t.y&&i>=t.next.y&&t.next.y!==t.y){const g=t.x+(i-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(g<=n&&g>a){if(a=g,g===n){if(i===t.y)return t;if(i===t.next.y)return t.next}o=t.x<t.next.x?t:t.next}}t=t.next}while(t!==e);if(!o)return null;if(n===a)return o;const l=o,c=o.x,h=o.y;let f=1/0,m;t=o;do n>=t.x&&t.x>=c&&n!==t.x&&Qs(i<h?n:a,i,c,h,i<h?a:n,i,t.x,t.y)&&(m=Math.abs(i-t.y)/(n-t.x),Po(t,r)&&(m<f||m===f&&(t.x>o.x||t.x===o.x&&pE(o,t)))&&(o=t,f=m)),t=t.next;while(t!==l);return o}function pE(r,e){return Xt(r.prev,r,e.prev)<0&&Xt(e.next,r,r.next)<0}function mE(r,e,t,n){let i=r;do i.z===null&&(i.z=_h(i.x,i.y,e,t,n)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next;while(i!==r);i.prevZ.nextZ=null,i.prevZ=null,gE(i)}function gE(r){let e,t,n,i,a,o,l,c,h=1;do{for(t=r,r=null,a=null,o=0;t;){for(o++,n=t,l=0,e=0;e<h&&(l++,n=n.nextZ,!!n);e++);for(c=h;l>0||c>0&&n;)l!==0&&(c===0||!n||t.z<=n.z)?(i=t,t=t.nextZ,l--):(i=n,n=n.nextZ,c--),a?a.nextZ=i:r=i,i.prevZ=a,a=i;t=n}a.nextZ=null,h*=2}while(o>1);return r}function _h(r,e,t,n,i){return r=32767*(r-t)*i,e=32767*(e-n)*i,r=(r|r<<8)&16711935,r=(r|r<<4)&252645135,r=(r|r<<2)&858993459,r=(r|r<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,r|e<<1}function vE(r){let e=r,t=r;do(e.x<t.x||e.x===t.x&&e.y<t.y)&&(t=e),e=e.next;while(e!==r);return t}function Qs(r,e,t,n,i,a,o,l){return(i-o)*(e-l)-(r-o)*(a-l)>=0&&(r-o)*(n-l)-(t-o)*(e-l)>=0&&(t-o)*(a-l)-(i-o)*(n-l)>=0}function _E(r,e){return r.next.i!==e.i&&r.prev.i!==e.i&&!yE(r,e)&&(Po(r,e)&&Po(e,r)&&xE(r,e)&&(Xt(r.prev,r,e.prev)||Xt(r,e.prev,e))||Lc(r,e)&&Xt(r.prev,r,r.next)>0&&Xt(e.prev,e,e.next)>0)}function Xt(r,e,t){return(e.y-r.y)*(t.x-e.x)-(e.x-r.x)*(t.y-e.y)}function Lc(r,e){return r.x===e.x&&r.y===e.y}function I_(r,e,t,n){const i=Pl(Xt(r,e,t)),a=Pl(Xt(r,e,n)),o=Pl(Xt(t,n,r)),l=Pl(Xt(t,n,e));return!!(i!==a&&o!==l||i===0&&Rl(r,t,e)||a===0&&Rl(r,n,e)||o===0&&Rl(t,r,n)||l===0&&Rl(t,e,n))}function Rl(r,e,t){return e.x<=Math.max(r.x,t.x)&&e.x>=Math.min(r.x,t.x)&&e.y<=Math.max(r.y,t.y)&&e.y>=Math.min(r.y,t.y)}function Pl(r){return r>0?1:r<0?-1:0}function yE(r,e){let t=r;do{if(t.i!==r.i&&t.next.i!==r.i&&t.i!==e.i&&t.next.i!==e.i&&I_(t,t.next,r,e))return!0;t=t.next}while(t!==r);return!1}function Po(r,e){return Xt(r.prev,r,r.next)<0?Xt(r,e,r.next)>=0&&Xt(r,r.prev,e)>=0:Xt(r,e,r.prev)<0||Xt(r,r.next,e)<0}function xE(r,e){let t=r,n=!1;const i=(r.x+e.x)/2,a=(r.y+e.y)/2;do t.y>a!=t.next.y>a&&t.next.y!==t.y&&i<(t.next.x-t.x)*(a-t.y)/(t.next.y-t.y)+t.x&&(n=!n),t=t.next;while(t!==r);return n}function D_(r,e){const t=new yh(r.i,r.x,r.y),n=new yh(e.i,e.x,e.y),i=r.next,a=e.prev;return r.next=e,e.prev=r,t.next=i,i.prev=t,n.next=t,t.prev=n,a.next=n,n.prev=a,n}function om(r,e,t,n){const i=new yh(r,e,t);return n?(i.next=n.next,i.prev=n,n.next.prev=i,n.next=i):(i.prev=i,i.next=i),i}function Io(r){r.next.prev=r.prev,r.prev.next=r.next,r.prevZ&&(r.prevZ.nextZ=r.nextZ),r.nextZ&&(r.nextZ.prevZ=r.prevZ)}function yh(r,e,t){this.i=r,this.x=e,this.y=t,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function wE(r,e,t,n){let i=0;for(let a=e,o=t-n;a<t;a+=n)i+=(r[o]-r[a])*(r[a+1]+r[o+1]),o=a;return i}class Ir{static area(e){const t=e.length;let n=0;for(let i=t-1,a=0;a<t;i=a++)n+=e[i].x*e[a].y-e[a].x*e[i].y;return n*.5}static isClockWise(e){return Ir.area(e)<0}static triangulateShape(e,t){const n=[],i=[],a=[];lm(e),cm(n,e);let o=e.length;t.forEach(lm);for(let c=0;c<t.length;c++)i.push(o),o+=t[c].length,cm(n,t[c]);const l=sE.triangulate(n,i);for(let c=0;c<l.length;c+=3)a.push(l.slice(c,c+3));return a}}function lm(r){const e=r.length;e>2&&r[e-1].equals(r[0])&&r.pop()}function cm(r,e){for(let t=0;t<e.length;t++)r.push(e[t].x),r.push(e[t].y)}class Ca extends Gt{constructor(e=new Vo([new Pe(.5,.5),new Pe(-.5,.5),new Pe(-.5,-.5),new Pe(.5,-.5)]),t={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];const n=this,i=[],a=[];for(let l=0,c=e.length;l<c;l++){const h=e[l];o(h)}this.setAttribute("position",new mn(i,3)),this.setAttribute("uv",new mn(a,2)),this.computeVertexNormals();function o(l){const c=[],h=t.curveSegments!==void 0?t.curveSegments:12,f=t.steps!==void 0?t.steps:1;let m=t.depth!==void 0?t.depth:1,g=t.bevelEnabled!==void 0?t.bevelEnabled:!0,_=t.bevelThickness!==void 0?t.bevelThickness:.2,M=t.bevelSize!==void 0?t.bevelSize:_-.1,x=t.bevelOffset!==void 0?t.bevelOffset:0,C=t.bevelSegments!==void 0?t.bevelSegments:3;const y=t.extrudePath,b=t.UVGenerator!==void 0?t.UVGenerator:bE;t.amount!==void 0&&(console.warn("THREE.ExtrudeBufferGeometry: amount has been renamed to depth."),m=t.amount);let O,P=!1,F,p,L,W;y&&(O=y.getSpacedPoints(f),P=!0,g=!1,F=y.computeFrenetFrames(f,!1),p=new j,L=new j,W=new j),g||(C=0,_=0,M=0,x=0);const X=l.extractPoints(h);let oe=X.shape;const q=X.holes;if(!Ir.isClockWise(oe)){oe=oe.reverse();for(let pe=0,Se=q.length;pe<Se;pe++){const S=q[pe];Ir.isClockWise(S)&&(q[pe]=S.reverse())}}const ie=Ir.triangulateShape(oe,q),ne=oe;for(let pe=0,Se=q.length;pe<Se;pe++){const S=q[pe];oe=oe.concat(S)}function re(pe,Se,S){return Se||console.error("THREE.ExtrudeGeometry: vec does not exist"),Se.clone().multiplyScalar(S).add(pe)}const ae=oe.length,se=ie.length;function be(pe,Se,S){let R,E,B;const H=pe.x-Se.x,J=pe.y-Se.y,Q=S.x-pe.x,z=S.y-pe.y,D=H*H+J*J,Z=H*z-J*Q;if(Math.abs(Z)>Number.EPSILON){const te=Math.sqrt(D),xe=Math.sqrt(Q*Q+z*z),Le=Se.x-J/te,Y=Se.y+H/te,Ne=S.x-z/xe,ge=S.y+Q/xe,Re=((Ne-Le)*z-(ge-Y)*Q)/(H*z-J*Q);R=Le+H*Re-pe.x,E=Y+J*Re-pe.y;const Ie=R*R+E*E;if(Ie<=2)return new Pe(R,E);B=Math.sqrt(Ie/2)}else{let te=!1;H>Number.EPSILON?Q>Number.EPSILON&&(te=!0):H<-Number.EPSILON?Q<-Number.EPSILON&&(te=!0):Math.sign(J)===Math.sign(z)&&(te=!0),te?(R=-J,E=H,B=Math.sqrt(D)):(R=H,E=J,B=Math.sqrt(D/2))}return new Pe(R/B,E/B)}const Oe=[];for(let pe=0,Se=ne.length,S=Se-1,R=pe+1;pe<Se;pe++,S++,R++)S===Se&&(S=0),R===Se&&(R=0),Oe[pe]=be(ne[pe],ne[S],ne[R]);const de=[];let fe,ze=Oe.concat();for(let pe=0,Se=q.length;pe<Se;pe++){const S=q[pe];fe=[];for(let R=0,E=S.length,B=E-1,H=R+1;R<E;R++,B++,H++)B===E&&(B=0),H===E&&(H=0),fe[R]=be(S[R],S[B],S[H]);de.push(fe),ze=ze.concat(fe)}for(let pe=0;pe<C;pe++){const Se=pe/C,S=_*Math.cos(Se*Math.PI/2),R=M*Math.sin(Se*Math.PI/2)+x;for(let E=0,B=ne.length;E<B;E++){const H=re(ne[E],Oe[E],R);Te(H.x,H.y,-S)}for(let E=0,B=q.length;E<B;E++){const H=q[E];fe=de[E];for(let J=0,Q=H.length;J<Q;J++){const z=re(H[J],fe[J],R);Te(z.x,z.y,-S)}}}const De=M+x;for(let pe=0;pe<ae;pe++){const Se=g?re(oe[pe],ze[pe],De):oe[pe];P?(L.copy(F.normals[0]).multiplyScalar(Se.x),p.copy(F.binormals[0]).multiplyScalar(Se.y),W.copy(O[0]).add(L).add(p),Te(W.x,W.y,W.z)):Te(Se.x,Se.y,0)}for(let pe=1;pe<=f;pe++)for(let Se=0;Se<ae;Se++){const S=g?re(oe[Se],ze[Se],De):oe[Se];P?(L.copy(F.normals[pe]).multiplyScalar(S.x),p.copy(F.binormals[pe]).multiplyScalar(S.y),W.copy(O[pe]).add(L).add(p),Te(W.x,W.y,W.z)):Te(S.x,S.y,m/f*pe)}for(let pe=C-1;pe>=0;pe--){const Se=pe/C,S=_*Math.cos(Se*Math.PI/2),R=M*Math.sin(Se*Math.PI/2)+x;for(let E=0,B=ne.length;E<B;E++){const H=re(ne[E],Oe[E],R);Te(H.x,H.y,m+S)}for(let E=0,B=q.length;E<B;E++){const H=q[E];fe=de[E];for(let J=0,Q=H.length;J<Q;J++){const z=re(H[J],fe[J],R);P?Te(z.x,z.y+O[f-1].y,O[f-1].x+S):Te(z.x,z.y,m+S)}}}ke(),rt();function ke(){const pe=i.length/3;if(g){let Se=0,S=ae*Se;for(let R=0;R<se;R++){const E=ie[R];We(E[2]+S,E[1]+S,E[0]+S)}Se=f+C*2,S=ae*Se;for(let R=0;R<se;R++){const E=ie[R];We(E[0]+S,E[1]+S,E[2]+S)}}else{for(let Se=0;Se<se;Se++){const S=ie[Se];We(S[2],S[1],S[0])}for(let Se=0;Se<se;Se++){const S=ie[Se];We(S[0]+ae*f,S[1]+ae*f,S[2]+ae*f)}}n.addGroup(pe,i.length/3-pe,0)}function rt(){const pe=i.length/3;let Se=0;Ee(ne,Se),Se+=ne.length;for(let S=0,R=q.length;S<R;S++){const E=q[S];Ee(E,Se),Se+=E.length}n.addGroup(pe,i.length/3-pe,1)}function Ee(pe,Se){let S=pe.length;for(;--S>=0;){const R=S;let E=S-1;E<0&&(E=pe.length-1);for(let B=0,H=f+C*2;B<H;B++){const J=ae*B,Q=ae*(B+1),z=Se+R+J,D=Se+E+J,Z=Se+E+Q,te=Se+R+Q;Ge(z,D,Z,te)}}}function Te(pe,Se,S){c.push(pe),c.push(Se),c.push(S)}function We(pe,Se,S){Xe(pe),Xe(Se),Xe(S);const R=i.length/3,E=b.generateTopUV(n,i,R-3,R-2,R-1);Ye(E[0]),Ye(E[1]),Ye(E[2])}function Ge(pe,Se,S,R){Xe(pe),Xe(Se),Xe(R),Xe(Se),Xe(S),Xe(R);const E=i.length/3,B=b.generateSideWallUV(n,i,E-6,E-3,E-2,E-1);Ye(B[0]),Ye(B[1]),Ye(B[3]),Ye(B[1]),Ye(B[2]),Ye(B[3])}function Xe(pe){i.push(c[pe*3+0]),i.push(c[pe*3+1]),i.push(c[pe*3+2])}function Ye(pe){a.push(pe.x),a.push(pe.y)}}}toJSON(){const e=super.toJSON(),t=this.parameters.shapes,n=this.parameters.options;return ME(t,n,e)}static fromJSON(e,t){const n=[];for(let a=0,o=e.shapes.length;a<o;a++){const l=t[e.shapes[a]];n.push(l)}const i=e.options.extrudePath;return i!==void 0&&(e.options.extrudePath=new R_[i.type]().fromJSON(i)),new Ca(n,e.options)}}const bE={generateTopUV:function(r,e,t,n,i){const a=e[t*3],o=e[t*3+1],l=e[n*3],c=e[n*3+1],h=e[i*3],f=e[i*3+1];return[new Pe(a,o),new Pe(l,c),new Pe(h,f)]},generateSideWallUV:function(r,e,t,n,i,a){const o=e[t*3],l=e[t*3+1],c=e[t*3+2],h=e[n*3],f=e[n*3+1],m=e[n*3+2],g=e[i*3],_=e[i*3+1],M=e[i*3+2],x=e[a*3],C=e[a*3+1],y=e[a*3+2];return Math.abs(l-f)<Math.abs(o-h)?[new Pe(o,1-c),new Pe(h,1-m),new Pe(g,1-M),new Pe(x,1-y)]:[new Pe(l,1-c),new Pe(f,1-m),new Pe(_,1-M),new Pe(C,1-y)]}};function ME(r,e,t){if(t.shapes=[],Array.isArray(r))for(let n=0,i=r.length;n<i;n++){const a=r[n];t.shapes.push(a.uuid)}else t.shapes.push(r.uuid);return e.extrudePath!==void 0&&(t.options.extrudePath=e.extrudePath.toJSON()),t}class Wf extends Gt{constructor(e=new Vo([new Pe(0,.5),new Pe(-.5,-.5),new Pe(.5,-.5)]),t=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:t};const n=[],i=[],a=[],o=[];let l=0,c=0;if(Array.isArray(e)===!1)h(e);else for(let f=0;f<e.length;f++)h(e[f]),this.addGroup(l,c,f),l+=c,c=0;this.setIndex(n),this.setAttribute("position",new mn(i,3)),this.setAttribute("normal",new mn(a,3)),this.setAttribute("uv",new mn(o,2));function h(f){const m=i.length/3,g=f.extractPoints(t);let _=g.shape;const M=g.holes;Ir.isClockWise(_)===!1&&(_=_.reverse());for(let C=0,y=M.length;C<y;C++){const b=M[C];Ir.isClockWise(b)===!0&&(M[C]=b.reverse())}const x=Ir.triangulateShape(_,M);for(let C=0,y=M.length;C<y;C++){const b=M[C];_=_.concat(b)}for(let C=0,y=_.length;C<y;C++){const b=_[C];i.push(b.x,b.y,0),a.push(0,0,1),o.push(b.x,b.y)}for(let C=0,y=x.length;C<y;C++){const b=x[C],O=b[0]+m,P=b[1]+m,F=b[2]+m;n.push(O,P,F),c+=3}}}toJSON(){const e=super.toJSON(),t=this.parameters.shapes;return SE(t,e)}static fromJSON(e,t){const n=[];for(let i=0,a=e.shapes.length;i<a;i++){const o=t[e.shapes[i]];n.push(o)}return new Wf(n,e.curveSegments)}}function SE(r,e){if(e.shapes=[],Array.isArray(r))for(let t=0,n=r.length;t<n;t++){const i=r[t];e.shapes.push(i.uuid)}else e.shapes.push(r.uuid);return e}class TE extends Cn{constructor(e){super(),this.type="ShadowMaterial",this.color=new $e(0),this.transparent=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this}}TE.prototype.isShadowMaterial=!0;class N_ extends Cn{constructor(e){super(),this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new $e(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new $e(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=wa,this.normalScale=new Pe(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this}}N_.prototype.isMeshStandardMaterial=!0;class EE extends N_{constructor(e){super(),this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new Pe(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return ti(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(t){this.ior=(1+.4*t)/(1-.4*t)}}),this.sheenColor=new $e(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=0,this.attenuationColor=new $e(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new $e(1,1,1),this.specularColorMap=null,this._sheen=0,this._clearcoat=0,this._transmission=0,this.setValues(e)}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.ior=e.ior,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}EE.prototype.isMeshPhysicalMaterial=!0;class AE extends Cn{constructor(e){super(),this.type="MeshPhongMaterial",this.color=new $e(16777215),this.specular=new $e(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new $e(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=wa,this.normalScale=new Pe(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=_c,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this}}AE.prototype.isMeshPhongMaterial=!0;class CE extends Cn{constructor(e){super(),this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new $e(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new $e(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=wa,this.normalScale=new Pe(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this}}CE.prototype.isMeshToonMaterial=!0;class LE extends Cn{constructor(e){super(),this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=wa,this.normalScale=new Pe(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}LE.prototype.isMeshNormalMaterial=!0;class RE extends Cn{constructor(e){super(),this.type="MeshLambertMaterial",this.color=new $e(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new $e(0),this.emissiveIntensity=1,this.emissiveMap=null,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=_c,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this}}RE.prototype.isMeshLambertMaterial=!0;class PE extends Cn{constructor(e){super(),this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new $e(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=wa,this.normalScale=new Pe(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this}}PE.prototype.isMeshMatcapMaterial=!0;class IE extends Ho{constructor(e){super(),this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}IE.prototype.isLineDashedMaterial=!0;const Vt={arraySlice:function(r,e,t){return Vt.isTypedArray(r)?new r.constructor(r.subarray(e,t!==void 0?t:r.length)):r.slice(e,t)},convertArray:function(r,e,t){return!r||!t&&r.constructor===e?r:typeof e.BYTES_PER_ELEMENT=="number"?new e(r):Array.prototype.slice.call(r)},isTypedArray:function(r){return ArrayBuffer.isView(r)&&!(r instanceof DataView)},getKeyframeOrder:function(r){function e(i,a){return r[i]-r[a]}const t=r.length,n=new Array(t);for(let i=0;i!==t;++i)n[i]=i;return n.sort(e),n},sortedArray:function(r,e,t){const n=r.length,i=new r.constructor(n);for(let a=0,o=0;o!==n;++a){const l=t[a]*e;for(let c=0;c!==e;++c)i[o++]=r[l+c]}return i},flattenJSON:function(r,e,t,n){let i=1,a=r[0];for(;a!==void 0&&a[n]===void 0;)a=r[i++];if(a===void 0)return;let o=a[n];if(o!==void 0)if(Array.isArray(o))do o=a[n],o!==void 0&&(e.push(a.time),t.push.apply(t,o)),a=r[i++];while(a!==void 0);else if(o.toArray!==void 0)do o=a[n],o!==void 0&&(e.push(a.time),o.toArray(t,t.length)),a=r[i++];while(a!==void 0);else do o=a[n],o!==void 0&&(e.push(a.time),t.push(o)),a=r[i++];while(a!==void 0)},subclip:function(r,e,t,n,i=30){const a=r.clone();a.name=e;const o=[];for(let c=0;c<a.tracks.length;++c){const h=a.tracks[c],f=h.getValueSize(),m=[],g=[];for(let _=0;_<h.times.length;++_){const M=h.times[_]*i;if(!(M<t||M>=n)){m.push(h.times[_]);for(let x=0;x<f;++x)g.push(h.values[_*f+x])}}m.length!==0&&(h.times=Vt.convertArray(m,h.times.constructor),h.values=Vt.convertArray(g,h.values.constructor),o.push(h))}a.tracks=o;let l=1/0;for(let c=0;c<a.tracks.length;++c)l>a.tracks[c].times[0]&&(l=a.tracks[c].times[0]);for(let c=0;c<a.tracks.length;++c)a.tracks[c].shift(-1*l);return a.resetDuration(),a},makeClipAdditive:function(r,e=0,t=r,n=30){n<=0&&(n=30);const i=t.tracks.length,a=e/n;for(let o=0;o<i;++o){const l=t.tracks[o],c=l.ValueTypeName;if(c==="bool"||c==="string")continue;const h=r.tracks.find(function(y){return y.name===l.name&&y.ValueTypeName===c});if(h===void 0)continue;let f=0;const m=l.getValueSize();l.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(f=m/3);let g=0;const _=h.getValueSize();h.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(g=_/3);const M=l.times.length-1;let x;if(a<=l.times[0]){const y=f,b=m-f;x=Vt.arraySlice(l.values,y,b)}else if(a>=l.times[M]){const y=M*m+f,b=y+m-f;x=Vt.arraySlice(l.values,y,b)}else{const y=l.createInterpolant(),b=f,O=m-f;y.evaluate(a),x=Vt.arraySlice(y.resultBuffer,b,O)}c==="quaternion"&&new Hn().fromArray(x).normalize().conjugate().toArray(x);const C=h.times.length;for(let y=0;y<C;++y){const b=y*_+g;if(c==="quaternion")Hn.multiplyQuaternionsFlat(h.values,b,x,0,h.values,b);else{const O=_-g*2;for(let P=0;P<O;++P)h.values[b+P]-=x[P]}}}return r.blendMode=Zv,r}};class kr{constructor(e,t,n,i){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=i!==void 0?i:new t.constructor(n),this.sampleValues=t,this.valueSize=n,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let n=this._cachedIndex,i=t[n],a=t[n-1];e:{t:{let o;n:{i:if(!(e<i)){for(let l=n+2;;){if(i===void 0){if(e<a)break i;return n=t.length,this._cachedIndex=n,this.afterEnd_(n-1,e,a)}if(n===l)break;if(a=i,i=t[++n],e<i)break t}o=t.length;break n}if(!(e>=a)){const l=t[1];e<l&&(n=2,a=l);for(let c=n-2;;){if(a===void 0)return this._cachedIndex=0,this.beforeStart_(0,e,i);if(n===c)break;if(i=a,a=t[--n-1],e>=a)break t}o=n,n=0;break n}break e}for(;n<o;){const l=n+o>>>1;e<t[l]?o=l:n=l+1}if(i=t[n],a=t[n-1],a===void 0)return this._cachedIndex=0,this.beforeStart_(0,e,i);if(i===void 0)return n=t.length,this._cachedIndex=n,this.afterEnd_(n-1,a,e)}this._cachedIndex=n,this.intervalChanged_(n,a,i)}return this.interpolate_(n,a,e,i)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,n=this.sampleValues,i=this.valueSize,a=e*i;for(let o=0;o!==i;++o)t[o]=n[a+o];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}kr.prototype.beforeStart_=kr.prototype.copySampleValue_;kr.prototype.afterEnd_=kr.prototype.copySampleValue_;class DE extends kr{constructor(e,t,n,i){super(e,t,n,i),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:Js,endingEnd:Js}}intervalChanged_(e,t,n){const i=this.parameterPositions;let a=e-2,o=e+1,l=i[a],c=i[o];if(l===void 0)switch(this.getSettings_().endingStart){case Zs:a=e,l=2*t-n;break;case ec:a=i.length-2,l=t+i[a]-i[a+1];break;default:a=e,l=n}if(c===void 0)switch(this.getSettings_().endingEnd){case Zs:o=e,c=2*n-t;break;case ec:o=1,c=n+i[1]-i[0];break;default:o=e-1,c=t}const h=(n-t)*.5,f=this.valueSize;this._weightPrev=h/(t-l),this._weightNext=h/(c-n),this._offsetPrev=a*f,this._offsetNext=o*f}interpolate_(e,t,n,i){const a=this.resultBuffer,o=this.sampleValues,l=this.valueSize,c=e*l,h=c-l,f=this._offsetPrev,m=this._offsetNext,g=this._weightPrev,_=this._weightNext,M=(n-t)/(i-t),x=M*M,C=x*M,y=-g*C+2*g*x-g*M,b=(1+g)*C+(-1.5-2*g)*x+(-.5+g)*M+1,O=(-1-_)*C+(1.5+_)*x+.5*M,P=_*C-_*x;for(let F=0;F!==l;++F)a[F]=y*o[f+F]+b*o[h+F]+O*o[c+F]+P*o[m+F];return a}}class O_ extends kr{constructor(e,t,n,i){super(e,t,n,i)}interpolate_(e,t,n,i){const a=this.resultBuffer,o=this.sampleValues,l=this.valueSize,c=e*l,h=c-l,f=(n-t)/(i-t),m=1-f;for(let g=0;g!==l;++g)a[g]=o[h+g]*m+o[c+g]*f;return a}}class NE extends kr{constructor(e,t,n,i){super(e,t,n,i)}interpolate_(e){return this.copySampleValue_(e-1)}}class qi{constructor(e,t,n,i){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(t===void 0||t.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=Vt.convertArray(t,this.TimeBufferType),this.values=Vt.convertArray(n,this.ValueBufferType),this.setInterpolation(i||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let n;if(t.toJSON!==this.toJSON)n=t.toJSON(e);else{n={name:e.name,times:Vt.convertArray(e.times,Array),values:Vt.convertArray(e.values,Array)};const i=e.getInterpolation();i!==e.DefaultInterpolation&&(n.interpolation=i)}return n.type=e.ValueTypeName,n}InterpolantFactoryMethodDiscrete(e){return new NE(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new O_(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new DE(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case Ql:t=this.InterpolantFactoryMethodDiscrete;break;case Kl:t=this.InterpolantFactoryMethodLinear;break;case au:t=this.InterpolantFactoryMethodSmooth;break}if(t===void 0){const n="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(n);return console.warn("THREE.KeyframeTrack:",n),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return Ql;case this.InterpolantFactoryMethodLinear:return Kl;case this.InterpolantFactoryMethodSmooth:return au}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){const t=this.times;for(let n=0,i=t.length;n!==i;++n)t[n]+=e}return this}scale(e){if(e!==1){const t=this.times;for(let n=0,i=t.length;n!==i;++n)t[n]*=e}return this}trim(e,t){const n=this.times,i=n.length;let a=0,o=i-1;for(;a!==i&&n[a]<e;)++a;for(;o!==-1&&n[o]>t;)--o;if(++o,a!==0||o!==i){a>=o&&(o=Math.max(o,1),a=o-1);const l=this.getValueSize();this.times=Vt.arraySlice(n,a,o),this.values=Vt.arraySlice(this.values,a*l,o*l)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const n=this.times,i=this.values,a=n.length;a===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let o=null;for(let l=0;l!==a;l++){const c=n[l];if(typeof c=="number"&&isNaN(c)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,l,c),e=!1;break}if(o!==null&&o>c){console.error("THREE.KeyframeTrack: Out of order keys.",this,l,c,o),e=!1;break}o=c}if(i!==void 0&&Vt.isTypedArray(i))for(let l=0,c=i.length;l!==c;++l){const h=i[l];if(isNaN(h)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,l,h),e=!1;break}}return e}optimize(){const e=Vt.arraySlice(this.times),t=Vt.arraySlice(this.values),n=this.getValueSize(),i=this.getInterpolation()===au,a=e.length-1;let o=1;for(let l=1;l<a;++l){let c=!1;const h=e[l],f=e[l+1];if(h!==f&&(l!==1||h!==e[0]))if(i)c=!0;else{const m=l*n,g=m-n,_=m+n;for(let M=0;M!==n;++M){const x=t[m+M];if(x!==t[g+M]||x!==t[_+M]){c=!0;break}}}if(c){if(l!==o){e[o]=e[l];const m=l*n,g=o*n;for(let _=0;_!==n;++_)t[g+_]=t[m+_]}++o}}if(a>0){e[o]=e[a];for(let l=a*n,c=o*n,h=0;h!==n;++h)t[c+h]=t[l+h];++o}return o!==e.length?(this.times=Vt.arraySlice(e,0,o),this.values=Vt.arraySlice(t,0,o*n)):(this.times=e,this.values=t),this}clone(){const e=Vt.arraySlice(this.times,0),t=Vt.arraySlice(this.values,0),n=this.constructor,i=new n(this.name,e,t);return i.createInterpolant=this.createInterpolant,i}}qi.prototype.TimeBufferType=Float32Array;qi.prototype.ValueBufferType=Float32Array;qi.prototype.DefaultInterpolation=Kl;class La extends qi{}La.prototype.ValueTypeName="bool";La.prototype.ValueBufferType=Array;La.prototype.DefaultInterpolation=Ql;La.prototype.InterpolantFactoryMethodLinear=void 0;La.prototype.InterpolantFactoryMethodSmooth=void 0;class F_ extends qi{}F_.prototype.ValueTypeName="color";class nc extends qi{}nc.prototype.ValueTypeName="number";class OE extends kr{constructor(e,t,n,i){super(e,t,n,i)}interpolate_(e,t,n,i){const a=this.resultBuffer,o=this.sampleValues,l=this.valueSize,c=(n-t)/(i-t);let h=e*l;for(let f=h+l;h!==f;h+=4)Hn.slerpFlat(a,0,o,h-l,o,h,c);return a}}class Go extends qi{InterpolantFactoryMethodLinear(e){return new OE(this.times,this.values,this.getValueSize(),e)}}Go.prototype.ValueTypeName="quaternion";Go.prototype.DefaultInterpolation=Kl;Go.prototype.InterpolantFactoryMethodSmooth=void 0;class Ra extends qi{}Ra.prototype.ValueTypeName="string";Ra.prototype.ValueBufferType=Array;Ra.prototype.DefaultInterpolation=Ql;Ra.prototype.InterpolantFactoryMethodLinear=void 0;Ra.prototype.InterpolantFactoryMethodSmooth=void 0;class ic extends qi{}ic.prototype.ValueTypeName="vector";class um{constructor(e,t=-1,n,i=Cf){this.name=e,this.tracks=n,this.duration=t,this.blendMode=i,this.uuid=Gi(),this.duration<0&&this.resetDuration()}static parse(e){const t=[],n=e.tracks,i=1/(e.fps||1);for(let o=0,l=n.length;o!==l;++o)t.push(zE(n[o]).scale(i));const a=new this(e.name,e.duration,t,e.blendMode);return a.uuid=e.uuid,a}static toJSON(e){const t=[],n=e.tracks,i={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let a=0,o=n.length;a!==o;++a)t.push(qi.toJSON(n[a]));return i}static CreateFromMorphTargetSequence(e,t,n,i){const a=t.length,o=[];for(let l=0;l<a;l++){let c=[],h=[];c.push((l+a-1)%a,l,(l+1)%a),h.push(0,1,0);const f=Vt.getKeyframeOrder(c);c=Vt.sortedArray(c,1,f),h=Vt.sortedArray(h,1,f),!i&&c[0]===0&&(c.push(a),h.push(h[0])),o.push(new nc(".morphTargetInfluences["+t[l].name+"]",c,h).scale(1/n))}return new this(e,-1,o)}static findByName(e,t){let n=e;if(!Array.isArray(e)){const i=e;n=i.geometry&&i.geometry.animations||i.animations}for(let i=0;i<n.length;i++)if(n[i].name===t)return n[i];return null}static CreateClipsFromMorphTargetSequences(e,t,n){const i={},a=/^([\w-]*?)([\d]+)$/;for(let l=0,c=e.length;l<c;l++){const h=e[l],f=h.name.match(a);if(f&&f.length>1){const m=f[1];let g=i[m];g||(i[m]=g=[]),g.push(h)}}const o=[];for(const l in i)o.push(this.CreateFromMorphTargetSequence(l,i[l],t,n));return o}static parseAnimation(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const n=function(m,g,_,M,x){if(_.length!==0){const C=[],y=[];Vt.flattenJSON(_,C,y,M),C.length!==0&&x.push(new m(g,C,y))}},i=[],a=e.name||"default",o=e.fps||30,l=e.blendMode;let c=e.length||-1;const h=e.hierarchy||[];for(let m=0;m<h.length;m++){const g=h[m].keys;if(!(!g||g.length===0))if(g[0].morphTargets){const _={};let M;for(M=0;M<g.length;M++)if(g[M].morphTargets)for(let x=0;x<g[M].morphTargets.length;x++)_[g[M].morphTargets[x]]=-1;for(const x in _){const C=[],y=[];for(let b=0;b!==g[M].morphTargets.length;++b){const O=g[M];C.push(O.time),y.push(O.morphTarget===x?1:0)}i.push(new nc(".morphTargetInfluence["+x+"]",C,y))}c=_.length*(o||1)}else{const _=".bones["+t[m].name+"]";n(ic,_+".position",g,"pos",i),n(Go,_+".quaternion",g,"rot",i),n(ic,_+".scale",g,"scl",i)}}return i.length===0?null:new this(a,c,i,l)}resetDuration(){const e=this.tracks;let t=0;for(let n=0,i=e.length;n!==i;++n){const a=this.tracks[n];t=Math.max(t,a.times[a.times.length-1])}return this.duration=t,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function FE(r){switch(r.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return nc;case"vector":case"vector2":case"vector3":case"vector4":return ic;case"color":return F_;case"quaternion":return Go;case"bool":case"boolean":return La;case"string":return Ra}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+r)}function zE(r){if(r.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=FE(r.type);if(r.times===void 0){const t=[],n=[];Vt.flattenJSON(r.keys,t,n,"value"),r.times=t,r.values=n}return e.parse!==void 0?e.parse(r):new e(r.name,r.times,r.values,r.interpolation)}const ya={enabled:!1,files:{},add:function(r,e){this.enabled!==!1&&(this.files[r]=e)},get:function(r){if(this.enabled!==!1)return this.files[r]},remove:function(r){delete this.files[r]},clear:function(){this.files={}}};class BE{constructor(e,t,n){const i=this;let a=!1,o=0,l=0,c;const h=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=n,this.itemStart=function(f){l++,a===!1&&i.onStart!==void 0&&i.onStart(f,o,l),a=!0},this.itemEnd=function(f){o++,i.onProgress!==void 0&&i.onProgress(f,o,l),o===l&&(a=!1,i.onLoad!==void 0&&i.onLoad())},this.itemError=function(f){i.onError!==void 0&&i.onError(f)},this.resolveURL=function(f){return c?c(f):f},this.setURLModifier=function(f){return c=f,this},this.addHandler=function(f,m){return h.push(f,m),this},this.removeHandler=function(f){const m=h.indexOf(f);return m!==-1&&h.splice(m,2),this},this.getHandler=function(f){for(let m=0,g=h.length;m<g;m+=2){const _=h[m],M=h[m+1];if(_.global&&(_.lastIndex=0),_.test(f))return M}return null}}}const kE=new BE;class Wr{constructor(e){this.manager=e!==void 0?e:kE,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const n=this;return new Promise(function(i,a){n.load(e,i,t,a)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}const ir={};class UE extends Wr{constructor(e){super(e)}load(e,t,n,i){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const a=ya.get(e);if(a!==void 0)return this.manager.itemStart(e),setTimeout(()=>{t&&t(a),this.manager.itemEnd(e)},0),a;if(ir[e]!==void 0){ir[e].push({onLoad:t,onProgress:n,onError:i});return}ir[e]=[],ir[e].push({onLoad:t,onProgress:n,onError:i});const o=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"});fetch(o).then(l=>{if(l.status===200||l.status===0){l.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received.");const c=ir[e],h=l.body.getReader(),f=l.headers.get("Content-Length"),m=f?parseInt(f):0,g=m!==0;let _=0;return new ReadableStream({start(M){x();function x(){h.read().then(({done:C,value:y})=>{if(C)M.close();else{_+=y.byteLength;const b=new ProgressEvent("progress",{lengthComputable:g,loaded:_,total:m});for(let O=0,P=c.length;O<P;O++){const F=c[O];F.onProgress&&F.onProgress(b)}M.enqueue(y),x()}})}}})}else throw Error(`fetch for "${l.url}" responded with ${l.status}: ${l.statusText}`)}).then(l=>{const c=new Response(l);switch(this.responseType){case"arraybuffer":return c.arrayBuffer();case"blob":return c.blob();case"document":return c.text().then(h=>new DOMParser().parseFromString(h,this.mimeType));case"json":return c.json();default:return c.text()}}).then(l=>{ya.add(e,l);const c=ir[e];delete ir[e];for(let h=0,f=c.length;h<f;h++){const m=c[h];m.onLoad&&m.onLoad(l)}this.manager.itemEnd(e)}).catch(l=>{const c=ir[e];delete ir[e];for(let h=0,f=c.length;h<f;h++){const m=c[h];m.onError&&m.onError(l)}this.manager.itemError(e),this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class z_ extends Wr{constructor(e){super(e)}load(e,t,n,i){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const a=this,o=ya.get(e);if(o!==void 0)return a.manager.itemStart(e),setTimeout(function(){t&&t(o),a.manager.itemEnd(e)},0),o;const l=bc("img");function c(){f(),ya.add(e,this),t&&t(this),a.manager.itemEnd(e)}function h(m){f(),i&&i(m),a.manager.itemError(e),a.manager.itemEnd(e)}function f(){l.removeEventListener("load",c,!1),l.removeEventListener("error",h,!1)}return l.addEventListener("load",c,!1),l.addEventListener("error",h,!1),e.substr(0,5)!=="data:"&&this.crossOrigin!==void 0&&(l.crossOrigin=this.crossOrigin),a.manager.itemStart(e),l.src=e,l}}class HE extends Wr{constructor(e){super(e)}load(e,t,n,i){const a=new Mc,o=new z_(this.manager);o.setCrossOrigin(this.crossOrigin),o.setPath(this.path);let l=0;function c(h){o.load(e[h],function(f){a.images[h]=f,l++,l===6&&(a.needsUpdate=!0,t&&t(a))},void 0,i)}for(let h=0;h<e.length;++h)c(h);return a}}class VE extends Wr{constructor(e){super(e)}load(e,t,n,i){const a=new tn,o=new z_(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(e,function(l){a.image=l,a.needsUpdate=!0,t!==void 0&&t(a)},n,i),a}}class ji extends Lt{constructor(e,t=1){super(),this.type="Light",this.color=new $e(e),this.intensity=t}dispose(){}copy(e){return super.copy(e),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,this.groundColor!==void 0&&(t.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(t.object.distance=this.distance),this.angle!==void 0&&(t.object.angle=this.angle),this.decay!==void 0&&(t.object.decay=this.decay),this.penumbra!==void 0&&(t.object.penumbra=this.penumbra),this.shadow!==void 0&&(t.object.shadow=this.shadow.toJSON()),t}}ji.prototype.isLight=!0;class GE extends ji{constructor(e,t,n){super(e,n),this.type="HemisphereLight",this.position.copy(Lt.DefaultUp),this.updateMatrix(),this.groundColor=new $e(t)}copy(e){return ji.prototype.copy.call(this,e),this.groundColor.copy(e.groundColor),this}}GE.prototype.isHemisphereLight=!0;const hm=new nt,fm=new j,dm=new j;class jf{constructor(e){this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new Pe(512,512),this.map=null,this.mapPass=null,this.matrix=new nt,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new Sc,this._frameExtents=new Pe(1,1),this._viewportCount=1,this._viewports=[new Ft(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,n=this.matrix;fm.setFromMatrixPosition(e.matrixWorld),t.position.copy(fm),dm.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(dm),t.updateMatrixWorld(),hm.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(hm),n.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),n.multiply(t.projectionMatrix),n.multiply(t.matrixWorldInverse)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class B_ extends jf{constructor(){super(new Fn(50,1,.5,500)),this.focus=1}updateMatrices(e){const t=this.camera,n=fh*2*e.angle*this.focus,i=this.mapSize.width/this.mapSize.height,a=e.distance||t.far;(n!==t.fov||i!==t.aspect||a!==t.far)&&(t.fov=n,t.aspect=i,t.far=a,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}B_.prototype.isSpotLightShadow=!0;class WE extends ji{constructor(e,t,n=0,i=Math.PI/3,a=0,o=1){super(e,t),this.type="SpotLight",this.position.copy(Lt.DefaultUp),this.updateMatrix(),this.target=new Lt,this.distance=n,this.angle=i,this.penumbra=a,this.decay=o,this.shadow=new B_}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}WE.prototype.isSpotLight=!0;const pm=new nt,Ja=new j,Vu=new j;class k_ extends jf{constructor(){super(new Fn(90,1,.5,500)),this._frameExtents=new Pe(4,2),this._viewportCount=6,this._viewports=[new Ft(2,1,1,1),new Ft(0,1,1,1),new Ft(3,1,1,1),new Ft(1,1,1,1),new Ft(3,0,1,1),new Ft(1,0,1,1)],this._cubeDirections=[new j(1,0,0),new j(-1,0,0),new j(0,0,1),new j(0,0,-1),new j(0,1,0),new j(0,-1,0)],this._cubeUps=[new j(0,1,0),new j(0,1,0),new j(0,1,0),new j(0,1,0),new j(0,0,1),new j(0,0,-1)]}updateMatrices(e,t=0){const n=this.camera,i=this.matrix,a=e.distance||n.far;a!==n.far&&(n.far=a,n.updateProjectionMatrix()),Ja.setFromMatrixPosition(e.matrixWorld),n.position.copy(Ja),Vu.copy(n.position),Vu.add(this._cubeDirections[t]),n.up.copy(this._cubeUps[t]),n.lookAt(Vu),n.updateMatrixWorld(),i.makeTranslation(-Ja.x,-Ja.y,-Ja.z),pm.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(pm)}}k_.prototype.isPointLightShadow=!0;class jE extends ji{constructor(e,t,n=0,i=1){super(e,t),this.type="PointLight",this.distance=n,this.decay=i,this.shadow=new k_}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}jE.prototype.isPointLight=!0;class U_ extends jf{constructor(){super(new Ss(-5,5,5,-5,.5,500))}}U_.prototype.isDirectionalLightShadow=!0;class qE extends ji{constructor(e,t){super(e,t),this.type="DirectionalLight",this.position.copy(Lt.DefaultUp),this.updateMatrix(),this.target=new Lt,this.shadow=new U_}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}qE.prototype.isDirectionalLight=!0;class XE extends ji{constructor(e,t){super(e,t),this.type="AmbientLight"}}XE.prototype.isAmbientLight=!0;class YE extends ji{constructor(e,t,n=10,i=10){super(e,t),this.type="RectAreaLight",this.width=n,this.height=i}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const t=super.toJSON(e);return t.object.width=this.width,t.object.height=this.height,t}}YE.prototype.isRectAreaLight=!0;class H_{constructor(){this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new j)}set(e){for(let t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,t){const n=e.x,i=e.y,a=e.z,o=this.coefficients;return t.copy(o[0]).multiplyScalar(.282095),t.addScaledVector(o[1],.488603*i),t.addScaledVector(o[2],.488603*a),t.addScaledVector(o[3],.488603*n),t.addScaledVector(o[4],1.092548*(n*i)),t.addScaledVector(o[5],1.092548*(i*a)),t.addScaledVector(o[6],.315392*(3*a*a-1)),t.addScaledVector(o[7],1.092548*(n*a)),t.addScaledVector(o[8],.546274*(n*n-i*i)),t}getIrradianceAt(e,t){const n=e.x,i=e.y,a=e.z,o=this.coefficients;return t.copy(o[0]).multiplyScalar(.886227),t.addScaledVector(o[1],2*.511664*i),t.addScaledVector(o[2],2*.511664*a),t.addScaledVector(o[3],2*.511664*n),t.addScaledVector(o[4],2*.429043*n*i),t.addScaledVector(o[5],2*.429043*i*a),t.addScaledVector(o[6],.743125*a*a-.247708),t.addScaledVector(o[7],2*.429043*n*a),t.addScaledVector(o[8],.429043*(n*n-i*i)),t}add(e){for(let t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this}addScaledSH(e,t){for(let n=0;n<9;n++)this.coefficients[n].addScaledVector(e.coefficients[n],t);return this}scale(e){for(let t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this}lerp(e,t){for(let n=0;n<9;n++)this.coefficients[n].lerp(e.coefficients[n],t);return this}equals(e){for(let t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(e,t=0){const n=this.coefficients;for(let i=0;i<9;i++)n[i].fromArray(e,t+i*3);return this}toArray(e=[],t=0){const n=this.coefficients;for(let i=0;i<9;i++)n[i].toArray(e,t+i*3);return e}static getBasisAt(e,t){const n=e.x,i=e.y,a=e.z;t[0]=.282095,t[1]=.488603*i,t[2]=.488603*a,t[3]=.488603*n,t[4]=1.092548*n*i,t[5]=1.092548*i*a,t[6]=.315392*(3*a*a-1),t[7]=1.092548*n*a,t[8]=.546274*(n*n-i*i)}}H_.prototype.isSphericalHarmonics3=!0;class qf extends ji{constructor(e=new H_,t=1){super(void 0,t),this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){const t=super.toJSON(e);return t.object.sh=this.sh.toArray(),t}}qf.prototype.isLightProbe=!0;class $E{static decodeText(e){if(typeof TextDecoder<"u")return new TextDecoder().decode(e);let t="";for(let n=0,i=e.length;n<i;n++)t+=String.fromCharCode(e[n]);try{return decodeURIComponent(escape(t))}catch{return t}}static extractUrlBase(e){const t=e.lastIndexOf("/");return t===-1?"./":e.substr(0,t+1)}static resolveURL(e,t){return typeof e!="string"||e===""?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}}class JE extends Gt{constructor(){super(),this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}clone(){return new this.constructor().copy(this)}toJSON(){const e=super.toJSON(this);return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}JE.prototype.isInstancedBufferGeometry=!0;class ZE extends Wr{constructor(e){super(e),typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,t,n,i){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const a=this,o=ya.get(e);if(o!==void 0)return a.manager.itemStart(e),setTimeout(function(){t&&t(o),a.manager.itemEnd(e)},0),o;const l={};l.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",l.headers=this.requestHeader,fetch(e,l).then(function(c){return c.blob()}).then(function(c){return createImageBitmap(c,Object.assign(a.options,{colorSpaceConversion:"none"}))}).then(function(c){ya.add(e,c),t&&t(c),a.manager.itemEnd(e)}).catch(function(c){i&&i(c),a.manager.itemError(e),a.manager.itemEnd(e)}),a.manager.itemStart(e)}}ZE.prototype.isImageBitmapLoader=!0;let Il;const QE={getContext:function(){return Il===void 0&&(Il=new(window.AudioContext||window.webkitAudioContext)),Il},setContext:function(r){Il=r}};class KE extends Wr{constructor(e){super(e)}load(e,t,n,i){const a=this,o=new UE(this.manager);o.setResponseType("arraybuffer"),o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(l){try{const c=l.slice(0);QE.getContext().decodeAudioData(c,function(f){t(f)})}catch(c){i?i(c):console.error(c),a.manager.itemError(e)}},n,i)}}class eA extends qf{constructor(e,t,n=1){super(void 0,n);const i=new $e().set(e),a=new $e().set(t),o=new j(i.r,i.g,i.b),l=new j(a.r,a.g,a.b),c=Math.sqrt(Math.PI),h=c*Math.sqrt(.75);this.sh.coefficients[0].copy(o).add(l).multiplyScalar(c),this.sh.coefficients[1].copy(o).sub(l).multiplyScalar(h)}}eA.prototype.isHemisphereLightProbe=!0;class tA extends qf{constructor(e,t=1){super(void 0,t);const n=new $e().set(e);this.sh.coefficients[0].set(n.r,n.g,n.b).multiplyScalar(2*Math.sqrt(Math.PI))}}tA.prototype.isAmbientLightProbe=!0;class nA extends Lt{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(e=0){if(this.isPlaying===!0){console.warn("THREE.Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+e;const t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.loopStart=this.loopStart,t.loopEnd=this.loopEnd,t.onended=this.onEnded.bind(this),t.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this._progress=0,this.source.stop(),this.source.onended=null,this.isPlaying=!1,this}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}getFilters(){return this.filters}setFilters(e){return e||(e=[]),this._connected===!0?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){if(this.detune=e,this.source.detune!==void 0)return this.isPlaying===!0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.playbackRate=e,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1}getLoop(){return this.hasPlaybackControl===!1?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.loop=e,this.isPlaying===!0&&(this.source.loop=this.loop),this}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}}class iA{constructor(e,t,n){this.binding=e,this.valueSize=n;let i,a,o;switch(t){case"quaternion":i=this._slerp,a=this._slerpAdditive,o=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(n*6),this._workIndex=5;break;case"string":case"bool":i=this._select,a=this._select,o=this._setAdditiveIdentityOther,this.buffer=new Array(n*5);break;default:i=this._lerp,a=this._lerpAdditive,o=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(n*5)}this._mixBufferRegion=i,this._mixBufferRegionAdditive=a,this._setIdentity=o,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,t){const n=this.buffer,i=this.valueSize,a=e*i+i;let o=this.cumulativeWeight;if(o===0){for(let l=0;l!==i;++l)n[a+l]=n[l];o=t}else{o+=t;const l=t/o;this._mixBufferRegion(n,a,0,l,i)}this.cumulativeWeight=o}accumulateAdditive(e){const t=this.buffer,n=this.valueSize,i=n*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(t,i,0,e,n),this.cumulativeWeightAdditive+=e}apply(e){const t=this.valueSize,n=this.buffer,i=e*t+t,a=this.cumulativeWeight,o=this.cumulativeWeightAdditive,l=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,a<1){const c=t*this._origIndex;this._mixBufferRegion(n,i,c,1-a,t)}o>0&&this._mixBufferRegionAdditive(n,i,this._addIndex*t,1,t);for(let c=t,h=t+t;c!==h;++c)if(n[c]!==n[c+t]){l.setValue(n,i);break}}saveOriginalState(){const e=this.binding,t=this.buffer,n=this.valueSize,i=n*this._origIndex;e.getValue(t,i);for(let a=n,o=i;a!==o;++a)t[a]=t[i+a%n];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const e=this.valueSize*3;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,t=e+this.valueSize;for(let n=e;n<t;n++)this.buffer[n]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize;for(let n=0;n<this.valueSize;n++)this.buffer[t+n]=this.buffer[e+n]}_select(e,t,n,i,a){if(i>=.5)for(let o=0;o!==a;++o)e[t+o]=e[n+o]}_slerp(e,t,n,i){Hn.slerpFlat(e,t,e,t,e,n,i)}_slerpAdditive(e,t,n,i,a){const o=this._workIndex*a;Hn.multiplyQuaternionsFlat(e,o,e,t,e,n),Hn.slerpFlat(e,t,e,t,e,o,i)}_lerp(e,t,n,i,a){const o=1-i;for(let l=0;l!==a;++l){const c=t+l;e[c]=e[c]*o+e[n+l]*i}}_lerpAdditive(e,t,n,i,a){for(let o=0;o!==a;++o){const l=t+o;e[l]=e[l]+e[n+o]*i}}}const Xf="\\[\\]\\.:\\/",rA=new RegExp("["+Xf+"]","g"),Yf="[^"+Xf+"]",sA="[^"+Xf.replace("\\.","")+"]",aA=/((?:WC+[\/:])*)/.source.replace("WC",Yf),oA=/(WCOD+)?/.source.replace("WCOD",sA),lA=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",Yf),cA=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",Yf),uA=new RegExp("^"+aA+oA+lA+cA+"$"),hA=["material","materials","bones"];class fA{constructor(e,t,n){const i=n||At.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,i)}getValue(e,t){this.bind();const n=this._targetGroup.nCachedObjects_,i=this._bindings[n];i!==void 0&&i.getValue(e,t)}setValue(e,t){const n=this._bindings;for(let i=this._targetGroup.nCachedObjects_,a=n.length;i!==a;++i)n[i].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].unbind()}}class At{constructor(e,t,n){this.path=t,this.parsedPath=n||At.parseTrackName(t),this.node=At.findNode(e,this.parsedPath.nodeName)||e,this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,t,n){return e&&e.isAnimationObjectGroup?new At.Composite(e,t,n):new At(e,t,n)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(rA,"")}static parseTrackName(e){const t=uA.exec(e);if(!t)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const n={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},i=n.nodeName&&n.nodeName.lastIndexOf(".");if(i!==void 0&&i!==-1){const a=n.nodeName.substring(i+1);hA.indexOf(a)!==-1&&(n.nodeName=n.nodeName.substring(0,i),n.objectName=a)}if(n.propertyName===null||n.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return n}static findNode(e,t){if(!t||t===""||t==="."||t===-1||t===e.name||t===e.uuid)return e;if(e.skeleton){const n=e.skeleton.getBoneByName(t);if(n!==void 0)return n}if(e.children){const n=function(a){for(let o=0;o<a.length;o++){const l=a[o];if(l.name===t||l.uuid===t)return l;const c=n(l.children);if(c)return c}return null},i=n(e.children);if(i)return i}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,t){e[t]=this.targetObject[this.propertyName]}_getValue_array(e,t){const n=this.resolvedProperty;for(let i=0,a=n.length;i!==a;++i)e[t++]=n[i]}_getValue_arrayElement(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,t){this.resolvedProperty.toArray(e,t)}_setValue_direct(e,t){this.targetObject[this.propertyName]=e[t]}_setValue_direct_setNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,t){const n=this.resolvedProperty;for(let i=0,a=n.length;i!==a;++i)n[i]=e[t++]}_setValue_array_setNeedsUpdate(e,t){const n=this.resolvedProperty;for(let i=0,a=n.length;i!==a;++i)n[i]=e[t++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,t){const n=this.resolvedProperty;for(let i=0,a=n.length;i!==a;++i)n[i]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}_setValue_arrayElement_setNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,t){this.resolvedProperty.fromArray(e,t)}_setValue_fromArray_setNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,t){this.bind(),this.getValue(e,t)}_setValue_unbound(e,t){this.bind(),this.setValue(e,t)}bind(){let e=this.node;const t=this.parsedPath,n=t.objectName,i=t.propertyName;let a=t.propertyIndex;if(e||(e=At.findNode(this.rootNode,t.nodeName)||this.rootNode,this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");return}if(n){let h=t.objectIndex;switch(n){case"materials":if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let f=0;f<e.length;f++)if(e[f].name===h){h=f;break}break;default:if(e[n]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[n]}if(h!==void 0){if(e[h]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[h]}}const o=e[i];if(o===void 0){const h=t.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+h+"."+i+" but it wasn't found.",e);return}let l=this.Versioning.None;this.targetObject=e,e.needsUpdate!==void 0?l=this.Versioning.NeedsUpdate:e.matrixWorldNeedsUpdate!==void 0&&(l=this.Versioning.MatrixWorldNeedsUpdate);let c=this.BindingType.Direct;if(a!==void 0){if(i==="morphTargetInfluences"){if(!e.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(e.geometry.isBufferGeometry){if(!e.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}e.morphTargetDictionary[a]!==void 0&&(a=e.morphTargetDictionary[a])}else{console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences on THREE.Geometry. Use THREE.BufferGeometry instead.",this);return}}c=this.BindingType.ArrayElement,this.resolvedProperty=o,this.propertyIndex=a}else o.fromArray!==void 0&&o.toArray!==void 0?(c=this.BindingType.HasFromToArray,this.resolvedProperty=o):Array.isArray(o)?(c=this.BindingType.EntireArray,this.resolvedProperty=o):this.propertyName=i;this.getValue=this.GetterByBindingType[c],this.setValue=this.SetterByBindingTypeAndVersioning[c][l]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}At.Composite=fA;At.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};At.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};At.prototype.GetterByBindingType=[At.prototype._getValue_direct,At.prototype._getValue_array,At.prototype._getValue_arrayElement,At.prototype._getValue_toArray];At.prototype.SetterByBindingTypeAndVersioning=[[At.prototype._setValue_direct,At.prototype._setValue_direct_setNeedsUpdate,At.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[At.prototype._setValue_array,At.prototype._setValue_array_setNeedsUpdate,At.prototype._setValue_array_setMatrixWorldNeedsUpdate],[At.prototype._setValue_arrayElement,At.prototype._setValue_arrayElement_setNeedsUpdate,At.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[At.prototype._setValue_fromArray,At.prototype._setValue_fromArray_setNeedsUpdate,At.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class dA{constructor(e,t,n=null,i=t.blendMode){this._mixer=e,this._clip=t,this._localRoot=n,this.blendMode=i;const a=t.tracks,o=a.length,l=new Array(o),c={endingStart:Js,endingEnd:Js};for(let h=0;h!==o;++h){const f=a[h].createInterpolant(null);l[h]=f,f.settings=c}this._interpolantSettings=c,this._interpolants=l,this._propertyBindings=new Array(o),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=$w,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,t){return this.loop=e,this.repetitions=t,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,t,n){if(e.fadeOut(t),this.fadeIn(t),n){const i=this._clip.duration,a=e._clip.duration,o=a/i,l=i/a;e.warp(1,o,t),this.warp(l,1,t)}return this}crossFadeTo(e,t,n){return e.crossFadeFrom(this,t,n)}stopFading(){const e=this._weightInterpolant;return e!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,t,n){const i=this._mixer,a=i.time,o=this.timeScale;let l=this._timeScaleInterpolant;l===null&&(l=i._lendControlInterpolant(),this._timeScaleInterpolant=l);const c=l.parameterPositions,h=l.sampleValues;return c[0]=a,c[1]=a+n,h[0]=e/o,h[1]=t/o,this}stopWarping(){const e=this._timeScaleInterpolant;return e!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,t,n,i){if(!this.enabled){this._updateWeight(e);return}const a=this._startTime;if(a!==null){const c=(e-a)*n;if(c<0||n===0)return;this._startTime=null,t=n*c}t*=this._updateTimeScale(e);const o=this._updateTime(t),l=this._updateWeight(e);if(l>0){const c=this._interpolants,h=this._propertyBindings;switch(this.blendMode){case Zv:for(let f=0,m=c.length;f!==m;++f)c[f].evaluate(o),h[f].accumulateAdditive(l);break;case Cf:default:for(let f=0,m=c.length;f!==m;++f)c[f].evaluate(o),h[f].accumulate(i,l)}}}_updateWeight(e){let t=0;if(this.enabled){t=this.weight;const n=this._weightInterpolant;if(n!==null){const i=n.evaluate(e)[0];t*=i,e>n.parameterPositions[1]&&(this.stopFading(),i===0&&(this.enabled=!1))}}return this._effectiveWeight=t,t}_updateTimeScale(e){let t=0;if(!this.paused){t=this.timeScale;const n=this._timeScaleInterpolant;if(n!==null){const i=n.evaluate(e)[0];t*=i,e>n.parameterPositions[1]&&(this.stopWarping(),t===0?this.paused=!0:this.timeScale=t)}}return this._effectiveTimeScale=t,t}_updateTime(e){const t=this._clip.duration,n=this.loop;let i=this.time+e,a=this._loopCount;const o=n===Jw;if(e===0)return a===-1?i:o&&(a&1)===1?t-i:i;if(n===Yw){a===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(i>=t)i=t;else if(i<0)i=0;else{this.time=i;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(a===-1&&(e>=0?(a=0,this._setEndings(!0,this.repetitions===0,o)):this._setEndings(this.repetitions===0,!0,o)),i>=t||i<0){const l=Math.floor(i/t);i-=t*l,a+=Math.abs(l);const c=this.repetitions-a;if(c<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,i=e>0?t:0,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(c===1){const h=e<0;this._setEndings(h,!h,o)}else this._setEndings(!1,!1,o);this._loopCount=a,this.time=i,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:l})}}else this.time=i;if(o&&(a&1)===1)return t-i}return i}_setEndings(e,t,n){const i=this._interpolantSettings;n?(i.endingStart=Zs,i.endingEnd=Zs):(e?i.endingStart=this.zeroSlopeAtStart?Zs:Js:i.endingStart=ec,t?i.endingEnd=this.zeroSlopeAtEnd?Zs:Js:i.endingEnd=ec)}_scheduleFading(e,t,n){const i=this._mixer,a=i.time;let o=this._weightInterpolant;o===null&&(o=i._lendControlInterpolant(),this._weightInterpolant=o);const l=o.parameterPositions,c=o.sampleValues;return l[0]=a,c[0]=t,l[1]=a+e,c[1]=n,this}}class pA extends bs{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,t){const n=e._localRoot||this._root,i=e._clip.tracks,a=i.length,o=e._propertyBindings,l=e._interpolants,c=n.uuid,h=this._bindingsByRootAndName;let f=h[c];f===void 0&&(f={},h[c]=f);for(let m=0;m!==a;++m){const g=i[m],_=g.name;let M=f[_];if(M!==void 0)o[m]=M;else{if(M=o[m],M!==void 0){M._cacheIndex===null&&(++M.referenceCount,this._addInactiveBinding(M,c,_));continue}const x=t&&t._propertyBindings[m].binding.parsedPath;M=new iA(At.create(n,_,x),g.ValueTypeName,g.getValueSize()),++M.referenceCount,this._addInactiveBinding(M,c,_),o[m]=M}l[m].resultBuffer=M.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(e._cacheIndex===null){const n=(e._localRoot||this._root).uuid,i=e._clip.uuid,a=this._actionsByClip[i];this._bindAction(e,a&&a.knownActions[0]),this._addInactiveAction(e,i,n)}const t=e._propertyBindings;for(let n=0,i=t.length;n!==i;++n){const a=t[n];a.useCount++===0&&(this._lendBinding(a),a.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const t=e._propertyBindings;for(let n=0,i=t.length;n!==i;++n){const a=t[n];--a.useCount===0&&(a.restoreOriginalState(),this._takeBackBinding(a))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const t=e._cacheIndex;return t!==null&&t<this._nActiveActions}_addInactiveAction(e,t,n){const i=this._actions,a=this._actionsByClip;let o=a[t];if(o===void 0)o={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,a[t]=o;else{const l=o.knownActions;e._byClipCacheIndex=l.length,l.push(e)}e._cacheIndex=i.length,i.push(e),o.actionByRoot[n]=e}_removeInactiveAction(e){const t=this._actions,n=t[t.length-1],i=e._cacheIndex;n._cacheIndex=i,t[i]=n,t.pop(),e._cacheIndex=null;const a=e._clip.uuid,o=this._actionsByClip,l=o[a],c=l.knownActions,h=c[c.length-1],f=e._byClipCacheIndex;h._byClipCacheIndex=f,c[f]=h,c.pop(),e._byClipCacheIndex=null;const m=l.actionByRoot,g=(e._localRoot||this._root).uuid;delete m[g],c.length===0&&delete o[a],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const t=e._propertyBindings;for(let n=0,i=t.length;n!==i;++n){const a=t[n];--a.referenceCount===0&&this._removeInactiveBinding(a)}}_lendAction(e){const t=this._actions,n=e._cacheIndex,i=this._nActiveActions++,a=t[i];e._cacheIndex=i,t[i]=e,a._cacheIndex=n,t[n]=a}_takeBackAction(e){const t=this._actions,n=e._cacheIndex,i=--this._nActiveActions,a=t[i];e._cacheIndex=i,t[i]=e,a._cacheIndex=n,t[n]=a}_addInactiveBinding(e,t,n){const i=this._bindingsByRootAndName,a=this._bindings;let o=i[t];o===void 0&&(o={},i[t]=o),o[n]=e,e._cacheIndex=a.length,a.push(e)}_removeInactiveBinding(e){const t=this._bindings,n=e.binding,i=n.rootNode.uuid,a=n.path,o=this._bindingsByRootAndName,l=o[i],c=t[t.length-1],h=e._cacheIndex;c._cacheIndex=h,t[h]=c,t.pop(),delete l[a],Object.keys(l).length===0&&delete o[i]}_lendBinding(e){const t=this._bindings,n=e._cacheIndex,i=this._nActiveBindings++,a=t[i];e._cacheIndex=i,t[i]=e,a._cacheIndex=n,t[n]=a}_takeBackBinding(e){const t=this._bindings,n=e._cacheIndex,i=--this._nActiveBindings,a=t[i];e._cacheIndex=i,t[i]=e,a._cacheIndex=n,t[n]=a}_lendControlInterpolant(){const e=this._controlInterpolants,t=this._nActiveControlInterpolants++;let n=e[t];return n===void 0&&(n=new O_(new Float32Array(2),new Float32Array(2),1,this._controlInterpolantsResultBuffer),n.__cacheIndex=t,e[t]=n),n}_takeBackControlInterpolant(e){const t=this._controlInterpolants,n=e.__cacheIndex,i=--this._nActiveControlInterpolants,a=t[i];e.__cacheIndex=i,t[i]=e,a.__cacheIndex=n,t[n]=a}clipAction(e,t,n){const i=t||this._root,a=i.uuid;let o=typeof e=="string"?um.findByName(i,e):e;const l=o!==null?o.uuid:e,c=this._actionsByClip[l];let h=null;if(n===void 0&&(o!==null?n=o.blendMode:n=Cf),c!==void 0){const m=c.actionByRoot[a];if(m!==void 0&&m.blendMode===n)return m;h=c.knownActions[0],o===null&&(o=h._clip)}if(o===null)return null;const f=new dA(this,o,t,n);return this._bindAction(f,h),this._addInactiveAction(f,l,a),f}existingAction(e,t){const n=t||this._root,i=n.uuid,a=typeof e=="string"?um.findByName(n,e):e,o=a?a.uuid:e,l=this._actionsByClip[o];return l!==void 0&&l.actionByRoot[i]||null}stopAllAction(){const e=this._actions,t=this._nActiveActions;for(let n=t-1;n>=0;--n)e[n].stop();return this}update(e){e*=this.timeScale;const t=this._actions,n=this._nActiveActions,i=this.time+=e,a=Math.sign(e),o=this._accuIndex^=1;for(let h=0;h!==n;++h)t[h]._update(i,e,a,o);const l=this._bindings,c=this._nActiveBindings;for(let h=0;h!==c;++h)l[h].apply(o);return this}setTime(e){this.time=0;for(let t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const t=this._actions,n=e.uuid,i=this._actionsByClip,a=i[n];if(a!==void 0){const o=a.knownActions;for(let l=0,c=o.length;l!==c;++l){const h=o[l];this._deactivateAction(h);const f=h._cacheIndex,m=t[t.length-1];h._cacheIndex=null,h._byClipCacheIndex=null,m._cacheIndex=f,t[f]=m,t.pop(),this._removeInactiveBindingsForAction(h)}delete i[n]}}uncacheRoot(e){const t=e.uuid,n=this._actionsByClip;for(const o in n){const l=n[o].actionByRoot,c=l[t];c!==void 0&&(this._deactivateAction(c),this._removeInactiveAction(c))}const i=this._bindingsByRootAndName,a=i[t];if(a!==void 0)for(const o in a){const l=a[o];l.restoreOriginalState(),this._removeInactiveBinding(l)}}uncacheAction(e,t){const n=this.existingAction(e,t);n!==null&&(this._deactivateAction(n),this._removeInactiveAction(n))}}pA.prototype._controlInterpolantsResultBuffer=new Float32Array(1);class mA extends Uo{constructor(e,t,n=1){super(e,t),this.meshPerAttribute=n}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const t=super.clone(e);return t.meshPerAttribute=this.meshPerAttribute,t}toJSON(e){const t=super.toJSON(e);return t.isInstancedInterleavedBuffer=!0,t.meshPerAttribute=this.meshPerAttribute,t}}mA.prototype.isInstancedInterleavedBuffer=!0;const br=new j,Dl=new nt,Gu=new nt;class gA extends kf{constructor(e){const t=V_(e),n=new Gt,i=[],a=[],o=new $e(0,0,1),l=new $e(0,1,0);for(let h=0;h<t.length;h++){const f=t[h];f.parent&&f.parent.isBone&&(i.push(0,0,0),i.push(0,0,0),a.push(o.r,o.g,o.b),a.push(l.r,l.g,l.b))}n.setAttribute("position",new mn(i,3)),n.setAttribute("color",new mn(a,3));const c=new Ho({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(n,c),this.type="SkeletonHelper",this.isSkeletonHelper=!0,this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(e){const t=this.bones,n=this.geometry,i=n.getAttribute("position");Gu.copy(this.root.matrixWorld).invert();for(let a=0,o=0;a<t.length;a++){const l=t[a];l.parent&&l.parent.isBone&&(Dl.multiplyMatrices(Gu,l.matrixWorld),br.setFromMatrixPosition(Dl),i.setXYZ(o,br.x,br.y,br.z),Dl.multiplyMatrices(Gu,l.parent.matrixWorld),br.setFromMatrixPosition(Dl),i.setXYZ(o+1,br.x,br.y,br.z),o+=2)}n.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}}function V_(r){const e=[];r&&r.isBone&&e.push(r);for(let t=0;t<r.children.length;t++)e.push.apply(e,V_(r.children[t]));return e}class vA extends kf{constructor(e=10,t=10,n=4473924,i=8947848){n=new $e(n),i=new $e(i);const a=t/2,o=e/t,l=e/2,c=[],h=[];for(let g=0,_=0,M=-l;g<=t;g++,M+=o){c.push(-l,0,M,l,0,M),c.push(M,0,-l,M,0,l);const x=g===a?n:i;x.toArray(h,_),_+=3,x.toArray(h,_),_+=3,x.toArray(h,_),_+=3,x.toArray(h,_),_+=3}const f=new Gt;f.setAttribute("position",new mn(c,3)),f.setAttribute("color",new mn(h,3));const m=new Ho({vertexColors:!0,toneMapped:!1});super(f,m),this.type="GridHelper"}}const _A=new Float32Array(1);new Int32Array(_A.buffer);yi.create=function(r,e){return console.log("THREE.Curve.create() has been deprecated"),r.prototype=Object.create(yi.prototype),r.prototype.constructor=r,r.prototype.getPoint=e,r};vh.prototype.fromPoints=function(r){return console.warn("THREE.Path: .fromPoints() has been renamed to .setFromPoints()."),this.setFromPoints(r)};vA.prototype.setColors=function(){console.error("THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead.")};gA.prototype.update=function(){console.error("THREE.SkeletonHelper: update() no longer needs to be called.")};Wr.prototype.extractUrlBase=function(r){return console.warn("THREE.Loader: .extractUrlBase() has been deprecated. Use THREE.LoaderUtils.extractUrlBase() instead."),$E.extractUrlBase(r)};Wr.Handlers={add:function(){console.error("THREE.Loader: Handlers.add() has been removed. Use LoadingManager.addHandler() instead.")},get:function(){console.error("THREE.Loader: Handlers.get() has been removed. Use LoadingManager.getHandler() instead.")}};Ii.prototype.center=function(r){return console.warn("THREE.Box3: .center() has been renamed to .getCenter()."),this.getCenter(r)};Ii.prototype.empty=function(){return console.warn("THREE.Box3: .empty() has been renamed to .isEmpty()."),this.isEmpty()};Ii.prototype.isIntersectionBox=function(r){return console.warn("THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(r)};Ii.prototype.isIntersectionSphere=function(r){return console.warn("THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(r)};Ii.prototype.size=function(r){return console.warn("THREE.Box3: .size() has been renamed to .getSize()."),this.getSize(r)};Ma.prototype.empty=function(){return console.warn("THREE.Sphere: .empty() has been renamed to .isEmpty()."),this.isEmpty()};Sc.prototype.setFromMatrix=function(r){return console.warn("THREE.Frustum: .setFromMatrix() has been renamed to .setFromProjectionMatrix()."),this.setFromProjectionMatrix(r)};yn.prototype.flattenToArrayOffset=function(r,e){return console.warn("THREE.Matrix3: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(r,e)};yn.prototype.multiplyVector3=function(r){return console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead."),r.applyMatrix3(this)};yn.prototype.multiplyVector3Array=function(){console.error("THREE.Matrix3: .multiplyVector3Array() has been removed.")};yn.prototype.applyToBufferAttribute=function(r){return console.warn("THREE.Matrix3: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix3( matrix ) instead."),r.applyMatrix3(this)};yn.prototype.applyToVector3Array=function(){console.error("THREE.Matrix3: .applyToVector3Array() has been removed.")};yn.prototype.getInverse=function(r){return console.warn("THREE.Matrix3: .getInverse() has been removed. Use matrixInv.copy( matrix ).invert(); instead."),this.copy(r).invert()};nt.prototype.extractPosition=function(r){return console.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition()."),this.copyPosition(r)};nt.prototype.flattenToArrayOffset=function(r,e){return console.warn("THREE.Matrix4: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(r,e)};nt.prototype.getPosition=function(){return console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead."),new j().setFromMatrixColumn(this,3)};nt.prototype.setRotationFromQuaternion=function(r){return console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion()."),this.makeRotationFromQuaternion(r)};nt.prototype.multiplyToArray=function(){console.warn("THREE.Matrix4: .multiplyToArray() has been removed.")};nt.prototype.multiplyVector3=function(r){return console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) instead."),r.applyMatrix4(this)};nt.prototype.multiplyVector4=function(r){return console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead."),r.applyMatrix4(this)};nt.prototype.multiplyVector3Array=function(){console.error("THREE.Matrix4: .multiplyVector3Array() has been removed.")};nt.prototype.rotateAxis=function(r){console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead."),r.transformDirection(this)};nt.prototype.crossVector=function(r){return console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead."),r.applyMatrix4(this)};nt.prototype.translate=function(){console.error("THREE.Matrix4: .translate() has been removed.")};nt.prototype.rotateX=function(){console.error("THREE.Matrix4: .rotateX() has been removed.")};nt.prototype.rotateY=function(){console.error("THREE.Matrix4: .rotateY() has been removed.")};nt.prototype.rotateZ=function(){console.error("THREE.Matrix4: .rotateZ() has been removed.")};nt.prototype.rotateByAxis=function(){console.error("THREE.Matrix4: .rotateByAxis() has been removed.")};nt.prototype.applyToBufferAttribute=function(r){return console.warn("THREE.Matrix4: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix4( matrix ) instead."),r.applyMatrix4(this)};nt.prototype.applyToVector3Array=function(){console.error("THREE.Matrix4: .applyToVector3Array() has been removed.")};nt.prototype.makeFrustum=function(r,e,t,n,i,a){return console.warn("THREE.Matrix4: .makeFrustum() has been removed. Use .makePerspective( left, right, top, bottom, near, far ) instead."),this.makePerspective(r,e,n,t,i,a)};nt.prototype.getInverse=function(r){return console.warn("THREE.Matrix4: .getInverse() has been removed. Use matrixInv.copy( matrix ).invert(); instead."),this.copy(r).invert()};ar.prototype.isIntersectionLine=function(r){return console.warn("THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine()."),this.intersectsLine(r)};Hn.prototype.multiplyVector3=function(r){return console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead."),r.applyQuaternion(this)};Hn.prototype.inverse=function(){return console.warn("THREE.Quaternion: .inverse() has been renamed to invert()."),this.invert()};Sa.prototype.isIntersectionBox=function(r){return console.warn("THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(r)};Sa.prototype.isIntersectionPlane=function(r){return console.warn("THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane()."),this.intersectsPlane(r)};Sa.prototype.isIntersectionSphere=function(r){return console.warn("THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(r)};cn.prototype.area=function(){return console.warn("THREE.Triangle: .area() has been renamed to .getArea()."),this.getArea()};cn.prototype.barycoordFromPoint=function(r,e){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),this.getBarycoord(r,e)};cn.prototype.midpoint=function(r){return console.warn("THREE.Triangle: .midpoint() has been renamed to .getMidpoint()."),this.getMidpoint(r)};cn.prototypenormal=function(r){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),this.getNormal(r)};cn.prototype.plane=function(r){return console.warn("THREE.Triangle: .plane() has been renamed to .getPlane()."),this.getPlane(r)};cn.barycoordFromPoint=function(r,e,t,n,i){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),cn.getBarycoord(r,e,t,n,i)};cn.normal=function(r,e,t,n){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),cn.getNormal(r,e,t,n)};Vo.prototype.extractAllPoints=function(r){return console.warn("THREE.Shape: .extractAllPoints() has been removed. Use .extractPoints() instead."),this.extractPoints(r)};Vo.prototype.extrude=function(r){return console.warn("THREE.Shape: .extrude() has been removed. Use ExtrudeGeometry() instead."),new Ca(this,r)};Vo.prototype.makeGeometry=function(r){return console.warn("THREE.Shape: .makeGeometry() has been removed. Use ShapeGeometry() instead."),new Wf(this,r)};Pe.prototype.fromAttribute=function(r,e,t){return console.warn("THREE.Vector2: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(r,e,t)};Pe.prototype.distanceToManhattan=function(r){return console.warn("THREE.Vector2: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(r)};Pe.prototype.lengthManhattan=function(){return console.warn("THREE.Vector2: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()};j.prototype.setEulerFromRotationMatrix=function(){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")};j.prototype.setEulerFromQuaternion=function(){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")};j.prototype.getPositionFromMatrix=function(r){return console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition()."),this.setFromMatrixPosition(r)};j.prototype.getScaleFromMatrix=function(r){return console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale()."),this.setFromMatrixScale(r)};j.prototype.getColumnFromMatrix=function(r,e){return console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn()."),this.setFromMatrixColumn(e,r)};j.prototype.applyProjection=function(r){return console.warn("THREE.Vector3: .applyProjection() has been removed. Use .applyMatrix4( m ) instead."),this.applyMatrix4(r)};j.prototype.fromAttribute=function(r,e,t){return console.warn("THREE.Vector3: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(r,e,t)};j.prototype.distanceToManhattan=function(r){return console.warn("THREE.Vector3: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(r)};j.prototype.lengthManhattan=function(){return console.warn("THREE.Vector3: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()};Ft.prototype.fromAttribute=function(r,e,t){return console.warn("THREE.Vector4: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(r,e,t)};Ft.prototype.lengthManhattan=function(){return console.warn("THREE.Vector4: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()};Lt.prototype.getChildByName=function(r){return console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName()."),this.getObjectByName(r)};Lt.prototype.renderDepth=function(){console.warn("THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.")};Lt.prototype.translate=function(r,e){return console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead."),this.translateOnAxis(e,r)};Lt.prototype.getWorldRotation=function(){console.error("THREE.Object3D: .getWorldRotation() has been removed. Use THREE.Object3D.getWorldQuaternion( target ) instead.")};Lt.prototype.applyMatrix=function(r){return console.warn("THREE.Object3D: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(r)};Object.defineProperties(Lt.prototype,{eulerOrder:{get:function(){return console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order},set:function(r){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order=r}},useQuaternion:{get:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")}}});pn.prototype.setDrawMode=function(){console.error("THREE.Mesh: .setDrawMode() has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")};Object.defineProperties(pn.prototype,{drawMode:{get:function(){return console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode."),Zw},set:function(){console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")}}});S_.prototype.initBones=function(){console.error("THREE.SkinnedMesh: initBones() has been removed.")};Fn.prototype.setLens=function(r,e){console.warn("THREE.PerspectiveCamera.setLens is deprecated. Use .setFocalLength and .filmGauge for a photographic setup."),e!==void 0&&(this.filmGauge=e),this.setFocalLength(r)};Object.defineProperties(ji.prototype,{onlyShadow:{set:function(){console.warn("THREE.Light: .onlyShadow has been removed.")}},shadowCameraFov:{set:function(r){console.warn("THREE.Light: .shadowCameraFov is now .shadow.camera.fov."),this.shadow.camera.fov=r}},shadowCameraLeft:{set:function(r){console.warn("THREE.Light: .shadowCameraLeft is now .shadow.camera.left."),this.shadow.camera.left=r}},shadowCameraRight:{set:function(r){console.warn("THREE.Light: .shadowCameraRight is now .shadow.camera.right."),this.shadow.camera.right=r}},shadowCameraTop:{set:function(r){console.warn("THREE.Light: .shadowCameraTop is now .shadow.camera.top."),this.shadow.camera.top=r}},shadowCameraBottom:{set:function(r){console.warn("THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom."),this.shadow.camera.bottom=r}},shadowCameraNear:{set:function(r){console.warn("THREE.Light: .shadowCameraNear is now .shadow.camera.near."),this.shadow.camera.near=r}},shadowCameraFar:{set:function(r){console.warn("THREE.Light: .shadowCameraFar is now .shadow.camera.far."),this.shadow.camera.far=r}},shadowCameraVisible:{set:function(){console.warn("THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.")}},shadowBias:{set:function(r){console.warn("THREE.Light: .shadowBias is now .shadow.bias."),this.shadow.bias=r}},shadowDarkness:{set:function(){console.warn("THREE.Light: .shadowDarkness has been removed.")}},shadowMapWidth:{set:function(r){console.warn("THREE.Light: .shadowMapWidth is now .shadow.mapSize.width."),this.shadow.mapSize.width=r}},shadowMapHeight:{set:function(r){console.warn("THREE.Light: .shadowMapHeight is now .shadow.mapSize.height."),this.shadow.mapSize.height=r}}});Object.defineProperties(un.prototype,{length:{get:function(){return console.warn("THREE.BufferAttribute: .length has been deprecated. Use .count instead."),this.array.length}},dynamic:{get:function(){return console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.usage===tc},set:function(){console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.setUsage(tc)}}});un.prototype.setDynamic=function(r){return console.warn("THREE.BufferAttribute: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(r===!0?tc:Co),this};un.prototype.copyIndicesArray=function(){console.error("THREE.BufferAttribute: .copyIndicesArray() has been removed.")},un.prototype.setArray=function(){console.error("THREE.BufferAttribute: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")};Gt.prototype.addIndex=function(r){console.warn("THREE.BufferGeometry: .addIndex() has been renamed to .setIndex()."),this.setIndex(r)};Gt.prototype.addAttribute=function(r,e){return console.warn("THREE.BufferGeometry: .addAttribute() has been renamed to .setAttribute()."),!(e&&e.isBufferAttribute)&&!(e&&e.isInterleavedBufferAttribute)?(console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),this.setAttribute(r,new un(arguments[1],arguments[2]))):r==="index"?(console.warn("THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute."),this.setIndex(e),this):this.setAttribute(r,e)};Gt.prototype.addDrawCall=function(r,e,t){t!==void 0&&console.warn("THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset."),console.warn("THREE.BufferGeometry: .addDrawCall() is now .addGroup()."),this.addGroup(r,e)};Gt.prototype.clearDrawCalls=function(){console.warn("THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups()."),this.clearGroups()};Gt.prototype.computeOffsets=function(){console.warn("THREE.BufferGeometry: .computeOffsets() has been removed.")};Gt.prototype.removeAttribute=function(r){return console.warn("THREE.BufferGeometry: .removeAttribute() has been renamed to .deleteAttribute()."),this.deleteAttribute(r)};Gt.prototype.applyMatrix=function(r){return console.warn("THREE.BufferGeometry: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(r)};Object.defineProperties(Gt.prototype,{drawcalls:{get:function(){return console.error("THREE.BufferGeometry: .drawcalls has been renamed to .groups."),this.groups}},offsets:{get:function(){return console.warn("THREE.BufferGeometry: .offsets has been renamed to .groups."),this.groups}}});Uo.prototype.setDynamic=function(r){return console.warn("THREE.InterleavedBuffer: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(r===!0?tc:Co),this};Uo.prototype.setArray=function(){console.error("THREE.InterleavedBuffer: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")};Ca.prototype.getArrays=function(){console.error("THREE.ExtrudeGeometry: .getArrays() has been removed.")};Ca.prototype.addShapeList=function(){console.error("THREE.ExtrudeGeometry: .addShapeList() has been removed.")};Ca.prototype.addShape=function(){console.error("THREE.ExtrudeGeometry: .addShape() has been removed.")};Aa.prototype.dispose=function(){console.error("THREE.Scene: .dispose() has been removed.")};Object.defineProperties(Cn.prototype,{wrapAround:{get:function(){console.warn("THREE.Material: .wrapAround has been removed.")},set:function(){console.warn("THREE.Material: .wrapAround has been removed.")}},overdraw:{get:function(){console.warn("THREE.Material: .overdraw has been removed.")},set:function(){console.warn("THREE.Material: .overdraw has been removed.")}},wrapRGB:{get:function(){return console.warn("THREE.Material: .wrapRGB has been removed."),new $e}},shading:{get:function(){console.error("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead.")},set:function(r){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=r===Xv}},stencilMask:{get:function(){return console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask},set:function(r){console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask=r}},vertexTangents:{get:function(){console.warn("THREE."+this.type+": .vertexTangents has been removed.")},set:function(){console.warn("THREE."+this.type+": .vertexTangents has been removed.")}}});Object.defineProperties(Pi.prototype,{derivatives:{get:function(){return console.warn("THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives},set:function(r){console.warn("THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives=r}}});bt.prototype.clearTarget=function(r,e,t,n){console.warn("THREE.WebGLRenderer: .clearTarget() has been deprecated. Use .setRenderTarget() and .clear() instead."),this.setRenderTarget(r),this.clear(e,t,n)};bt.prototype.animate=function(r){console.warn("THREE.WebGLRenderer: .animate() is now .setAnimationLoop()."),this.setAnimationLoop(r)};bt.prototype.getCurrentRenderTarget=function(){return console.warn("THREE.WebGLRenderer: .getCurrentRenderTarget() is now .getRenderTarget()."),this.getRenderTarget()};bt.prototype.getMaxAnisotropy=function(){return console.warn("THREE.WebGLRenderer: .getMaxAnisotropy() is now .capabilities.getMaxAnisotropy()."),this.capabilities.getMaxAnisotropy()};bt.prototype.getPrecision=function(){return console.warn("THREE.WebGLRenderer: .getPrecision() is now .capabilities.precision."),this.capabilities.precision};bt.prototype.resetGLState=function(){return console.warn("THREE.WebGLRenderer: .resetGLState() is now .state.reset()."),this.state.reset()};bt.prototype.supportsFloatTextures=function(){return console.warn("THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' )."),this.extensions.get("OES_texture_float")};bt.prototype.supportsHalfFloatTextures=function(){return console.warn("THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' )."),this.extensions.get("OES_texture_half_float")};bt.prototype.supportsStandardDerivatives=function(){return console.warn("THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' )."),this.extensions.get("OES_standard_derivatives")};bt.prototype.supportsCompressedTextureS3TC=function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' )."),this.extensions.get("WEBGL_compressed_texture_s3tc")};bt.prototype.supportsCompressedTexturePVRTC=function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' )."),this.extensions.get("WEBGL_compressed_texture_pvrtc")};bt.prototype.supportsBlendMinMax=function(){return console.warn("THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' )."),this.extensions.get("EXT_blend_minmax")};bt.prototype.supportsVertexTextures=function(){return console.warn("THREE.WebGLRenderer: .supportsVertexTextures() is now .capabilities.vertexTextures."),this.capabilities.vertexTextures};bt.prototype.supportsInstancedArrays=function(){return console.warn("THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' )."),this.extensions.get("ANGLE_instanced_arrays")};bt.prototype.enableScissorTest=function(r){console.warn("THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest()."),this.setScissorTest(r)};bt.prototype.initMaterial=function(){console.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")};bt.prototype.addPrePlugin=function(){console.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")};bt.prototype.addPostPlugin=function(){console.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")};bt.prototype.updateShadowMap=function(){console.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")};bt.prototype.setFaceCulling=function(){console.warn("THREE.WebGLRenderer: .setFaceCulling() has been removed.")};bt.prototype.allocTextureUnit=function(){console.warn("THREE.WebGLRenderer: .allocTextureUnit() has been removed.")};bt.prototype.setTexture=function(){console.warn("THREE.WebGLRenderer: .setTexture() has been removed.")};bt.prototype.setTexture2D=function(){console.warn("THREE.WebGLRenderer: .setTexture2D() has been removed.")};bt.prototype.setTextureCube=function(){console.warn("THREE.WebGLRenderer: .setTextureCube() has been removed.")};bt.prototype.getActiveMipMapLevel=function(){return console.warn("THREE.WebGLRenderer: .getActiveMipMapLevel() is now .getActiveMipmapLevel()."),this.getActiveMipmapLevel()};Object.defineProperties(bt.prototype,{shadowMapEnabled:{get:function(){return this.shadowMap.enabled},set:function(r){console.warn("THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled."),this.shadowMap.enabled=r}},shadowMapType:{get:function(){return this.shadowMap.type},set:function(r){console.warn("THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type."),this.shadowMap.type=r}},shadowMapCullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")}},context:{get:function(){return console.warn("THREE.WebGLRenderer: .context has been removed. Use .getContext() instead."),this.getContext()}},vr:{get:function(){return console.warn("THREE.WebGLRenderer: .vr has been renamed to .xr"),this.xr}},gammaInput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead."),!1},set:function(){console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead.")}},gammaOutput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),!1},set:function(r){console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),this.outputEncoding=r===!0?wc:qn}},toneMappingWhitePoint:{get:function(){return console.warn("THREE.WebGLRenderer: .toneMappingWhitePoint has been removed."),1},set:function(){console.warn("THREE.WebGLRenderer: .toneMappingWhitePoint has been removed.")}}});Object.defineProperties(x_.prototype,{cullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")}},renderReverseSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")}},renderSingleSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")}}});Object.defineProperties(vi.prototype,{wrapS:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS},set:function(r){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS=r}},wrapT:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT},set:function(r){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT=r}},magFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter},set:function(r){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter=r}},minFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter},set:function(r){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter=r}},anisotropy:{get:function(){return console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy},set:function(r){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy=r}},offset:{get:function(){return console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset},set:function(r){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset=r}},repeat:{get:function(){return console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat},set:function(r){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat=r}},format:{get:function(){return console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format},set:function(r){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format=r}},type:{get:function(){return console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type},set:function(r){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type=r}},generateMipmaps:{get:function(){return console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps},set:function(r){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps=r}}});nA.prototype.load=function(r){console.warn("THREE.Audio: .load has been deprecated. Use THREE.AudioLoader instead.");const e=this;return new KE().load(r,function(n){e.setBuffer(n)}),this};Nf.prototype.updateCubeMap=function(r,e){return console.warn("THREE.CubeCamera: .updateCubeMap() is now .update()."),this.update(r,e)};Nf.prototype.clear=function(r,e,t,n){return console.warn("THREE.CubeCamera: .clear() is now .renderTarget.clear()."),this.renderTarget.clear(r,e,t,n)};ba.crossOrigin=void 0;ba.loadTexture=function(r,e,t,n){console.warn("THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.");const i=new VE;i.setCrossOrigin(this.crossOrigin);const a=i.load(r,t,void 0,n);return e&&(a.mapping=e),a};ba.loadTextureCube=function(r,e,t,n){console.warn("THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.");const i=new HE;i.setCrossOrigin(this.crossOrigin);const a=i.load(r,t,void 0,n);return e&&(a.mapping=e),a};ba.loadCompressedTexture=function(){console.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.")};ba.loadCompressedTextureCube=function(){console.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.")};typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:Ef}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=Ef);const yA=`#define GLSLIFY 1
varying vec2 vUv;void main(){vUv=uv;gl_Position=projectionMatrix*modelViewMatrix*vec4(position,1.);}`,xA=`#define GLSLIFY 1
varying vec2 vUv;uniform sampler2D tex;uniform sampler2D tex_2;uniform float noiseMultiplier;uniform float redMultiplier;uniform float greenMultiplier;uniform float blueMultiplier;uniform int mouseOver;uniform float mixValue;uniform float mouseOverScale;uniform vec2 mousePos;uniform vec2 resolution;vec2 distortSlow(vec2);vec2 distortFast(vec2);vec2 distortMouse(vec2);vec4 oldDistort(float);float cubicIn(float);vec3 mod289(vec3 x){return x-floor(x*(1.0/289.0))*289.0;}vec2 mod289(vec2 x){return x-floor(x*(1.0/289.0))*289.0;}vec3 permute(vec3 x){return mod289(((x*34.0)+1.0)*x);}float snoise(vec2 v){const vec4 C=vec4(0.211324865405187,0.366025403784439,-0.577350269189626,0.024390243902439);vec2 i=floor(v+dot(v,C.yy));vec2 x0=v-i+dot(i,C.xx);vec2 i1;i1=(x0.x>x0.y)? vec2(1.0,0.0): vec2(0.0,1.0);vec4 x12=x0.xyxy+C.xxzz;x12.xy-=i1;i=mod289(i);vec3 p=permute(permute(i.y+vec3(0.0,i1.y,1.0))+i.x+vec3(0.0,i1.x,1.0));vec3 m=max(0.5-vec3(dot(x0,x0),dot(x12.xy,x12.xy),dot(x12.zw,x12.zw)),0.0);m=m*m;m=m*m;vec3 x=2.0*fract(p*C.www)-1.0;vec3 h=abs(x)-0.5;vec3 ox=floor(x+0.5);vec3 a0=x-ox;m*=1.79284291400159-0.85373472095314*(a0*a0+h*h);vec3 g;g.x=a0.x*x0.x+h.x*x0.y;g.yz=a0.yz*x12.xz+h.yz*x12.yw;return 130.0*dot(m,g);}void main(){float n=snoise((gl_FragCoord.xy)/30.+snoise(vUv.xy*5.));vec4 texR=texture2D(tex_2,vec2(vUv.x+n*0.0075,vUv.y+noiseMultiplier*0.05));vec4 texG=texture2D(tex_2,vec2(vUv.x+n*0.011,vUv.y+noiseMultiplier*0.1));vec4 texB=texture2D(tex_2,vec2(vUv.x+n*0.005,vUv.y+noiseMultiplier*0.03));vec4 col=vec4(texR.r,texG.g,texB.b,texR.a);col.r*=redMultiplier;col.g*=greenMultiplier;col.b*=blueMultiplier;vec4 colMask;vec4 colMaskA;vec4 colMaskB;vec2 texCoord=distortSlow(vUv);vec2 texCoord2=distortFast(vUv);vec2 t=mix(texCoord,texCoord2,mixValue);vec2 t2=distortMouse(t);t2=clamp(t2,vec2(0.,0.),vec2(1.,1.));colMask=texture2D(tex,t2);col.rgb*=1.-colMask.rgb;col.a*=colMask.a;gl_FragColor=col;}vec2 distortSlow(vec2 v){v.x=v.x+sin(gl_FragCoord.x/40.+noiseMultiplier)/85.;v.y=v.y+(sin(gl_FragCoord.x/15.+noiseMultiplier)/10.+sin(noiseMultiplier/10.))/40.;return vec2(v.x,v.y);}vec2 distortFast(vec2 v){v.x=v.x+sin(gl_FragCoord.x/15.+noiseMultiplier*10.)/50.;v.y=v.y+sin(gl_FragCoord.y/20.+noiseMultiplier*10.)/200.;return vec2(v.x,v.y);}vec4 oldDistort(float n){float xMult=0.005;float yMult=0.01;return texture2D(tex,vec2(vUv.x+cos(noiseMultiplier*gl_FragCoord.x+n)*xMult,vUv.y+sin(noiseMultiplier*gl_FragCoord.y)*yMult));}vec2 distortMouse(vec2 v){float scale=512./resolution.x;vec2 tNorm=vec2(gl_FragCoord.x,gl_FragCoord.y)*scale;vec2 mNorm=vec2(mousePos.x,(resolution.y-mousePos.y))*scale;float d=distance(tNorm,mNorm)*scale;float dX=distance(tNorm.x,mNorm.x)*scale;float dY=distance(tNorm.y,mNorm.y)*scale;float dist=700.*scale;if(d<dist){float pX=1.-(d/dist);float pY=1.-(d/dist);pX=cubicIn(pX);pY=cubicIn(pY);float diffX=tNorm.x-mNorm.x;float diffY=tNorm.y-mNorm.y;v.x=v.x+((diffX*0.006)*pX)*mouseOverScale;v.y=v.y+((diffY*0.0005)*pY)*mouseOverScale;}return vec2(v.x,v.y);}float cubicIn(float t){return t*t*t;}`;Yt.add({id:"patternBg",src:"/img/title/Joepatterns3.jpg"});Yt.add({id:"titleNihon",src:"/img/title/josefu.png"});Yt.add({id:"titleEng",src:"/img/title/josefu_eng.png"});Yt.add({id:"titleEngNorm",src:"/img/title/joseph.png"});const wA=$t.extend({currentInd:0,initialize(){this.animInScale={value:0},this.noiseInc={value:0},this.mouseOverValue={value:0},this.setupScene(),this.currentFrame=0,this.noiseInc.value=(Math.random()>.5,.02),this.intensity=0},setupScene(){this.renderer=new bt({canvas:this.el,alpha:!0}),this.scene=new Aa,this.camera=new Ss(-1,1,1,-1,0,1),this.geometry=new Ms(2,2),this.setupTextures();const r=this.createTitlePlaneMesh(this.texEngNorm);this.scene.add(r),this.renderer.setSize(this.currentTexture.naturalWidth,this.currentTexture.naturalHeight)},setupTextures(){this.texNihon=this.createTitleTexture(Yt.getResult("titleNihon")),this.texEng=this.createTitleTexture(Yt.getResult("titleEng")),this.texEngNorm=this.createTitleTexture(Yt.getResult("titleEngNorm"))},createTitleTexture(r){const e=new tn(r);return e.needsUpdate=!0,e.wrapS=Ri,e.wrapT=Ri,e},createTitlePlaneMesh(r){return this.currentTexture=r,this.material=new Pi({vertexShader:yA,fragmentShader:xA,uniforms:{tex:{type:"t",value:r},tex_2:{type:"t",value:this.createTitleTexture(Yt.getResult("patternBg"))},noiseMultiplier:{type:"f",value:0},redMultiplier:{type:"f",value:1},greenMultiplier:{type:"f",value:1},blueMultiplier:{type:"f",value:1},mouseOver:{type:"i",value:0},mixValue:{type:"f",value:0},mousePos:{type:"v2",value:new Pe(0,0)},resolution:{type:"v2",value:new Pe(r.naturalWidth,r.naturalHeight)},mouseOverScale:{type:"f",value:0}},transparent:!0}),new pn(this.geometry,this.material)},addMouseEvents(){this.$el.on("mousemove touchmove",lt.bind(this.onMouseMove,this)),this.$el.on("mouseover touchstart",lt.bind(this.onMouseOver,this)),this.$el.on("mouseout touchend",lt.bind(this.onMouseOut,this))},removeMouseEvents(){this.$el.off()},onMouseOver(r){wt.killTweensOf(this.mouseOverValue,this.material.uniforms.mixValue,this.animInScale),wt.killTweensOf(this.noiseInc),wt.to(this.material.uniforms.mixValue,{duration:2.5,value:1,ease:"Circ.easeOut"}),wt.fromTo(this.animInScale,{value:0},{value:1,duration:.2,ease:"Power3.easeOut"}),this.onMouseMove(r)},onMouseMove(r){wt.killTweensOf(this.mouseOverValue),wt.killTweensOf(this.noiseInc);const e=this.el.width,t=this.el.height;if(r.originalEvent.touches){const n=r.originalEvent.touches[0],i=this.el.getBoundingClientRect(),a=Math.max(0,Math.min(n.clientX-i.left,e)),o=Math.max(0,Math.min(n.clientY-i.top,t));this.material.uniforms.mousePos.value.x=a,this.material.uniforms.mousePos.value.y=o,this.intensity=Math.abs(a-e/2)*2/e,this.noiseInc.value=.025+this.intensity*.035}else this.material.uniforms.mousePos.value.x=r.offsetX,this.material.uniforms.mousePos.value.y=r.offsetY,this.intensity=Math.abs(r.offsetX-e/2)*2/e,this.noiseInc.value=.025+this.intensity*.035;this.mouseOverValue.value=this.intensity*this.animInScale.value},onMouseOut(){this.material.uniforms.mouseOver.value=0,wt.killTweensOf(this,this.material.uniforms.mixValue,this.mouseOverValue,this.animInScale),wt.to(this.material.uniforms.mixValue,{duration:1,value:0,ease:"Circ.easeOut"}),wt.to(this.noiseInc,{duration:1,value:.025,ease:"Circ.easeOut"}),wt.to(this.mouseOverValue,{duration:.6,value:0,ease:"Elastic.easeOut"})},addEvents(){Ct.on("anim_frame",this.onAnimFrame,this),this.addMouseEvents(),this.boundResize=lt.bind(this.onResize,this),Wn(window).on("resize",this.boundResize),this.onResize()},onResize(){const r=window.innerWidth,e=window.innerHeight,t=.8;let n=e<r?e*t:r*t;n=Math.min(n,800),this.renderer.setSize(n,n),this.material.uniforms.resolution.value=new Pe(n,n)},removeEvents(){Ct.off("anim_frame",null,this),this.removeMouseEvents(),Wn(window).off("resize",this.boundResize)},onAnimFrame(){this.renderer.render(this.scene,this.camera),this.material.uniforms.noiseMultiplier.value+=this.noiseInc.value,this.material.uniforms.mouseOverScale.value=this.mouseOverValue.value,this.currentFrame++,this.currentFrame%120===0&&this.iterateToNextTexture()},iterateToNextTexture(){switch(this.currentTexture){case this.texEngNorm:this.currentTexture=this.texEng;break;case this.texEng:this.currentTexture=this.texNihon;break;case this.texNihon:this.currentTexture=this.texEngNorm;break}this.material.uniforms.tex.value=this.currentTexture},destroy(){$t.prototype.destroy.apply(this,arguments)}}),$f=$t.extend({initialize(r){this.el=document.createElement("canvas"),this.size={w:r.width+20,h:r.height+20},this.el=document.createElement("canvas"),this.el.width=r.width+20,this.el.height=r.height+20,this.context=this.el.getContext("2d"),this.type=r.type,this.animInRectA=0,this.animInRectB=0,this.animInMaskScale=0,this.delay=r.delay||.5,this.el.classList.add("section__buttonMask"),this.onAnimFrame()},animateIn(){wt.to(this,{duration:.4,animInRectA:1,ease:"Power3.easeOut",delay:this.delay}),wt.to(this,{duration:.4,animInRectB:1,ease:"Power3.easeOut",delay:this.delay+.2}),wt.to(this,{duration:.7,animInMaskScale:1,ease:"Power3.easeOut",onComplete:lt.bind(this.onAnimInComplete,this),delay:this.delay+.4}),Ct.on("anim_frame",this.onAnimFrame,this)},onAnimFrame(){this.currentFrame++,this.context.fillStyle="#fffb9b",this.context.globalCompositeOperation="source-over",this.context.fillRect(0,0,this.size.w,this.size.h),this.context.fillStyle="#80f7d4",this.context.save(),this.context.translate(this.size.w/2,this.size.h/2),this.context.scale(this.animInRectA,this.animInRectA),this.context.fillRect(-this.size.w/2,-this.size.h/2,this.size.w,this.size.h),this.context.restore(),this.context.fillStyle="#f9aaf9",this.context.save(),this.context.translate(this.size.w/2,this.size.h/2),this.context.scale(this.animInRectB,this.animInRectB),this.context.fillRect(-this.size.w/2,-this.size.h/2,this.size.w,this.size.h),this.context.restore(),this.context.fillStyle="#000000",this.context.globalCompositeOperation="destination-out",this.context.save(),this.context.translate(this.size.w/2,this.size.h/2),this.context.scale(this.animInMaskScale,this.animInMaskScale),this.context.fillRect(-this.size.w/2,-this.size.h/2,this.size.w,this.size.h),this.context.restore()},onAnimInComplete(){Wn(this.el).remove(),Ct.off(null,null,this)}}),bA=ma.extend({firstTime:!0,initialize(){this.titleView=new wA({el:this.$(".js-titleCanvas")[0]}),ma.prototype.initialize.apply(this,arguments)},show(){setTimeout(()=>{this.$el.removeClass("section_hidden"),this.titleView.addEvents(),this.firstTime&&this.onFirstTime()},0)},onFirstTime(){this.firstTime=!1,this.resize()},resize(){this.titleView.onResize();const r=this.$(".js-titleWrapper");this.titleAnimInMask=new $f({width:r.innerWidth(),height:r.innerHeight(),delay:.35,speed:.4}),r[0].appendChild(this.titleAnimInMask.el),this.titleAnimInMask.animateIn()},hide(){this.titleView.removeEvents(),this.$el.addClass("section_hidden")}}),G_=`#define GLSLIFY 1
varying vec2 vUv;void main(){vUv=uv;gl_Position=projectionMatrix*modelViewMatrix*vec4(position,1.);}`,W_=`#define GLSLIFY 1
varying vec2 vUv;uniform sampler2D tex;uniform sampler2D bg_tex;uniform float noiseMultiplier;vec3 mod289(vec3 x){return x-floor(x*(1.0/289.0))*289.0;}vec2 mod289(vec2 x){return x-floor(x*(1.0/289.0))*289.0;}vec3 permute(vec3 x){return mod289(((x*34.0)+1.0)*x);}float snoise(vec2 v){const vec4 C=vec4(0.211324865405187,0.366025403784439,-0.577350269189626,0.024390243902439);vec2 i=floor(v+dot(v,C.yy));vec2 x0=v-i+dot(i,C.xx);vec2 i1;i1=(x0.x>x0.y)? vec2(1.0,0.0): vec2(0.0,1.0);vec4 x12=x0.xyxy+C.xxzz;x12.xy-=i1;i=mod289(i);vec3 p=permute(permute(i.y+vec3(0.0,i1.y,1.0))+i.x+vec3(0.0,i1.x,1.0));vec3 m=max(0.5-vec3(dot(x0,x0),dot(x12.xy,x12.xy),dot(x12.zw,x12.zw)),0.0);m=m*m;m=m*m;vec3 x=2.0*fract(p*C.www)-1.0;vec3 h=abs(x)-0.5;vec3 ox=floor(x+0.5);vec3 a0=x-ox;m*=1.79284291400159-0.85373472095314*(a0*a0+h*h);vec3 g;g.x=a0.x*x0.x+h.x*x0.y;g.yz=a0.yz*x12.xz+h.yz*x12.yw;return 130.0*dot(m,g);}void main(){float n=snoise((gl_FragCoord.xy)/30.+snoise(vUv.xy*5.));vec2 v=vUv;v.x=v.x+sin(gl_FragCoord.x/80.+noiseMultiplier)/120.;v.y=v.y+(sin(gl_FragCoord.x/15.+noiseMultiplier)/10.+sin(noiseMultiplier/10.))/20.;vec4 tex=texture2D(tex,v);gl_FragColor=tex;}`;Yt.add({id:"about_heading",src:"/img/about/about_heading.png"});const MA=$t.extend({currentInd:0,initialize(){this.noiseInc=.03,this.headingId="about_heading",this.setupScene(),this.currentFrame=0},setupScene(){this.renderer=new bt({canvas:this.el,alpha:!0}),this.scene=new Aa,this.camera=new Ss(-1,1,1,-1,0,1),this.geometry=new Ms(2,2),this.engTextImg=Yt.getResult(this.headingId),this.renderer.setSize(this.engTextImg.naturalWidth,this.engTextImg.naturalHeight),this.el.style.width="",this.el.style.height="",this.createFgPlane()},createFgPlane(){this.texEng=new tn(this.engTextImg),this.texEng.needsUpdate=!0,this.texEng.wrapS=Ri,this.texEng.wrapT=Ri,this.material=new Pi({vertexShader:G_,fragmentShader:W_,uniforms:{tex:{type:"t",value:this.texEng},noiseMultiplier:{type:"f",value:1},resolution:{type:"v2",value:new Pe(this.engTextImg.naturalWidth,this.engTextImg.naturalHeight)}},transparent:!0}),this.mesh=new pn(this.geometry,this.material),this.scene.add(this.mesh),this.onAnimFrame()},addEvents(){Ct.on("anim_frame",()=>this.onAnimFrame())},removeEvents(){Ct.off(null,null,this)},onProjectChange(){this.onAnimFrame()},onAnimFrame(){this.renderer.render(this.scene,this.camera),this.material.uniforms.noiseMultiplier.value+=this.noiseInc},destroy(){$t.prototype.destroy.apply(this,arguments)}});let Wu=.0025;const xh={col:"#80f7d4"},SA="#f9aaf9",wh=wt.to(xh,{duration:1,colorProps:{col:SA}});wh.pause();let as=0;Ct.on("anim_frame",function(){as+=Wu,as=Math.max(0,Math.min(as,1)),(as>=1||as<=0)&&(Wu=-Wu)});let mm=0;const rc={getColour(){return wh.progress(as),xh.col},getColourAlternate(){return wh.progress(1-as),xh.col},getRandomColour(){switch(mm++,mm%3){case 0:return"#ff00ff";case 1:return"#f0ff00";case 2:return"#00ffff";default:return"#000000"}}},TA=ma.extend({initialize(){ma.prototype.initialize.apply(this,arguments),this.headingView=new MA({el:document.createElement("canvas")}),this.setupCanvas(),this.currentFrame=-1,this.hireTexts=this.$(".js-hireText")},setupCanvas(){this.canvas=this.$(".js-aboutHeading")[0],this.canvas.width=this.headingView.el.width,this.canvas.height=this.headingView.el.height,this.context=this.canvas.getContext("2d")},show(){this.headingView.addEvents(),this.$el.removeClass("section_hidden"),Ct.on("anim_frame",this.onAnimFrame,this)},hide(){this.headingView.removeEvents(),this.$el.addClass("section_hidden"),Ct.off(null,null,this)},onAnimFrame(){if(this.currentFrame++,this.currentFrame%3===0){const r=rc.getRandomColour();lt.each(this.hireTexts,e=>e.style.color=r)}this.context.globalCompositeOperation="source-over",this.context.fillStyle=rc.getColour(),this.context.fillRect(0,0,this.canvas.width,this.canvas.height),this.context.globalCompositeOperation="destination-in",this.context.drawImage(this.headingView.el,0,0)}});Yt.add({id:"work_heading",src:"/img/work/work_heading.png"});const EA=$t.extend({currentInd:0,currentFrame:0,noiseInc:.03,initialize(r){this.setupScene()},setupScene(){this.renderer=new bt({canvas:this.el,alpha:!0}),this.scene=new Aa,this.camera=new Ss(-1,1,1,-1,0,1),this.geometry=new Ms(2,2),this.engTextImg=Yt.getResult("work_heading"),this.renderer.setSize(this.engTextImg.naturalWidth,this.engTextImg.naturalHeight),this.el.style.width="",this.el.style.height="",this.createFgPlane()},createFgPlane(){this.texEng=new tn(this.engTextImg),this.texEng.needsUpdate=!0,this.texEng.wrapS=Ri,this.texEng.wrapT=Ri,this.material=new Pi({vertexShader:G_,fragmentShader:W_,uniforms:{tex:{type:"t",value:this.texEng},noiseMultiplier:{type:"f",value:1},resolution:{type:"v2",value:new Pe(this.engTextImg.naturalWidth,this.engTextImg.naturalHeight)}},transparent:!0}),this.mesh=new pn(this.geometry,this.material),this.scene.add(this.mesh),this.onAnimFrame()},addEvents(){Ct.on("anim_frame",this.onAnimFrame,this)},removeEvents(){Ct.off(null,null,this)},onProjectChange(){this.onAnimFrame();const r=.03;wt.killTweensOf(this),wt.fromTo(this,{noiseInc:.5},{duration:1.3,noiseInc:r,ease:"Power2.easeOut"})},onAnimFrame(){this.renderer.render(this.scene,this.camera),this.material.uniforms.noiseMultiplier.value+=this.noiseInc},destroy(){$t.prototype.destroy.apply(this,arguments)}}),Ks=[{id:"mr_sketch",bg_image:{src:"/img/work/mr_sketch/mrsketch.jpg"},bg_data_assets:[{pos:{x:256,y:256},scale:1,rotation:-45,src:"/img/work/mr_sketch/m5BBPen.png",size:{w:64,h:318}}],fg_data_assets:[{pos:{x:400,y:320},scale:1,rotation:0,src:"/img/work/mr_sketch/BE_1.png",size:{w:54,h:54}},{pos:{x:120,y:350},scale:1,rotation:0,src:"/img/work/mr_sketch/O_2_1.png",size:{w:46,h:47}},{pos:{x:350,y:180},scale:1,rotation:0,src:"/img/work/mr_sketch/R_1b_1.png",size:{w:34,h:37}},{pos:{x:70,y:200},scale:1,rotation:0,src:"/img/work/mr_sketch/W_1b.png",size:{w:95,h:89}}]},{id:"timid",bg_image:{src:"/img/work/timid/timid.jpg"},bg_data_assets:[{pos:{x:256,y:226},scale:1,rotation:0,src:"/img/work/timid/bg_sun.png",size:{w:151,h:151}},{pos:{x:170,y:250},scale:1,rotation:0,src:"/img/work/timid/bg_ball.png",size:{w:73,h:70}}],fg_data_assets:[{pos:{x:200,y:350},scale:1,rotation:0,src:"/img/work/timid/green.png",size:{w:94,h:77}},{pos:{x:400,y:220},scale:1,rotation:1,src:"/img/work/timid/pink_cylinder.png",size:{w:165,h:53}}]},{id:"tiffany",bg_image:{src:"/img/work/tiffany/tiffany.jpg"},bg_data_assets:[{pos:{x:256,y:256},scale:1,rotation:0,rotateDisabled:!0,src:"/img/work/tiffany/box.png",size:{w:200,h:185}}],fg_data_assets:[{pos:{x:100,y:200},scale:1,rotation:0,src:"/img/work/tiffany/snow_1.png",size:{w:100,h:89}},{pos:{x:375,y:350},scale:1,rotation:1,src:"/img/work/tiffany/snow_2.png",size:{w:120,h:105}}]},{id:"shenzhen",bg_image:{src:"/img/work/shenzhen/shenzhen_bg.jpg"},bg_data_assets:[{pos:{x:100,y:200},scale:.7,rotation:-20,src:"/img/work/shenzhen/title_intro_char_1.png",size:{w:70,h:74}},{pos:{x:256,y:256},scale:1,rotation:-90,rotateDisabled:!0,src:"/img/work/shenzhen/diagonal.png",size:{w:220,h:220}}],fg_data_assets:[{pos:{x:350,y:200},scale:1,rotation:40,src:"/img/work/shenzhen/petal_n_1_blur.png",size:{w:70,h:70}},{pos:{x:375,y:350},scale:1,rotation:130,src:"/img/work/shenzhen/petal_n_2.png",size:{w:70,h:70}},{pos:{x:125,y:350},scale:1,rotation:-135,src:"/img/work/shenzhen/petal_n_3.png",size:{w:70,h:70}}]},{id:"ping_pong",bg_data_assets:[{pos:{x:306,y:256},scale:1,rotation:45,src:"/img/work/pingpong/pingpong_bat.png",size:{w:149,h:250}},{pos:{x:200,y:256},scale:1,rotation:-45,src:"/img/work/pingpong/pingpong_blue.png",size:{w:149,h:250}},{pos:{x:50,y:280},scale:.7,rotation:-90,src:"/img/work/pingpong/led_green.png",size:{w:13,h:80}},{pos:{x:450,y:300},scale:.7,rotation:80,src:"/img/work/pingpong/led_red.png",size:{w:13,h:80}}],fg_data_assets:[{pos:{x:256,y:150},scale:.9,rotation:0,src:"/img/work/pingpong/ping_pong_ball.png",size:{w:100,h:99}}]},{id:"flocking",isFlocking:!0},{id:"cocaine"}];var mi={};function On(r,e,t){this.x=r,this.y=e,this.z=t}On.prototype.dot2=function(r,e){return this.x*r+this.y*e};On.prototype.dot3=function(r,e,t){return this.x*r+this.y*e+this.z*t};var AA=[new On(1,1,0),new On(-1,1,0),new On(1,-1,0),new On(-1,-1,0),new On(1,0,1),new On(-1,0,1),new On(1,0,-1),new On(-1,0,-1),new On(0,1,1),new On(0,-1,1),new On(0,1,-1),new On(0,-1,-1)],gm=[151,160,137,91,90,15,131,13,201,95,96,53,194,233,7,225,140,36,103,30,69,142,8,99,37,240,21,10,23,190,6,148,247,120,234,75,0,26,197,62,94,252,219,203,117,35,11,32,57,177,33,88,237,149,56,87,174,20,125,136,171,168,68,175,74,165,71,134,139,48,27,166,77,146,158,231,83,111,229,122,60,211,133,230,220,105,92,41,55,46,245,40,244,102,143,54,65,25,63,161,1,216,80,73,209,76,132,187,208,89,18,169,200,196,135,130,116,188,159,86,164,100,109,198,173,186,3,64,52,217,226,250,124,123,5,202,38,147,118,126,255,82,85,212,207,206,59,227,47,16,58,17,182,189,28,42,223,183,170,213,119,248,152,2,44,154,163,70,221,153,101,155,167,43,172,9,129,22,39,253,19,98,108,110,79,113,224,232,178,185,112,104,218,246,97,228,251,34,242,193,238,210,144,12,191,179,162,241,81,51,145,235,249,14,239,107,49,192,214,31,181,199,106,157,184,84,204,176,115,121,50,45,127,4,150,254,138,236,205,93,222,114,67,29,24,72,243,141,128,195,78,66,215,61,156,180],xt=new Array(512),en=new Array(512);mi.seed=function(r){r>0&&r<1&&(r*=65536),r=Math.floor(r),r<256&&(r|=r<<8);for(var e=0;e<256;e++){var t;e&1?t=gm[e]^r&255:t=gm[e]^r>>8&255,xt[e]=xt[e+256]=t,en[e]=en[e+256]=AA[t%12]}};mi.seed(0);var CA=.5*(Math.sqrt(3)-1),Za=(3-Math.sqrt(3))/6,LA=1/3,Fi=1/6;mi.simplex2=function(r,e){var t,n,i,a=(r+e)*CA,o=Math.floor(r+a),l=Math.floor(e+a),c=(o+l)*Za,h=r-o+c,f=e-l+c,m,g;h>f?(m=1,g=0):(m=0,g=1);var _=h-m+Za,M=f-g+Za,x=h-1+2*Za,C=f-1+2*Za;o&=255,l&=255;var y=en[o+xt[l]],b=en[o+m+xt[l+g]],O=en[o+1+xt[l+1]],P=.5-h*h-f*f;P<0?t=0:(P*=P,t=P*P*y.dot2(h,f));var F=.5-_*_-M*M;F<0?n=0:(F*=F,n=F*F*b.dot2(_,M));var p=.5-x*x-C*C;return p<0?i=0:(p*=p,i=p*p*O.dot2(x,C)),70*(t+n+i)};mi.simplex3=function(r,e,t){var n,i,a,o,l=(r+e+t)*LA,c=Math.floor(r+l),h=Math.floor(e+l),f=Math.floor(t+l),m=(c+h+f)*Fi,g=r-c+m,_=e-h+m,M=t-f+m,x,C,y,b,O,P;g>=_?_>=M?(x=1,C=0,y=0,b=1,O=1,P=0):g>=M?(x=1,C=0,y=0,b=1,O=0,P=1):(x=0,C=0,y=1,b=1,O=0,P=1):_<M?(x=0,C=0,y=1,b=0,O=1,P=1):g<M?(x=0,C=1,y=0,b=0,O=1,P=1):(x=0,C=1,y=0,b=1,O=1,P=0);var F=g-x+Fi,p=_-C+Fi,L=M-y+Fi,W=g-b+2*Fi,X=_-O+2*Fi,oe=M-P+2*Fi,q=g-1+3*Fi,ye=_-1+3*Fi,ie=M-1+3*Fi;c&=255,h&=255,f&=255;var ne=en[c+xt[h+xt[f]]],re=en[c+x+xt[h+C+xt[f+y]]],ae=en[c+b+xt[h+O+xt[f+P]]],se=en[c+1+xt[h+1+xt[f+1]]],be=.6-g*g-_*_-M*M;be<0?n=0:(be*=be,n=be*be*ne.dot3(g,_,M));var Oe=.6-F*F-p*p-L*L;Oe<0?i=0:(Oe*=Oe,i=Oe*Oe*re.dot3(F,p,L));var de=.6-W*W-X*X-oe*oe;de<0?a=0:(de*=de,a=de*de*ae.dot3(W,X,oe));var fe=.6-q*q-ye*ye-ie*ie;return fe<0?o=0:(fe*=fe,o=fe*fe*se.dot3(q,ye,ie)),32*(n+i+a+o)};function ho(r){return r*r*r*(r*(r*6-15)+10)}function Bi(r,e,t){return(1-t)*r+t*e}mi.perlin2=function(r,e){var t=Math.floor(r),n=Math.floor(e);r=r-t,e=e-n,t=t&255,n=n&255;var i=en[t+xt[n]].dot2(r,e),a=en[t+xt[n+1]].dot2(r,e-1),o=en[t+1+xt[n]].dot2(r-1,e),l=en[t+1+xt[n+1]].dot2(r-1,e-1),c=ho(r);return Bi(Bi(i,o,c),Bi(a,l,c),ho(e))};mi.perlin3=function(r,e,t){var n=Math.floor(r),i=Math.floor(e),a=Math.floor(t);r=r-n,e=e-i,t=t-a,n=n&255,i=i&255,a=a&255;var o=en[n+xt[i+xt[a]]].dot3(r,e,t),l=en[n+xt[i+xt[a+1]]].dot3(r,e,t-1),c=en[n+xt[i+1+xt[a]]].dot3(r,e-1,t),h=en[n+xt[i+1+xt[a+1]]].dot3(r,e-1,t-1),f=en[n+1+xt[i+xt[a]]].dot3(r-1,e,t),m=en[n+1+xt[i+xt[a+1]]].dot3(r-1,e,t-1),g=en[n+1+xt[i+1+xt[a]]].dot3(r-1,e-1,t),_=en[n+1+xt[i+1+xt[a+1]]].dot3(r-1,e-1,t-1),M=ho(r),x=ho(e),C=ho(t);return Bi(Bi(Bi(o,f,M),Bi(l,m,M),C),Bi(Bi(c,g,M),Bi(h,_,M),C),x)};const RA=$t.extend({pos:{x:0,y:0},scale:{x:0,y:0},rotation:0,size:{w:0,h:0},opacity:0,animatingIn:!0,animOutFinished:!1,initialize(r){this.image=r.image,this.pos=r.pos,this.rotation=r.rotation*(Math.PI/180),this.size=r.size,this.scale=r.scale,this.rotateDisabled=r.rotateDisabled,this.setPos(),this.xNoise=Math.random()*100,this.yNoise=Math.random()*100,this.rotXNoise=Math.random()*100,this.rotYNoise=Math.random()*100,this.scaleXNoise=Math.random()*100,this.scaleYNoise=Math.random()*100,this.animateIn(),this.posScale=0},setPos(){this.pos.x===0&&this.pos.y===0&&(this.pos.x=Math.random()*512,this.pos.y=Math.random()*512),this.rotation===0&&!this.rotateDisabled&&(this.rotation=Math.random()*3.14)},animateIn(){const r=this.pos.x,e=this.pos.y,t=100;this.pos.x+=Math.random()*t-t/2,this.pos.y+=Math.random()*t-t/2,wt.to(this,{duration:1,opacity:1,onComplete:()=>this.onAnimateComplete(),ease:"Power3.easeOut"}),wt.to(this.pos,{duration:1.5,x:r,y:e,ease:"Power3.easeOut"}),wt.to(this,{duration:3,posScale:1,ease:"Power3.easeOut",delay:1.5})},animateOut(){wt.killTweensOf(this),wt.to(this,{duration:.2,opacity:0,onComplete:()=>this.onAnimateOutComplete(),ease:"Power3.easeOut"}),wt.to(this.pos,{duration:.2,x:this.pos.x+Math.random()*100-50,y:this.pos.y+Math.random()*100-50,ease:"Power3.easeOut"})},onAnimateComplete(){this.animatingIn=!1},onAnimateOutComplete(){this.animOutFinished=!0},update(){this.updateRotation(),this.scale+=mi.perlin2(this.scaleXNoise/100,this.scaleYNoise/100)/5/100,this.scale=Math.max(.8,Math.min(this.scale,1.2)),this.scaleXNoise+=.3,this.scaleYNoise+=.3,!this.animatingIn&&(this.pos.x+=mi.perlin2(this.xNoise/100,this.yNoise/100)/5*this.posScale,this.pos.y+=mi.perlin2(this.yNoise/100,this.xNoise/100)/5*this.posScale,this.xNoise+=.3,this.yNoise+=.3)},updateRotation(){this.rotateDisabled||(this.rotation+=mi.perlin2(this.rotXNoise/1e3,this.rotYNoise/1e3)/50,this.rotXNoise+=.005,this.rotYNoise+=.005)},onAnimOutComplete(){this.trigger("hideComplete"),Ct.off(null,null,this)}}),PA=$t.extend({initialize(r){this.animatingOut=!1,this.size={w:0,h:0},this.opacity=0,this.pos=r.pos,this.rotation=0,this.scale=r.scale,this.speed=Math.random()*3+.5,this.xNoise=Math.random()*100,this.yNoise=Math.random()*100,this.renderBoidCanvas(),this.animatingIn=!0},renderBoidCanvas(){this.image=document.createElement("canvas"),this.image.width=this.size.w=20,this.image.height=this.size.h=20;let r=this.image.getContext("2d");r.fillStyle=rc.getColourAlternate(),r.beginPath(),r.moveTo(this.size.w/2,0),r.lineTo(this.size.w/4,this.size.h),r.lineTo(this.size.w-this.size.w/4,this.size.h),r.fill()},update(){const r=this.calculateDirection();this.rotateToDirection(r),this.moveToDirection(r),this.maintainInBounds(),this.animatingIn&&(this.opacity+=.05),this.opacity>=1&&(this.opacity=Math.min(1,this.opacity),this.animatingIn=!1),this.animatingOut&&(this.opacity-=.05,this.opacity=Math.max(0,this.opacity),this.opacity<=0&&this.onAnimateOutComplete())},maintainInBounds(){this.pos.x>512&&(this.pos.x=0),this.pos.y>512&&(this.pos.y=0),this.pos.x<0&&(this.pos.x=512),this.pos.y<0&&(this.pos.y=512)},calculateDirection(){const r=mi.perlin2(this.xNoise/100,this.yNoise/100),e=mi.perlin2(this.yNoise/100,this.xNoise/100),t=Math.sqrt(r*r+e*e);return this.xNoise+=.3,this.yNoise+=.3,{x:r/t,y:e/t}},rotateToDirection(r){const e=Math.sqrt(r.x*r.x+r.y*r.y),t={x:0,y:-1},n=Math.sqrt(t.x*t.x+t.y*t.y);let i=t.x*r.x+t.y*r.y;i/=e*n,this.rotation=Math.acos(i)*(r.x<0?-1:1)},moveToDirection(r){this.pos.x+=r.x*this.speed,this.pos.y+=r.y*this.speed},animateOut(){this.animatingIn=!1,this.animatingOut=!0},onAnimateOutComplete(){this.animOutFinished=!0}}),IA=$t.extend({size:512,borderWidth:40,initialize(r){this.size=r.size},setupGradients(r){this.leftGradient=r.createLinearGradient(this.borderWidth,0,0,0),this.leftGradient.addColorStop(0,"rgba(255, 251, 155, 0)"),this.leftGradient.addColorStop(.6,"rgba(255, 251, 155, 0.5)"),this.leftGradient.addColorStop(1,"rgba(255, 251, 155, 1)"),this.rightGradient=r.createLinearGradient(this.size-this.borderWidth,0,this.size,0),this.rightGradient.addColorStop(0,"rgba(255, 251, 155, 0)"),this.rightGradient.addColorStop(.6,"rgba(255, 251, 155, 0.5)"),this.rightGradient.addColorStop(1,"rgba(255, 251, 155, 1)"),this.topGradient=r.createLinearGradient(0,this.borderWidth,0,0),this.topGradient.addColorStop(0,"rgba(255, 251, 155, 0)"),this.topGradient.addColorStop(.6,"rgba(255, 251, 155, 0.5)"),this.topGradient.addColorStop(1,"rgba(255, 251, 155, 1)"),this.bottomGradient=r.createLinearGradient(0,this.size-this.borderWidth,0,this.size),this.bottomGradient.addColorStop(0,"rgba(255, 251, 155, 0)"),this.bottomGradient.addColorStop(.6,"rgba(255, 251, 155, 0.5)"),this.bottomGradient.addColorStop(1,"rgba(255, 251, 155, 1)")},drawBorder(r){r.fillStyle=this.leftGradient,r.fillRect(0,0,this.borderWidth,this.size),r.fillStyle=this.rightGradient,r.fillRect(this.size-this.borderWidth,0,this.borderWidth,this.size),r.fillStyle=this.topGradient,r.fillRect(0,0,this.size,this.borderWidth),r.fillStyle=this.bottomGradient,r.fillRect(0,this.size-this.borderWidth,this.size,this.borderWidth)}}),DA=$t.extend({size:512,draw(r){r.fillStyle=rc.getColour(),r.fillRect(0,0,this.size,this.size)}});for(let r=0;r<Ks.length;r++)Yt.add(Ks[r].bg_image),Yt.add(Ks[r].bg_data_assets),Yt.add(Ks[r].fg_data_assets);const NA=$t.extend({size:512,bgScale:.9,currentImg:null,fgAssets:[],bgAssets:[],oldFgAssets:[],oldBgAssets:[],activeProject:null,colourBg:new DA,initialize(r){this.maskCanvas=r.maskCanvas,this.bgMaskCanvas=document.createElement("canvas"),this.bgMaskCanvas.width=this.size,this.bgMaskCanvas.height=this.size,this.bgMaskContext=this.bgMaskCanvas.getContext("2d"),this.currentFrame=0,this.el.width=this.size,this.el.height=this.size,this.context=this.el.getContext("2d"),this.canvasBorder=new IA({size:512}),this.canvasBorder.setupGradients(this.context)},addEvents(){Ct.on("anim_frame",this.onAnimFrame,this)},removeEvents(){Ct.off(null,null,this)},setWorkMask(r){if(r!==this.activeProject){this.activeProject=r,this.fadeOutOldAssets(),wt.killTweensOf(this),wt.set(this,{bgScale:.9}),wt.to(this,{duration:16,bgScale:1.1,ease:"Power2.easeOut"});for(let e=0;e<Ks.length;e++){const t=Ks[e];if(t.id===r){t.bg_image&&(this.currentImg=Yt.getResult(t.bg_image.src)),t.isFlocking?(this.populateFlockingAssets(20,this.fgAssets,1),this.populateFlockingAssets(20,this.bgAssets,.7)):(this.bgAssets=this.populateAssets(t.bg_data_assets),this.fgAssets=this.populateAssets(t.fg_data_assets));break}this.currentImg=null,this.bgAssets=[],this.fgAssets=[]}}},fadeOutOldAssets(){lt.each(this.fgAssets,r=>{this.oldFgAssets.push(r),r.animateOut()}),lt.each(this.bgAssets,r=>{this.oldBgAssets.push(r),r.animateOut()})},populateAssets(r){let e=[];return lt.each(r,t=>{e.push(new RA({pos:{x:t.pos.x,y:t.pos.y},rotation:t.rotation,image:Yt.getResult(t.src),size:t.size,scale:t.scale,rotateDisabled:t.rotateDisabled}))}),e},populateFlockingAssets(r,e,t){for(let n=0;n<r;n++){const i=new PA({boidArray:e,pos:{x:Math.random()*this.size,y:Math.random()*this.size},scale:t});e.push(i)}},onAnimFrame(){this.currentFrame++,this.checkOldArrays(),this.context.clearRect(0,0,this.size,this.size),this.drawAssets(this.bgAssets),this.drawAssets(this.oldBgAssets),this.drawMaskCanvas(),this.drawAssets(this.fgAssets),this.drawAssets(this.oldFgAssets),this.canvasBorder.drawBorder(this.context)},checkOldArrays(){let r=[],e=[];lt.each(this.oldFgAssets,t=>{t.animOutFinished&&e.push(t)}),lt.each(this.oldBgAssets,t=>{t.animOutFinished&&r.push(t)}),this.oldFgAssets=lt.difference(this.oldFgAssets,e),this.oldBgAssets=lt.difference(this.oldBgAssets,r)},drawMaskCanvas(){this.bgMaskContext.clearRect(0,0,this.size,this.size),this.currentImg?(this.bgMaskContext.save(),this.bgMaskContext.globalCompositeOperation="source-over",this.bgMaskContext.translate(this.size/2,this.size/2),this.bgMaskContext.scale(this.bgScale,this.bgScale),this.bgMaskContext.drawImage(this.currentImg,-this.size/2,-this.size/2,this.size,this.size),this.bgMaskContext.restore()):(this.bgMaskContext.globalCompositeOperation="source-over",this.colourBg.draw(this.bgMaskContext));const r="destination-in";this.bgMaskContext.save(),this.bgMaskContext.globalCompositeOperation=r,this.bgMaskContext.translate(0,this.size/2-this.size/4),this.bgMaskContext.drawImage(this.maskCanvas,0,0,this.size,this.size/2),this.bgMaskContext.restore(),this.context.drawImage(this.bgMaskCanvas,0,0),this.bgMaskContext.globalCompositeOperation="source-over"},drawAssets(r){r.length!==0&&(lt.each(r,e=>{e.update(),this.context.save(),this.context.translate(e.pos.x,e.pos.y),this.context.rotate(e.rotation),this.context.globalAlpha=e.opacity,this.context.scale(e.scale,e.scale),this.context.drawImage(e.image,0,0,e.size.w,e.size.h,-e.size.w/2,-e.size.h/2,e.size.w,e.size.h),this.context.restore()}),this.context.globalAlpha=1)}}),OA=ma.extend({events:{"mouseover .work__link":"onMouseOver","touchstart .work__link":"onMouseOver","mouseout .work__link":"onMouseOut"},initialize(){ma.prototype.initialize.apply(this,arguments),this.headingView=new EA({el:document.createElement("canvas")}),this.headingMainCanvas=new NA({el:this.$(".js-workHeading")[0],maskCanvas:this.headingView.el}),this.activeLink=null,this.currentFrame=0,this.currentFrameColor=0,this.debugCounter=0},show(){this.$el.removeClass("section_hidden"),this.headingView.addEvents(),this.headingMainCanvas.addEvents()},hide(){this.$el.addClass("section_hidden"),this.headingView.removeEvents(),this.headingMainCanvas.removeEvents(),this.headingMainCanvas.setWorkMask(""),this.onMouseOut()},onMouseOver(r){this.activeLink&&this.onMouseOut();const t=r.currentTarget.getAttribute("data-project");this.headingMainCanvas.setWorkMask(t),this.activeLink=r.currentTarget,Wn(this.activeLink).addClass("active"),this.headingView.onProjectChange(),Ct.on("anim_frame",this.onAnimFrame,this)},onAnimFrame(){if(this.currentFrame++,this.currentFrame%3===0){this.currentFrameColor++;const r=this.getRndColor();this.activeLink.style.color=r}},getRndColor(){switch(this.currentFrameColor%3){case 0:return"#ff00ff";case 1:return"#f0ff00";case 2:return"#00ffff";default:return"#000000"}},onMouseOut(){this.activeLink&&(Wn(this.activeLink).removeClass("active"),Ct.off(null,null,this),this.activeLink.style.color="",this.activeLink.style.textShadow="",this.activeLink=null)}}),FA=$t.extend({mouseX:0,mouseY:0,scale:2,rectSize:50,numColours:3,animColours:[],initialize(){this.canvas=this.$el[0],this.context=this.canvas.getContext("2d"),this.canvas.width=window.innerWidth,this.canvas.height=window.innerHeight,this.setupAnimColours(),gt.on(gt.ANIM_EVENTS.TRIGGER_ANIM,this.onTriggerAnim,this),Wn(document).on("mousemove click",r=>this.onMouseMove(r)),Wn(window).on("resize",()=>this.onResize()),this.currentFrame=0},onResize(){this.canvas.width=window.innerWidth,this.canvas.height=window.innerHeight},setupAnimColours(){for(let r=0;r<this.numColours;r++){const e={};switch(r%3){case 0:e.col="#80f7d4";break;case 1:e.col="#f9aaf9";break;case 2:e.col="#0000ff";break}e.scale=0,this.animColours.push(e)}this.animColours[this.animColours.length-1].mask=!0},onMouseMove(r){this.mouseX=r.pageX,this.mouseY=r.pageY},onTriggerAnim(r,e){this.startAnim()},startAnim(){wt.killTweensOf(this.animColours),this.scale=0,this.animX=this.mouseX,this.animY=this.mouseY;let r=this.animX<this.canvas.width/2?this.canvas.width-this.animX:this.animX;r=r*2/this.rectSize;let e=this.animY<this.canvas.height/2?this.canvas.height-this.animY:this.animY;e=e*2/this.rectSize,this.targetScale=Math.max(r,e),this.scaleInc=0;for(let t=0;t<this.animColours.length;t++)this.animColours[t].scale=0;wt.to(this.animColours[0],{duration:.5,scale:this.targetScale,ease:"Power1.easeOut"}),wt.to(this.animColours[1],{duration:1,scale:this.targetScale,ease:"Power3.easeInOut",delay:.5}),wt.to(this.animColours[2],{duration:1.3,scale:this.targetScale,ease:"Power2.easeInOut",delay:.5}),wt.delayedCall(.5,()=>this.onFirstAnimComplete()),Ct.on("anim_frame",()=>this.onAnimFrame())},onFirstAnimComplete(){ri.trigger(ri.EVENTS.VIEW.ANIMATION_COMPLETE)},onAnimFrame(){this.context.clearRect(0,0,window.innerWidth,window.innerHeight);const r=this.rectSize;this.currentFrame++;for(let e=0;e<this.animColours.length;e++){this.context.globalCompositeOperation="source-over",this.context.save(),this.context.translate(this.animX,this.animY);const t=(Math.PI*20/180+Math.sin(this.animColours[e].scale/5)/5)*(1-this.animColours[e].scale/this.targetScale);this.context.rotate(t,0),this.context.scale(this.animColours[e].scale,this.animColours[e].scale),this.context.fillStyle=this.animColours[e].col,this.animColours[e].mask&&(this.context.globalCompositeOperation="destination-out",this.context.fillStyle="#FFFB9B"),this.context.fillRect(0-r/2,0-r/2,r,r),this.context.restore()}},onAnimComplete(){Ct.off("anim_frame",null,this),this.context.clearRect(0,0,window.innerWidth,window.innerHeight)},destroy(){$t.prototype.destroy.apply(this,arguments)}}),zA=`#define GLSLIFY 1
varying vec2 vUv;void main(){vUv=uv;gl_Position=projectionMatrix*modelViewMatrix*vec4(position,1.);}`,BA=`#define GLSLIFY 1
varying vec2 vUv;uniform sampler2D tex_2;uniform float noiseMultiplier;uniform float redMultiplier;uniform float greenMultiplier;uniform float blueMultiplier;vec3 mod289(vec3 x){return x-floor(x*(1.0/289.0))*289.0;}vec2 mod289(vec2 x){return x-floor(x*(1.0/289.0))*289.0;}vec3 permute(vec3 x){return mod289(((x*34.0)+1.0)*x);}float snoise(vec2 v){const vec4 C=vec4(0.211324865405187,0.366025403784439,-0.577350269189626,0.024390243902439);vec2 i=floor(v+dot(v,C.yy));vec2 x0=v-i+dot(i,C.xx);vec2 i1;i1=(x0.x>x0.y)? vec2(1.0,0.0): vec2(0.0,1.0);vec4 x12=x0.xyxy+C.xxzz;x12.xy-=i1;i=mod289(i);vec3 p=permute(permute(i.y+vec3(0.0,i1.y,1.0))+i.x+vec3(0.0,i1.x,1.0));vec3 m=max(0.5-vec3(dot(x0,x0),dot(x12.xy,x12.xy),dot(x12.zw,x12.zw)),0.0);m=m*m;m=m*m;vec3 x=2.0*fract(p*C.www)-1.0;vec3 h=abs(x)-0.5;vec3 ox=floor(x+0.5);vec3 a0=x-ox;m*=1.79284291400159-0.85373472095314*(a0*a0+h*h);vec3 g;g.x=a0.x*x0.x+h.x*x0.y;g.yz=a0.yz*x12.xz+h.yz*x12.yw;return 130.0*dot(m,g);}void main(){float n=snoise((gl_FragCoord.xy)/20.+snoise(vUv.xy/5.));float s=0.15;vec4 texR=texture2D(tex_2,vec2(vUv.x*s+n*0.02+noiseMultiplier*0.085,vUv.y*s+noiseMultiplier*10.*0.02));vec4 texG=texture2D(tex_2,vec2(vUv.x*s+n*0.01-noiseMultiplier*0.07,vUv.y*s+noiseMultiplier*10.*0.005));vec4 texB=texture2D(tex_2,vec2(vUv.x*s+n*0.03+noiseMultiplier*0.08,vUv.y*s+noiseMultiplier*10.*0.015));vec4 col=vec4(texR.r,texG.g,texB.b,texR.a);col.r*=redMultiplier;col.g*=greenMultiplier;col.b*=blueMultiplier;gl_FragColor=col;}`,bh=$t.extend({currentInd:0,active:!1,initialize(r){this.isHeaderNav=r.isHeaderNav,this.canvas=r.canvas,this.setupScene(),this.currentFrame=0,this.noiseInc=(Math.random()>.5,.0125);const e=lt.throttle(()=>this.resize(),100);Wn(window).on("resize",e),this.animInMask=new $f({width:this.$el.innerWidth(),height:this.$el.innerHeight()})},animateIn(){this.el.appendChild(this.animInMask.el),this.animInMask.animateIn()},setupScene(){this.renderer=new bt({canvas:this.canvas,alpha:!0}),this.scene=new Aa,this.camera=new Ss(-1,1,1,-1,0,1),this.geometry=new Ms(2,2),this.patternImg=Yt.getResult("patternBg"),this.isHeaderNav?this.setRenderSize():this.resize(),this.patternBg=new tn(this.patternImg),this.patternBg.needsUpdate=!0,this.patternBg.wrapS=Ri,this.patternBg.wrapT=Ri,this.material=new Pi({vertexShader:zA,fragmentShader:BA,uniforms:{tex_2:{type:"t",value:this.patternBg},noiseMultiplier:{type:"f",value:0},redMultiplier:{type:"f",value:1},greenMultiplier:{type:"f",value:1},blueMultiplier:{type:"f",value:1}},transparent:!0}),this.mesh=new pn(this.geometry,this.material),this.scene.add(this.mesh)},resize(){if(this.isHeaderNav)return;const r=this.$el.innerWidth(),e=this.$el.innerHeight();this.renderer.setSize(r,e)},setRenderSize(){this.renderer.setSize(this.canvas.width,this.canvas.height)},activate(){this.active||(this.active=!0,this.addEvents())},deactivate(){this.active&&(this.active=!1,this.removeEvents())},addEvents(){Ct.on("anim_frame",this.onAnimFrame,this),this.isHeaderNav||(this.$el.addClass("active"),this.resize())},removeEvents(){Ct.off("anim_frame",null,this),this.renderer.clear(),this.isHeaderNav||this.$el.removeClass("active")},onAnimFrame(){this.renderer.render(this.scene,this.camera),this.material.uniforms.noiseMultiplier.value+=this.noiseInc},destroy(){$t.prototype.destroy.apply(this,arguments)}}),kA=$t.extend({events:{"click .js-footerAbout":"onAboutClick","click .js-footerWork":"onWorkClick"},initialize(){this.aboutButton=new bh({el:this.$(".js-footerAbout"),canvas:this.$(".js-aboutButtonCanvas")[0]}),this.workButton=new bh({el:this.$(".js-footerWork"),canvas:this.$(".js-workButtonCanvas")[0]}),gt.on("change:currentSection",this.onChangeCurrentSection,this)},animateIn(){this.aboutButton.animateIn(),this.workButton.animateIn()},onAboutClick(){ri.trigger(ri.EVENTS.VIEW.REQUEST_SECTION_CHANGE,gt.SECTIONS.ABOUT)},onWorkClick(){ri.trigger(ri.EVENTS.VIEW.REQUEST_SECTION_CHANGE,gt.SECTIONS.WORK)},onChangeCurrentSection(r,e){switch(e){case gt.SECTIONS.HOME:this.aboutButton.deactivate(),this.workButton.deactivate();break;case gt.SECTIONS.ABOUT:this.aboutButton.activate(),this.workButton.deactivate();break;case gt.SECTIONS.WORK:this.workButton.activate(),this.aboutButton.deactivate();break;default:this.aboutButton.deactivate(),this.workButton.deactivate();break}},destroy(){$t.prototype.destroy.apply(this,arguments)}}),UA=$t.extend({imagePath:"/img/loader/loader.png",imageLoaded:!1,firstTime:!0,events:{"click ":"onHeaderCanvasClick"},initialize(){this.context=this.el.getContext("2d"),this.width=Wn(this.el).parent().innerWidth()*2,this.height=Wn(this.el).parent().innerHeight()*2,this.el.width=this.width,this.el.height=this.height,this.img=new Image,this.img.src=this.imagePath,this.img.onload=lt.bind(this.onLoad,this),this.currentFrame=0;const r=document.createElement("canvas");r.width=this.width,r.height=this.height,this.bgMask=new bh({canvas:r,isHeaderNav:!0}),this.addEvents(),this.onChangeCurrentSection(null,gt.get("currentSection"))},addEvents(){gt.on("change:currentSection",this.onChangeCurrentSection,this)},onLoad(){this.imageLoaded=!0,this.drawInactiveImage()},onChangeCurrentSection(r,e){e===gt.SECTIONS.HOME?this.activate():this.deactivate()},activate(){const r=this.firstTime?0:200;this.deactivateTimeout=setTimeout(lt.bind(function(){Ct.on("anim_frame",this.onAnimFrame,this),this.bgMask.activate()},this),r),this.firstTime=!1},deactivate(){Ct.off(null,null,this),this.bgMask.deactivate(),this.drawInactiveImage()},drawInactiveImage(){this.context.globalCompositeOperation="source-over",this.context.clearRect(0,0,this.width,this.height),this.context.drawImage(this.img,0,0,this.width,this.height)},onAnimFrame(){this.currentFrame++,this.imageLoaded&&(this.context.clearRect(0,0,this.width,this.height),this.context.globalCompositeOperation="source-over",this.context.drawImage(this.bgMask.canvas,0,0,this.width,this.height),this.context.globalCompositeOperation="destination-in",this.context.drawImage(this.img,0,0,this.width,this.height))},onHeaderCanvasClick(){ri.trigger(ri.EVENTS.VIEW.REQUEST_SECTION_CHANGE,gt.SECTIONS.HOME)},destroy(){$t.prototype.destroy.apply(this,arguments)}}),HA=$t.extend({initialize(){this.titleView=new bA({el:this.$(".js-title"),section:gt.SECTIONS.HOME}),this.aboutView=new TA({el:this.$(".js-about"),section:gt.SECTIONS.ABOUT}),this.workView=new OA({el:this.$(".js-work"),section:gt.SECTIONS.WORK}),this.animation=new FA({el:this.$(".js-animationCanvas")})},show(){this.footerView=new kA({el:this.$(".js-footer")[0]}),this.headerCanvas=new UA({el:this.$(".js-headerCanvas")[0]});const r=this.$(".js-header");this.headerMask=new $f({width:r.innerWidth(),height:r.innerHeight()}),this.headerMask.animateIn(),r[0].appendChild(this.headerMask.el),this.footerView.animateIn()}}),VA=Ai.View.extend({activeTransitioner:null,elementsMap:null,initialize:function(r){if(this.options=r,this.evaluateOptions(r),this.elementsMap=this.setupMapping(this.options.viewMap),this.activeTransitioner=this.options.transition,!this.activeTransitioner||!this.activeTransitioner.hasInterface())throw new Error(' Transition needs to extend "transition_interface.js"');this.activeTransitioner.setMap(this.elementsMap),gt.on("change:page",this.onAppModelPage,this)},evaluateOptions:function(r){var e=["viewMap","transition"];lt.each(e,function(t,n){if(!lt.has(this.options,t))throw new Error(t+" option not set")},this)},setupMapping:function(r){var e={};return lt.each(r,function(t,n){if(!t.className||!t.nodeSelector)throw new Error("RouteObject missing options: "+n);var i=t.className,a=this.$(t.nodeSelector),o=a.parent();e[n]={element:a,parent:o,className:i}},this),e},onResize:function(r){this.activeTransitioner&&this.activeTransitioner.onResize(r)},onAppModelPage:function(r,e){this.activeTransitioner.show(e)}});var Jf=function(r){};lt.extend(Jf.prototype,{setMap:function(r){throw new Error('Please override "setMap" function')},onResize:function(r){throw new Error('Please override "onResize" function')},show:function(r){throw new Error('Please override "show" function')},hasInterface:function(){return!0}});var GA=Ai.View.extend({savePagesInMemory:!0,currentSection:null,createdPages:{},elementsMap:{},initialize(r){this.options=r},setMap(r){this.elementsMap=r,this.detachAll()},detachAll(){lt.each(this.elementsMap,function(r,e,t){r.element.removeClass("section_hidden"),r.element.detach()},this)},onResize(r){this.currentSection&&this.currentSection.onResize(r)},show(r){var e=r;this.currentViewId!==e&&(this.newViewId=e,this.currentSection!=null?(this.currentSection.once("hideComplete",this.onSectionHideComplete,this),this.currentSection.hide()):this.onSectionHideComplete())},onSectionHideComplete(){if(this.currentSection){this.currentSection.destroy();var r=this.elementsMap[this.currentViewId];r.element.detach()}var e=this.elementsMap[this.newViewId],t=e.className;if(t){this.currentViewId=this.newViewId,this.newViewId=null;var n=this.createdPages[this.currentViewId],i=this.elementsMap[this.currentViewId],a=i.element,o=i.parent;n&&this.savePagesInMemory?this.currentSection=n:(this.currentSection=new t({el:a}),this.createdPages[this.currentViewId]=this.currentSection),o.append(a),this.currentSection.onResize(),this.currentSection.render(),this.currentSection.show()}else throw new Error("View class not found for: "+this.currentViewId)}});lt.extend(Jf.prototype,GA.prototype);lf.setRoutes([new uy(["","home"],gt.PAGES.HOME)]);var Zf={};Zf[gt.PAGES.LOADER]={className:Tx,nodeSelector:".js-loader"};Zf[gt.PAGES.HOME]={className:HA,nodeSelector:".js-home"};const WA=$t.extend({transitioner:null,$rootNode:null,$window:null,initialize(){lt.bindAll(this,"onResize"),this.$window=Wn(window)},start(){this.$rootNode=Wn("#rootNode"),this.transitioner=new VA({el:this.$rootNode,viewMap:Zf,transition:new Jf}),this.addEvents()},addEvents(){this.$window.on("resize",this.onResize)},onResize(r){this.transitioner&&this.transitioner.onResize(r)}}),jA={start(){Yt.start("main")}},qA=new WA;qA.start();jA.start();lf.start()});export default XA();
